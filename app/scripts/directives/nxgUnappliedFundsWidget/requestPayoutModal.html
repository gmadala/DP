<h3 class="modal-header">Request Unapplied Funds Payout</h3>

<div class="modal-body">
    <div class="alert alert-error" ng-show="!!submitError">
        {{ submitError }}
    </div>
    <form name="form" class="form-horizontal" novalidate>
        <div class="control-group">
            <label class="control-label">Unapplied Funds</label>
            <div class="controls">{{ funds.balance | currency }}</div>
        </div>
        <div class="control-group">
            <label class="control-label">Total Available</label>
            <div class="controls">{{ funds.available | currency }}</div>
        </div>

        <div class="control-group">
            <label class="control-label" for="payoutAmt">Payout Request Amount</label>
            <div class="controls" ng-class="{invalid: v.payoutAmt.$invalid}">
                <span>$</span>
                <input type="text"
                       id="payoutAmt"
                       name="payoutAmt"
                       placeholder="0.00"
                       ng-model="selections.amount"
                       nxg-min="0.01"
                       nxg-max="funds.available"
                       ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*(\.[0-9]{2})?$/"
                       required
                       autofocus="autofocus"/>
                <p class="text-error" ng-show="v.payoutAmt.$error.required">
                    Please enter a payout amount.
                </p>
                <p class="text-error" ng-show="v.payoutAmt.$error.pattern">
                    Please enter payout amount as a number.
                </p>
                <p class="text-error" ng-show="v.payoutAmt.$error.nxgMin || v.payoutAmt.$error.nxgMax">
                    Payout amount must be $0.01 to {{ funds.available | currency }}
                </p>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="payoutBankAcct">Bank Account for Payout</label>
            <div class="controls" ng-class="{invalid: v.payoutBankAcct.$invalid}">
                <select id="payoutBankAcct" name="payoutBankAcct" ng-model="selections.accountId" required>
                    <option ng-repeat="(accountId, name) in accounts" value="{{ accountId }}">{{ name }}</option>
                </select>
                <p class="text-error" ng-show="v.payoutBankAcct.$error.required">
                    Please select a bank account for payout.
                </p>
            </div>
        </div>
        <div>
            <button class="btn btn-small left-align"
                    ng-class="{'btn-primary': form.$valid}"
                    type="submit"
                    ng-disabled="submitInProgress"
                    ng-click="submit()">
                Request Payout
            </button>
            <!-- not in wireframes, but user needs some way to back out that's more obvious than Esc key -->
            <button class="btn btn-small left-align"
                    type="submit"
                    ng-disabled="submitInProgress"
                    ng-click="cancel()">
                Cancel
            </button>
            <span class="loading" ng-show="submitInProgress"></span>
        </div>
    </form>
</div>

