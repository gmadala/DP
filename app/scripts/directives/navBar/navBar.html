<header class="app-header" ng-class="{ login: !navState.current.showNavBar }">
  <div class="container-fluid">
    <div class="header">
      <a ng-href="{{user.homeLink()}}" class="span3 ng-binding" nxg-track="{{metric.CLICK_NEXTGEAR_LOGO}}">
        <div class="nxg-logo"></div>
      </a>

      <div class="span6" ng-show="navState.current.showNavBar">
        <ul class="nav-secondary" ng-show="user.isDealer()">
          <li ng-repeat="link in user.navLinks().secondary">
            <a ng-href="{{link.href}}" nxg-track="{{link.metric}}" class="navLink" ng-class="{ active: isActive(link.activeWhen) }">{{link.name}}</a>
          </li>
          <li>
            <a nxg-chat-with-us nxg-track="{{metric.CLICK_CHAT_NOW_LINK}}">Chat Now</a>
          </li>
          <li class="cart">
            <a href="javascript:void()" ng-click="onCartClicked">
              {{ getQueueCount() }}
              <span nxg-icon="icon-cart" class="icon-small"></span>
            </a>
          </li>
        </ul>
      </div>

      <div class="span3" ng-show="navState.current.showNavBar">
        <div class="nxg-dropdown">
          <a href="javascript:void(0)" class="dropdown-toggle block">
            <p>{{ user.info().BusinessName }}</p>
            <p ng-show="user.isDealer()">dealer # {{ user.info().BusinessNumber }}</p>

            <div class="dropdown-menu">
              <ul class="unstyled">
                <li>
                  <a href="#/act/settings" ng-show="!user.isDealer()" nxg-track="{{metric.CLICK_SETTINGS_LINK}}">Settings</a>
                  <a href="#/profile_settings" ng-show="user.isDealer()"  nxg-track="{{metric.CLICK_PROFILE_SETTINGS_LINK}}">Profile Settings</a>
                </li>
                <li>
                  <a ng-href="#/account_management" ng-show="user.isDealer()" nxg-track="{{metric.CLICK_ACCOUNT_MANAGEMENT_LINK}}">Account Management</a>
                </li>
                <li>
                  <button class="btn" ng-click="user.logout()" nxg-track="{{metric.}}" nxg-track="{{metric.CLICK_LOGOUT_LINK}}">Sign Out</button>
                </li>
              </ul>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="nav-bkgd" ng-show="navState.current.showNavBar">
    <div class="container-fluid">
      <div class="header">
        <ul class="nav-primary">
          <li ng-repeat="link in user.navLinks().primary">
            <a ng-href="{{link.href}}" nxg-track="{{link.metric}}" class="navLink" ng-class="{ active: isActive(link.activeWhen) }">{{link.name}}</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
