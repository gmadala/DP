!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _angularDirectives=__webpack_require__(23),_translations=(_interopRequireDefault(_angularDirectives),__webpack_require__(39));_interopRequireDefault(_translations)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(53)},function(module,exports,__webpack_require__){"use strict";function isString(val){return"string"==typeof val||"[object String]"===Object.prototype.toString.call(val)}function isFunction(val){return"function"==typeof val||"[object Function]"===Object.prototype.toString.call(val)}function isPlainObject(val){return null!==val&&"[object Object]"===Object.prototype.toString.call(val)}function isSymbol(key){return isString(key)&&":"===key[0]}function hasOwnProp(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function getEntry(translations,keys){return keys.reduce(function(result,key){return isPlainObject(result)&&hasOwnProp(result,key)?result[key]:null},translations)}function Counterpart(){this._registry={locale:"en",interpolate:!0,fallbackLocale:null,scope:null,translations:{},interpolations:{},normalizedKeys:{},separator:".",keepTrailingDot:!1,keyTransformer:function(key){return key}},this.registerTranslations("en",__webpack_require__(40)),this.setMaxListeners(0)}function translate(){return instance.translate.apply(instance,arguments)}var extend=__webpack_require__(44),isArray=__webpack_require__(22).isArray,isDate=__webpack_require__(22).isDate,sprintf=__webpack_require__(64).sprintf,events=__webpack_require__(43),except=__webpack_require__(16),strftime=__webpack_require__(41),translationScope="counterpart";extend(Counterpart.prototype,events.EventEmitter.prototype),Counterpart.prototype.getLocale=function(){return this._registry.locale},Counterpart.prototype.setLocale=function(value){var previous=this._registry.locale;return previous!=value&&(this._registry.locale=value,this.emit("localechange",value,previous)),previous},Counterpart.prototype.getFallbackLocale=function(){return this._registry.fallbackLocale},Counterpart.prototype.setFallbackLocale=function(value){var previous=this._registry.fallbackLocale;return this._registry.fallbackLocale=value,previous},Counterpart.prototype.getAvailableLocales=function(){return this._registry.availableLocales||Object.keys(this._registry.translations)},Counterpart.prototype.setAvailableLocales=function(value){var previous=this.getAvailableLocales();return this._registry.availableLocales=value,previous},Counterpart.prototype.getSeparator=function(){return this._registry.separator},Counterpart.prototype.setSeparator=function(value){var previous=this._registry.separator;return this._registry.separator=value,previous},Counterpart.prototype.setInterpolate=function(value){var previous=this._registry.interpolate;return this._registry.interpolate=value,previous},Counterpart.prototype.getInterpolate=function(){return this._registry.interpolate},Counterpart.prototype.setKeyTransformer=function(value){var previous=this._registry.keyTransformer;return this._registry.keyTransformer=value,previous},Counterpart.prototype.getKeyTransformer=function(){return this._registry.keyTransformer},Counterpart.prototype.registerTranslations=function(locale,data){var translations={};return translations[locale]=data,extend(!0,this._registry.translations,translations),translations},Counterpart.prototype.registerInterpolations=function(data){return extend(!0,this._registry.interpolations,data)},Counterpart.prototype.onLocaleChange=Counterpart.prototype.addLocaleChangeListener=function(callback){this.addListener("localechange",callback)},Counterpart.prototype.offLocaleChange=Counterpart.prototype.removeLocaleChangeListener=function(callback){this.removeListener("localechange",callback)},Counterpart.prototype.onTranslationNotFound=Counterpart.prototype.addTranslationNotFoundListener=function(callback){this.addListener("translationnotfound",callback)},Counterpart.prototype.offTranslationNotFound=Counterpart.prototype.removeTranslationNotFoundListener=function(callback){this.removeListener("translationnotfound",callback)},Counterpart.prototype.translate=function(key,options){if(!isArray(key)&&!isString(key)||!key.length)throw new Error("invalid argument: key");isSymbol(key)&&(key=key.substr(1)),key=this._registry.keyTransformer(key,options),options=extend(!0,{},options);var locale=options.locale||this._registry.locale;delete options.locale;var scope=options.scope||this._registry.scope;delete options.scope;var separator=options.separator||this._registry.separator;delete options.separator;var fallbackLocale=options.fallbackLocale||this._registry.fallbackLocale;delete options.fallbackLocale;var keys=this._normalizeKeys(locale,scope,key,separator),entry=getEntry(this._registry.translations,keys);if(null===entry&&options.fallback&&(this.emit("translationnotfound",locale,key,options.fallback),entry=this._fallback(locale,scope,key,options.fallback,options)),null===entry&&fallbackLocale&&locale!==fallbackLocale){var fallbackKeys=this._normalizeKeys(fallbackLocale,scope,key,separator);entry=getEntry(this._registry.translations,fallbackKeys),entry&&(locale=fallbackLocale)}return null===entry&&(entry="missing translation: "+keys.join(separator)),entry=this._pluralize(locale,entry,options.count),this._registry.interpolate!==!1&&options.interpolate!==!1&&(entry=this._interpolate(entry,options)),entry},Counterpart.prototype.localize=function(object,options){if(!isDate(object))throw new Error("invalid argument: object must be a date");options=extend(!0,{},options);var locale=options.locale||this._registry.locale,scope=options.scope||translationScope,type=options.type||"datetime",format=options.format||"default";return options={locale:locale,scope:scope,interpolate:!1},format=this.translate(["formats",type,format],extend(!0,{},options)),strftime(object,format,this.translate("names",options))},Counterpart.prototype._pluralize=function(locale,entry,count){if("object"!=typeof entry||null===entry||"number"!=typeof count)return entry;var pluralizeFunc=this.translate("pluralize",{locale:locale,scope:translationScope});return"[object Function]"!==Object.prototype.toString.call(pluralizeFunc)?pluralizeFunc:pluralizeFunc(entry,count)},Counterpart.prototype.withLocale=function(locale,callback,context){var previous=this._registry.locale;this._registry.locale=locale;var result=callback.call(context);return this._registry.locale=previous,result},Counterpart.prototype.withScope=function(scope,callback,context){var previous=this._registry.scope;this._registry.scope=scope;var result=callback.call(context);return this._registry.scope=previous,result},Counterpart.prototype.withSeparator=function(separator,callback,context){var previous=this.setSeparator(separator),result=callback.call(context);return this.setSeparator(previous),result},Counterpart.prototype._normalizeKeys=function(locale,scope,key,separator){var keys=[];return keys=keys.concat(this._normalizeKey(locale,separator)),keys=keys.concat(this._normalizeKey(scope,separator)),keys=keys.concat(this._normalizeKey(key,separator))},Counterpart.prototype._normalizeKey=function(key,separator){return this._registry.normalizedKeys[separator]=this._registry.normalizedKeys[separator]||{},this._registry.normalizedKeys[separator][key]=this._registry.normalizedKeys[separator][key]||function(key){if(isArray(key)){var normalizedKeyArray=key.map(function(k){return this._normalizeKey(k,separator)}.bind(this));return[].concat.apply([],normalizedKeyArray)}if("undefined"==typeof key||null===key)return[];for(var keys=key.split(separator),i=keys.length-1;i>=0;i--)""===keys[i]&&(keys.splice(i,1),this._registry.keepTrailingDot===!0&&i==keys.length&&(keys[keys.length-1]+=""+separator));return keys}.bind(this)(key),this._registry.normalizedKeys[separator][key]},Counterpart.prototype._interpolate=function(entry,values){return"string"!=typeof entry?entry:sprintf(entry,extend({},this._registry.interpolations,values))},Counterpart.prototype._resolve=function(locale,scope,object,subject,options){if(options=options||{},options.resolve===!1)return subject;var result;if(isSymbol(subject))result=this.translate(subject,extend({},options,{locale:locale,scope:scope}));else if(isFunction(subject)){var dateOrTime;options.object?(dateOrTime=options.object,delete options.object):dateOrTime=object,result=this._resolve(locale,scope,object,subject(dateOrTime,options))}else result=subject;return/^missing translation:/.test(result)?null:result},Counterpart.prototype._fallback=function(locale,scope,object,subject,options){if(options=except(options,"fallback"),isArray(subject)){for(var i=0,ii=subject.length;i<ii;i++){var result=this._resolve(locale,scope,object,subject[i],options);if(result)return result}return null}return this._resolve(locale,scope,object,subject,options)};var instance=new Counterpart;extend(translate,instance,{Instance:Counterpart,Translator:Counterpart}),module.exports=translate},function(module,exports,__webpack_require__){"use strict";function withTranslations(DecoratedComponent,translations){if(!translations)return function(decoratedComponent){return withTranslations(decoratedComponent,DecoratedComponent)};var displayName=DecoratedComponent.displayName||DecoratedComponent.name||"Component";for(var locale in translations){var localeTranslations=translations[locale],scopedTranslations={};scopedTranslations[displayName]=localeTranslations,translator.registerTranslations(locale,scopedTranslations)}return React.createClass({displayName:displayName+"WithTranslations",childContextTypes:{scope:keyType},getChildContext:function(){return{scope:displayName}},render:function(){return React.createElement(DecoratedComponent,this.props)}})}var React=__webpack_require__(1),Interpolate=__webpack_require__(49),translator=__webpack_require__(2),extend=__webpack_require__(7),PropTypes=React.PropTypes,translatorType=PropTypes.shape({getLocale:PropTypes.func,onLocaleChange:PropTypes.func,offLocaleChange:PropTypes.func,translate:PropTypes.func}),keyType=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),Translate=React.createClass({displayName:"Translate",contextTypes:{translator:translatorType,scope:keyType},propTypes:{locale:PropTypes.string,count:PropTypes.number,content:keyType,scope:keyType,attributes:PropTypes.object,"with":PropTypes.object},statics:{textContentComponents:["title","option","textarea"]},getDefaultProps:function(){return{component:"span"}},getInitialState:function(){return{locale:this.getTranslator().getLocale()}},getTranslator:function(){return this.context.translator||translator},componentDidMount:function(){this.props.locale||this.getTranslator().onLocaleChange(this.localeChanged)},componentWillUnmount:function(){this.props.locale||this.getTranslator().offLocaleChange(this.localeChanged)},localeChanged:function(newLocale){this.setState({locale:newLocale})},render:function(){var attributeKey,props=extend({},this.props),translator=this.getTranslator(),textContent=Translate.textContentComponents.indexOf(props.component)>-1,interpolate=textContent||props.unsafe===!0,interpolations=props["with"],attributeTranslationOptions=extend({locale:this.state.locale,scope:this.context.scope},props,interpolations,{interpolate:!0}),contentTranslationOptions=extend({},attributeTranslationOptions,{interpolate:interpolate});if(delete props.locale,delete props.scope,delete props.count,delete props["with"],props.attributes){for(var name in props.attributes)attributeKey=props.attributes[name],attributeKey&&(props[name]=translator.translate(attributeKey,attributeTranslationOptions));delete props.attributes}if(props.content){var translation=translator.translate(props.content,contentTranslationOptions),interpolateProps=extend({},props,{"with":interpolations});return delete interpolateProps.content,delete interpolateProps.children,React.createElement(Interpolate,interpolateProps,translation)}var component=props.component;return delete props.component,delete props.unsafe,React.createElement(component,props)}});module.exports=Translate,module.exports.translate=function(key,options){return React.createElement(Translate,extend({},options,{content:key}))},module.exports.translatorType=translatorType,module.exports.getLocale=translator.getLocale.bind(translator),module.exports.setLocale=translator.setLocale.bind(translator),module.exports.onLocaleChange=translator.onLocaleChange.bind(translator),module.exports.offLocaleChange=translator.offLocaleChange.bind(translator),module.exports.registerTranslations=translator.registerTranslations.bind(translator),module.exports.withTranslations=withTranslations},function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(11),warning=emptyFunction;module.exports=warning},function(module,exports,__webpack_require__){"use strict";function hasValidRef(config){return void 0!==config.ref}function hasValidKey(config){return void 0!==config.key}var _assign=__webpack_require__(7),ReactCurrentOwner=__webpack_require__(18),hasOwnProperty=(__webpack_require__(4),__webpack_require__(20),Object.prototype.hasOwnProperty),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};return element};ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null,self=null,source=null;if(null!=config){hasValidRef(config)&&(ref=config.ref),hasValidKey(config)&&(key=""+config.key),self=void 0===config.__self?null:config.__self,source=void 0===config.__source?null:config.__source;for(propName in config)hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)void 0===props[propName]&&(props[propName]=defaultProps[propName])}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement},ReactElement.cloneElement=function(element,config,children){var propName,props=_assign({},element.props),key=element.key,ref=element.ref,self=element._self,source=element._source,owner=element._owner;if(null!=config){hasValidRef(config)&&(ref=config.ref,owner=ReactCurrentOwner.current),hasValidKey(config)&&(key=""+config.key);var defaultProps;element.type&&element.type.defaultProps&&(defaultProps=element.type.defaultProps);for(propName in config)hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(void 0===config[propName]&&void 0!==defaultProps?props[propName]=defaultProps[propName]:props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)},ReactElement.isValidElement=function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE},ReactElement.REACT_ELEMENT_TYPE=REACT_ELEMENT_TYPE,module.exports=ReactElement},function(module,exports,__webpack_require__){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}module.exports=invariant},function(module,exports){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if("0123456789"!==order2.join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(e){return!1}}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var metric={LOGIN_SUCCESSFUL:"Login Successful",SECURITY_QUESTIONS_COMPLETED:"Security Questions Completed",ATTEMPT_PASSWORD_RECOVERY:"Attempt to Recover Password",ATTEMPT_PASSWORD_RECOVERY_QUESTIONS:"Attempt to Answer Password Recovery Questions",ATTEMPT_USERNAME_RECOVERY:"Attempt to Recover Username",PASSWORD_RECOVERY_SUCCESS:"Submitted Password Recovery Successfully",USERNAME_RECOVERY_SUCCESS:"Submitted Username Recovery Successfully",DEALER_SUCCESSFUL_FLOORING_REQUEST_SUBMITTED:"Dealer - Successful Flooring Request Submitted",FLOORPLAN_REQUEST_RESULT:"Floorplan Request Result",CLICK_CHAT_NOW_LINK:"Click Chat Now Link",DEALER_REPORTS_EXPORT_PAYMENTS_SUMMARY_BUTTON:"Dealer Reports - Export Payment Summary",DEALER_PAYMENT_SUBMITTED:"Dealer - Payment Submitted",DEALER_CHECKOUT_RECEIPT_GENERATED:"Dealer - Checkout Receipt Generated",DEALER_RECEIPT_PAGE_RECEIPT_GENERATED:"Dealer - Receipt Page Receipt Generated",DEALER_VIEW_VEHICLE_DETAILS:"Dealer - View Vehicle Details",DEALER_VEHICLE_DETAILS_ATTACHED_DOCUMENTS:"Dealer - Vehicle Details Attached Documents",VIEW_PROMO_PAGE:"View Promo Page",CLICK_PROMO_DETAILS:"Click Promo Details",DEALER_TITLE_RELEASE_REQUEST:"Dealer - Requested Title Release",DEALER_REPORTS_VEHICLE_HISTORY_DETAIL:"Dealer Reports - Vehicle History Detail",DEALER_REPORTS_RECEIVABLE_DETAIL:"Dealer Reports - Receivable Detail",DEALER_REPORTS_UPCOMING_CURTAILMENT_PAYOFF_QUOTE:"Dealer Reports - Upcoming Curtailment/Payoff Quote",DEALER_REPORTS_EXPORTABLE_INVENTORY:"Dealer Reports - Exportable Inventory",DEALER_REPORT_DEALER_STATEMENT:"Dealer Reports - Dealer Statement",DEALER_REPORTS_DISBURSEMENT_DETAIL:"Dealer Report - Disbursement Detail",DEALER_REPORTS_PAID_OFF_SUMMARY:"Dealer Report - Paid Off Summary",VIEW_VIEW_ANALYTICS_PAGE:"View View Analytics Page",VIEW_RESOURCES_PAGE:"View Resources Page",DEALER_RESOURCES_RATES_AND_FEES_PAGE:"Dealer Resources - Rates and Fees",DEALER_RESOURCES_WELCOME_PACKET_PAGE:"Dealer Resources - Welcome Packet",DEALER_RESOURCES_DEALER_FUNDING_CHECKLIST_PAGE:"Dealer Resources - Dealer Funding Checklist",DEALER_RESOURCES_INSTRUCTIONS_FOR_BUYERS_PAGE:"Dealer Resources - Instructions For Buyers",DEALER_RESOURCES_WELCOME_LETTER_PAGE:"Dealer Resources - Welcome Letter",DEALER_RESOURCES_GUIDELINES_PAGE:"Dealer Resources - Guidelines",DEALER_RESOURCES_INFORMATION_SHEET_PAGE:"Dealer Resources - Information Sheet",DEALER_RESOURCES_CLAIM_FORM_PAGE:"Dealer Resources - Claim Form",DEALER_RESOURCES_TITLE_MANAGEMENT_FAQ:"Dealer Resources - Title Management FAQ",DEALER_RESOURCES_IOS_APP:"Dealer Resources - iOS Apps",DEALER_RESOURCES_ANDROID_APP:"Dealer Resources - Android Apps",VIEW_REQUEST_CREDIT_INCREASE_PAGE:"View Request Credit Increase",DEALER_TEMP_CREDIT_INCREASE_REQUEST_SUBMITTED_PAGE:"Dealer - Temp Credit Increase Request Submitted",DEALER_PERMANENT_CREDIT_INCREASE_REQUEST_SUBMITTED:"Dealer - Permanent Credit Increase Request Submitted",VIEW_AUCTION_REPORTS_PAGE:"View Auction Reports",AUCTION_RESOURCES_WELCOME_PACKET_PAGE:"Auction Resources - Welcome Packet",AUCTION_RESOURCES_INSTRUCTIONS_FOR_SELLERS_PAGE:"Auction Resources - Instructions for Sellers",AUCTION_REPORTS_CREDIT_AVAILABILITY_QUERY_HISTORY_PAGE:"Auction Reports - Credit Availability Query History",AUCTION_REPORTS_DISBURSEMENT_DETAIL_PAGE:"Auction Reports - Disbursement Detail",MANUFACTURER_REPORTS_AGING_REPORT_PAGE:"Manufacturer Reports - Aging Report",AUCTION_SUCCESSFUL_FLOORING_REQUEST_SUBMITTED_PAGE:"Auction - Successful Flooring Request Submitted",AUCTION_INDIVIDUAL_DEALER_LOC_QUERY_PAGE:"Auction - Individual Dealer LOC Query",CLICK_VALUE_LOOKUP_VIN_WITH_ZIP_LOOKUP_BUTTON:"Click Value Lookup VIN With Zip Lookup Button",CLICK_VALUE_LOOKUP_VIN_WITHOUT_ZIP_LOOKUP_BUTTON:"Click Value Lookup VIN Without Zip Lookup Button",CLICK_VALUE_LOOKUP_NGC_LOOKUP_BUTTON:"Click Value Lookup NGC Lookup Button",CLICK_VALUE_LOOKUP_MMR_LOOKUP_BUTTON:"Click Value Lookup MMR Lookup Button",CLICK_VALUE_LOOKUP_KBB_LOOKUP_BUTTON:"Click Value Lookup KBB Lookup Button",DEALER_VIEW_ACCOUNT_MANAGEMENT_PAGE:"Dealer - View Account Management Page",DEALER_ADD_BANK_ACCOUNT:"Dealer - Add Bank Account",DEALER_EDIT_BANK_ACCOUNT:"Dealer - Edit Bank Account",AUTOTRADER_INDEX:"Autotrader Partner Link",DEALSHIELD_INDEX:"Dealshield Partner Link",GOAUTOEXCHANGE_INDEX:"Go Auto Exchange Partner Link",GOFINANCIAL_INDEX:"Go Financial Partner Link",HAYSTACK_INDEX:"Haystack Digital Marketing Partner Link",HOMENET_INDEX:"HomeNet Automotive Partner Link",KELLYBLUEBOOK_INDEX:"Kelly Blue Book Partner Link",MANHEIM_INDEX:"Manheim Partner Link",READYAUTO_INDEX:"Ready Auto Transport Partner Link",VAUTO_INDEX:"vAuto Partner Link",VINSOLUTIONS_INDEX:"Vin Solutions Partner Link",WAYBILL_PRINTED:"FedEx Waybill Generated"};exports["default"]=metric},function(module,exports){"use strict";function reactProdInvariant(code){for(var argCount=arguments.length-1,message="Minified React error #"+code+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+code,argIdx=0;argIdx<argCount;argIdx++)message+="&args[]="+encodeURIComponent(arguments[argIdx+1]);message+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var error=new Error(message);throw error.name="Invariant Violation",error.framesToPop=1,error}module.exports=reactProdInvariant},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_Link=__webpack_require__(35),_Link2=_interopRequireDefault(_Link),ListItemLink=function(props){return _react2["default"].createElement("li",null,_react2["default"].createElement(_Link2["default"],props))};exports["default"]=ListItemLink},function(module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},function(module,exports,__webpack_require__){"use strict";var emptyObject={};module.exports=emptyObject},function(module,exports,__webpack_require__){"use strict";function ReactComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}var _prodInvariant=__webpack_require__(9),ReactNoopUpdateQueue=__webpack_require__(14),emptyObject=(__webpack_require__(20),__webpack_require__(12));__webpack_require__(6),__webpack_require__(4);ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(partialState,callback){"object"!=typeof partialState&&"function"!=typeof partialState&&null!=partialState?_prodInvariant("85"):void 0,this.updater.enqueueSetState(this,partialState),callback&&this.updater.enqueueCallback(this,callback,"setState")},ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this),callback&&this.updater.enqueueCallback(this,callback,"forceUpdate")};module.exports=ReactComponent},function(module,exports,__webpack_require__){"use strict";function warnNoop(publicInstance,callerName){}var ReactNoopUpdateQueue=(__webpack_require__(4),{isMounted:function(publicInstance){return!1},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnNoop(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnNoop(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnNoop(publicInstance,"setState")}});module.exports=ReactNoopUpdateQueue},function(module,exports){"use strict";module.exports={__locale:"en",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviated_days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviated_months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:"AM",pm:"PM"}},function(module,exports,__webpack_require__){"use strict";function except(object){var result={},keys=concat.apply(ap,slice.call(arguments,1));for(var key in object)indexOf(keys,key)===-1&&(result[key]=object[key]);return result}var ap=Array.prototype,concat=ap.concat,slice=ap.slice,indexOf=__webpack_require__(46);module.exports=except},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(6),keyMirror=function(obj){var key,ret={};obj instanceof Object&&!Array.isArray(obj)?void 0:invariant(!1);for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=key);return ret};module.exports=keyMirror},function(module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},function(module,exports,__webpack_require__){"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames},function(module,exports,__webpack_require__){"use strict";var canDefineProperty=!1;module.exports=canDefineProperty},function(module,exports){"use strict";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn},function(module,exports,__webpack_require__){(function(global,process){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),
str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron={NODE_ENV:"production"}.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=__webpack_require__(66);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__(65),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(exports,function(){return this}(),__webpack_require__(48))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _Date=__webpack_require__(34),_Date2=_interopRequireDefault(_Date),_Resources=__webpack_require__(29),_Resources2=_interopRequireDefault(_Resources),_AuctionResources=__webpack_require__(25),_AuctionResources2=_interopRequireDefault(_AuctionResources);angular.module("nextgearWebApp").directive("dateComponent",function(reactDirective){return reactDirective(_Date2["default"])}),angular.module("nextgearWebApp").directive("resourcesComponent",function(reactDirective){return reactDirective(_Resources2["default"])}),angular.module("nextgearWebApp").directive("auctionResourcesComponent",function(reactDirective){return reactDirective(_AuctionResources2["default"])})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_ListItemLink=__webpack_require__(10),_ListItemLink2=_interopRequireDefault(_ListItemLink),AuctionResourceDocs=function(_Component){function AuctionResourceDocs(){return _classCallCheck(this,AuctionResourceDocs),_possibleConstructorReturn(this,(AuctionResourceDocs.__proto__||Object.getPrototypeOf(AuctionResourceDocs)).apply(this,arguments))}return _inherits(AuctionResourceDocs,_Component),_createClass(AuctionResourceDocs,[{key:"render",value:function(){var _this2=this,docLinks=this.props.docs.map(function(item){return _react2["default"].createElement(_ListItemLink2["default"],{name:item.name,url:item.url,metric:item.metric,key:item.id,handleClick:_this2.props.handleClick})});return _react2["default"].createElement("div",{className:"panel panel-default"},_react2["default"].createElement("h2",{className:"well-title"},_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.resourceDocs.ngcDocuments"})),_react2["default"].createElement("div",{className:"panel-body"},_react2["default"].createElement("ul",{className:"text-list zeroLeftPadding"},docLinks)))}}]),AuctionResourceDocs}(_react.Component);AuctionResourceDocs.propTypes={docs:_react.PropTypes.array,handleClick:_react.PropTypes.func},exports["default"]=AuctionResourceDocs},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_AuctionResourceDocs=__webpack_require__(24),_AuctionResourceDocs2=_interopRequireDefault(_AuctionResourceDocs),_auctionDocsList=__webpack_require__(30),_auctionDocsList2=_interopRequireDefault(_auctionDocsList),_metric=__webpack_require__(8),_metric2=_interopRequireDefault(_metric),AuctionResources=function(_Component){function AuctionResources(props){_classCallCheck(this,AuctionResources);var _this=_possibleConstructorReturn(this,(AuctionResources.__proto__||Object.getPrototypeOf(AuctionResources)).call(this,props));return _counterpart2["default"].setLocale(props.props.language.substring(0,2)),_this.state={language:_counterpart2["default"].getLocale(),docs:props.props.isUnitedStates?_auctionDocsList2["default"]:[],isUnitedStates:props.props.isUnitedStates||!1},_this.handleClick=_this.handleClick.bind(_this),_this.handleClick(_metric2["default"].VIEW_RESOURCES_PAGE),_this}return _inherits(AuctionResources,_Component),_createClass(AuctionResources,[{key:"handleClick",value:function(metricKey){var _this2=this;metricKey&&this.props.props.kissMetricInfo.getKissMetricInfo().then(function(info){_this2.props.props.segmentio.track(metricKey,info)})}},{key:"render",value:function(){return _react2["default"].createElement("div",{className:"container"},_react2["default"].createElement("div",{className:"row"},_react2["default"].createElement("div",{className:"col-md-12"},_react2["default"].createElement(_AuctionResourceDocs2["default"],{docs:this.state.docs,handleClick:this.handleClick}))))}}]),AuctionResources}(_react.Component);AuctionResources.propTypes={props:_react.PropTypes.object},exports["default"]=AuctionResources},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_ListItemLink=__webpack_require__(10),_ListItemLink2=_interopRequireDefault(_ListItemLink),MobileApps=function(props){var appLinks=props.apps.map(function(app){return _react2["default"].createElement(_ListItemLink2["default"],{name:app.name,url:app.url,metric:app.metric,key:app.id,handleClick:props.handleClick})});return _react2["default"].createElement("div",{className:"col-md-4"},_react2["default"].createElement("div",{className:"panel panel-default"},_react2["default"].createElement("h2",{className:"well-title"},_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.mobileApps.title"})),_react2["default"].createElement("div",{className:"panel-body"},_react2["default"].createElement("p",null,_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.mobileApps.subText"})),_react2["default"].createElement("ul",{className:"text-list zeroLeftPadding"},appLinks))))};MobileApps.propTypes={apps:_react.PropTypes.array,handleClick:_react.PropTypes.func},exports["default"]=MobileApps},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_ListItemLink=__webpack_require__(10),_ListItemLink2=_interopRequireDefault(_ListItemLink),ResourceDocs=function(_Component){function ResourceDocs(){return _classCallCheck(this,ResourceDocs),_possibleConstructorReturn(this,(ResourceDocs.__proto__||Object.getPrototypeOf(ResourceDocs)).apply(this,arguments))}return _inherits(ResourceDocs,_Component),_createClass(ResourceDocs,[{key:"render",value:function(){var _this2=this,docLinks=this.props.docs.map(function(item){return _react2["default"].createElement(_ListItemLink2["default"],{name:item.name,url:item.url,metric:item.metric,key:item.id,handleClick:_this2.props.handleClick})}),collateralDocLinks=this.props.collateralDocs.map(function(item){return _react2["default"].createElement(_ListItemLink2["default"],{name:item.name,url:item.url,metric:item.metric,key:item.id,handleClick:_this2.props.handleClick})}),language=_counterpart2["default"].getLocale(),classes="en"!==language?"col-md-5":"col-md-4";return _react2["default"].createElement("div",{className:classes},_react2["default"].createElement("div",{className:"panel panel-default"},_react2["default"].createElement("h2",{className:"well-title"},_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.resourceDocs.documents"})),_react2["default"].createElement("div",{className:"panel-body"},_react2["default"].createElement("ul",{className:"text-list zeroLeftPadding"},docLinks),_react2["default"].createElement("p",null,_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.resourceDocs.collateralProgram"})),_react2["default"].createElement("ul",{className:"text-list zeroLeftPadding"},collateralDocLinks))))}}]),ResourceDocs}(_react.Component);ResourceDocs.propTypes={docs:_react.PropTypes.array,collateralDocs:_react.PropTypes.array,handleClick:_react.PropTypes.func},exports["default"]=ResourceDocs},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),ResourceVideos=function(_Component){function ResourceVideos(){return _classCallCheck(this,ResourceVideos),_possibleConstructorReturn(this,(ResourceVideos.__proto__||Object.getPrototypeOf(ResourceVideos)).apply(this,arguments))}return _inherits(ResourceVideos,_Component),_createClass(ResourceVideos,[{key:"render",value:function(){return _react2["default"].createElement("div",{className:"col-md-4"},_react2["default"].createElement("section",{className:"panel panel-default"},_react2["default"].createElement("h2",{className:"well-title"},_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.resourceVideos.loggingIn"})),_react2["default"].createElement("div",{className:"nxg-video"},_react2["default"].createElement("iframe",{src:"https://www.youtube.com/embed/3rqHdE_YgbI",frameBorder:"0",allowFullScreen:"true",width:"854",height:"480"}))),_react2["default"].createElement("section",{className:"panel panel-default"},_react2["default"].createElement("h2",{className:"well-title"},_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.resourceVideos.howToUse"})),_react2["default"].createElement("div",{className:"nxg-video"},_react2["default"].createElement("iframe",{src:"https://www.youtube.com/embed/hahLB6Uu7zU",frameBorder:"0",allowFullScreen:"true",width:"854",height:"480"}))))}}]),ResourceVideos}(_react.Component);exports["default"]=ResourceVideos},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_ResourceVideos=__webpack_require__(28),_ResourceVideos2=_interopRequireDefault(_ResourceVideos),_ResourceDocs=__webpack_require__(27),_ResourceDocs2=_interopRequireDefault(_ResourceDocs),_MobileApps=__webpack_require__(26),_MobileApps2=_interopRequireDefault(_MobileApps),_collateralDocsList=__webpack_require__(31),_collateralDocsList2=_interopRequireDefault(_collateralDocsList),_mobileAppsList=__webpack_require__(33),_mobileAppsList2=_interopRequireDefault(_mobileAppsList),_docsList=__webpack_require__(32),_docsList2=_interopRequireDefault(_docsList),Resources=function(_Component){function Resources(props){_classCallCheck(this,Resources);var _this=_possibleConstructorReturn(this,(Resources.__proto__||Object.getPrototypeOf(Resources)).call(this,props));return _docsList2["default"][0].url=props.props.api.contentLink("/dealer/feeschedule/FeeSchedule",{}),_counterpart2["default"].setLocale(props.props.language.substring(0,2)),_this.state={language:_counterpart2["default"].getLocale(),docs:props.props.isUnitedStates?_docsList2["default"]:[],collateralDocs:_collateralDocsList2["default"],mobileApps:_mobileAppsList2["default"],isUnitedStates:props.props.isUnitedStates||!1},_this.handleClick=_this.handleClick.bind(_this),_this}return _inherits(Resources,_Component),_createClass(Resources,[{key:"handleClick",value:function(metric){var _this2=this;metric&&this.props.props.kissMetricInfo.getKissMetricInfo().then(function(info){_this2.props.props.segmentio.track(metric,info)})}},{key:"render",value:function(){return _react2["default"].createElement("div",{className:"container"},_react2["default"].createElement("div",{className:"row"},"en"===this.state.language?_react2["default"].createElement(_ResourceVideos2["default"],{handleClick:this.handleClick}):null,_react2["default"].createElement(_ResourceDocs2["default"],{docs:this.state.docs,collateralDocs:this.state.collateralDocs,handleClick:this.handleClick}),_react2["default"].createElement(_MobileApps2["default"],{apps:this.state.mobileApps,handleClick:this.handleClick})))}}]),Resources}(_react.Component);Resources.propTypes={props:_react.PropTypes.object},exports["default"]=Resources},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_metric=__webpack_require__(8),_metric2=_interopRequireDefault(_metric),languagePrefix=_counterpart2["default"].getLocale();languagePrefix.indexOf("_CA")!==-1&&(languagePrefix="CAE%20"),module.exports=[{id:0,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.auctionDocsList.sellerGuide"}),metric:_metric2["default"].AUCTION_RESOURCES_INSTRUCTIONS_FOR_SELLERS_PAGE,url:"documents/"+languagePrefix+"NextGear%20Capital%20Website%20Guide%20-%20Sellers.pdf"}]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_metric=__webpack_require__(8),_metric2=_interopRequireDefault(_metric),languagePrefix=_counterpart2["default"].getLocale();languagePrefix.indexOf("_CA")!==-1&&(languagePrefix="CAE%20"),module.exports=[{id:1,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.collateralDocsList.welcomeLetter"}),url:"documents/"+languagePrefix+"Welcome%20Letter.pdf",metric:_metric2["default"].DEALER_RESOURCES_WELCOME_LETTER_PAGE},{id:2,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.collateralDocsList.guidelines"}),url:"documents/"+languagePrefix+"Insurance%20Guidelines.pdf",metric:_metric2["default"].DEALER_RESOURCES_GUIDELINES_PAGE},{id:3,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.collateralDocsList.informationSheet"}),url:"documents/"+languagePrefix+"Information%20Sheet.pdf",metric:_metric2["default"].DEALER_RESOURCES_INFORMATION_SHEET_PAGE},{id:4,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.collateralDocsList.claimForm"}),url:"documents/"+languagePrefix+"Claim%20Form.pdf",metric:_metric2["default"].DEALER_RESOURCES_CLAIM_FORM_PAGE}]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_metric=__webpack_require__(8),_metric2=_interopRequireDefault(_metric),languagePrefix=_counterpart2["default"].getLocale();languagePrefix.indexOf("_CA")!==-1&&(languagePrefix="CAE%20"),module.exports=[{id:0,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.docsList.rates"}),metric:_metric2["default"].DEALER_RESOURCES_RATES_AND_FEES_PAGE,url:""},{id:1,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.docsList.welcomePacket"}),url:"http://www.nextgearcapital.com/welcome-packet/",metric:_metric2["default"].DEALER_RESOURCES_WELCOME_PACKET_PAGE},{id:2,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.docsList.dealerChecklist"}),url:"documents/"+languagePrefix+"Dealer%20Funding%20Checklist.pdf",metric:_metric2["default"].DEALER_RESOURCES_DEALER_FUNDING_CHECKLIST_PAGE},{id:3,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.docsList.faq"}),url:"documents/"+languagePrefix+"Records%20Title%20FAQ.pdf",metric:_metric2["default"].DEALER_RESOURCES_TITLE_MANAGEMENT_FAQ},{id:4,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.docsList.instructions"}),url:"documents/"+languagePrefix+"NextGear%20Capital%20Website%20Guide%20-%20Buyers.pdf",metric:_metric2["default"].DEALER_RESOURCES_INSTRUCTIONS_FOR_BUYERS_PAGE}]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactTranslateComponent=__webpack_require__(3),_reactTranslateComponent2=_interopRequireDefault(_reactTranslateComponent),_metric=__webpack_require__(8),_metric2=_interopRequireDefault(_metric);module.exports=[{id:1,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.mobileAppsList.mobileIos"}),url:"https://itunes.apple.com/us/app/nextgear-capital/id748609885?mt=8",metric:_metric2["default"].DEALER_RESOURCES_IOS_APP},{id:2,name:_react2["default"].createElement(_reactTranslateComponent2["default"],{content:"resources.mobileAppsList.mobileAndroid"}),url:"https://play.google.com/store/apps/details?id=com.nextgear.mobile",metric:_metric2["default"].DEALER_RESOURCES_ANDROID_APP}]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),Date=function(_Component){function Date(){return _classCallCheck(this,Date),_possibleConstructorReturn(this,(Date.__proto__||Object.getPrototypeOf(Date)).apply(this,arguments))}return _inherits(Date,_Component),_createClass(Date,[{key:"render",value:function(){return _react2["default"].createElement("div",null,_react2["default"].createElement("label",{htmlFor:this.props.labelFor},this.props.label),_react2["default"].createElement("input",{className:"ng-react-date-picker {this.state.invalid}",min:this.props.minDate,max:this.props.maxDate,placeholder:"mm/dd/yyyy",value:this.state.date,onChange:this.handleChange}),_react2["default"].createElement("button",{tabIndex:"-1",type:"button",className:"btn-unstyle disbursement-btn-calendar",onClick:this.handleClick},_react2["default"].createElement("span",{className:"svg-icon icon-calendar"},_react2["default"].createElement("svg",{width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet"},_react2["default"].createElement("use",{xlinkHref:"#icon-calendar"})))))}}]),Date}(_react.Component);Date.propTypes={minDate:_react.PropTypes.string,maxDate:_react.PropTypes.string,labelFor:_react.PropTypes.string,
label:_react.PropTypes.string},exports["default"]=Date},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),Link=function(_Component){function Link(props){_classCallCheck(this,Link);var _this=_possibleConstructorReturn(this,(Link.__proto__||Object.getPrototypeOf(Link)).call(this,props));return _this.handleClick=_this.handleClick.bind(_this),_this}return _inherits(Link,_Component),_createClass(Link,[{key:"handleClick",value:function(){this.props.handleClick(this.props.metric)}},{key:"render",value:function(){return _react2["default"].createElement("a",{href:this.props.url,target:"_blank",rel:"noopener noreferrer",onClick:this.handleClick},this.props.name)}}]),Link}(_react.Component);Link.propTypes={name:_react.PropTypes.element,url:_react.PropTypes.string,metric:_react.PropTypes.string,handleClick:_react.PropTypes.func},exports["default"]=Link},function(module,exports){"use strict";module.exports={resources:{resourceVideos:{loggingIn:"Logging In to myNextGear",howToUse:"How to Use myNextGear"},resourceDocs:{collateralProgram:"Collateral Protection Program",documents:"Documents",ngcDocuments:"Nextgear Capital Documents"},mobileApps:{title:"Mobile Apps",subText:"Manage your business with NextGear Capital on the go."},collateralDocsList:{welcomeLetter:"Welcome Letter",guidelines:"Guidelines",informationSheet:"Information Sheet",claimForm:"Claim Form"},mobileAppsList:{mobileIos:"Download myNextGear mobile iOS",mobileAndroid:"Download myNextGear mobile Android"},docsList:{welcomePacket:"Welcome Packet",dealerChecklist:"Dealer Funding Checklist",faq:"Title Management Frequently Asked Questions",instructions:"Instructions for Buyers",rates:"Rates and Fees"},auctionDocsList:{sellerGuide:"Instructions for Sellers"},test:{test:"test",test2:"test2"}}}},function(module,exports){"use strict";module.exports={resources:{resourceVideos:{loggingIn:"Inicio de sesión en myNextGear",howToUse:"Cómo utilizar myNextGear"},resourceDocs:{collateralProgram:"Cómo utilizar myNextGear",documents:"Documentos",ngcDocuments:"Documentos de NextGear Capital"},mobileApps:{title:"Aplicaciones móviles",subText:"Maneje su negocio con NextGear Capital en cualquier parte"},collateralDocsList:{welcomeLetter:"Carta de Bienvenida",guidelines:"Lineamientos",informationSheet:"Hoja de información",claimForm:"Formulario de reclamación"},mobileAppsList:{mobileIos:"Descargue myNextGear mobile para iOS",mobileAndroid:"Descargue myNextGear mobile para Android"},docsList:{welcomePacket:"Paquete de Bienvenida",dealerChecklist:"Lista de Verificación de Financiamiento a Proveedores",faq:"Lista de Verificación de Financiamiento a Proveedores",instructions:"Instrucciones para compradores",rates:"Tasas y cargos"},auctionDocsList:{sellerGuide:"Instrucciones para vendedores"},test:{test:"test_es",test2:"test2"}}}},function(module,exports){"use strict";module.exports={resources:{resourceVideos:{loggingIn:"Ouvrir une session dans NextGear",howToUse:"Comment utiliser myNextGear"},resourceDocs:{collateralProgram:"Programme de protection collatérale",documents:"test_fr",ngcDocuments:"Documents NextGear Capital"},mobileApps:{title:"Applications mobiles",subText:"Gérez votre entreprise avec NextGear Capital pendant vos déplacements."},collateralDocsList:{welcomeLetter:"Lettre de bienvenue",guidelines:"Directives",informationSheet:"Feuillet d'information",claimForm:"Furmulaire de réclamation"},mobileAppsList:{mobileIos:"Télécharger MyNextGear Mobile sur iOS",mobileAndroid:"Télécharger MyNextGear Mobile sur Android"},docsList:{welcomePacket:"Trousse de bienvenue",dealerChecklist:"Liste de vérification de financement du concessionnaire",faq:"Foire aux questions sur la gestion des titres",instructions:"Instructions pour les acheteurs",rates:"Instructions pour les acheteurs"},auctionDocsList:{sellerGuide:"Instructions pour les vendeurs"},test:{test:"test_fr",test2:"test2"}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _counterpart=__webpack_require__(2),_counterpart2=_interopRequireDefault(_counterpart),_en=__webpack_require__(36),_en2=_interopRequireDefault(_en),_es=__webpack_require__(37),_es2=_interopRequireDefault(_es),_fr=__webpack_require__(38),_fr2=_interopRequireDefault(_fr);_counterpart2["default"].registerTranslations("en",_en2["default"]),_counterpart2["default"].registerTranslations("es",_es2["default"]),_counterpart2["default"].registerTranslations("fr",_fr2["default"])},function(module,exports,__webpack_require__){"use strict";module.exports={counterpart:{names:__webpack_require__(15),pluralize:__webpack_require__(47),formats:{date:{"default":"%a, %e %b %Y","long":"%A, %B %o, %Y","short":"%b %e"},time:{"default":"%H:%M","long":"%H:%M:%S %z","short":"%H:%M"},datetime:{"default":"%a, %e %b %Y %H:%M","long":"%A, %B %o, %Y %H:%M:%S %z","short":"%e %b %H:%M"}}}}},function(module,exports,__webpack_require__){"use strict";function strftime(date,format,names){var timestamp=date.getTime();return names=names||dateNames,format.replace(/%([-_0]?.)/g,function(_,c){var padding=null;if(2==c.length){switch(c[0]){case"-":padding="";break;case"_":padding=" ";break;case"0":padding="0";break;default:return _}c=c[1]}switch(c){case"A":return names.days[date.getDay()];case"a":return names.abbreviated_days[date.getDay()];case"B":return names.months[date.getMonth()];case"b":return names.abbreviated_months[date.getMonth()];case"C":return pad(Math.floor(date.getFullYear()/100),padding);case"D":return strftime(date,"%m/%d/%y");case"d":return pad(date.getDate(),padding);case"e":return date.getDate();case"F":return strftime(date,"%Y-%m-%d");case"H":return pad(date.getHours(),padding);case"h":return names.abbreviated_months[date.getMonth()];case"I":return pad(hours12(date),padding);case"j":return pad(Math.ceil((date.getTime()-new Date(date.getFullYear(),0,1).getTime())/864e5),3);case"k":return pad(date.getHours(),null===padding?" ":padding);case"L":return pad(Math.floor(timestamp%1e3),3);case"l":return pad(hours12(date),null===padding?" ":padding);case"M":return pad(date.getMinutes(),padding);case"m":return pad(date.getMonth()+1,padding);case"n":return"\n";case"o":return String(date.getDate())+ordinal(date.getDate());case"P":return date.getHours()<12?names.am.toLowerCase():names.pm.toLowerCase();case"p":return date.getHours()<12?names.am.toUpperCase():names.pm.toUpperCase();case"R":return strftime(date,"%H:%M");case"r":return strftime(date,"%I:%M:%S %p");case"S":return pad(date.getSeconds(),padding);case"s":return Math.floor(timestamp/1e3);case"T":return strftime(date,"%H:%M:%S");case"t":return"\t";case"U":return pad(weekNumber(date,"sunday"),padding);case"u":return 0===date.getDay()?7:date.getDay();case"v":return strftime(date,"%e-%b-%Y");case"W":return pad(weekNumber(date,"monday"),padding);case"w":return date.getDay();case"Y":return date.getFullYear();case"y":var y=String(date.getFullYear());return y.slice(y.length-2);case"Z":var tzString=date.toString().match(/\((\w+)\)/);return tzString&&tzString[1]||"";case"z":var off=date.getTimezoneOffset();return(off>0?"-":"+")+pad(Math.round(Math.abs(off/60)),2)+":"+pad(off%60,2);default:return c}})}function pad(n,padding,length){"number"==typeof padding&&(length=padding,padding="0"),null===padding&&(padding="0"),length=length||2;var s=String(n);if(padding)for(;s.length<length;)s=padding+s;return s}function hours12(date){var hour=date.getHours();return 0===hour?hour=12:hour>12&&(hour-=12),hour}function ordinal(n){var i=n%10,ii=n%100;if(ii>=11&&ii<=13||0===i||i>=4)return"th";switch(i){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function weekNumber(date,firstWeekday){firstWeekday=firstWeekday||"sunday";var wday=date.getDay();"monday"==firstWeekday&&(0===wday?wday=6:wday--);var firstDayOfYear=new Date(date.getFullYear(),0,1),yday=(date-firstDayOfYear)/864e5,weekNum=(yday+7-wday)/7;return Math.floor(weekNum)}var dateNames=__webpack_require__(42);module.exports=strftime},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(15)},function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},function(module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(arr){return"function"==typeof Array.isArray?Array.isArray(arr):"[object Array]"===toStr.call(arr)},isPlainObject=function(obj){if(!obj||"[object Object]"!==toStr.call(obj))return!1;var hasOwnConstructor=hasOwn.call(obj,"constructor"),hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf)return!1;var key;for(key in obj);return"undefined"==typeof key||hasOwn.call(obj,key)};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone,target=arguments[0],i=1,length=arguments.length,deep=!1;for("boolean"==typeof target?(deep=target,target=arguments[1]||{},i=2):("object"!=typeof target&&"function"!=typeof target||null==target)&&(target={});i<length;++i)if(options=arguments[i],null!=options)for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&isArray(src)?src:[]):clone=src&&isPlainObject(src)?src:{},target[name]=extend(deep,clone,copy)):"undefined"!=typeof copy&&(target[name]=copy));return target}},function(module,exports){"use strict";var keyOf=function(oneKeyObj){var key;for(key in oneKeyObj)if(oneKeyObj.hasOwnProperty(key))return key;return null};module.exports=keyOf},function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},function(module,exports){"use strict";module.exports=function(entry,count){var key;return 0===count&&"zero"in entry&&(key="zero"),key=key||(1===count?"one":"other"),entry[key]}},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";function isString(object){return"[object String]"===Object.prototype.toString.call(object)}var React=__webpack_require__(1),invariant=__webpack_require__(50),except=__webpack_require__(16),extend=__webpack_require__(7),REGEXP=/\%\((.+?)\)s/,OMITTED_PROPS=["children","format","component","unsafe","with"],Interpolate=React.createClass({displayName:"Interpolate",getDefaultProps:function(){return{component:"span"}},render:function(){var format=this.props.children,parent=this.props.component,unsafe=this.props.unsafe===!0,interpolations=extend({},this.props,this.props["with"]),props=except(this.props,OMITTED_PROPS),matches=[],children=[];if(isString(format)||(format=this.props.format),invariant(isString(format),"Interpolate expects either a format string as only child or a `format` prop with a string value"),unsafe){var content=format.split(REGEXP).reduce(function(memo,match,index){var html;if(index%2===0?html=match:(html=interpolations[match],matches.push(match)),React.isValidElement(html))throw new Error("cannot interpolate a React component into unsafe text");return memo+=html},"");props.dangerouslySetInnerHTML={__html:content}}else format.split(REGEXP).reduce(function(memo,match,index){var child;if(index%2===0){if(0===match.length)return memo;child=match}else child=interpolations[match],matches.push(match);return memo.push(child),memo},children);return props=except(props,matches),React.createElement.apply(this,[parent,props].concat(children))}});module.exports=Interpolate},function(module,exports,__webpack_require__){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}module.exports=invariant},function(module,exports){"use strict";function escape(key){var escapeRegex=/[=:]/g,escaperLookup={"=":"=0",":":"=2"},escapedString=(""+key).replace(escapeRegex,function(match){return escaperLookup[match]});return"$"+escapedString}function unescape(key){var unescapeRegex=/(=0|=2)/g,unescaperLookup={"=0":"=","=2":":"},keySubstring="."===key[0]&&"$"===key[1]?key.substring(2):key.substring(1);return(""+keySubstring).replace(unescapeRegex,function(match){return unescaperLookup[match]})}var KeyEscapeUtils={escape:escape,unescape:unescape};module.exports=KeyEscapeUtils},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(9),oneArgumentPooler=(__webpack_require__(6),function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,copyFieldsFrom),instance}return new Klass(copyFieldsFrom)}),twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2),instance}return new Klass(a1,a2)},threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3),instance}return new Klass(a1,a2,a3)},fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4),instance}return new Klass(a1,a2,a3,a4)},fiveArgumentPooler=function(a1,a2,a3,a4,a5){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4,a5),instance}return new Klass(a1,a2,a3,a4,a5)},standardReleaser=function(instance){var Klass=this;instance instanceof Klass?void 0:_prodInvariant("25"),instance.destructor(),Klass.instancePool.length<Klass.poolSize&&Klass.instancePool.push(instance)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;return NewKlass.instancePool=[],NewKlass.getPooled=pooler||DEFAULT_POOLER,NewKlass.poolSize||(NewKlass.poolSize=DEFAULT_POOL_SIZE),NewKlass.release=standardReleaser,NewKlass},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass},function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(7),ReactChildren=__webpack_require__(54),ReactComponent=__webpack_require__(13),ReactPureComponent=__webpack_require__(60),ReactClass=__webpack_require__(55),ReactDOMFactories=__webpack_require__(56),ReactElement=__webpack_require__(5),ReactPropTypes=__webpack_require__(58),ReactVersion=__webpack_require__(61),onlyChild=__webpack_require__(62),createElement=(__webpack_require__(4),ReactElement.createElement),createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,__spread=_assign,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,PureComponent:ReactPureComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(mixin){return mixin},DOM:ReactDOMFactories,version:ReactVersion,__spread:__spread};module.exports=React},function(module,exports,__webpack_require__){"use strict";function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"$&/")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction,this.context=forEachContext,this.count=0}function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(null==children)return children;var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext),ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult,this.keyPrefix=keyPrefix,this.func=mapFunction,this.context=mapContext,this.count=0}function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context,mappedChild=func.call(context,child,bookKeeping.count++);Array.isArray(mappedChild)?mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument):null!=mappedChild&&(ReactElement.isValidElement(mappedChild)&&(mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(!mappedChild.key||child&&child.key===mappedChild.key?"":escapeUserProvidedKey(mappedChild.key)+"/")+childKey)),result.push(mappedChild))}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";null!=prefix&&(escapedPrefix=escapeUserProvidedKey(prefix)+"/");var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext),MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(null==children)return children;var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,func,context),result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument),result}var PooledClass=__webpack_require__(52),ReactElement=__webpack_require__(5),emptyFunction=__webpack_require__(11),traverseAllChildren=__webpack_require__(63),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/+/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},function(module,exports,__webpack_require__){"use strict";function validateMethodOverride(isAlreadyDefined,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;ReactClassMixin.hasOwnProperty(name)&&(specPolicy!==SpecPolicy.OVERRIDE_BASE?_prodInvariant("73",name):void 0),isAlreadyDefined&&(specPolicy!==SpecPolicy.DEFINE_MANY&&specPolicy!==SpecPolicy.DEFINE_MANY_MERGED?_prodInvariant("74",name):void 0)}function mixSpecIntoComponent(Constructor,spec){if(spec){"function"==typeof spec?_prodInvariant("75"):void 0,ReactElement.isValidElement(spec)?_prodInvariant("76"):void 0;var proto=Constructor.prototype,autoBindPairs=proto.__reactAutoBindPairs;spec.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins);for(var name in spec)if(spec.hasOwnProperty(name)&&name!==MIXINS_KEY){var property=spec[name],isAlreadyDefined=proto.hasOwnProperty(name);if(validateMethodOverride(isAlreadyDefined,name),RESERVED_SPEC_KEYS.hasOwnProperty(name))RESERVED_SPEC_KEYS[name](Constructor,property);else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name),isFunction="function"==typeof property,shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==!1;if(shouldAutoBind)autoBindPairs.push(name,property),proto[name]=property;else if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];!isReactClassMethod||specPolicy!==SpecPolicy.DEFINE_MANY_MERGED&&specPolicy!==SpecPolicy.DEFINE_MANY?_prodInvariant("77",specPolicy,name):void 0,specPolicy===SpecPolicy.DEFINE_MANY_MERGED?proto[name]=createMergedResultFunction(proto[name],property):specPolicy===SpecPolicy.DEFINE_MANY&&(proto[name]=createChainedFunction(proto[name],property))}else proto[name]=property}}}else;}function mixStaticSpecIntoComponent(Constructor,statics){if(statics)for(var name in statics){var property=statics[name];if(statics.hasOwnProperty(name)){var isReserved=name in RESERVED_SPEC_KEYS;isReserved?_prodInvariant("78",name):void 0;var isInherited=name in Constructor;isInherited?_prodInvariant("79",name):void 0,Constructor[name]=property}}}function mergeIntoWithNoDuplicateKeys(one,two){one&&two&&"object"==typeof one&&"object"==typeof two?void 0:_prodInvariant("80");for(var key in two)two.hasOwnProperty(key)&&(void 0!==one[key]?_prodInvariant("81",key):void 0,one[key]=two[key]);return one}function createMergedResultFunction(one,two){return function(){var a=one.apply(this,arguments),b=two.apply(this,arguments);if(null==a)return b;if(null==b)return a;var c={};return mergeIntoWithNoDuplicateKeys(c,a),mergeIntoWithNoDuplicateKeys(c,b),c}}function createChainedFunction(one,two){return function(){one.apply(this,arguments),two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);return boundMethod}function bindAutoBindMethods(component){for(var pairs=component.__reactAutoBindPairs,i=0;i<pairs.length;i+=2){var autoBindKey=pairs[i],method=pairs[i+1];component[autoBindKey]=bindAutoBindMethod(component,method)}}var _prodInvariant=__webpack_require__(9),_assign=__webpack_require__(7),ReactComponent=__webpack_require__(13),ReactElement=__webpack_require__(5),ReactNoopUpdateQueue=(__webpack_require__(57),__webpack_require__(19),__webpack_require__(14)),emptyObject=__webpack_require__(12),keyMirror=(__webpack_require__(6),__webpack_require__(17)),keyOf=__webpack_require__(45),MIXINS_KEY=(__webpack_require__(4),keyOf({mixins:null})),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins)for(var i=0;i<mixins.length;i++)mixSpecIntoComponent(Constructor,mixins[i])},childContextTypes:function(Constructor,childContextTypes){
Constructor.childContextTypes=_assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){Constructor.contextTypes=_assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){Constructor.getDefaultProps?Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps):Constructor.getDefaultProps=getDefaultProps},propTypes:function(Constructor,propTypes){Constructor.propTypes=_assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}},ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState),callback&&this.updater.enqueueCallback(this,callback,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},ReactClassComponent=function(){};_assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(spec){var Constructor=function(props,context,updater){this.__reactAutoBindPairs.length&&bindAutoBindMethods(this),this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue,this.state=null;var initialState=this.getInitialState?this.getInitialState():null;"object"!=typeof initialState||Array.isArray(initialState)?_prodInvariant("82",Constructor.displayName||"ReactCompositeComponent"):void 0,this.state=initialState};Constructor.prototype=new ReactClassComponent,Constructor.prototype.constructor=Constructor,Constructor.prototype.__reactAutoBindPairs=[],injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor)),mixSpecIntoComponent(Constructor,spec),Constructor.getDefaultProps&&(Constructor.defaultProps=Constructor.getDefaultProps()),Constructor.prototype.render?void 0:_prodInvariant("83");for(var methodName in ReactClassInterface)Constructor.prototype[methodName]||(Constructor.prototype[methodName]=null);return Constructor},injection:{injectMixin:function(mixin){injectedMixins.push(mixin)}}};module.exports=ReactClass},function(module,exports,__webpack_require__){"use strict";var ReactElement=__webpack_require__(5),createDOMFactory=ReactElement.createFactory,ReactDOMFactories={a:createDOMFactory("a"),abbr:createDOMFactory("abbr"),address:createDOMFactory("address"),area:createDOMFactory("area"),article:createDOMFactory("article"),aside:createDOMFactory("aside"),audio:createDOMFactory("audio"),b:createDOMFactory("b"),base:createDOMFactory("base"),bdi:createDOMFactory("bdi"),bdo:createDOMFactory("bdo"),big:createDOMFactory("big"),blockquote:createDOMFactory("blockquote"),body:createDOMFactory("body"),br:createDOMFactory("br"),button:createDOMFactory("button"),canvas:createDOMFactory("canvas"),caption:createDOMFactory("caption"),cite:createDOMFactory("cite"),code:createDOMFactory("code"),col:createDOMFactory("col"),colgroup:createDOMFactory("colgroup"),data:createDOMFactory("data"),datalist:createDOMFactory("datalist"),dd:createDOMFactory("dd"),del:createDOMFactory("del"),details:createDOMFactory("details"),dfn:createDOMFactory("dfn"),dialog:createDOMFactory("dialog"),div:createDOMFactory("div"),dl:createDOMFactory("dl"),dt:createDOMFactory("dt"),em:createDOMFactory("em"),embed:createDOMFactory("embed"),fieldset:createDOMFactory("fieldset"),figcaption:createDOMFactory("figcaption"),figure:createDOMFactory("figure"),footer:createDOMFactory("footer"),form:createDOMFactory("form"),h1:createDOMFactory("h1"),h2:createDOMFactory("h2"),h3:createDOMFactory("h3"),h4:createDOMFactory("h4"),h5:createDOMFactory("h5"),h6:createDOMFactory("h6"),head:createDOMFactory("head"),header:createDOMFactory("header"),hgroup:createDOMFactory("hgroup"),hr:createDOMFactory("hr"),html:createDOMFactory("html"),i:createDOMFactory("i"),iframe:createDOMFactory("iframe"),img:createDOMFactory("img"),input:createDOMFactory("input"),ins:createDOMFactory("ins"),kbd:createDOMFactory("kbd"),keygen:createDOMFactory("keygen"),label:createDOMFactory("label"),legend:createDOMFactory("legend"),li:createDOMFactory("li"),link:createDOMFactory("link"),main:createDOMFactory("main"),map:createDOMFactory("map"),mark:createDOMFactory("mark"),menu:createDOMFactory("menu"),menuitem:createDOMFactory("menuitem"),meta:createDOMFactory("meta"),meter:createDOMFactory("meter"),nav:createDOMFactory("nav"),noscript:createDOMFactory("noscript"),object:createDOMFactory("object"),ol:createDOMFactory("ol"),optgroup:createDOMFactory("optgroup"),option:createDOMFactory("option"),output:createDOMFactory("output"),p:createDOMFactory("p"),param:createDOMFactory("param"),picture:createDOMFactory("picture"),pre:createDOMFactory("pre"),progress:createDOMFactory("progress"),q:createDOMFactory("q"),rp:createDOMFactory("rp"),rt:createDOMFactory("rt"),ruby:createDOMFactory("ruby"),s:createDOMFactory("s"),samp:createDOMFactory("samp"),script:createDOMFactory("script"),section:createDOMFactory("section"),select:createDOMFactory("select"),small:createDOMFactory("small"),source:createDOMFactory("source"),span:createDOMFactory("span"),strong:createDOMFactory("strong"),style:createDOMFactory("style"),sub:createDOMFactory("sub"),summary:createDOMFactory("summary"),sup:createDOMFactory("sup"),table:createDOMFactory("table"),tbody:createDOMFactory("tbody"),td:createDOMFactory("td"),textarea:createDOMFactory("textarea"),tfoot:createDOMFactory("tfoot"),th:createDOMFactory("th"),thead:createDOMFactory("thead"),time:createDOMFactory("time"),title:createDOMFactory("title"),tr:createDOMFactory("tr"),track:createDOMFactory("track"),u:createDOMFactory("u"),ul:createDOMFactory("ul"),"var":createDOMFactory("var"),video:createDOMFactory("video"),wbr:createDOMFactory("wbr"),circle:createDOMFactory("circle"),clipPath:createDOMFactory("clipPath"),defs:createDOMFactory("defs"),ellipse:createDOMFactory("ellipse"),g:createDOMFactory("g"),image:createDOMFactory("image"),line:createDOMFactory("line"),linearGradient:createDOMFactory("linearGradient"),mask:createDOMFactory("mask"),path:createDOMFactory("path"),pattern:createDOMFactory("pattern"),polygon:createDOMFactory("polygon"),polyline:createDOMFactory("polyline"),radialGradient:createDOMFactory("radialGradient"),rect:createDOMFactory("rect"),stop:createDOMFactory("stop"),svg:createDOMFactory("svg"),text:createDOMFactory("text"),tspan:createDOMFactory("tspan")};module.exports=ReactDOMFactories},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(17),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations},function(module,exports,__webpack_require__){"use strict";function is(x,y){return x===y?0!==x||1/x===1/y:x!==x&&y!==y}function PropTypeError(message){this.message=message,this.stack=""}function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS,propFullName=propFullName||propName;if(null==props[propName]){var locationName=ReactPropTypeLocationNames[location];return isRequired?new PropTypeError("Required "+locationName+" `"+propFullName+"` was not specified in "+("`"+componentName+"`.")):null}return validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName],propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location],preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.");var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactElement.isValidElement(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location],expectedClassName=expectedClass.name||ANONYMOUS,actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(is(propValue,expectedValues[i]))return null;var locationName=ReactPropTypeLocationNames[location],valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return Array.isArray(expectedValues)?createChainableTypeChecker(validate):emptyFunction.thatReturnsNull}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.");var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(null==checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret))return null}var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return Array.isArray(arrayOfTypeCheckers)?createChainableTypeChecker(validate):emptyFunction.thatReturnsNull}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||ReactElement.isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function isSymbol(propType,propValue){return"symbol"===propType||("Symbol"===propValue["@@toStringTag"]||"function"==typeof Symbol&&propValue instanceof Symbol)}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":isSymbol(propType,propValue)?"symbol":propType}function getPreciseType(propValue){var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:ANONYMOUS}var ReactElement=__webpack_require__(5),ReactPropTypeLocationNames=__webpack_require__(19),ReactPropTypesSecret=__webpack_require__(59),emptyFunction=__webpack_require__(11),getIteratorFn=__webpack_require__(21),ANONYMOUS=(__webpack_require__(4),"<<anonymous>>"),ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};PropTypeError.prototype=Error.prototype,module.exports=ReactPropTypes},function(module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},function(module,exports,__webpack_require__){"use strict";function ReactPureComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}function ComponentDummy(){}var _assign=__webpack_require__(7),ReactComponent=__webpack_require__(13),ReactNoopUpdateQueue=__webpack_require__(14),emptyObject=__webpack_require__(12);ComponentDummy.prototype=ReactComponent.prototype,ReactPureComponent.prototype=new ComponentDummy,ReactPureComponent.prototype.constructor=ReactPureComponent,_assign(ReactPureComponent.prototype,ReactComponent.prototype),ReactPureComponent.prototype.isPureReactComponent=!0,module.exports=ReactPureComponent},function(module,exports){"use strict";module.exports="15.3.2"},function(module,exports,__webpack_require__){"use strict";function onlyChild(children){return ReactElement.isValidElement(children)?void 0:_prodInvariant("143"),children}var _prodInvariant=__webpack_require__(9),ReactElement=__webpack_require__(5);__webpack_require__(6);module.exports=onlyChild},function(module,exports,__webpack_require__){"use strict";function getComponentKey(component,index){return component&&"object"==typeof component&&null!=component.key?KeyEscapeUtils.escape(component.key):index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if("undefined"!==type&&"boolean"!==type||(children=null),null===children||"string"===type||"number"===type||ReactElement.isValidElement(children))return callback(traverseContext,children,""===nameSoFar?SEPARATOR+getComponentKey(children,0):nameSoFar),1;var child,nextName,subtreeCount=0,nextNamePrefix=""===nameSoFar?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children))for(var i=0;i<children.length;i++)child=children[i],nextName=nextNamePrefix+getComponentKey(child,i),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var step,iterator=iteratorFn.call(children);if(iteratorFn!==children.entries)for(var ii=0;!(step=iterator.next()).done;)child=step.value,nextName=nextNamePrefix+getComponentKey(child,ii++),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else for(;!(step=iterator.next()).done;){var entry=step.value;entry&&(child=entry[1],nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext))}}else if("object"===type){var addendum="",childrenString=String(children);_prodInvariant("31","[object Object]"===childrenString?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum)}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){return null==children?0:traverseAllChildrenImpl(children,"",callback,traverseContext)}var _prodInvariant=__webpack_require__(9),ReactElement=(__webpack_require__(18),__webpack_require__(5)),getIteratorFn=__webpack_require__(21),KeyEscapeUtils=(__webpack_require__(6),__webpack_require__(51)),SEPARATOR=(__webpack_require__(4),"."),SUBSEPARATOR=":";module.exports=traverseAllChildren},function(module,exports,__webpack_require__){!function(window){function sprintf(){var key=arguments[0],cache=sprintf.cache;return cache[key]&&cache.hasOwnProperty(key)||(cache[key]=sprintf.parse(key)),sprintf.format.call(null,cache[key],arguments)}function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){return Array(multiplier+1).join(input)}var re={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};sprintf.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[],is_positive=!0,sign="";for(i=0;i<tree_length;i++)if(node_type=get_type(parse_tree[i]),"string"===node_type)output[output.length]=parse_tree[i];else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw new Error(sprintf("[sprintf] property '%s' does not exist",match[2][k]));arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++];if("function"==get_type(arg)&&(arg=arg()),re.not_string.test(match[8])&&re.not_json.test(match[8])&&"number"!=get_type(arg)&&isNaN(arg))throw new TypeError(sprintf("[sprintf] expecting number but found %s",get_type(arg)));switch(re.number.test(match[8])&&(is_positive=arg>=0),match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":case"i":arg=parseInt(arg,10);break;case"j":arg=JSON.stringify(arg,null,match[6]?parseInt(match[6]):0);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"g":arg=match[7]?parseFloat(arg).toPrecision(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg>>>=0;break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}re.json.test(match[8])?output[output.length]=arg:(!re.number.test(match[8])||is_positive&&!match[3]?sign="":(sign=is_positive?"+":"-",arg=arg.toString().replace(re.sign,"")),pad_character=match[4]?"0"===match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-(sign+arg).length,pad=match[6]&&pad_length>0?str_repeat(pad_character,pad_length):"",output[output.length]=match[5]?sign+arg+pad:"0"===pad_character?sign+pad+arg:pad+sign+arg)}return output.join("")},sprintf.cache={},sprintf.parse=function(fmt){for(var _fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=re.text.exec(_fmt)))parse_tree[parse_tree.length]=match[0];else if(null!==(match=re.modulo.exec(_fmt)))parse_tree[parse_tree.length]="%";else{if(null===(match=re.placeholder.exec(_fmt)))throw new SyntaxError("[sprintf] unexpected placeholder");if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=re.key.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(field_list[field_list.length]=field_match[1];""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=re.key_access.exec(replacement_field)))field_list[field_list.length]=field_match[1];else{if(null===(field_match=re.index_access.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");field_list[field_list.length]=field_match[1]}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");parse_tree[parse_tree.length]=match}_fmt=_fmt.substring(match[0].length)}return parse_tree};var vsprintf=function(fmt,argv,_argv){return _argv=(argv||[]).slice(0),_argv.splice(0,0,fmt),sprintf.apply(null,_argv)};exports.sprintf=sprintf,exports.vsprintf=vsprintf}("undefined"==typeof window?this:window)},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVhY3QtYXBwLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAxMjFlOGFjZTUzMzVhNzJjMTJjYSIsIndlYnBhY2s6Ly8vLi9yZWFjdC9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9yZWFjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvdW50ZXJwYXJ0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL3dhcm5pbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RFbGVtZW50LmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvaW52YXJpYW50LmpzIiwid2VicGFjazovLy8uL34vb2JqZWN0LWFzc2lnbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9zaGFyZWQvbWV0cmljLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL3JlYWN0UHJvZEludmFyaWFudC5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9zaGFyZWQvTGlzdEl0ZW1MaW5rLmpzIiwid2VicGFjazovLy8uL34vZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2VtcHR5T2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlLmpzIiwid2VicGFjazovLy8uL34vZGF0ZS1uYW1lcy9lbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2V4Y2VwdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2tleU1pcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdEN1cnJlbnRPd25lci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9jYW5EZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9nZXRJdGVyYXRvckZuLmpzIiwid2VicGFjazovLy8uL34vdXRpbC91dGlsLmpzIiwid2VicGFjazovLy8uL3JlYWN0L2FuZ3VsYXItZGlyZWN0aXZlcy5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9yZXNvdXJjZXMvQXVjdGlvblJlc291cmNlRG9jcy5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9yZXNvdXJjZXMvQXVjdGlvblJlc291cmNlcy5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9yZXNvdXJjZXMvTW9iaWxlQXBwcy5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9yZXNvdXJjZXMvUmVzb3VyY2VEb2NzLmpzIiwid2VicGFjazovLy8uL3JlYWN0L3Jlc291cmNlcy9SZXNvdXJjZVZpZGVvcy5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9yZXNvdXJjZXMvUmVzb3VyY2VzLmpzIiwid2VicGFjazovLy8uL3JlYWN0L3Jlc291cmNlcy9fYXVjdGlvbkRvY3NMaXN0LmpzIiwid2VicGFjazovLy8uL3JlYWN0L3Jlc291cmNlcy9fY29sbGF0ZXJhbERvY3NMaXN0LmpzIiwid2VicGFjazovLy8uL3JlYWN0L3Jlc291cmNlcy9fZG9jc0xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vcmVhY3QvcmVzb3VyY2VzL19tb2JpbGVBcHBzTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9zaGFyZWQvRGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC9zaGFyZWQvTGluay5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC90cmFuc2xhdGlvbnMvZW4uanMiLCJ3ZWJwYWNrOi8vLy4vcmVhY3QvdHJhbnNsYXRpb25zL2VzLmpzIiwid2VicGFjazovLy8uL3JlYWN0L3RyYW5zbGF0aW9ucy9mci5qcyIsIndlYnBhY2s6Ly8vLi9yZWFjdC90cmFuc2xhdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3VudGVycGFydC9sb2NhbGVzL2VuLmpzIiwid2VicGFjazovLy8uL34vY291bnRlcnBhcnQvc3RyZnRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9kYXRlLW5hbWVzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2V4dGVuZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ZianMvbGliL2tleU9mLmpzIiwid2VicGFjazovLy8uL34vaW5kZXhvZi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3BsdXJhbGl6ZXJzL2VuLmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtaW50ZXJwb2xhdGUtY29tcG9uZW50L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtaW50ZXJwb2xhdGUtY29tcG9uZW50L34vZmJqcy9saWIvaW52YXJpYW50LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL0tleUVzY2FwZVV0aWxzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1Bvb2xlZENsYXNzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0Q2hpbGRyZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvUmVhY3RDbGFzcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdERPTUZhY3Rvcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlTG9jYXRpb25zLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL1JlYWN0UHVyZUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0L2xpYi9SZWFjdFZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC9saWIvb25seUNoaWxkLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QvbGliL3RyYXZlcnNlQWxsQ2hpbGRyZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9zcHJpbnRmLWpzL3NyYy9zcHJpbnRmLmpzIiwid2VicGFjazovLy8uL34vdXRpbC9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9hbmd1bGFyRGlyZWN0aXZlcyIsIl90cmFuc2xhdGlvbnMiLCJpc1N0cmluZyIsInZhbCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiaXNGdW5jdGlvbiIsImlzUGxhaW5PYmplY3QiLCJpc1N5bWJvbCIsImtleSIsImhhc093blByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImdldEVudHJ5IiwidHJhbnNsYXRpb25zIiwia2V5cyIsInJlZHVjZSIsInJlc3VsdCIsIkNvdW50ZXJwYXJ0IiwidGhpcyIsIl9yZWdpc3RyeSIsImxvY2FsZSIsImludGVycG9sYXRlIiwiZmFsbGJhY2tMb2NhbGUiLCJzY29wZSIsImludGVycG9sYXRpb25zIiwibm9ybWFsaXplZEtleXMiLCJzZXBhcmF0b3IiLCJrZWVwVHJhaWxpbmdEb3QiLCJrZXlUcmFuc2Zvcm1lciIsInJlZ2lzdGVyVHJhbnNsYXRpb25zIiwic2V0TWF4TGlzdGVuZXJzIiwidHJhbnNsYXRlIiwiaW5zdGFuY2UiLCJhcHBseSIsImFyZ3VtZW50cyIsImV4dGVuZCIsImlzQXJyYXkiLCJpc0RhdGUiLCJzcHJpbnRmIiwiZXZlbnRzIiwiZXhjZXB0Iiwic3RyZnRpbWUiLCJ0cmFuc2xhdGlvblNjb3BlIiwiRXZlbnRFbWl0dGVyIiwiZ2V0TG9jYWxlIiwic2V0TG9jYWxlIiwidmFsdWUiLCJwcmV2aW91cyIsImVtaXQiLCJnZXRGYWxsYmFja0xvY2FsZSIsInNldEZhbGxiYWNrTG9jYWxlIiwiZ2V0QXZhaWxhYmxlTG9jYWxlcyIsImF2YWlsYWJsZUxvY2FsZXMiLCJzZXRBdmFpbGFibGVMb2NhbGVzIiwiZ2V0U2VwYXJhdG9yIiwic2V0U2VwYXJhdG9yIiwic2V0SW50ZXJwb2xhdGUiLCJnZXRJbnRlcnBvbGF0ZSIsInNldEtleVRyYW5zZm9ybWVyIiwiZ2V0S2V5VHJhbnNmb3JtZXIiLCJkYXRhIiwicmVnaXN0ZXJJbnRlcnBvbGF0aW9ucyIsIm9uTG9jYWxlQ2hhbmdlIiwiYWRkTG9jYWxlQ2hhbmdlTGlzdGVuZXIiLCJjYWxsYmFjayIsImFkZExpc3RlbmVyIiwib2ZmTG9jYWxlQ2hhbmdlIiwicmVtb3ZlTG9jYWxlQ2hhbmdlTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm9uVHJhbnNsYXRpb25Ob3RGb3VuZCIsImFkZFRyYW5zbGF0aW9uTm90Rm91bmRMaXN0ZW5lciIsIm9mZlRyYW5zbGF0aW9uTm90Rm91bmQiLCJyZW1vdmVUcmFuc2xhdGlvbk5vdEZvdW5kTGlzdGVuZXIiLCJvcHRpb25zIiwibGVuZ3RoIiwiRXJyb3IiLCJzdWJzdHIiLCJfbm9ybWFsaXplS2V5cyIsImVudHJ5IiwiZmFsbGJhY2siLCJfZmFsbGJhY2siLCJmYWxsYmFja0tleXMiLCJqb2luIiwiX3BsdXJhbGl6ZSIsImNvdW50IiwiX2ludGVycG9sYXRlIiwibG9jYWxpemUiLCJvYmplY3QiLCJ0eXBlIiwiZm9ybWF0IiwicGx1cmFsaXplRnVuYyIsIndpdGhMb2NhbGUiLCJjb250ZXh0Iiwid2l0aFNjb3BlIiwid2l0aFNlcGFyYXRvciIsImNvbmNhdCIsIl9ub3JtYWxpemVLZXkiLCJub3JtYWxpemVkS2V5QXJyYXkiLCJtYXAiLCJrIiwiYmluZCIsInNwbGl0IiwiaSIsInNwbGljZSIsInZhbHVlcyIsIl9yZXNvbHZlIiwic3ViamVjdCIsInJlc29sdmUiLCJkYXRlT3JUaW1lIiwidGVzdCIsImlpIiwiSW5zdGFuY2UiLCJUcmFuc2xhdG9yIiwid2l0aFRyYW5zbGF0aW9ucyIsIkRlY29yYXRlZENvbXBvbmVudCIsImRlY29yYXRlZENvbXBvbmVudCIsImRpc3BsYXlOYW1lIiwibmFtZSIsImxvY2FsZVRyYW5zbGF0aW9ucyIsInNjb3BlZFRyYW5zbGF0aW9ucyIsInRyYW5zbGF0b3IiLCJSZWFjdCIsImNyZWF0ZUNsYXNzIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJrZXlUeXBlIiwiZ2V0Q2hpbGRDb250ZXh0IiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsInByb3BzIiwiSW50ZXJwb2xhdGUiLCJQcm9wVHlwZXMiLCJ0cmFuc2xhdG9yVHlwZSIsInNoYXBlIiwiZnVuYyIsIm9uZU9mVHlwZSIsInN0cmluZyIsImFycmF5T2YiLCJUcmFuc2xhdGUiLCJjb250ZXh0VHlwZXMiLCJwcm9wVHlwZXMiLCJudW1iZXIiLCJjb250ZW50IiwiYXR0cmlidXRlcyIsIndpdGgiLCJzdGF0aWNzIiwidGV4dENvbnRlbnRDb21wb25lbnRzIiwiZ2V0RGVmYXVsdFByb3BzIiwiY29tcG9uZW50IiwiZ2V0SW5pdGlhbFN0YXRlIiwiZ2V0VHJhbnNsYXRvciIsImNvbXBvbmVudERpZE1vdW50IiwibG9jYWxlQ2hhbmdlZCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwibmV3TG9jYWxlIiwic2V0U3RhdGUiLCJhdHRyaWJ1dGVLZXkiLCJ0ZXh0Q29udGVudCIsImluZGV4T2YiLCJ1bnNhZmUiLCJhdHRyaWJ1dGVUcmFuc2xhdGlvbk9wdGlvbnMiLCJzdGF0ZSIsImNvbnRlbnRUcmFuc2xhdGlvbk9wdGlvbnMiLCJ0cmFuc2xhdGlvbiIsImludGVycG9sYXRlUHJvcHMiLCJjaGlsZHJlbiIsImVtcHR5RnVuY3Rpb24iLCJ3YXJuaW5nIiwiaGFzVmFsaWRSZWYiLCJjb25maWciLCJ1bmRlZmluZWQiLCJyZWYiLCJoYXNWYWxpZEtleSIsIl9hc3NpZ24iLCJSZWFjdEN1cnJlbnRPd25lciIsIlJFQUNUX0VMRU1FTlRfVFlQRSIsIlN5bWJvbCIsIlJFU0VSVkVEX1BST1BTIiwiX19zZWxmIiwiX19zb3VyY2UiLCJSZWFjdEVsZW1lbnQiLCJzZWxmIiwic291cmNlIiwib3duZXIiLCJlbGVtZW50IiwiJCR0eXBlb2YiLCJfb3duZXIiLCJwcm9wTmFtZSIsImNoaWxkcmVuTGVuZ3RoIiwiY2hpbGRBcnJheSIsIkFycmF5IiwiZGVmYXVsdFByb3BzIiwiY3VycmVudCIsImNyZWF0ZUZhY3RvcnkiLCJmYWN0b3J5IiwiY2xvbmVBbmRSZXBsYWNlS2V5Iiwib2xkRWxlbWVudCIsIm5ld0tleSIsIm5ld0VsZW1lbnQiLCJfc2VsZiIsIl9zb3VyY2UiLCJjbG9uZUVsZW1lbnQiLCJpc1ZhbGlkRWxlbWVudCIsImludmFyaWFudCIsImNvbmRpdGlvbiIsImEiLCJiIiwiZCIsImUiLCJmIiwiZXJyb3IiLCJhcmdzIiwiYXJnSW5kZXgiLCJyZXBsYWNlIiwiZnJhbWVzVG9Qb3AiLCJ0b09iamVjdCIsIlR5cGVFcnJvciIsInNob3VsZFVzZU5hdGl2ZSIsImFzc2lnbiIsInRlc3QxIiwiU3RyaW5nIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInRlc3QyIiwiZnJvbUNoYXJDb2RlIiwib3JkZXIyIiwibiIsInRlc3QzIiwiZm9yRWFjaCIsImxldHRlciIsInByb3BJc0VudW1lcmFibGUiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRhcmdldCIsImZyb20iLCJzeW1ib2xzIiwidG8iLCJzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZGVmaW5lUHJvcGVydHkiLCJtZXRyaWMiLCJMT0dJTl9TVUNDRVNTRlVMIiwiU0VDVVJJVFlfUVVFU1RJT05TX0NPTVBMRVRFRCIsIkFUVEVNUFRfUEFTU1dPUkRfUkVDT1ZFUlkiLCJBVFRFTVBUX1BBU1NXT1JEX1JFQ09WRVJZX1FVRVNUSU9OUyIsIkFUVEVNUFRfVVNFUk5BTUVfUkVDT1ZFUlkiLCJQQVNTV09SRF9SRUNPVkVSWV9TVUNDRVNTIiwiVVNFUk5BTUVfUkVDT1ZFUllfU1VDQ0VTUyIsIkRFQUxFUl9TVUNDRVNTRlVMX0ZMT09SSU5HX1JFUVVFU1RfU1VCTUlUVEVEIiwiRkxPT1JQTEFOX1JFUVVFU1RfUkVTVUxUIiwiQ0xJQ0tfQ0hBVF9OT1dfTElOSyIsIkRFQUxFUl9SRVBPUlRTX0VYUE9SVF9QQVlNRU5UU19TVU1NQVJZX0JVVFRPTiIsIkRFQUxFUl9QQVlNRU5UX1NVQk1JVFRFRCIsIkRFQUxFUl9DSEVDS09VVF9SRUNFSVBUX0dFTkVSQVRFRCIsIkRFQUxFUl9SRUNFSVBUX1BBR0VfUkVDRUlQVF9HRU5FUkFURUQiLCJERUFMRVJfVklFV19WRUhJQ0xFX0RFVEFJTFMiLCJERUFMRVJfVkVISUNMRV9ERVRBSUxTX0FUVEFDSEVEX0RPQ1VNRU5UUyIsIlZJRVdfUFJPTU9fUEFHRSIsIkNMSUNLX1BST01PX0RFVEFJTFMiLCJERUFMRVJfVElUTEVfUkVMRUFTRV9SRVFVRVNUIiwiREVBTEVSX1JFUE9SVFNfVkVISUNMRV9ISVNUT1JZX0RFVEFJTCIsIkRFQUxFUl9SRVBPUlRTX1JFQ0VJVkFCTEVfREVUQUlMIiwiREVBTEVSX1JFUE9SVFNfVVBDT01JTkdfQ1VSVEFJTE1FTlRfUEFZT0ZGX1FVT1RFIiwiREVBTEVSX1JFUE9SVFNfRVhQT1JUQUJMRV9JTlZFTlRPUlkiLCJERUFMRVJfUkVQT1JUX0RFQUxFUl9TVEFURU1FTlQiLCJERUFMRVJfUkVQT1JUU19ESVNCVVJTRU1FTlRfREVUQUlMIiwiREVBTEVSX1JFUE9SVFNfUEFJRF9PRkZfU1VNTUFSWSIsIlZJRVdfVklFV19BTkFMWVRJQ1NfUEFHRSIsIlZJRVdfUkVTT1VSQ0VTX1BBR0UiLCJERUFMRVJfUkVTT1VSQ0VTX1JBVEVTX0FORF9GRUVTX1BBR0UiLCJERUFMRVJfUkVTT1VSQ0VTX1dFTENPTUVfUEFDS0VUX1BBR0UiLCJERUFMRVJfUkVTT1VSQ0VTX0RFQUxFUl9GVU5ESU5HX0NIRUNLTElTVF9QQUdFIiwiREVBTEVSX1JFU09VUkNFU19JTlNUUlVDVElPTlNfRk9SX0JVWUVSU19QQUdFIiwiREVBTEVSX1JFU09VUkNFU19XRUxDT01FX0xFVFRFUl9QQUdFIiwiREVBTEVSX1JFU09VUkNFU19HVUlERUxJTkVTX1BBR0UiLCJERUFMRVJfUkVTT1VSQ0VTX0lORk9STUFUSU9OX1NIRUVUX1BBR0UiLCJERUFMRVJfUkVTT1VSQ0VTX0NMQUlNX0ZPUk1fUEFHRSIsIkRFQUxFUl9SRVNPVVJDRVNfVElUTEVfTUFOQUdFTUVOVF9GQVEiLCJERUFMRVJfUkVTT1VSQ0VTX0lPU19BUFAiLCJERUFMRVJfUkVTT1VSQ0VTX0FORFJPSURfQVBQIiwiVklFV19SRVFVRVNUX0NSRURJVF9JTkNSRUFTRV9QQUdFIiwiREVBTEVSX1RFTVBfQ1JFRElUX0lOQ1JFQVNFX1JFUVVFU1RfU1VCTUlUVEVEX1BBR0UiLCJERUFMRVJfUEVSTUFORU5UX0NSRURJVF9JTkNSRUFTRV9SRVFVRVNUX1NVQk1JVFRFRCIsIlZJRVdfQVVDVElPTl9SRVBPUlRTX1BBR0UiLCJBVUNUSU9OX1JFU09VUkNFU19XRUxDT01FX1BBQ0tFVF9QQUdFIiwiQVVDVElPTl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9TRUxMRVJTX1BBR0UiLCJBVUNUSU9OX1JFUE9SVFNfQ1JFRElUX0FWQUlMQUJJTElUWV9RVUVSWV9ISVNUT1JZX1BBR0UiLCJBVUNUSU9OX1JFUE9SVFNfRElTQlVSU0VNRU5UX0RFVEFJTF9QQUdFIiwiTUFOVUZBQ1RVUkVSX1JFUE9SVFNfQUdJTkdfUkVQT1JUX1BBR0UiLCJBVUNUSU9OX1NVQ0NFU1NGVUxfRkxPT1JJTkdfUkVRVUVTVF9TVUJNSVRURURfUEFHRSIsIkFVQ1RJT05fSU5ESVZJRFVBTF9ERUFMRVJfTE9DX1FVRVJZX1BBR0UiLCJDTElDS19WQUxVRV9MT09LVVBfVklOX1dJVEhfWklQX0xPT0tVUF9CVVRUT04iLCJDTElDS19WQUxVRV9MT09LVVBfVklOX1dJVEhPVVRfWklQX0xPT0tVUF9CVVRUT04iLCJDTElDS19WQUxVRV9MT09LVVBfTkdDX0xPT0tVUF9CVVRUT04iLCJDTElDS19WQUxVRV9MT09LVVBfTU1SX0xPT0tVUF9CVVRUT04iLCJDTElDS19WQUxVRV9MT09LVVBfS0JCX0xPT0tVUF9CVVRUT04iLCJERUFMRVJfVklFV19BQ0NPVU5UX01BTkFHRU1FTlRfUEFHRSIsIkRFQUxFUl9BRERfQkFOS19BQ0NPVU5UIiwiREVBTEVSX0VESVRfQkFOS19BQ0NPVU5UIiwiQVVUT1RSQURFUl9JTkRFWCIsIkRFQUxTSElFTERfSU5ERVgiLCJHT0FVVE9FWENIQU5HRV9JTkRFWCIsIkdPRklOQU5DSUFMX0lOREVYIiwiSEFZU1RBQ0tfSU5ERVgiLCJIT01FTkVUX0lOREVYIiwiS0VMTFlCTFVFQk9PS19JTkRFWCIsIk1BTkhFSU1fSU5ERVgiLCJSRUFEWUFVVE9fSU5ERVgiLCJWQVVUT19JTkRFWCIsIlZJTlNPTFVUSU9OU19JTkRFWCIsIldBWUJJTExfUFJJTlRFRCIsInJlYWN0UHJvZEludmFyaWFudCIsImNvZGUiLCJhcmdDb3VudCIsIm1lc3NhZ2UiLCJhcmdJZHgiLCJlbmNvZGVVUklDb21wb25lbnQiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX0xpbmsiLCJfTGluazIiLCJMaXN0SXRlbUxpbmsiLCJtYWtlRW1wdHlGdW5jdGlvbiIsImFyZyIsInRoYXRSZXR1cm5zIiwidGhhdFJldHVybnNGYWxzZSIsInRoYXRSZXR1cm5zVHJ1ZSIsInRoYXRSZXR1cm5zTnVsbCIsInRoYXRSZXR1cm5zVGhpcyIsInRoYXRSZXR1cm5zQXJndW1lbnQiLCJlbXB0eU9iamVjdCIsIlJlYWN0Q29tcG9uZW50IiwidXBkYXRlciIsInJlZnMiLCJSZWFjdE5vb3BVcGRhdGVRdWV1ZSIsIl9wcm9kSW52YXJpYW50IiwiaXNSZWFjdENvbXBvbmVudCIsInBhcnRpYWxTdGF0ZSIsImVucXVldWVTZXRTdGF0ZSIsImVucXVldWVDYWxsYmFjayIsImZvcmNlVXBkYXRlIiwiZW5xdWV1ZUZvcmNlVXBkYXRlIiwid2Fybk5vb3AiLCJwdWJsaWNJbnN0YW5jZSIsImNhbGxlck5hbWUiLCJpc01vdW50ZWQiLCJlbnF1ZXVlUmVwbGFjZVN0YXRlIiwiY29tcGxldGVTdGF0ZSIsIl9fbG9jYWxlIiwiZGF5cyIsImFiYnJldmlhdGVkX2RheXMiLCJtb250aHMiLCJhYmJyZXZpYXRlZF9tb250aHMiLCJhbSIsInBtIiwiYXAiLCJzbGljZSIsImtleU1pcnJvciIsInJldCIsIlJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzIiwiY2FuRGVmaW5lUHJvcGVydHkiLCJnZXRJdGVyYXRvckZuIiwibWF5YmVJdGVyYWJsZSIsIml0ZXJhdG9yRm4iLCJJVEVSQVRPUl9TWU1CT0wiLCJGQVVYX0lURVJBVE9SX1NZTUJPTCIsIml0ZXJhdG9yIiwiZ2xvYmFsIiwicHJvY2VzcyIsImluc3BlY3QiLCJvcHRzIiwiY3R4Iiwic2VlbiIsInN0eWxpemUiLCJzdHlsaXplTm9Db2xvciIsImRlcHRoIiwiY29sb3JzIiwiaXNCb29sZWFuIiwic2hvd0hpZGRlbiIsIl9leHRlbmQiLCJpc1VuZGVmaW5lZCIsImN1c3RvbUluc3BlY3QiLCJzdHlsaXplV2l0aENvbG9yIiwiZm9ybWF0VmFsdWUiLCJzdHIiLCJzdHlsZVR5cGUiLCJzdHlsZSIsInN0eWxlcyIsImFycmF5VG9IYXNoIiwiYXJyYXkiLCJoYXNoIiwiaWR4IiwicmVjdXJzZVRpbWVzIiwiY29uc3RydWN0b3IiLCJwcmltaXRpdmUiLCJmb3JtYXRQcmltaXRpdmUiLCJ2aXNpYmxlS2V5cyIsImlzRXJyb3IiLCJmb3JtYXRFcnJvciIsImlzUmVnRXhwIiwiUmVnRXhwIiwiRGF0ZSIsImJhc2UiLCJicmFjZXMiLCJ0b1VUQ1N0cmluZyIsInB1c2giLCJvdXRwdXQiLCJmb3JtYXRBcnJheSIsImZvcm1hdFByb3BlcnR5IiwicG9wIiwicmVkdWNlVG9TaW5nbGVTdHJpbmciLCJzaW1wbGUiLCJKU09OIiwic3RyaW5naWZ5IiwiaXNOdW1iZXIiLCJpc051bGwiLCJsIiwibWF0Y2giLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0Iiwic2V0IiwibGluZSIsIm51bUxpbmVzRXN0IiwicHJldiIsImN1ciIsImFyIiwiaXNOdWxsT3JVbmRlZmluZWQiLCJyZSIsImlzT2JqZWN0Iiwib2JqZWN0VG9TdHJpbmciLCJpc1ByaW1pdGl2ZSIsIm8iLCJwYWQiLCJ0aW1lc3RhbXAiLCJ0aW1lIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldERhdGUiLCJnZXRNb250aCIsInByb3AiLCJmb3JtYXRSZWdFeHAiLCJvYmplY3RzIiwibGVuIiwieCIsIk51bWJlciIsIl8iLCJkZXByZWNhdGUiLCJmbiIsIm1zZyIsImRlcHJlY2F0ZWQiLCJ3YXJuZWQiLCJ0aHJvd0RlcHJlY2F0aW9uIiwidHJhY2VEZXByZWNhdGlvbiIsImNvbnNvbGUiLCJ0cmFjZSIsIm5vRGVwcmVjYXRpb24iLCJkZWJ1Z0Vudmlyb24iLCJkZWJ1Z3MiLCJkZWJ1Z2xvZyIsIk5PREVfRU5WIiwiTk9ERV9ERUJVRyIsInRvVXBwZXJDYXNlIiwicGlkIiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImludmVyc2UiLCJ3aGl0ZSIsImdyZXkiLCJibGFjayIsImJsdWUiLCJjeWFuIiwiZ3JlZW4iLCJtYWdlbnRhIiwicmVkIiwieWVsbG93Iiwic3BlY2lhbCIsImJvb2xlYW4iLCJudWxsIiwiZGF0ZSIsInJlZ2V4cCIsImlzQnVmZmVyIiwibG9nIiwiaW5oZXJpdHMiLCJvcmlnaW4iLCJhZGQiLCJfRGF0ZSIsIl9EYXRlMiIsIl9SZXNvdXJjZXMiLCJfUmVzb3VyY2VzMiIsIl9BdWN0aW9uUmVzb3VyY2VzIiwiX0F1Y3Rpb25SZXNvdXJjZXMyIiwiYW5ndWxhciIsImRpcmVjdGl2ZSIsInJlYWN0RGlyZWN0aXZlIiwiX2NsYXNzQ2FsbENoZWNrIiwiQ29uc3RydWN0b3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCIsIl9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIiLCJfTGlzdEl0ZW1MaW5rIiwiX0xpc3RJdGVtTGluazIiLCJBdWN0aW9uUmVzb3VyY2VEb2NzIiwiX0NvbXBvbmVudCIsImdldFByb3RvdHlwZU9mIiwiX3RoaXMyIiwiZG9jTGlua3MiLCJkb2NzIiwiaXRlbSIsInVybCIsImhhbmRsZUNsaWNrIiwiY2xhc3NOYW1lIiwiQ29tcG9uZW50IiwiX2NvdW50ZXJwYXJ0IiwiX2NvdW50ZXJwYXJ0MiIsIl9BdWN0aW9uUmVzb3VyY2VEb2NzIiwiX0F1Y3Rpb25SZXNvdXJjZURvY3MyIiwiX2F1Y3Rpb25Eb2NzTGlzdCIsIl9hdWN0aW9uRG9jc0xpc3QyIiwiX21ldHJpYyIsIl9tZXRyaWMyIiwiQXVjdGlvblJlc291cmNlcyIsIl90aGlzIiwibGFuZ3VhZ2UiLCJzdWJzdHJpbmciLCJpc1VuaXRlZFN0YXRlcyIsIm1ldHJpY0tleSIsImtpc3NNZXRyaWNJbmZvIiwiZ2V0S2lzc01ldHJpY0luZm8iLCJ0aGVuIiwiaW5mbyIsInNlZ21lbnRpbyIsInRyYWNrIiwiTW9iaWxlQXBwcyIsImFwcExpbmtzIiwiYXBwcyIsImFwcCIsIlJlc291cmNlRG9jcyIsImNvbGxhdGVyYWxEb2NMaW5rcyIsImNvbGxhdGVyYWxEb2NzIiwiY2xhc3NlcyIsIlJlc291cmNlVmlkZW9zIiwic3JjIiwiZnJhbWVCb3JkZXIiLCJhbGxvd0Z1bGxTY3JlZW4iLCJ3aWR0aCIsImhlaWdodCIsIl9SZXNvdXJjZVZpZGVvcyIsIl9SZXNvdXJjZVZpZGVvczIiLCJfUmVzb3VyY2VEb2NzIiwiX1Jlc291cmNlRG9jczIiLCJfTW9iaWxlQXBwcyIsIl9Nb2JpbGVBcHBzMiIsIl9jb2xsYXRlcmFsRG9jc0xpc3QiLCJfY29sbGF0ZXJhbERvY3NMaXN0MiIsIl9tb2JpbGVBcHBzTGlzdCIsIl9tb2JpbGVBcHBzTGlzdDIiLCJfZG9jc0xpc3QiLCJfZG9jc0xpc3QyIiwiUmVzb3VyY2VzIiwiYXBpIiwiY29udGVudExpbmsiLCJtb2JpbGVBcHBzIiwibGFuZ3VhZ2VQcmVmaXgiLCJodG1sRm9yIiwibGFiZWxGb3IiLCJsYWJlbCIsIm1pbiIsIm1pbkRhdGUiLCJtYXgiLCJtYXhEYXRlIiwicGxhY2Vob2xkZXIiLCJvbkNoYW5nZSIsImhhbmRsZUNoYW5nZSIsInRhYkluZGV4Iiwib25DbGljayIsInByZXNlcnZlQXNwZWN0UmF0aW8iLCJ4bGlua0hyZWYiLCJMaW5rIiwiaHJlZiIsInJlbCIsInJlc291cmNlcyIsInJlc291cmNlVmlkZW9zIiwibG9nZ2luZ0luIiwiaG93VG9Vc2UiLCJyZXNvdXJjZURvY3MiLCJjb2xsYXRlcmFsUHJvZ3JhbSIsImRvY3VtZW50cyIsIm5nY0RvY3VtZW50cyIsInRpdGxlIiwic3ViVGV4dCIsImNvbGxhdGVyYWxEb2NzTGlzdCIsIndlbGNvbWVMZXR0ZXIiLCJndWlkZWxpbmVzIiwiaW5mb3JtYXRpb25TaGVldCIsImNsYWltRm9ybSIsIm1vYmlsZUFwcHNMaXN0IiwibW9iaWxlSW9zIiwibW9iaWxlQW5kcm9pZCIsImRvY3NMaXN0Iiwid2VsY29tZVBhY2tldCIsImRlYWxlckNoZWNrbGlzdCIsImZhcSIsImluc3RydWN0aW9ucyIsInJhdGVzIiwiYXVjdGlvbkRvY3NMaXN0Iiwic2VsbGVyR3VpZGUiLCJfZW4iLCJfZW4yIiwiX2VzIiwiX2VzMiIsIl9mciIsIl9mcjIiLCJjb3VudGVycGFydCIsIm5hbWVzIiwicGx1cmFsaXplIiwiZm9ybWF0cyIsImxvbmciLCJzaG9ydCIsImRhdGV0aW1lIiwiZ2V0VGltZSIsImRhdGVOYW1lcyIsInBhZGRpbmciLCJnZXREYXkiLCJNYXRoIiwiZmxvb3IiLCJnZXRGdWxsWWVhciIsImhvdXJzMTIiLCJjZWlsIiwib3JkaW5hbCIsInRvTG93ZXJDYXNlIiwid2Vla051bWJlciIsInkiLCJ0elN0cmluZyIsIm9mZiIsImdldFRpbWV6b25lT2Zmc2V0Iiwicm91bmQiLCJhYnMiLCJob3VyIiwiZmlyc3RXZWVrZGF5Iiwid2RheSIsImZpcnN0RGF5T2ZZZWFyIiwieWRheSIsIndlZWtOdW0iLCJfZXZlbnRzIiwiX21heExpc3RlbmVycyIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJpc05hTiIsImVyIiwiaGFuZGxlciIsImxpc3RlbmVycyIsImVyciIsImxpc3RlbmVyIiwibmV3TGlzdGVuZXIiLCJvbiIsIm9uY2UiLCJnIiwiZmlyZWQiLCJsaXN0IiwicG9zaXRpb24iLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJsaXN0ZW5lckNvdW50IiwiZXZsaXN0ZW5lciIsImVtaXR0ZXIiLCJoYXNPd24iLCJ0b1N0ciIsImFyciIsImhhc093bkNvbnN0cnVjdG9yIiwiaGFzSXNQcm90b3R5cGVPZiIsImNvcHkiLCJjb3B5SXNBcnJheSIsImNsb25lIiwiZGVlcCIsImtleU9mIiwib25lS2V5T2JqIiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwicnVuIiwiSXRlbSIsIm5vb3AiLCJuZXh0VGljayIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJSRUdFWFAiLCJPTUlUVEVEX1BST1BTIiwicGFyZW50IiwibWF0Y2hlcyIsIm1lbW8iLCJpbmRleCIsImh0bWwiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsIl9faHRtbCIsImNoaWxkIiwiZXNjYXBlIiwiZXNjYXBlUmVnZXgiLCJlc2NhcGVyTG9va3VwIiwiPSIsIjoiLCJlc2NhcGVkU3RyaW5nIiwidW5lc2NhcGUiLCJ1bmVzY2FwZVJlZ2V4IiwidW5lc2NhcGVyTG9va3VwIiwiPTAiLCI9MiIsImtleVN1YnN0cmluZyIsIktleUVzY2FwZVV0aWxzIiwib25lQXJndW1lbnRQb29sZXIiLCJjb3B5RmllbGRzRnJvbSIsIktsYXNzIiwiaW5zdGFuY2VQb29sIiwidHdvQXJndW1lbnRQb29sZXIiLCJhMSIsImEyIiwidGhyZWVBcmd1bWVudFBvb2xlciIsImEzIiwiZm91ckFyZ3VtZW50UG9vbGVyIiwiYTQiLCJmaXZlQXJndW1lbnRQb29sZXIiLCJhNSIsInN0YW5kYXJkUmVsZWFzZXIiLCJkZXN0cnVjdG9yIiwicG9vbFNpemUiLCJERUZBVUxUX1BPT0xfU0laRSIsIkRFRkFVTFRfUE9PTEVSIiwiYWRkUG9vbGluZ1RvIiwiQ29weUNvbnN0cnVjdG9yIiwicG9vbGVyIiwiTmV3S2xhc3MiLCJnZXRQb29sZWQiLCJyZWxlYXNlIiwiUG9vbGVkQ2xhc3MiLCJSZWFjdENoaWxkcmVuIiwiUmVhY3RQdXJlQ29tcG9uZW50IiwiUmVhY3RDbGFzcyIsIlJlYWN0RE9NRmFjdG9yaWVzIiwiUmVhY3RQcm9wVHlwZXMiLCJSZWFjdFZlcnNpb24iLCJvbmx5Q2hpbGQiLCJfX3NwcmVhZCIsIkNoaWxkcmVuIiwidG9BcnJheSIsIm9ubHkiLCJQdXJlQ29tcG9uZW50IiwiY3JlYXRlTWl4aW4iLCJtaXhpbiIsIkRPTSIsImVzY2FwZVVzZXJQcm92aWRlZEtleSIsInRleHQiLCJ1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCIsIkZvckVhY2hCb29rS2VlcGluZyIsImZvckVhY2hGdW5jdGlvbiIsImZvckVhY2hDb250ZXh0IiwiZm9yRWFjaFNpbmdsZUNoaWxkIiwiYm9va0tlZXBpbmciLCJmb3JFYWNoQ2hpbGRyZW4iLCJmb3JFYWNoRnVuYyIsInRyYXZlcnNlQ29udGV4dCIsInRyYXZlcnNlQWxsQ2hpbGRyZW4iLCJNYXBCb29rS2VlcGluZyIsIm1hcFJlc3VsdCIsImtleVByZWZpeCIsIm1hcEZ1bmN0aW9uIiwibWFwQ29udGV4dCIsIm1hcFNpbmdsZUNoaWxkSW50b0NvbnRleHQiLCJjaGlsZEtleSIsIm1hcHBlZENoaWxkIiwibWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbCIsInByZWZpeCIsImVzY2FwZWRQcmVmaXgiLCJtYXBDaGlsZHJlbiIsImZvckVhY2hTaW5nbGVDaGlsZER1bW15IiwiY291bnRDaGlsZHJlbiIsInZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUiLCJpc0FscmVhZHlEZWZpbmVkIiwic3BlY1BvbGljeSIsIlJlYWN0Q2xhc3NJbnRlcmZhY2UiLCJSZWFjdENsYXNzTWl4aW4iLCJTcGVjUG9saWN5IiwiT1ZFUlJJREVfQkFTRSIsIkRFRklORV9NQU5ZIiwiREVGSU5FX01BTllfTUVSR0VEIiwibWl4U3BlY0ludG9Db21wb25lbnQiLCJzcGVjIiwicHJvdG8iLCJhdXRvQmluZFBhaXJzIiwiX19yZWFjdEF1dG9CaW5kUGFpcnMiLCJNSVhJTlNfS0VZIiwiUkVTRVJWRURfU1BFQ19LRVlTIiwibWl4aW5zIiwicHJvcGVydHkiLCJpc1JlYWN0Q2xhc3NNZXRob2QiLCJzaG91bGRBdXRvQmluZCIsImF1dG9iaW5kIiwiY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24iLCJjcmVhdGVDaGFpbmVkRnVuY3Rpb24iLCJtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudCIsImlzUmVzZXJ2ZWQiLCJpc0luaGVyaXRlZCIsIm1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMiLCJvbmUiLCJ0d28iLCJiaW5kQXV0b0JpbmRNZXRob2QiLCJtZXRob2QiLCJib3VuZE1ldGhvZCIsImJpbmRBdXRvQmluZE1ldGhvZHMiLCJwYWlycyIsImF1dG9CaW5kS2V5IiwiREVGSU5FX09OQ0UiLCJpbmplY3RlZE1peGlucyIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJjb21wb25lbnRXaWxsVXBkYXRlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwidXBkYXRlQ29tcG9uZW50IiwicmVwbGFjZVN0YXRlIiwibmV3U3RhdGUiLCJSZWFjdENsYXNzQ29tcG9uZW50IiwiaW5pdGlhbFN0YXRlIiwibWV0aG9kTmFtZSIsImluamVjdGlvbiIsImluamVjdE1peGluIiwiY3JlYXRlRE9NRmFjdG9yeSIsImFiYnIiLCJhZGRyZXNzIiwiYXJlYSIsImFydGljbGUiLCJhc2lkZSIsImF1ZGlvIiwiYmRpIiwiYmRvIiwiYmlnIiwiYmxvY2txdW90ZSIsImJvZHkiLCJiciIsImJ1dHRvbiIsImNhbnZhcyIsImNhcHRpb24iLCJjaXRlIiwiY29sIiwiY29sZ3JvdXAiLCJkYXRhbGlzdCIsImRkIiwiZGVsIiwiZGV0YWlscyIsImRmbiIsImRpYWxvZyIsImRpdiIsImRsIiwiZHQiLCJlbSIsImVtYmVkIiwiZmllbGRzZXQiLCJmaWdjYXB0aW9uIiwiZmlndXJlIiwiZm9vdGVyIiwiZm9ybSIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsImhlYWQiLCJoZWFkZXIiLCJoZ3JvdXAiLCJociIsImlmcmFtZSIsImltZyIsImlucHV0IiwiaW5zIiwia2JkIiwia2V5Z2VuIiwibGVnZW5kIiwibGkiLCJsaW5rIiwibWFpbiIsIm1hcmsiLCJtZW51IiwibWVudWl0ZW0iLCJtZXRhIiwibWV0ZXIiLCJuYXYiLCJub3NjcmlwdCIsIm9sIiwib3B0Z3JvdXAiLCJvcHRpb24iLCJwYXJhbSIsInBpY3R1cmUiLCJwcmUiLCJwcm9ncmVzcyIsInEiLCJycCIsInJ0IiwicnVieSIsInNhbXAiLCJzY3JpcHQiLCJzZWN0aW9uIiwic2VsZWN0Iiwic21hbGwiLCJzcGFuIiwic3Ryb25nIiwic3ViIiwic3VtbWFyeSIsInN1cCIsInRhYmxlIiwidGJvZHkiLCJ0ZCIsInRleHRhcmVhIiwidGZvb3QiLCJ0aCIsInRoZWFkIiwidHIiLCJ1IiwidWwiLCJ2YXIiLCJ2aWRlbyIsIndiciIsImNpcmNsZSIsImNsaXBQYXRoIiwiZGVmcyIsImVsbGlwc2UiLCJpbWFnZSIsImxpbmVhckdyYWRpZW50IiwibWFzayIsInBhdGgiLCJwYXR0ZXJuIiwicG9seWdvbiIsInBvbHlsaW5lIiwicmFkaWFsR3JhZGllbnQiLCJyZWN0Iiwic3RvcCIsInN2ZyIsInRzcGFuIiwiUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyIsImNoaWxkQ29udGV4dCIsImlzIiwiUHJvcFR5cGVFcnJvciIsInN0YWNrIiwiY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIiLCJ2YWxpZGF0ZSIsImNoZWNrVHlwZSIsImlzUmVxdWlyZWQiLCJjb21wb25lbnROYW1lIiwibG9jYXRpb24iLCJwcm9wRnVsbE5hbWUiLCJzZWNyZXQiLCJBTk9OWU1PVVMiLCJsb2NhdGlvbk5hbWUiLCJjaGFpbmVkQ2hlY2tUeXBlIiwiY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIiLCJleHBlY3RlZFR5cGUiLCJwcm9wVmFsdWUiLCJwcm9wVHlwZSIsImdldFByb3BUeXBlIiwicHJlY2lzZVR5cGUiLCJnZXRQcmVjaXNlVHlwZSIsImNyZWF0ZUFueVR5cGVDaGVja2VyIiwiY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyIiwidHlwZUNoZWNrZXIiLCJSZWFjdFByb3BUeXBlc1NlY3JldCIsImNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlciIsImNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIiLCJleHBlY3RlZENsYXNzIiwiZXhwZWN0ZWRDbGFzc05hbWUiLCJhY3R1YWxDbGFzc05hbWUiLCJnZXRDbGFzc05hbWUiLCJjcmVhdGVFbnVtVHlwZUNoZWNrZXIiLCJleHBlY3RlZFZhbHVlcyIsInZhbHVlc1N0cmluZyIsImNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIiLCJjcmVhdGVVbmlvblR5cGVDaGVja2VyIiwiYXJyYXlPZlR5cGVDaGVja2VycyIsImNoZWNrZXIiLCJjcmVhdGVOb2RlQ2hlY2tlciIsImlzTm9kZSIsImNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIiLCJzaGFwZVR5cGVzIiwiZXZlcnkiLCJzdGVwIiwiZW50cmllcyIsIm5leHQiLCJkb25lIiwiYm9vbCIsInN5bWJvbCIsImFueSIsImluc3RhbmNlT2YiLCJub2RlIiwib2JqZWN0T2YiLCJvbmVPZiIsIkNvbXBvbmVudER1bW15IiwiaXNQdXJlUmVhY3RDb21wb25lbnQiLCJnZXRDb21wb25lbnRLZXkiLCJ0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbCIsIm5hbWVTb0ZhciIsIlNFUEFSQVRPUiIsIm5leHROYW1lIiwic3VidHJlZUNvdW50IiwibmV4dE5hbWVQcmVmaXgiLCJTVUJTRVBBUkFUT1IiLCJhZGRlbmR1bSIsImNoaWxkcmVuU3RyaW5nIiwid2luZG93IiwiY2FjaGUiLCJwYXJzZSIsImdldF90eXBlIiwidmFyaWFibGUiLCJzdHJfcmVwZWF0IiwibXVsdGlwbGllciIsIm5vdF9zdHJpbmciLCJqc29uIiwibm90X2pzb24iLCJtb2R1bG8iLCJrZXlfYWNjZXNzIiwiaW5kZXhfYWNjZXNzIiwic2lnbiIsInBhcnNlX3RyZWUiLCJwYWRfY2hhcmFjdGVyIiwicGFkX2xlbmd0aCIsImN1cnNvciIsInRyZWVfbGVuZ3RoIiwibm9kZV90eXBlIiwiaXNfcG9zaXRpdmUiLCJwYXJzZUludCIsInRvRXhwb25lbnRpYWwiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInRvUHJlY2lzaW9uIiwiY2hhckF0IiwiZm10IiwiX2ZtdCIsImFyZ19uYW1lcyIsImV4ZWMiLCJTeW50YXhFcnJvciIsImZpZWxkX2xpc3QiLCJyZXBsYWNlbWVudF9maWVsZCIsImZpZWxkX21hdGNoIiwidnNwcmludGYiLCJfYXJndiIsImN0b3IiLCJzdXBlckN0b3IiLCJzdXBlcl8iLCJUZW1wQ3RvciIsImZpbGwiLCJyZWFkVUludDgiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLFNDSW5CLFFBQUFDLHFCQUFBQyxVQUdBLEdBQUFDLGlCQUFBRCxVQUNBLE1BQUFDLGtCQUFBRCxVQUFBRSxPQUdBLElBQUFDLFFBQUFGLGlCQUFBRCxXQUNBRSxXQUNBRSxHQUFBSixTQUNBSyxRQUFBLEVBVUEsT0FOQVAsU0FBQUUsVUFBQU0sS0FBQUgsT0FBQUQsUUFBQUMsY0FBQUQsUUFBQUgscUJBR0FJLE9BQUFFLFFBQUEsRUFHQUYsT0FBQUQsUUF2QkEsR0FBQUQsb0JBcUNBLE9BVEFGLHFCQUFBUSxFQUFBVCxRQUdBQyxvQkFBQVMsRUFBQVAsaUJBR0FGLG9CQUFBVSxFQUFBLEdBR0FWLG9CQUFBLEtETU0sU0FBU0ksT0FBUUQsUUFBU0gscUJBRS9CLFlBVUEsU0FBU1csd0JBQXVCQyxLQUFPLE1BQU9BLE1BQU9BLElBQUlDLFdBQWFELEtBQVFFLFVBQVNGLEtFeER4RixHQUFBRyxvQkFBQWYsb0JBQUEsSUFDQWdCLGVGaUQyQkwsdUJBQXVCSSxvQkVqRGxEZixvQkFBQSxJRnFEc0JXLHdCQUF1QkssZ0JBTXZDLFNBQVNaLE9BQVFELFFBQVNILHFCRzVEaEMsWUFFQUksUUFBQUQsUUFBQUgsb0JBQUEsS0htRU0sU0FBU0ksT0FBUUQsUUFBU0gscUJJckVoQyxZQWFBLFNBQUFpQixVQUFBQyxLQUNBLHNCQUFBQSxNQUFBLG9CQUFBQyxPQUFBQyxVQUFBQyxTQUFBZCxLQUFBVyxLQUdBLFFBQUFJLFlBQUFKLEtBQ0Esd0JBQUFBLE1BQUEsc0JBQUFDLE9BQUFDLFVBQUFDLFNBQUFkLEtBQUFXLEtBR0EsUUFBQUssZUFBQUwsS0FFQSxjQUFBQSxLQUdBLG9CQUFBQyxPQUFBQyxVQUFBQyxTQUFBZCxLQUFBVyxLQUdBLFFBQUFNLFVBQUFDLEtBQ0EsTUFBQVIsVUFBQVEsTUFB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UUFBQW9WLE1BS0E2b0IsVUFBQWpoQixVQUFBNUgsTUFBQSxHQUFBcFYsUUFFQSxNQUFBbTlCLFlBR0EsSUFBQXFCLFVBQUEsU0FBQVIsSUFBQWxXLEtBQUEyVyxPQUdBLE1BRkFBLFFBQUEzVyxVQUFBdlcsTUFBQSxHQUNBa3RCLE1BQUE1OEIsT0FBQSxJQUFBbThCLEtBQ0FwZ0MsUUFBQUwsTUFBQSxLQUFBa2hDLE9Ba0JBaGtDLFNBQUFtRCxnQkFDQW5ELFFBQUErakMsbUJBZUMsbUJBQUFuQyxRQUFBNy9CLEtBQUE2L0IsU2xFdWhOSyxTQUFTM2hDLE9BQVFELFNtRXR1TnZCLGtCQUFBZ0IsUUFBQWtmLE9BRUFqZ0IsT0FBQUQsUUFBQSxTQUFBaWtDLEtBQUFDLFdBQ0FELEtBQUFFLE9BQUFELFVBQ0FELEtBQUFoakMsVUFBQUQsT0FBQWtmLE9BQUFna0IsVUFBQWpqQyxXQUNBa1ksYUFDQXhWLE1BQUFzZ0MsS0FDQTlqQixZQUFBLEVBQ0FDLFVBQUEsRUFDQUMsY0FBQSxNQU1BcGdCLE9BQUFELFFBQUEsU0FBQWlrQyxLQUFBQyxXQUNBRCxLQUFBRSxPQUFBRCxTQUNBLElBQUFFLFVBQUEsWUFDQUEsVUFBQW5qQyxVQUFBaWpDLFVBQUFqakMsVUFDQWdqQyxLQUFBaGpDLFVBQUEsR0FBQW1qQyxVQUNBSCxLQUFBaGpDLFVBQUFrWSxZQUFBOHFCLE9uRSt1Tk0sU0FBU2hrQyxPQUFRRCxTb0Vud052QkMsT0FBQUQsUUFBQSxTQUFBNlUsS0FDQSxNQUFBQSxNQUFBLGdCQUFBQSxNQUNBLGtCQUFBQSxLQUFBMlcsTUFDQSxrQkFBQTNXLEtBQUF3dkIsTUFDQSxrQkFBQXh2QixLQUFBeXZCIiwiZmlsZSI6InJlYWN0LWFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9hbmd1bGFyRGlyZWN0aXZlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9hbmd1bGFyRGlyZWN0aXZlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hbmd1bGFyRGlyZWN0aXZlcyk7XG5cdFxuXHR2YXIgX3RyYW5zbGF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHRcblx0dmFyIF90cmFuc2xhdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNsYXRpb25zKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGV4dGVuZCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKS5pc0FycmF5O1xuXHR2YXIgaXNEYXRlICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpLmlzRGF0ZTtcblx0dmFyIHNwcmludGYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KS5zcHJpbnRmO1xuXHR2YXIgZXZlbnRzICA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpO1xuXHR2YXIgZXhjZXB0ICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0dmFyIHN0cmZ0aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdFxuXHR2YXIgdHJhbnNsYXRpb25TY29wZSA9ICdjb3VudGVycGFydCc7XG5cdFxuXHRmdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuXHQgIC8vRGVhbCB3aXRoIG9sZGVyIGJyb3dzZXJzIChJRTgpIHRoYXQgZG9uJ3QgcmV0dXJuIFtvYmplY3QgTnVsbF0gaW4gdGhpcyBjYXNlLlxuXHQgIGlmICh2YWwgPT09IG51bGwpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTeW1ib2woa2V5KSB7XG5cdCAgcmV0dXJuIGlzU3RyaW5nKGtleSkgJiYga2V5WzBdID09PSAnOic7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhc093blByb3Aob2JqLCBrZXkpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RW50cnkodHJhbnNsYXRpb25zLCBrZXlzKSB7XG5cdCAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwga2V5KSB7XG5cdCAgICBpZiAoaXNQbGFpbk9iamVjdChyZXN1bHQpICYmIGhhc093blByb3AocmVzdWx0LCBrZXkpKSB7XG5cdCAgICAgIHJldHVybiByZXN1bHRba2V5XTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgIH0sIHRyYW5zbGF0aW9ucyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENvdW50ZXJwYXJ0KCkge1xuXHQgIHRoaXMuX3JlZ2lzdHJ5ID0ge1xuXHQgICAgbG9jYWxlOiAnZW4nLFxuXHQgICAgaW50ZXJwb2xhdGU6IHRydWUsXG5cdCAgICBmYWxsYmFja0xvY2FsZTogbnVsbCxcblx0ICAgIHNjb3BlOiBudWxsLFxuXHQgICAgdHJhbnNsYXRpb25zOiB7fSxcblx0ICAgIGludGVycG9sYXRpb25zOiB7fSxcblx0ICAgIG5vcm1hbGl6ZWRLZXlzOiB7fSxcblx0ICAgIHNlcGFyYXRvcjogJy4nLFxuXHQgICAga2VlcFRyYWlsaW5nRG90OiBmYWxzZSxcblx0ICAgIGtleVRyYW5zZm9ybWVyOiBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGtleTsgfVxuXHQgIH07XG5cdFxuXHQgIHRoaXMucmVnaXN0ZXJUcmFuc2xhdGlvbnMoJ2VuJywgX193ZWJwYWNrX3JlcXVpcmVfXyg0MCkpO1xuXHQgIHRoaXMuc2V0TWF4TGlzdGVuZXJzKDApO1xuXHR9XG5cdFxuXHRleHRlbmQoQ291bnRlcnBhcnQucHJvdG90eXBlLCBldmVudHMuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuZ2V0TG9jYWxlID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHRoaXMuX3JlZ2lzdHJ5LmxvY2FsZTtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5zZXRMb2NhbGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgIHZhciBwcmV2aW91cyA9IHRoaXMuX3JlZ2lzdHJ5LmxvY2FsZTtcblx0XG5cdCAgaWYgKHByZXZpb3VzICE9IHZhbHVlKSB7XG5cdCAgICB0aGlzLl9yZWdpc3RyeS5sb2NhbGUgPSB2YWx1ZTtcblx0ICAgIHRoaXMuZW1pdCgnbG9jYWxlY2hhbmdlJywgdmFsdWUsIHByZXZpb3VzKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBwcmV2aW91cztcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5nZXRGYWxsYmFja0xvY2FsZSA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB0aGlzLl9yZWdpc3RyeS5mYWxsYmFja0xvY2FsZTtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5zZXRGYWxsYmFja0xvY2FsZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgdmFyIHByZXZpb3VzID0gdGhpcy5fcmVnaXN0cnkuZmFsbGJhY2tMb2NhbGU7XG5cdCAgdGhpcy5fcmVnaXN0cnkuZmFsbGJhY2tMb2NhbGUgPSB2YWx1ZTtcblx0ICByZXR1cm4gcHJldmlvdXM7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuZ2V0QXZhaWxhYmxlTG9jYWxlcyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB0aGlzLl9yZWdpc3RyeS5hdmFpbGFibGVMb2NhbGVzIHx8IE9iamVjdC5rZXlzKHRoaXMuX3JlZ2lzdHJ5LnRyYW5zbGF0aW9ucyk7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuc2V0QXZhaWxhYmxlTG9jYWxlcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgdmFyIHByZXZpb3VzID0gdGhpcy5nZXRBdmFpbGFibGVMb2NhbGVzKCk7XG5cdCAgdGhpcy5fcmVnaXN0cnkuYXZhaWxhYmxlTG9jYWxlcyA9IHZhbHVlO1xuXHQgIHJldHVybiBwcmV2aW91cztcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5nZXRTZXBhcmF0b3IgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gdGhpcy5fcmVnaXN0cnkuc2VwYXJhdG9yO1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLnNldFNlcGFyYXRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgdmFyIHByZXZpb3VzID0gdGhpcy5fcmVnaXN0cnkuc2VwYXJhdG9yO1xuXHQgIHRoaXMuX3JlZ2lzdHJ5LnNlcGFyYXRvciA9IHZhbHVlO1xuXHQgIHJldHVybiBwcmV2aW91cztcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5zZXRJbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgdmFyIHByZXZpb3VzID0gdGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGU7XG5cdCAgdGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGUgPSB2YWx1ZTtcblx0ICByZXR1cm4gcHJldmlvdXM7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuZ2V0SW50ZXJwb2xhdGUgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gdGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGU7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuc2V0S2V5VHJhbnNmb3JtZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgIHZhciBwcmV2aW91cyA9IHRoaXMuX3JlZ2lzdHJ5LmtleVRyYW5zZm9ybWVyO1xuXHQgIHRoaXMuX3JlZ2lzdHJ5LmtleVRyYW5zZm9ybWVyID0gdmFsdWU7XG5cdCAgcmV0dXJuIHByZXZpb3VzO1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLmdldEtleVRyYW5zZm9ybWVyID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHRoaXMuX3JlZ2lzdHJ5LmtleVRyYW5zZm9ybWVyO1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLnJlZ2lzdGVyVHJhbnNsYXRpb25zID0gZnVuY3Rpb24obG9jYWxlLCBkYXRhKSB7XG5cdCAgdmFyIHRyYW5zbGF0aW9ucyA9IHt9O1xuXHQgIHRyYW5zbGF0aW9uc1tsb2NhbGVdID0gZGF0YTtcblx0ICBleHRlbmQodHJ1ZSwgdGhpcy5fcmVnaXN0cnkudHJhbnNsYXRpb25zLCB0cmFuc2xhdGlvbnMpO1xuXHQgIHJldHVybiB0cmFuc2xhdGlvbnM7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUucmVnaXN0ZXJJbnRlcnBvbGF0aW9ucyA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICByZXR1cm4gZXh0ZW5kKHRydWUsIHRoaXMuX3JlZ2lzdHJ5LmludGVycG9sYXRpb25zLCBkYXRhKTtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5vbkxvY2FsZUNoYW5nZSA9XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5hZGRMb2NhbGVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdCAgdGhpcy5hZGRMaXN0ZW5lcignbG9jYWxlY2hhbmdlJywgY2FsbGJhY2spO1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLm9mZkxvY2FsZUNoYW5nZSA9XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5yZW1vdmVMb2NhbGVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdCAgdGhpcy5yZW1vdmVMaXN0ZW5lcignbG9jYWxlY2hhbmdlJywgY2FsbGJhY2spO1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLm9uVHJhbnNsYXRpb25Ob3RGb3VuZCA9XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5hZGRUcmFuc2xhdGlvbk5vdEZvdW5kTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHQgIHRoaXMuYWRkTGlzdGVuZXIoJ3RyYW5zbGF0aW9ubm90Zm91bmQnLCBjYWxsYmFjayk7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUub2ZmVHJhbnNsYXRpb25Ob3RGb3VuZCA9XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5yZW1vdmVUcmFuc2xhdGlvbk5vdEZvdW5kTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHQgIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ3RyYW5zbGF0aW9ubm90Zm91bmQnLCBjYWxsYmFjayk7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG5cdCAgaWYgKCFpc0FycmF5KGtleSkgJiYgIWlzU3RyaW5nKGtleSkgfHwgIWtleS5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudDoga2V5Jyk7XG5cdCAgfVxuXHRcblx0ICBpZiAoaXNTeW1ib2woa2V5KSkge1xuXHQgICAga2V5ID0ga2V5LnN1YnN0cigxKTtcblx0ICB9XG5cdFxuXHQgIGtleSA9IHRoaXMuX3JlZ2lzdHJ5LmtleVRyYW5zZm9ybWVyKGtleSwgb3B0aW9ucyk7XG5cdFxuXHQgIG9wdGlvbnMgPSBleHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpO1xuXHRcblx0ICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgdGhpcy5fcmVnaXN0cnkubG9jYWxlO1xuXHQgIGRlbGV0ZSBvcHRpb25zLmxvY2FsZTtcblx0XG5cdCAgdmFyIHNjb3BlID0gb3B0aW9ucy5zY29wZSB8fCB0aGlzLl9yZWdpc3RyeS5zY29wZTtcblx0ICBkZWxldGUgb3B0aW9ucy5zY29wZTtcblx0XG5cdCAgdmFyIHNlcGFyYXRvciA9IG9wdGlvbnMuc2VwYXJhdG9yIHx8IHRoaXMuX3JlZ2lzdHJ5LnNlcGFyYXRvcjtcblx0ICBkZWxldGUgb3B0aW9ucy5zZXBhcmF0b3I7XG5cdFxuXHQgIHZhciBmYWxsYmFja0xvY2FsZSA9IG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUgfHwgdGhpcy5fcmVnaXN0cnkuZmFsbGJhY2tMb2NhbGU7XG5cdCAgZGVsZXRlIG9wdGlvbnMuZmFsbGJhY2tMb2NhbGU7XG5cdFxuXHQgIHZhciBrZXlzID0gdGhpcy5fbm9ybWFsaXplS2V5cyhsb2NhbGUsIHNjb3BlLCBrZXksIHNlcGFyYXRvcik7XG5cdFxuXHQgIHZhciBlbnRyeSA9IGdldEVudHJ5KHRoaXMuX3JlZ2lzdHJ5LnRyYW5zbGF0aW9ucywga2V5cyk7XG5cdFxuXHQgIGlmIChlbnRyeSA9PT0gbnVsbCAmJiBvcHRpb25zLmZhbGxiYWNrKSB7XG5cdCAgICB0aGlzLmVtaXQoJ3RyYW5zbGF0aW9ubm90Zm91bmQnLCBsb2NhbGUsIGtleSwgb3B0aW9ucy5mYWxsYmFjayk7XG5cdCAgICBlbnRyeSA9IHRoaXMuX2ZhbGxiYWNrKGxvY2FsZSwgc2NvcGUsIGtleSwgb3B0aW9ucy5mYWxsYmFjaywgb3B0aW9ucyk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZW50cnkgPT09IG51bGwgJiYgZmFsbGJhY2tMb2NhbGUgJiYgbG9jYWxlICE9PSBmYWxsYmFja0xvY2FsZSkge1xuXHQgICAgdmFyIGZhbGxiYWNrS2V5cyA9IHRoaXMuX25vcm1hbGl6ZUtleXMoZmFsbGJhY2tMb2NhbGUsIHNjb3BlLCBrZXksIHNlcGFyYXRvcik7XG5cdCAgICBlbnRyeSA9IGdldEVudHJ5KHRoaXMuX3JlZ2lzdHJ5LnRyYW5zbGF0aW9ucywgZmFsbGJhY2tLZXlzKTtcblx0XG5cdCAgICBpZiAoZW50cnkpIHtcblx0ICAgICAgbG9jYWxlID0gZmFsbGJhY2tMb2NhbGU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZW50cnkgPT09IG51bGwpIHtcblx0ICAgIGVudHJ5ID0gJ21pc3NpbmcgdHJhbnNsYXRpb246ICcgKyBrZXlzLmpvaW4oc2VwYXJhdG9yKTtcblx0ICB9XG5cdFxuXHQgIGVudHJ5ID0gdGhpcy5fcGx1cmFsaXplKGxvY2FsZSwgZW50cnksIG9wdGlvbnMuY291bnQpO1xuXHRcblx0ICBpZiAodGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGUgIT09IGZhbHNlICYmIG9wdGlvbnMuaW50ZXJwb2xhdGUgIT09IGZhbHNlKSB7XG5cdCAgICBlbnRyeSA9IHRoaXMuX2ludGVycG9sYXRlKGVudHJ5LCBvcHRpb25zKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBlbnRyeTtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS5sb2NhbGl6ZSA9IGZ1bmN0aW9uKG9iamVjdCwgb3B0aW9ucykge1xuXHQgIGlmICghaXNEYXRlKG9iamVjdCkpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudDogb2JqZWN0IG11c3QgYmUgYSBkYXRlJyk7XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zID0gZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcblx0XG5cdCAgdmFyIGxvY2FsZSAgPSBvcHRpb25zLmxvY2FsZSAgfHwgdGhpcy5fcmVnaXN0cnkubG9jYWxlO1xuXHQgIHZhciBzY29wZSAgID0gb3B0aW9ucy5zY29wZSAgIHx8IHRyYW5zbGF0aW9uU2NvcGU7XG5cdCAgdmFyIHR5cGUgICAgPSBvcHRpb25zLnR5cGUgICAgfHwgJ2RhdGV0aW1lJztcblx0ICB2YXIgZm9ybWF0ICA9IG9wdGlvbnMuZm9ybWF0ICB8fCAnZGVmYXVsdCc7XG5cdFxuXHQgIG9wdGlvbnMgPSB7IGxvY2FsZTogbG9jYWxlLCBzY29wZTogc2NvcGUsIGludGVycG9sYXRlOiBmYWxzZSB9O1xuXHQgIGZvcm1hdCAgPSB0aGlzLnRyYW5zbGF0ZShbJ2Zvcm1hdHMnLCB0eXBlLCBmb3JtYXRdLCBleHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpKTtcblx0XG5cdCAgcmV0dXJuIHN0cmZ0aW1lKG9iamVjdCwgZm9ybWF0LCB0aGlzLnRyYW5zbGF0ZSgnbmFtZXMnLCBvcHRpb25zKSk7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuX3BsdXJhbGl6ZSA9IGZ1bmN0aW9uKGxvY2FsZSwgZW50cnksIGNvdW50KSB7XG5cdCAgaWYgKHR5cGVvZiBlbnRyeSAhPT0gJ29iamVjdCcgfHwgZW50cnkgPT09IG51bGwgfHwgdHlwZW9mIGNvdW50ICE9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIGVudHJ5O1xuXHQgIH1cblx0XG5cdCAgdmFyIHBsdXJhbGl6ZUZ1bmMgPSB0aGlzLnRyYW5zbGF0ZSgncGx1cmFsaXplJywgeyBsb2NhbGU6IGxvY2FsZSwgc2NvcGU6IHRyYW5zbGF0aW9uU2NvcGUgfSk7XG5cdFxuXHQgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocGx1cmFsaXplRnVuYykgIT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcblx0ICAgIHJldHVybiBwbHVyYWxpemVGdW5jO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHBsdXJhbGl6ZUZ1bmMoZW50cnksIGNvdW50KTtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS53aXRoTG9jYWxlID0gZnVuY3Rpb24obG9jYWxlLCBjYWxsYmFjaywgY29udGV4dCkge1xuXHQgIHZhciBwcmV2aW91cyA9IHRoaXMuX3JlZ2lzdHJ5LmxvY2FsZTtcblx0ICB0aGlzLl9yZWdpc3RyeS5sb2NhbGUgPSBsb2NhbGU7XG5cdCAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG5cdCAgdGhpcy5fcmVnaXN0cnkubG9jYWxlID0gcHJldmlvdXM7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS53aXRoU2NvcGUgPSBmdW5jdGlvbihzY29wZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcblx0ICB2YXIgcHJldmlvdXMgPSB0aGlzLl9yZWdpc3RyeS5zY29wZTtcblx0ICB0aGlzLl9yZWdpc3RyeS5zY29wZSA9IHNjb3BlO1xuXHQgIHZhciByZXN1bHQgPSBjYWxsYmFjay5jYWxsKGNvbnRleHQpO1xuXHQgIHRoaXMuX3JlZ2lzdHJ5LnNjb3BlID0gcHJldmlvdXM7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdENvdW50ZXJwYXJ0LnByb3RvdHlwZS53aXRoU2VwYXJhdG9yID0gZnVuY3Rpb24oc2VwYXJhdG9yLCBjYWxsYmFjaywgY29udGV4dCkge1xuXHQgIHZhciBwcmV2aW91cyA9IHRoaXMuc2V0U2VwYXJhdG9yKHNlcGFyYXRvcik7XG5cdCAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG5cdCAgdGhpcy5zZXRTZXBhcmF0b3IocHJldmlvdXMpO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuX25vcm1hbGl6ZUtleXMgPSBmdW5jdGlvbihsb2NhbGUsIHNjb3BlLCBrZXksIHNlcGFyYXRvcikge1xuXHQgIHZhciBrZXlzID0gW107XG5cdFxuXHQgIGtleXMgPSBrZXlzLmNvbmNhdCh0aGlzLl9ub3JtYWxpemVLZXkobG9jYWxlLCBzZXBhcmF0b3IpKTtcblx0ICBrZXlzID0ga2V5cy5jb25jYXQodGhpcy5fbm9ybWFsaXplS2V5KHNjb3BlLCBzZXBhcmF0b3IpKTtcblx0ICBrZXlzID0ga2V5cy5jb25jYXQodGhpcy5fbm9ybWFsaXplS2V5KGtleSwgc2VwYXJhdG9yKSk7XG5cdFxuXHQgIHJldHVybiBrZXlzO1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLl9ub3JtYWxpemVLZXkgPSBmdW5jdGlvbihrZXksIHNlcGFyYXRvcikge1xuXHQgIHRoaXMuX3JlZ2lzdHJ5Lm5vcm1hbGl6ZWRLZXlzW3NlcGFyYXRvcl0gPSB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdIHx8IHt9O1xuXHRcblx0ICB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdW2tleV0gPSB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdW2tleV0gfHwgKGZ1bmN0aW9uKGtleSkge1xuXHQgICAgaWYgKGlzQXJyYXkoa2V5KSkge1xuXHQgICAgICB2YXIgbm9ybWFsaXplZEtleUFycmF5ID0ga2V5Lm1hcChmdW5jdGlvbihrKSB7IHJldHVybiB0aGlzLl9ub3JtYWxpemVLZXkoaywgc2VwYXJhdG9yKTsgfS5iaW5kKHRoaXMpKTtcblx0XG5cdCAgICAgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIG5vcm1hbGl6ZWRLZXlBcnJheSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3VuZGVmaW5lZCcgfHwga2V5ID09PSBudWxsKSB7XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIga2V5cyA9IGtleS5zcGxpdChzZXBhcmF0b3IpO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IGtleXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgICBpZiAoa2V5c1tpXSA9PT0gJycpIHtcblx0ICAgICAgICAgIGtleXMuc3BsaWNlKGksIDEpO1xuXHRcblx0ICAgICAgICAgIGlmICh0aGlzLl9yZWdpc3RyeS5rZWVwVHJhaWxpbmdEb3QgPT09IHRydWUgJiYgaSA9PSBrZXlzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBrZXlzW2tleXMubGVuZ3RoIC0gMV0gKz0gJycgKyBzZXBhcmF0b3I7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4ga2V5cztcblx0ICAgIH1cblx0ICB9LmJpbmQodGhpcykpKGtleSk7XG5cdFxuXHQgIHJldHVybiB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdW2tleV07XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuX2ludGVycG9sYXRlID0gZnVuY3Rpb24oZW50cnksIHZhbHVlcykge1xuXHQgIGlmICh0eXBlb2YgZW50cnkgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gZW50cnk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gc3ByaW50ZihlbnRyeSwgZXh0ZW5kKHt9LCB0aGlzLl9yZWdpc3RyeS5pbnRlcnBvbGF0aW9ucywgdmFsdWVzKSk7XG5cdH07XG5cdFxuXHRDb3VudGVycGFydC5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbihsb2NhbGUsIHNjb3BlLCBvYmplY3QsIHN1YmplY3QsIG9wdGlvbnMpIHtcblx0ICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgaWYgKG9wdGlvbnMucmVzb2x2ZSA9PT0gZmFsc2UpIHtcblx0ICAgIHJldHVybiBzdWJqZWN0O1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlc3VsdDtcblx0XG5cdCAgaWYgKGlzU3ltYm9sKHN1YmplY3QpKSB7XG5cdCAgICByZXN1bHQgPSB0aGlzLnRyYW5zbGF0ZShzdWJqZWN0LCBleHRlbmQoe30sIG9wdGlvbnMsIHsgbG9jYWxlOiBsb2NhbGUsIHNjb3BlOiBzY29wZSB9KSk7XG5cdCAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHN1YmplY3QpKSB7XG5cdCAgICB2YXIgZGF0ZU9yVGltZTtcblx0XG5cdCAgICBpZiAob3B0aW9ucy5vYmplY3QpIHtcblx0ICAgICAgZGF0ZU9yVGltZSA9IG9wdGlvbnMub2JqZWN0O1xuXHQgICAgICBkZWxldGUgb3B0aW9ucy5vYmplY3Q7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkYXRlT3JUaW1lID0gb2JqZWN0O1xuXHQgICAgfVxuXHRcblx0ICAgIHJlc3VsdCA9IHRoaXMuX3Jlc29sdmUobG9jYWxlLCBzY29wZSwgb2JqZWN0LCBzdWJqZWN0KGRhdGVPclRpbWUsIG9wdGlvbnMpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmVzdWx0ID0gc3ViamVjdDtcblx0ICB9XG5cdFxuXHQgIHJldHVybiAvXm1pc3NpbmcgdHJhbnNsYXRpb246Ly50ZXN0KHJlc3VsdCkgPyBudWxsIDogcmVzdWx0O1xuXHR9O1xuXHRcblx0Q291bnRlcnBhcnQucHJvdG90eXBlLl9mYWxsYmFjayA9IGZ1bmN0aW9uKGxvY2FsZSwgc2NvcGUsIG9iamVjdCwgc3ViamVjdCwgb3B0aW9ucykge1xuXHQgIG9wdGlvbnMgPSBleGNlcHQob3B0aW9ucywgJ2ZhbGxiYWNrJyk7XG5cdFxuXHQgIGlmIChpc0FycmF5KHN1YmplY3QpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzdWJqZWN0Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0ICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX3Jlc29sdmUobG9jYWxlLCBzY29wZSwgb2JqZWN0LCBzdWJqZWN0W2ldLCBvcHRpb25zKTtcblx0XG5cdCAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB0aGlzLl9yZXNvbHZlKGxvY2FsZSwgc2NvcGUsIG9iamVjdCwgc3ViamVjdCwgb3B0aW9ucyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGluc3RhbmNlID0gbmV3IENvdW50ZXJwYXJ0KCk7XG5cdFxuXHRmdW5jdGlvbiB0cmFuc2xhdGUoKSB7XG5cdCAgcmV0dXJuIGluc3RhbmNlLnRyYW5zbGF0ZS5hcHBseShpbnN0YW5jZSwgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0ZXh0ZW5kKHRyYW5zbGF0ZSwgaW5zdGFuY2UsIHtcblx0ICBJbnN0YW5jZTogQ291bnRlcnBhcnQsXG5cdCAgVHJhbnNsYXRvcjogQ291bnRlcnBhcnRcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRyYW5zbGF0ZTtcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0dmFyIEludGVycG9sYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdHZhciB0cmFuc2xhdG9yICA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBleHRlbmQgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgUHJvcFR5cGVzID0gUmVhY3QuUHJvcFR5cGVzO1xuXHRcblx0dmFyIHRyYW5zbGF0b3JUeXBlID0gUHJvcFR5cGVzLnNoYXBlKHtcblx0ICBnZXRMb2NhbGU6ICAgICAgICBQcm9wVHlwZXMuZnVuYyxcblx0ICBvbkxvY2FsZUNoYW5nZTogICBQcm9wVHlwZXMuZnVuYyxcblx0ICBvZmZMb2NhbGVDaGFuZ2U6ICBQcm9wVHlwZXMuZnVuYyxcblx0ICB0cmFuc2xhdGU6ICAgICAgICBQcm9wVHlwZXMuZnVuY1xuXHR9KTtcblx0XG5cdHZhciBrZXlUeXBlID0gUHJvcFR5cGVzLm9uZU9mVHlwZShbXG5cdCAgUHJvcFR5cGVzLnN0cmluZyxcblx0ICBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKVxuXHRdKTtcblx0XG5cdHZhciBUcmFuc2xhdGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6ICdUcmFuc2xhdGUnLFxuXHRcblx0ICBjb250ZXh0VHlwZXM6IHtcblx0ICAgIHRyYW5zbGF0b3I6IHRyYW5zbGF0b3JUeXBlLFxuXHQgICAgc2NvcGU6IGtleVR5cGVcblx0ICB9LFxuXHRcblx0ICBwcm9wVHlwZXM6IHtcblx0ICAgIGxvY2FsZTogUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGNvdW50OiAgUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIGNvbnRlbnQ6IGtleVR5cGUsXG5cdCAgICBzY29wZToga2V5VHlwZSxcblx0ICAgIGF0dHJpYnV0ZXM6IFByb3BUeXBlcy5vYmplY3QsXG5cdCAgICB3aXRoOiBQcm9wVHlwZXMub2JqZWN0XG5cdCAgfSxcblx0XG5cdCAgc3RhdGljczoge1xuXHQgICAgdGV4dENvbnRlbnRDb21wb25lbnRzOiBbJ3RpdGxlJywgJ29wdGlvbicsICd0ZXh0YXJlYSddXG5cdCAgfSxcblx0XG5cdCAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB7IGNvbXBvbmVudDogJ3NwYW4nIH07XG5cdCAgfSxcblx0XG5cdCAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB7IGxvY2FsZTogdGhpcy5nZXRUcmFuc2xhdG9yKCkuZ2V0TG9jYWxlKCkgfTtcblx0ICB9LFxuXHRcblx0ICBnZXRUcmFuc2xhdG9yOiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB0aGlzLmNvbnRleHQudHJhbnNsYXRvciB8fCB0cmFuc2xhdG9yO1xuXHQgIH0sXG5cdFxuXHQgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblx0ICAgIGlmICghdGhpcy5wcm9wcy5sb2NhbGUpIHtcblx0ICAgICAgdGhpcy5nZXRUcmFuc2xhdG9yKCkub25Mb2NhbGVDaGFuZ2UodGhpcy5sb2NhbGVDaGFuZ2VkKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG5cdCAgICBpZiAoIXRoaXMucHJvcHMubG9jYWxlKSB7XG5cdCAgICAgIHRoaXMuZ2V0VHJhbnNsYXRvcigpLm9mZkxvY2FsZUNoYW5nZSh0aGlzLmxvY2FsZUNoYW5nZWQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGxvY2FsZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld0xvY2FsZSkge1xuXHQgICAgdGhpcy5zZXRTdGF0ZSh7IGxvY2FsZTogbmV3TG9jYWxlIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcHJvcHMgICAgICAgICAgID0gZXh0ZW5kKHt9LCB0aGlzLnByb3BzKTtcblx0ICAgIHZhciB0cmFuc2xhdG9yICAgICAgPSB0aGlzLmdldFRyYW5zbGF0b3IoKTtcblx0ICAgIHZhciB0ZXh0Q29udGVudCAgICAgPSBUcmFuc2xhdGUudGV4dENvbnRlbnRDb21wb25lbnRzLmluZGV4T2YocHJvcHMuY29tcG9uZW50KSA+IC0xO1xuXHQgICAgdmFyIGludGVycG9sYXRlICAgICA9IHRleHRDb250ZW50IHx8IHByb3BzLnVuc2FmZSA9PT0gdHJ1ZTtcblx0ICAgIHZhciBpbnRlcnBvbGF0aW9ucyAgPSBwcm9wcy53aXRoO1xuXHRcblx0ICAgIHZhciBhdHRyaWJ1dGVLZXk7XG5cdFxuXHQgICAgdmFyIGF0dHJpYnV0ZVRyYW5zbGF0aW9uT3B0aW9ucyA9IGV4dGVuZChcblx0ICAgICAgeyBsb2NhbGU6IHRoaXMuc3RhdGUubG9jYWxlLCBzY29wZTogdGhpcy5jb250ZXh0LnNjb3BlIH0sXG5cdCAgICAgIHByb3BzLFxuXHQgICAgICBpbnRlcnBvbGF0aW9ucyxcblx0ICAgICAgeyBpbnRlcnBvbGF0ZTogdHJ1ZSB9XG5cdCAgICApO1xuXHRcblx0ICAgIHZhciBjb250ZW50VHJhbnNsYXRpb25PcHRpb25zID0gZXh0ZW5kKFxuXHQgICAgICB7fSxcblx0ICAgICAgYXR0cmlidXRlVHJhbnNsYXRpb25PcHRpb25zLFxuXHQgICAgICB7IGludGVycG9sYXRlOiBpbnRlcnBvbGF0ZSB9XG5cdCAgICApO1xuXHRcblx0ICAgIGRlbGV0ZSBwcm9wcy5sb2NhbGU7XG5cdCAgICBkZWxldGUgcHJvcHMuc2NvcGU7XG5cdCAgICBkZWxldGUgcHJvcHMuY291bnQ7XG5cdCAgICBkZWxldGUgcHJvcHMud2l0aDtcblx0XG5cdCAgICBpZiAocHJvcHMuYXR0cmlidXRlcykge1xuXHQgICAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzLmF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICBhdHRyaWJ1dGVLZXkgPSBwcm9wcy5hdHRyaWJ1dGVzW25hbWVdO1xuXHRcblx0ICAgICAgICBpZiAoYXR0cmlidXRlS2V5KSB7XG5cdCAgICAgICAgICBwcm9wc1tuYW1lXSA9IHRyYW5zbGF0b3IudHJhbnNsYXRlKGF0dHJpYnV0ZUtleSwgYXR0cmlidXRlVHJhbnNsYXRpb25PcHRpb25zKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGRlbGV0ZSBwcm9wcy5hdHRyaWJ1dGVzO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwcm9wcy5jb250ZW50KSB7XG5cdCAgICAgIHZhciB0cmFuc2xhdGlvbiAgICAgID0gdHJhbnNsYXRvci50cmFuc2xhdGUocHJvcHMuY29udGVudCwgY29udGVudFRyYW5zbGF0aW9uT3B0aW9ucyk7XG5cdCAgICAgIHZhciBpbnRlcnBvbGF0ZVByb3BzID0gZXh0ZW5kKHt9LCBwcm9wcywgeyB3aXRoOiBpbnRlcnBvbGF0aW9ucyB9KTtcblx0XG5cdCAgICAgIGRlbGV0ZSBpbnRlcnBvbGF0ZVByb3BzLmNvbnRlbnQ7XG5cdCAgICAgIGRlbGV0ZSBpbnRlcnBvbGF0ZVByb3BzLmNoaWxkcmVuO1xuXHRcblx0ICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW50ZXJwb2xhdGUsIGludGVycG9sYXRlUHJvcHMsIHRyYW5zbGF0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBjb21wb25lbnQgPSBwcm9wcy5jb21wb25lbnQ7XG5cdFxuXHQgICAgICBkZWxldGUgcHJvcHMuY29tcG9uZW50O1xuXHQgICAgICBkZWxldGUgcHJvcHMudW5zYWZlO1xuXHRcblx0ICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCBwcm9wcyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVHJhbnNsYXRlO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMudHJhbnNsYXRlID0gZnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG5cdCAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCBleHRlbmQoe30sIG9wdGlvbnMsIHsgY29udGVudDoga2V5IH0pKTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzLnRyYW5zbGF0b3JUeXBlID0gdHJhbnNsYXRvclR5cGU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cy5nZXRMb2NhbGUgPSB0cmFuc2xhdG9yLmdldExvY2FsZS5iaW5kKHRyYW5zbGF0b3IpO1xuXHRtb2R1bGUuZXhwb3J0cy5zZXRMb2NhbGUgPSB0cmFuc2xhdG9yLnNldExvY2FsZS5iaW5kKHRyYW5zbGF0b3IpO1xuXHRtb2R1bGUuZXhwb3J0cy5vbkxvY2FsZUNoYW5nZSA9IHRyYW5zbGF0b3Iub25Mb2NhbGVDaGFuZ2UuYmluZCh0cmFuc2xhdG9yKTtcblx0bW9kdWxlLmV4cG9ydHMub2ZmTG9jYWxlQ2hhbmdlID0gdHJhbnNsYXRvci5vZmZMb2NhbGVDaGFuZ2UuYmluZCh0cmFuc2xhdG9yKTtcblx0bW9kdWxlLmV4cG9ydHMucmVnaXN0ZXJUcmFuc2xhdGlvbnMgPSB0cmFuc2xhdG9yLnJlZ2lzdGVyVHJhbnNsYXRpb25zLmJpbmQodHJhbnNsYXRvcik7XG5cdFxuXHRmdW5jdGlvbiB3aXRoVHJhbnNsYXRpb25zKERlY29yYXRlZENvbXBvbmVudCwgdHJhbnNsYXRpb25zKSB7XG5cdCAgaWYgKCF0cmFuc2xhdGlvbnMpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbihkZWNvcmF0ZWRDb21wb25lbnQpIHtcblx0ICAgICAgcmV0dXJuIHdpdGhUcmFuc2xhdGlvbnMoZGVjb3JhdGVkQ29tcG9uZW50LCBEZWNvcmF0ZWRDb21wb25lbnQpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHZhciBkaXNwbGF5TmFtZSA9XG5cdCAgICBEZWNvcmF0ZWRDb21wb25lbnQuZGlzcGxheU5hbWUgfHxcblx0ICAgIERlY29yYXRlZENvbXBvbmVudC5uYW1lIHx8XG5cdCAgICAnQ29tcG9uZW50Jztcblx0XG5cdCAgZm9yICh2YXIgbG9jYWxlIGluIHRyYW5zbGF0aW9ucykge1xuXHQgICAgdmFyIGxvY2FsZVRyYW5zbGF0aW9ucyA9IHRyYW5zbGF0aW9uc1tsb2NhbGVdO1xuXHQgICAgdmFyIHNjb3BlZFRyYW5zbGF0aW9ucyA9IHt9O1xuXHRcblx0ICAgIHNjb3BlZFRyYW5zbGF0aW9uc1tkaXNwbGF5TmFtZV0gPSBsb2NhbGVUcmFuc2xhdGlvbnM7XG5cdFxuXHQgICAgdHJhbnNsYXRvci5yZWdpc3RlclRyYW5zbGF0aW9ucyhsb2NhbGUsIHNjb3BlZFRyYW5zbGF0aW9ucyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lICsgJ1dpdGhUcmFuc2xhdGlvbnMnLFxuXHRcblx0ICAgIGNoaWxkQ29udGV4dFR5cGVzOiB7XG5cdCAgICAgIHNjb3BlOiBrZXlUeXBlXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldENoaWxkQ29udGV4dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgc2NvcGU6IGRpc3BsYXlOYW1lXG5cdCAgICAgIH07XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERlY29yYXRlZENvbXBvbmVudCwgdGhpcy5wcm9wcyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzLndpdGhUcmFuc2xhdGlvbnMgPSB3aXRoVHJhbnNsYXRpb25zO1xuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIFNpbWlsYXIgdG8gaW52YXJpYW50IGJ1dCBvbmx5IGxvZ3MgYSB3YXJuaW5nIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IG1ldC5cblx0ICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuXHQgKiBwYXRocy4gUmVtb3ZpbmcgdGhlIGxvZ2dpbmcgY29kZSBmb3IgcHJvZHVjdGlvbiBlbnZpcm9ubWVudHMgd2lsbCBrZWVwIHRoZVxuXHQgKiBzYW1lIGxvZ2ljIGFuZCBmb2xsb3cgdGhlIHNhbWUgY29kZSBwYXRocy5cblx0ICovXG5cdFxuXHR2YXIgd2FybmluZyA9IGVtcHR5RnVuY3Rpb247XG5cdFxuXHRpZiAoZmFsc2UpIHtcblx0ICAoZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZyhmb3JtYXQpIHtcblx0ICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBhcmdJbmRleCA9IDA7XG5cdCAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG5cdCAgICAgIH1cblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG5cdCAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG5cdCAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuXHQgICAgICB9IGNhdGNoICh4KSB7fVxuXHQgICAgfTtcblx0XG5cdCAgICB3YXJuaW5nID0gZnVuY3Rpb24gd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCkge1xuXHQgICAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZm9ybWF0LmluZGV4T2YoJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICcpID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgQ29tcG9zaXRlQ29tcG9uZW50IHByb3B0eXBlIGNoZWNrLlxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIWNvbmRpdGlvbikge1xuXHQgICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMiA/IF9sZW4yIC0gMiA6IDApLCBfa2V5MiA9IDI7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcblx0ICAgICAgICAgIGFyZ3NbX2tleTIgLSAyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBwcmludFdhcm5pbmcuYXBwbHkodW5kZWZpbmVkLCBbZm9ybWF0XS5jb25jYXQoYXJncykpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0pKCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gd2FybmluZztcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFbGVtZW50XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9hc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIFJlYWN0Q3VycmVudE93bmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHRcblx0Ly8gVGhlIFN5bWJvbCB1c2VkIHRvIHRhZyB0aGUgUmVhY3RFbGVtZW50IHR5cGUuIElmIHRoZXJlIGlzIG5vIG5hdGl2ZSBTeW1ib2xcblx0Ly8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLlxuXHR2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2xbJ2ZvciddICYmIFN5bWJvbFsnZm9yJ10oJ3JlYWN0LmVsZW1lbnQnKSB8fCAweGVhYzc7XG5cdFxuXHR2YXIgUkVTRVJWRURfUFJPUFMgPSB7XG5cdCAga2V5OiB0cnVlLFxuXHQgIHJlZjogdHJ1ZSxcblx0ICBfX3NlbGY6IHRydWUsXG5cdCAgX19zb3VyY2U6IHRydWVcblx0fTtcblx0XG5cdHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biwgc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd247XG5cdFxuXHRmdW5jdGlvbiBoYXNWYWxpZFJlZihjb25maWcpIHtcblx0ICBpZiAoZmFsc2UpIHtcblx0ICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgJ3JlZicpKSB7XG5cdCAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgJ3JlZicpLmdldDtcblx0ICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGNvbmZpZy5yZWYgIT09IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFzVmFsaWRLZXkoY29uZmlnKSB7XG5cdCAgaWYgKGZhbHNlKSB7XG5cdCAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsICdrZXknKSkge1xuXHQgICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsICdrZXknKS5nZXQ7XG5cdCAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBjb25maWcua2V5ICE9PSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSkge1xuXHQgIHZhciB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIXNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duKSB7XG5cdCAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duID0gdHJ1ZTtcblx0ICAgICAgIGZhbHNlID8gd2FybmluZyhmYWxzZSwgJyVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0ICcgKyAnaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSAnICsgJ3ZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgJyArICdwcm9wLiAoaHR0cHM6Ly9mYi5tZS9yZWFjdC1zcGVjaWFsLXByb3BzKScsIGRpc3BsYXlOYW1lKSA6IHZvaWQgMDtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9IHRydWU7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCAna2V5Jywge1xuXHQgICAgZ2V0OiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXksXG5cdCAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVmaW5lUmVmUHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG5cdCAgdmFyIHdhcm5BYm91dEFjY2Vzc2luZ1JlZiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd24pIHtcblx0ICAgICAgc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd24gPSB0cnVlO1xuXHQgICAgICAgZmFsc2UgPyB3YXJuaW5nKGZhbHNlLCAnJXM6IGByZWZgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgJyArICdpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lICcgKyAndmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCAnICsgJ3Byb3AuIChodHRwczovL2ZiLm1lL3JlYWN0LXNwZWNpYWwtcHJvcHMpJywgZGlzcGxheU5hbWUpIDogdm9pZCAwO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgd2FybkFib3V0QWNjZXNzaW5nUmVmLmlzUmVhY3RXYXJuaW5nID0gdHJ1ZTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvcHMsICdyZWYnLCB7XG5cdCAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ1JlZixcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IFJlYWN0IGVsZW1lbnQuIFRoaXMgbm8gbG9uZ2VyIGFkaGVyZXMgdG9cblx0ICogdGhlIGNsYXNzIHBhdHRlcm4sIHNvIGRvIG5vdCB1c2UgbmV3IHRvIGNhbGwgaXQuIEFsc28sIG5vIGluc3RhbmNlb2YgY2hlY2tcblx0ICogd2lsbCB3b3JrLiBJbnN0ZWFkIHRlc3QgJCR0eXBlb2YgZmllbGQgYWdhaW5zdCBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgdG8gY2hlY2tcblx0ICogaWYgc29tZXRoaW5nIGlzIGEgUmVhY3QgRWxlbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB0eXBlXG5cdCAqIEBwYXJhbSB7Kn0ga2V5XG5cdCAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVmXG5cdCAqIEBwYXJhbSB7Kn0gc2VsZiBBICp0ZW1wb3JhcnkqIGhlbHBlciB0byBkZXRlY3QgcGxhY2VzIHdoZXJlIGB0aGlzYCBpc1xuXHQgKiBkaWZmZXJlbnQgZnJvbSB0aGUgYG93bmVyYCB3aGVuIFJlYWN0LmNyZWF0ZUVsZW1lbnQgaXMgY2FsbGVkLCBzbyB0aGF0IHdlXG5cdCAqIGNhbiB3YXJuLiBXZSB3YW50IHRvIGdldCByaWQgb2Ygb3duZXIgYW5kIHJlcGxhY2Ugc3RyaW5nIGByZWZgcyB3aXRoIGFycm93XG5cdCAqIGZ1bmN0aW9ucywgYW5kIGFzIGxvbmcgYXMgYHRoaXNgIGFuZCBvd25lciBhcmUgdGhlIHNhbWUsIHRoZXJlIHdpbGwgYmUgbm9cblx0ICogY2hhbmdlIGluIGJlaGF2aW9yLlxuXHQgKiBAcGFyYW0geyp9IHNvdXJjZSBBbiBhbm5vdGF0aW9uIG9iamVjdCAoYWRkZWQgYnkgYSB0cmFuc3BpbGVyIG9yIG90aGVyd2lzZSlcblx0ICogaW5kaWNhdGluZyBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGFuZC9vciBvdGhlciBpbmZvcm1hdGlvbi5cblx0ICogQHBhcmFtIHsqfSBvd25lclxuXHQgKiBAcGFyYW0geyp9IHByb3BzXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0dmFyIFJlYWN0RWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcblx0ICB2YXIgZWxlbWVudCA9IHtcblx0ICAgIC8vIFRoaXMgdGFnIGFsbG93IHVzIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoaXMgYXMgYSBSZWFjdCBFbGVtZW50XG5cdCAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuXHRcblx0ICAgIC8vIEJ1aWx0LWluIHByb3BlcnRpZXMgdGhhdCBiZWxvbmcgb24gdGhlIGVsZW1lbnRcblx0ICAgIHR5cGU6IHR5cGUsXG5cdCAgICBrZXk6IGtleSxcblx0ICAgIHJlZjogcmVmLFxuXHQgICAgcHJvcHM6IHByb3BzLFxuXHRcblx0ICAgIC8vIFJlY29yZCB0aGUgY29tcG9uZW50IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGlzIGVsZW1lbnQuXG5cdCAgICBfb3duZXI6IG93bmVyXG5cdCAgfTtcblx0XG5cdCAgaWYgKGZhbHNlKSB7XG5cdCAgICAvLyBUaGUgdmFsaWRhdGlvbiBmbGFnIGlzIGN1cnJlbnRseSBtdXRhdGl2ZS4gV2UgcHV0IGl0IG9uXG5cdCAgICAvLyBhbiBleHRlcm5hbCBiYWNraW5nIHN0b3JlIHNvIHRoYXQgd2UgY2FuIGZyZWV6ZSB0aGUgd2hvbGUgb2JqZWN0LlxuXHQgICAgLy8gVGhpcyBjYW4gYmUgcmVwbGFjZWQgd2l0aCBhIFdlYWtNYXAgb25jZSB0aGV5IGFyZSBpbXBsZW1lbnRlZCBpblxuXHQgICAgLy8gY29tbW9ubHkgdXNlZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMuXG5cdCAgICBlbGVtZW50Ll9zdG9yZSA9IHt9O1xuXHQgICAgdmFyIHNoYWRvd0NoaWxkcmVuID0gQXJyYXkuaXNBcnJheShwcm9wcy5jaGlsZHJlbikgPyBwcm9wcy5jaGlsZHJlbi5zbGljZSgwKSA6IHByb3BzLmNoaWxkcmVuO1xuXHRcblx0ICAgIC8vIFRvIG1ha2UgY29tcGFyaW5nIFJlYWN0RWxlbWVudHMgZWFzaWVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSBtYWtlXG5cdCAgICAvLyB0aGUgdmFsaWRhdGlvbiBmbGFnIG5vbi1lbnVtZXJhYmxlICh3aGVyZSBwb3NzaWJsZSwgd2hpY2ggc2hvdWxkXG5cdCAgICAvLyBpbmNsdWRlIGV2ZXJ5IGVudmlyb25tZW50IHdlIHJ1biB0ZXN0cyBpbiksIHNvIHRoZSB0ZXN0IGZyYW1ld29ya1xuXHQgICAgLy8gaWdub3JlcyBpdC5cblx0ICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudC5fc3RvcmUsICd2YWxpZGF0ZWQnLCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICB2YWx1ZTogZmFsc2Vcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIHNlbGYgYW5kIHNvdXJjZSBhcmUgREVWIG9ubHkgcHJvcGVydGllcy5cblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc2VsZicsIHtcblx0ICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuXHQgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcblx0ICAgICAgICB2YWx1ZTogc2VsZlxuXHQgICAgICB9KTtcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc2hhZG93Q2hpbGRyZW4nLCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogZmFsc2UsXG5cdCAgICAgICAgdmFsdWU6IHNoYWRvd0NoaWxkcmVuXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyBUd28gZWxlbWVudHMgY3JlYXRlZCBpbiB0d28gZGlmZmVyZW50IHBsYWNlcyBzaG91bGQgYmUgY29uc2lkZXJlZFxuXHQgICAgICAvLyBlcXVhbCBmb3IgdGVzdGluZyBwdXJwb3NlcyBhbmQgdGhlcmVmb3JlIHdlIGhpZGUgaXQgZnJvbSBlbnVtZXJhdGlvbi5cblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc291cmNlJywge1xuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuXHQgICAgICAgIHZhbHVlOiBzb3VyY2Vcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgPSBmYWxzZTtcblx0ICAgICAgZWxlbWVudC5fc2VsZiA9IHNlbGY7XG5cdCAgICAgIGVsZW1lbnQuX3NoYWRvd0NoaWxkcmVuID0gc2hhZG93Q2hpbGRyZW47XG5cdCAgICAgIGVsZW1lbnQuX3NvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIGlmIChPYmplY3QuZnJlZXplKSB7XG5cdCAgICAgIE9iamVjdC5mcmVlemUoZWxlbWVudC5wcm9wcyk7XG5cdCAgICAgIE9iamVjdC5mcmVlemUoZWxlbWVudCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWxlbWVudDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW5kIHJldHVybiBhIG5ldyBSZWFjdEVsZW1lbnQgb2YgdGhlIGdpdmVuIHR5cGUuXG5cdCAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jcmVhdGVlbGVtZW50XG5cdCAqL1xuXHRSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG5cdCAgdmFyIHByb3BOYW1lO1xuXHRcblx0ICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG5cdCAgdmFyIHByb3BzID0ge307XG5cdFxuXHQgIHZhciBrZXkgPSBudWxsO1xuXHQgIHZhciByZWYgPSBudWxsO1xuXHQgIHZhciBzZWxmID0gbnVsbDtcblx0ICB2YXIgc291cmNlID0gbnVsbDtcblx0XG5cdCAgaWYgKGNvbmZpZyAhPSBudWxsKSB7XG5cdCAgICBpZiAoaGFzVmFsaWRSZWYoY29uZmlnKSkge1xuXHQgICAgICByZWYgPSBjb25maWcucmVmO1xuXHQgICAgfVxuXHQgICAgaWYgKGhhc1ZhbGlkS2V5KGNvbmZpZykpIHtcblx0ICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuXHQgICAgfVxuXHRcblx0ICAgIHNlbGYgPSBjb25maWcuX19zZWxmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLl9fc2VsZjtcblx0ICAgIHNvdXJjZSA9IGNvbmZpZy5fX3NvdXJjZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGNvbmZpZy5fX3NvdXJjZTtcblx0ICAgIC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIGFyZSBhZGRlZCB0byBhIG5ldyBwcm9wcyBvYmplY3Rcblx0ICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG5cdCAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG5cdCAgLy8gdGhlIG5ld2x5IGFsbG9jYXRlZCBwcm9wcyBvYmplY3QuXG5cdCAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG5cdCAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG5cdCAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG5cdCAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7IGkrKykge1xuXHQgICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcblx0ICAgIH1cblx0ICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRBcnJheTtcblx0ICB9XG5cdFxuXHQgIC8vIFJlc29sdmUgZGVmYXVsdCBwcm9wc1xuXHQgIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG5cdCAgICB2YXIgZGVmYXVsdFByb3BzID0gdHlwZS5kZWZhdWx0UHJvcHM7XG5cdCAgICBmb3IgKHByb3BOYW1lIGluIGRlZmF1bHRQcm9wcykge1xuXHQgICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChmYWxzZSkge1xuXHQgICAgaWYgKGtleSB8fCByZWYpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBwcm9wcy4kJHR5cGVvZiA9PT0gJ3VuZGVmaW5lZCcgfHwgcHJvcHMuJCR0eXBlb2YgIT09IFJFQUNUX0VMRU1FTlRfVFlQRSkge1xuXHQgICAgICAgIHZhciBkaXNwbGF5TmFtZSA9IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgJ1Vua25vd24nIDogdHlwZTtcblx0ICAgICAgICBpZiAoa2V5KSB7XG5cdCAgICAgICAgICBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVmKSB7XG5cdCAgICAgICAgICBkZWZpbmVSZWZQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQsIHByb3BzKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIFJlYWN0RWxlbWVudHMgb2YgYSBnaXZlbiB0eXBlLlxuXHQgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90b3AtbGV2ZWwtYXBpLmh0bWwjcmVhY3QuY3JlYXRlZmFjdG9yeVxuXHQgKi9cblx0UmVhY3RFbGVtZW50LmNyZWF0ZUZhY3RvcnkgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIHZhciBmYWN0b3J5ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChudWxsLCB0eXBlKTtcblx0ICAvLyBFeHBvc2UgdGhlIHR5cGUgb24gdGhlIGZhY3RvcnkgYW5kIHRoZSBwcm90b3R5cGUgc28gdGhhdCBpdCBjYW4gYmVcblx0ICAvLyBlYXNpbHkgYWNjZXNzZWQgb24gZWxlbWVudHMuIEUuZy4gYDxGb28gLz4udHlwZSA9PT0gRm9vYC5cblx0ICAvLyBUaGlzIHNob3VsZCBub3QgYmUgbmFtZWQgYGNvbnN0cnVjdG9yYCBzaW5jZSB0aGlzIG1heSBub3QgYmUgdGhlIGZ1bmN0aW9uXG5cdCAgLy8gdGhhdCBjcmVhdGVkIHRoZSBlbGVtZW50LCBhbmQgaXQgbWF5IG5vdCBldmVuIGJlIGEgY29uc3RydWN0b3IuXG5cdCAgLy8gTGVnYWN5IGhvb2sgVE9ETzogV2FybiBpZiB0aGlzIGlzIGFjY2Vzc2VkXG5cdCAgZmFjdG9yeS50eXBlID0gdHlwZTtcblx0ICByZXR1cm4gZmFjdG9yeTtcblx0fTtcblx0XG5cdFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3S2V5KSB7XG5cdCAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBuZXdLZXksIG9sZEVsZW1lbnQucmVmLCBvbGRFbGVtZW50Ll9zZWxmLCBvbGRFbGVtZW50Ll9zb3VyY2UsIG9sZEVsZW1lbnQuX293bmVyLCBvbGRFbGVtZW50LnByb3BzKTtcblx0XG5cdCAgcmV0dXJuIG5ld0VsZW1lbnQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2xvbmUgYW5kIHJldHVybiBhIG5ldyBSZWFjdEVsZW1lbnQgdXNpbmcgZWxlbWVudCBhcyB0aGUgc3RhcnRpbmcgcG9pbnQuXG5cdCAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jbG9uZWVsZW1lbnRcblx0ICovXG5cdFJlYWN0RWxlbWVudC5jbG9uZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29uZmlnLCBjaGlsZHJlbikge1xuXHQgIHZhciBwcm9wTmFtZTtcblx0XG5cdCAgLy8gT3JpZ2luYWwgcHJvcHMgYXJlIGNvcGllZFxuXHQgIHZhciBwcm9wcyA9IF9hc3NpZ24oe30sIGVsZW1lbnQucHJvcHMpO1xuXHRcblx0ICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG5cdCAgdmFyIGtleSA9IGVsZW1lbnQua2V5O1xuXHQgIHZhciByZWYgPSBlbGVtZW50LnJlZjtcblx0ICAvLyBTZWxmIGlzIHByZXNlcnZlZCBzaW5jZSB0aGUgb3duZXIgaXMgcHJlc2VydmVkLlxuXHQgIHZhciBzZWxmID0gZWxlbWVudC5fc2VsZjtcblx0ICAvLyBTb3VyY2UgaXMgcHJlc2VydmVkIHNpbmNlIGNsb25lRWxlbWVudCBpcyB1bmxpa2VseSB0byBiZSB0YXJnZXRlZCBieSBhXG5cdCAgLy8gdHJhbnNwaWxlciwgYW5kIHRoZSBvcmlnaW5hbCBzb3VyY2UgaXMgcHJvYmFibHkgYSBiZXR0ZXIgaW5kaWNhdG9yIG9mIHRoZVxuXHQgIC8vIHRydWUgb3duZXIuXG5cdCAgdmFyIHNvdXJjZSA9IGVsZW1lbnQuX3NvdXJjZTtcblx0XG5cdCAgLy8gT3duZXIgd2lsbCBiZSBwcmVzZXJ2ZWQsIHVubGVzcyByZWYgaXMgb3ZlcnJpZGRlblxuXHQgIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuXHRcblx0ICBpZiAoY29uZmlnICE9IG51bGwpIHtcblx0ICAgIGlmIChoYXNWYWxpZFJlZihjb25maWcpKSB7XG5cdCAgICAgIC8vIFNpbGVudGx5IHN0ZWFsIHRoZSByZWYgZnJvbSB0aGUgcGFyZW50LlxuXHQgICAgICByZWYgPSBjb25maWcucmVmO1xuXHQgICAgICBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG5cdCAgICB9XG5cdCAgICBpZiAoaGFzVmFsaWRLZXkoY29uZmlnKSkge1xuXHQgICAgICBrZXkgPSAnJyArIGNvbmZpZy5rZXk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgb3ZlcnJpZGUgZXhpc3RpbmcgcHJvcHNcblx0ICAgIHZhciBkZWZhdWx0UHJvcHM7XG5cdCAgICBpZiAoZWxlbWVudC50eXBlICYmIGVsZW1lbnQudHlwZS5kZWZhdWx0UHJvcHMpIHtcblx0ICAgICAgZGVmYXVsdFByb3BzID0gZWxlbWVudC50eXBlLmRlZmF1bHRQcm9wcztcblx0ICAgIH1cblx0ICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG5cdCAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICBpZiAoY29uZmlnW3Byb3BOYW1lXSA9PT0gdW5kZWZpbmVkICYmIGRlZmF1bHRQcm9wcyAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAvLyBSZXNvbHZlIGRlZmF1bHQgcHJvcHNcblx0ICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGRlZmF1bHRQcm9wc1twcm9wTmFtZV07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG5cdCAgLy8gdGhlIG5ld2x5IGFsbG9jYXRlZCBwcm9wcyBvYmplY3QuXG5cdCAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG5cdCAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG5cdCAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuXHQgIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG5cdCAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7IGkrKykge1xuXHQgICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcblx0ICAgIH1cblx0ICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRBcnJheTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBSZWFjdEVsZW1lbnQoZWxlbWVudC50eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFZlcmlmaWVzIHRoZSBvYmplY3QgaXMgYSBSZWFjdEVsZW1lbnQuXG5cdCAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5pc3ZhbGlkZWxlbWVudFxuXHQgKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuXHQgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgY29tcG9uZW50LlxuXHQgKiBAZmluYWxcblx0ICovXG5cdFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcblx0ICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xuXHR9O1xuXHRcblx0UmVhY3RFbGVtZW50LlJFQUNUX0VMRU1FTlRfVFlQRSA9IFJFQUNUX0VMRU1FTlRfVFlQRTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50O1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG5cdCAqXG5cdCAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG5cdCAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuXHQgKiBleHBlY3RpbmcuXG5cdCAqXG5cdCAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG5cdCAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcblx0ICBpZiAoZmFsc2UpIHtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoIWNvbmRpdGlvbikge1xuXHQgICAgdmFyIGVycm9yO1xuXHQgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcblx0ICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcblx0ICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcblx0ICAgICAgfSkpO1xuXHQgICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuXHQgICAgfVxuXHRcblx0ICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcblx0ICAgIHRocm93IGVycm9yO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdHZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblx0XG5cdGZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRcdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gT2JqZWN0KHZhbCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNob3VsZFVzZU5hdGl2ZSgpIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKCFPYmplY3QuYXNzaWduKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBEZXRlY3QgYnVnZ3kgcHJvcGVydHkgZW51bWVyYXRpb24gb3JkZXIgaW4gb2xkZXIgVjggdmVyc2lvbnMuXG5cdFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxuXHRcdFx0dmFyIHRlc3QxID0gbmV3IFN0cmluZygnYWJjJyk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cdFx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0XHRpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDEpWzBdID09PSAnNScpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG5cdFx0XHRcdHRlc3QyWydfJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaTtcblx0XHRcdH1cblx0XHRcdHZhciBvcmRlcjIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MikubWFwKGZ1bmN0aW9uIChuKSB7XG5cdFx0XHRcdHJldHVybiB0ZXN0MltuXTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKG9yZGVyMi5qb2luKCcnKSAhPT0gJzAxMjM0NTY3ODknKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG5cdFx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKGxldHRlcikge1xuXHRcdFx0XHR0ZXN0M1tsZXR0ZXJdID0gbGV0dGVyO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgdGVzdDMpKS5qb2luKCcnKSAhPT1cblx0XHRcdFx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHQvLyBXZSBkb24ndCBleHBlY3QgYW55IG9mIHRoZSBhYm92ZSB0byB0aHJvdywgYnV0IGJldHRlciB0byBiZSBzYWZlLlxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0XHR2YXIgZnJvbTtcblx0XHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHRcdHZhciBzeW1ib2xzO1xuXHRcblx0XHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXHRcblx0XHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0XHR0b1trZXldID0gZnJvbVtrZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcblx0XHRcdFx0c3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZnJvbSk7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHRcdHRvW3N5bWJvbHNbaV1dID0gZnJvbVtzeW1ib2xzW2ldXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiB0bztcblx0fTtcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIG1ldHJpYyA9IHtcblx0XG5cdCAgICAvLyAqKioqKioqKioqKioqKioqKk5FVyBFVkVOVFMgVFJBQ0tFRCoqKioqKioqKioqKioqKioqKipcblx0ICAgIExPR0lOX1NVQ0NFU1NGVUw6ICdMb2dpbiBTdWNjZXNzZnVsJyxcblx0ICAgIFNFQ1VSSVRZX1FVRVNUSU9OU19DT01QTEVURUQ6ICdTZWN1cml0eSBRdWVzdGlvbnMgQ29tcGxldGVkJyxcblx0XG5cdCAgICAvLyBMb2dpbiBFdmVudHNcblx0ICAgIEFUVEVNUFRfUEFTU1dPUkRfUkVDT1ZFUlk6ICdBdHRlbXB0IHRvIFJlY292ZXIgUGFzc3dvcmQnLCAvLyB4XG5cdCAgICBBVFRFTVBUX1BBU1NXT1JEX1JFQ09WRVJZX1FVRVNUSU9OUzogJ0F0dGVtcHQgdG8gQW5zd2VyIFBhc3N3b3JkIFJlY292ZXJ5IFF1ZXN0aW9ucycsXG5cdCAgICBBVFRFTVBUX1VTRVJOQU1FX1JFQ09WRVJZOiAnQXR0ZW1wdCB0byBSZWNvdmVyIFVzZXJuYW1lJywgLy8geFxuXHQgICAgUEFTU1dPUkRfUkVDT1ZFUllfU1VDQ0VTUzogJ1N1Ym1pdHRlZCBQYXNzd29yZCBSZWNvdmVyeSBTdWNjZXNzZnVsbHknLFxuXHQgICAgVVNFUk5BTUVfUkVDT1ZFUllfU1VDQ0VTUzogJ1N1Ym1pdHRlZCBVc2VybmFtZSBSZWNvdmVyeSBTdWNjZXNzZnVsbHknLFxuXHRcblx0ICAgIC8vIEZsb29yaW5nIGNhclxuXHQgICAgREVBTEVSX1NVQ0NFU1NGVUxfRkxPT1JJTkdfUkVRVUVTVF9TVUJNSVRURUQ6ICdEZWFsZXIgLSBTdWNjZXNzZnVsIEZsb29yaW5nIFJlcXVlc3QgU3VibWl0dGVkJyxcblx0ICAgIEZMT09SUExBTl9SRVFVRVNUX1JFU1VMVDogJ0Zsb29ycGxhbiBSZXF1ZXN0IFJlc3VsdCcsXG5cdFxuXHQgICAgLy8gR2xvYmFsIEV2ZW50c1xuXHQgICAgQ0xJQ0tfQ0hBVF9OT1dfTElOSzogJ0NsaWNrIENoYXQgTm93IExpbmsnLCAvLyB4XG5cdFxuXHQgICAgLy8gQ2hlY2tvdXQgRXZlbnRzXG5cdCAgICBERUFMRVJfUkVQT1JUU19FWFBPUlRfUEFZTUVOVFNfU1VNTUFSWV9CVVRUT046ICdEZWFsZXIgUmVwb3J0cyAtIEV4cG9ydCBQYXltZW50IFN1bW1hcnknLCAvLyB4XG5cdCAgICBERUFMRVJfUEFZTUVOVF9TVUJNSVRURUQ6ICdEZWFsZXIgLSBQYXltZW50IFN1Ym1pdHRlZCcsXG5cdCAgICBERUFMRVJfQ0hFQ0tPVVRfUkVDRUlQVF9HRU5FUkFURUQ6ICdEZWFsZXIgLSBDaGVja291dCBSZWNlaXB0IEdlbmVyYXRlZCcsXG5cdFxuXHQgICAgLy8gUkVDRUlQVCBQYWdlXG5cdCAgICBERUFMRVJfUkVDRUlQVF9QQUdFX1JFQ0VJUFRfR0VORVJBVEVEOiAnRGVhbGVyIC0gUmVjZWlwdCBQYWdlIFJlY2VpcHQgR2VuZXJhdGVkJyxcblx0XG5cdCAgICAvLyBWZWhpY2xlIGRldGFpbHNcblx0ICAgIERFQUxFUl9WSUVXX1ZFSElDTEVfREVUQUlMUzogJ0RlYWxlciAtIFZpZXcgVmVoaWNsZSBEZXRhaWxzJyxcblx0ICAgIERFQUxFUl9WRUhJQ0xFX0RFVEFJTFNfQVRUQUNIRURfRE9DVU1FTlRTOiAnRGVhbGVyIC0gVmVoaWNsZSBEZXRhaWxzIEF0dGFjaGVkIERvY3VtZW50cycsXG5cdFxuXHQgICAgLy8gUHJvbW8gUGFnZVxuXHQgICAgVklFV19QUk9NT19QQUdFOiAnVmlldyBQcm9tbyBQYWdlJyxcblx0ICAgIENMSUNLX1BST01PX0RFVEFJTFM6ICdDbGljayBQcm9tbyBEZXRhaWxzJyxcblx0XG5cdCAgICAvLyBUaXRsZSBSZWxlYXNlIFByb2dyYW0gRXZlbnRzXG5cdCAgICBERUFMRVJfVElUTEVfUkVMRUFTRV9SRVFVRVNUOiAnRGVhbGVyIC0gUmVxdWVzdGVkIFRpdGxlIFJlbGVhc2UnLCAvLyB4XG5cdFxuXHQgICAgLy9WaWV3IGEgUmVwb3J0IEV2ZW50c1xuXHQgICAgREVBTEVSX1JFUE9SVFNfVkVISUNMRV9ISVNUT1JZX0RFVEFJTDogJ0RlYWxlciBSZXBvcnRzIC0gVmVoaWNsZSBIaXN0b3J5IERldGFpbCcsXG5cdCAgICBERUFMRVJfUkVQT1JUU19SRUNFSVZBQkxFX0RFVEFJTDogJ0RlYWxlciBSZXBvcnRzIC0gUmVjZWl2YWJsZSBEZXRhaWwnLFxuXHQgICAgREVBTEVSX1JFUE9SVFNfVVBDT01JTkdfQ1VSVEFJTE1FTlRfUEFZT0ZGX1FVT1RFOiAnRGVhbGVyIFJlcG9ydHMgLSBVcGNvbWluZyBDdXJ0YWlsbWVudC9QYXlvZmYgUXVvdGUnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVQT1JUU19FWFBPUlRBQkxFX0lOVkVOVE9SWTogJ0RlYWxlciBSZXBvcnRzIC0gRXhwb3J0YWJsZSBJbnZlbnRvcnknLCAvLyB4XG5cdCAgICBERUFMRVJfUkVQT1JUX0RFQUxFUl9TVEFURU1FTlQ6ICdEZWFsZXIgUmVwb3J0cyAtIERlYWxlciBTdGF0ZW1lbnQnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVQT1JUU19ESVNCVVJTRU1FTlRfREVUQUlMOiAnRGVhbGVyIFJlcG9ydCAtIERpc2J1cnNlbWVudCBEZXRhaWwnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVQT1JUU19QQUlEX09GRl9TVU1NQVJZOiAnRGVhbGVyIFJlcG9ydCAtIFBhaWQgT2ZmIFN1bW1hcnknLCAvLyB4XG5cdFxuXHQgICAgLy8gVmlldyBBbmFseXRpY3MgRXZlbnRzXG5cdCAgICBWSUVXX1ZJRVdfQU5BTFlUSUNTX1BBR0U6ICdWaWV3IFZpZXcgQW5hbHl0aWNzIFBhZ2UnLCAvLyB4XG5cdFxuXHQgICAgLy8gUmVzb3VyY2VzIEV2ZW50c1xuXHQgICAgVklFV19SRVNPVVJDRVNfUEFHRTogJ1ZpZXcgUmVzb3VyY2VzIFBhZ2UnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVTT1VSQ0VTX1JBVEVTX0FORF9GRUVTX1BBR0U6ICdEZWFsZXIgUmVzb3VyY2VzIC0gUmF0ZXMgYW5kIEZlZXMnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVTT1VSQ0VTX1dFTENPTUVfUEFDS0VUX1BBR0U6ICdEZWFsZXIgUmVzb3VyY2VzIC0gV2VsY29tZSBQYWNrZXQnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVTT1VSQ0VTX0RFQUxFUl9GVU5ESU5HX0NIRUNLTElTVF9QQUdFOiAnRGVhbGVyIFJlc291cmNlcyAtIERlYWxlciBGdW5kaW5nIENoZWNrbGlzdCcsIC8vIHhcblx0ICAgIERFQUxFUl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9CVVlFUlNfUEFHRTogJ0RlYWxlciBSZXNvdXJjZXMgLSBJbnN0cnVjdGlvbnMgRm9yIEJ1eWVycycsIC8vIHhcblx0ICAgIERFQUxFUl9SRVNPVVJDRVNfV0VMQ09NRV9MRVRURVJfUEFHRTogJ0RlYWxlciBSZXNvdXJjZXMgLSBXZWxjb21lIExldHRlcicsIC8vIHhcblx0ICAgIERFQUxFUl9SRVNPVVJDRVNfR1VJREVMSU5FU19QQUdFOiAnRGVhbGVyIFJlc291cmNlcyAtIEd1aWRlbGluZXMnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVTT1VSQ0VTX0lORk9STUFUSU9OX1NIRUVUX1BBR0U6ICdEZWFsZXIgUmVzb3VyY2VzIC0gSW5mb3JtYXRpb24gU2hlZXQnLCAvLyB4XG5cdCAgICBERUFMRVJfUkVTT1VSQ0VTX0NMQUlNX0ZPUk1fUEFHRTogJ0RlYWxlciBSZXNvdXJjZXMgLSBDbGFpbSBGb3JtJywgLy8geFxuXHQgICAgREVBTEVSX1JFU09VUkNFU19USVRMRV9NQU5BR0VNRU5UX0ZBUTogJ0RlYWxlciBSZXNvdXJjZXMgLSBUaXRsZSBNYW5hZ2VtZW50IEZBUScsIC8vIHhcblx0ICAgIERFQUxFUl9SRVNPVVJDRVNfSU9TX0FQUDogJ0RlYWxlciBSZXNvdXJjZXMgLSBpT1MgQXBwcycsIC8vIHhcblx0ICAgIERFQUxFUl9SRVNPVVJDRVNfQU5EUk9JRF9BUFA6ICdEZWFsZXIgUmVzb3VyY2VzIC0gQW5kcm9pZCBBcHBzJywgLy8geFxuXHQgICAgVklFV19SRVFVRVNUX0NSRURJVF9JTkNSRUFTRV9QQUdFOiAnVmlldyBSZXF1ZXN0IENyZWRpdCBJbmNyZWFzZScsIC8vIHhcblx0ICAgIERFQUxFUl9URU1QX0NSRURJVF9JTkNSRUFTRV9SRVFVRVNUX1NVQk1JVFRFRF9QQUdFOiAnRGVhbGVyIC0gVGVtcCBDcmVkaXQgSW5jcmVhc2UgUmVxdWVzdCBTdWJtaXR0ZWQnLCAvLyB4XG5cdCAgICBERUFMRVJfUEVSTUFORU5UX0NSRURJVF9JTkNSRUFTRV9SRVFVRVNUX1NVQk1JVFRFRDogJ0RlYWxlciAtIFBlcm1hbmVudCBDcmVkaXQgSW5jcmVhc2UgUmVxdWVzdCBTdWJtaXR0ZWQnLCAvLyB4XG5cdFxuXHQgICAgLy8gUmVzb3VyY2VzIEV2ZW50cyBmb3IgIC0gQXVjdGlvblxuXHQgICAgVklFV19BVUNUSU9OX1JFUE9SVFNfUEFHRTogJ1ZpZXcgQXVjdGlvbiBSZXBvcnRzJyxcblx0ICAgIEFVQ1RJT05fUkVTT1VSQ0VTX1dFTENPTUVfUEFDS0VUX1BBR0U6ICdBdWN0aW9uIFJlc291cmNlcyAtIFdlbGNvbWUgUGFja2V0JywgLy8geFxuXHQgICAgQVVDVElPTl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9TRUxMRVJTX1BBR0U6ICdBdWN0aW9uIFJlc291cmNlcyAtIEluc3RydWN0aW9ucyBmb3IgU2VsbGVycycsIC8vIHhcblx0ICAgIEFVQ1RJT05fUkVQT1JUU19DUkVESVRfQVZBSUxBQklMSVRZX1FVRVJZX0hJU1RPUllfUEFHRTogJ0F1Y3Rpb24gUmVwb3J0cyAtIENyZWRpdCBBdmFpbGFiaWxpdHkgUXVlcnkgSGlzdG9yeScsIC8vIHhcblx0ICAgIEFVQ1RJT05fUkVQT1JUU19ESVNCVVJTRU1FTlRfREVUQUlMX1BBR0U6ICdBdWN0aW9uIFJlcG9ydHMgLSBEaXNidXJzZW1lbnQgRGV0YWlsJywgLy8geFxuXHQgICAgTUFOVUZBQ1RVUkVSX1JFUE9SVFNfQUdJTkdfUkVQT1JUX1BBR0U6ICdNYW51ZmFjdHVyZXIgUmVwb3J0cyAtIEFnaW5nIFJlcG9ydCcsXG5cdFxuXHQgICAgQVVDVElPTl9TVUNDRVNTRlVMX0ZMT09SSU5HX1JFUVVFU1RfU1VCTUlUVEVEX1BBR0U6ICdBdWN0aW9uIC0gU3VjY2Vzc2Z1bCBGbG9vcmluZyBSZXF1ZXN0IFN1Ym1pdHRlZCcsIC8vIHhcblx0ICAgIEFVQ1RJT05fSU5ESVZJRFVBTF9ERUFMRVJfTE9DX1FVRVJZX1BBR0U6ICdBdWN0aW9uIC0gSW5kaXZpZHVhbCBEZWFsZXIgTE9DIFF1ZXJ5JywgLy8geFxuXHRcblx0XG5cdCAgICAvLyBWYWx1ZSBMb29rdXAgRXZlbnRzXG5cdCAgICBDTElDS19WQUxVRV9MT09LVVBfVklOX1dJVEhfWklQX0xPT0tVUF9CVVRUT046ICdDbGljayBWYWx1ZSBMb29rdXAgVklOIFdpdGggWmlwIExvb2t1cCBCdXR0b24nLFxuXHQgICAgQ0xJQ0tfVkFMVUVfTE9PS1VQX1ZJTl9XSVRIT1VUX1pJUF9MT09LVVBfQlVUVE9OOiAnQ2xpY2sgVmFsdWUgTG9va3VwIFZJTiBXaXRob3V0IFppcCBMb29rdXAgQnV0dG9uJyxcblx0ICAgIENMSUNLX1ZBTFVFX0xPT0tVUF9OR0NfTE9PS1VQX0JVVFRPTjogJ0NsaWNrIFZhbHVlIExvb2t1cCBOR0MgTG9va3VwIEJ1dHRvbicsXG5cdCAgICBDTElDS19WQUxVRV9MT09LVVBfTU1SX0xPT0tVUF9CVVRUT046ICdDbGljayBWYWx1ZSBMb29rdXAgTU1SIExvb2t1cCBCdXR0b24nLFxuXHQgICAgQ0xJQ0tfVkFMVUVfTE9PS1VQX0tCQl9MT09LVVBfQlVUVE9OOiAnQ2xpY2sgVmFsdWUgTG9va3VwIEtCQiBMb29rdXAgQnV0dG9uJyxcblx0XG5cdCAgICAvLyBBY2NvdW50IE1hbmFnZW1lbnQgRXZlbnRzXG5cdCAgICBERUFMRVJfVklFV19BQ0NPVU5UX01BTkFHRU1FTlRfUEFHRTogJ0RlYWxlciAtIFZpZXcgQWNjb3VudCBNYW5hZ2VtZW50IFBhZ2UnLFxuXHQgICAgREVBTEVSX0FERF9CQU5LX0FDQ09VTlQ6ICdEZWFsZXIgLSBBZGQgQmFuayBBY2NvdW50Jyxcblx0ICAgIERFQUxFUl9FRElUX0JBTktfQUNDT1VOVDogJ0RlYWxlciAtIEVkaXQgQmFuayBBY2NvdW50Jyxcblx0XG5cdCAgICAvLyBGb290ZXIgcGFydG5lciBsaW5rc1xuXHQgICAgQVVUT1RSQURFUl9JTkRFWDogJ0F1dG90cmFkZXIgUGFydG5lciBMaW5rJyxcblx0ICAgIERFQUxTSElFTERfSU5ERVg6ICdEZWFsc2hpZWxkIFBhcnRuZXIgTGluaycsXG5cdCAgICBHT0FVVE9FWENIQU5HRV9JTkRFWDogJ0dvIEF1dG8gRXhjaGFuZ2UgUGFydG5lciBMaW5rJyxcblx0ICAgIEdPRklOQU5DSUFMX0lOREVYOiAnR28gRmluYW5jaWFsIFBhcnRuZXIgTGluaycsXG5cdCAgICBIQVlTVEFDS19JTkRFWDogJ0hheXN0YWNrIERpZ2l0YWwgTWFya2V0aW5nIFBhcnRuZXIgTGluaycsXG5cdCAgICBIT01FTkVUX0lOREVYOiAnSG9tZU5ldCBBdXRvbW90aXZlIFBhcnRuZXIgTGluaycsXG5cdCAgICBLRUxMWUJMVUVCT09LX0lOREVYOiAnS2VsbHkgQmx1ZSBCb29rIFBhcnRuZXIgTGluaycsXG5cdCAgICBNQU5IRUlNX0lOREVYOiAnTWFuaGVpbSBQYXJ0bmVyIExpbmsnLFxuXHQgICAgUkVBRFlBVVRPX0lOREVYOiAnUmVhZHkgQXV0byBUcmFuc3BvcnQgUGFydG5lciBMaW5rJyxcblx0ICAgIFZBVVRPX0lOREVYOiAndkF1dG8gUGFydG5lciBMaW5rJyxcblx0ICAgIFZJTlNPTFVUSU9OU19JTkRFWDogJ1ZpbiBTb2x1dGlvbnMgUGFydG5lciBMaW5rJyxcblx0XG5cdCAgICAvLyBGZWRFeFxuXHQgICAgV0FZQklMTF9QUklOVEVEOiAnRmVkRXggV2F5YmlsbCBHZW5lcmF0ZWQnXG5cdFxuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbWV0cmljO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgcmVhY3RQcm9kSW52YXJpYW50XG5cdCAqIFxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFdBUk5JTkc6IERPIE5PVCBtYW51YWxseSByZXF1aXJlIHRoaXMgbW9kdWxlLlxuXHQgKiBUaGlzIGlzIGEgcmVwbGFjZW1lbnQgZm9yIGBpbnZhcmlhbnQoLi4uKWAgdXNlZCBieSB0aGUgZXJyb3IgY29kZSBzeXN0ZW1cblx0ICogYW5kIHdpbGwgX29ubHlfIGJlIHJlcXVpcmVkIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGJhYmVsIHBhc3MuXG5cdCAqIEl0IGFsd2F5cyB0aHJvd3MuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVhY3RQcm9kSW52YXJpYW50KGNvZGUpIHtcblx0ICB2YXIgYXJnQ291bnQgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcblx0XG5cdCAgdmFyIG1lc3NhZ2UgPSAnTWluaWZpZWQgUmVhY3QgZXJyb3IgIycgKyBjb2RlICsgJzsgdmlzaXQgJyArICdodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvZXJyb3ItZGVjb2Rlci5odG1sP2ludmFyaWFudD0nICsgY29kZTtcblx0XG5cdCAgZm9yICh2YXIgYXJnSWR4ID0gMDsgYXJnSWR4IDwgYXJnQ291bnQ7IGFyZ0lkeCsrKSB7XG5cdCAgICBtZXNzYWdlICs9ICcmYXJnc1tdPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2FyZ0lkeCArIDFdKTtcblx0ICB9XG5cdFxuXHQgIG1lc3NhZ2UgKz0gJyBmb3IgdGhlIGZ1bGwgbWVzc2FnZSBvciB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQnICsgJyBmb3IgZnVsbCBlcnJvcnMgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nO1xuXHRcblx0ICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG5cdCAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcblx0ICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgcmVhY3RQcm9kSW52YXJpYW50J3Mgb3duIGZyYW1lXG5cdFxuXHQgIHRocm93IGVycm9yO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHJlYWN0UHJvZEludmFyaWFudDtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfTGluayA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0dmFyIF9MaW5rMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xpbmspO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBMaXN0SXRlbUxpbmsgPSBmdW5jdGlvbiBMaXN0SXRlbUxpbmsocHJvcHMpIHtcblx0ICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAnbGknLFxuXHQgICAgICAgIG51bGwsXG5cdCAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xpbmsyLmRlZmF1bHQsIHByb3BzKVxuXHQgICAgKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExpc3RJdGVtTGluaztcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUVtcHR5RnVuY3Rpb24oYXJnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBhcmc7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG5cdCAqIHByaW1hcmlseSB1c2VmdWwgaWRpb21hdGljYWxseSBmb3Igb3ZlcnJpZGFibGUgZnVuY3Rpb24gZW5kcG9pbnRzIHdoaWNoXG5cdCAqIGFsd2F5cyBuZWVkIHRvIGJlIGNhbGxhYmxlLCBzaW5jZSBKUyBsYWNrcyBhIG51bGwtY2FsbCBpZGlvbSBhbGEgQ29jb2EuXG5cdCAqL1xuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IGZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKSB7fTtcblx0XG5cdGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcblx0ZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlID0gbWFrZUVtcHR5RnVuY3Rpb24oZmFsc2UpO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKHRydWUpO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuXHRlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVGhpcyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0ZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50ID0gZnVuY3Rpb24gKGFyZykge1xuXHQgIHJldHVybiBhcmc7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVtcHR5RnVuY3Rpb247XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlbXB0eU9iamVjdCA9IHt9O1xuXHRcblx0aWYgKGZhbHNlKSB7XG5cdCAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZW1wdHlPYmplY3Q7XG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfcHJvZEludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgZW1wdHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciB3YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdC8qKlxuXHQgKiBCYXNlIGNsYXNzIGhlbHBlcnMgZm9yIHRoZSB1cGRhdGluZyBzdGF0ZSBvZiBhIGNvbXBvbmVudC5cblx0ICovXG5cdGZ1bmN0aW9uIFJlYWN0Q29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG5cdCAgdGhpcy5wcm9wcyA9IHByb3BzO1xuXHQgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG5cdCAgLy8gV2UgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCB1cGRhdGVyIGJ1dCB0aGUgcmVhbCBvbmUgZ2V0cyBpbmplY3RlZCBieSB0aGVcblx0ICAvLyByZW5kZXJlci5cblx0ICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuXHR9XG5cdFxuXHRSZWFjdENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuXHRcblx0LyoqXG5cdCAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgdG8gbXV0YXRlXG5cdCAqIHN0YXRlLiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG5cdCAqXG5cdCAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG5cdCAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG5cdCAqXG5cdCAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGNhbGxzIHRvIGBzZXRTdGF0ZWAgd2lsbCBydW4gc3luY2hyb25vdXNseSxcblx0ICogYXMgdGhleSBtYXkgZXZlbnR1YWxseSBiZSBiYXRjaGVkIHRvZ2V0aGVyLiAgWW91IGNhbiBwcm92aWRlIGFuIG9wdGlvbmFsXG5cdCAqIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBjYWxsIHRvIHNldFN0YXRlIGlzIGFjdHVhbGx5XG5cdCAqIGNvbXBsZXRlZC5cblx0ICpcblx0ICogV2hlbiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIHRvIHNldFN0YXRlLCBpdCB3aWxsIGJlIGNhbGxlZCBhdCBzb21lIHBvaW50IGluXG5cdCAqIHRoZSBmdXR1cmUgKG5vdCBzeW5jaHJvbm91c2x5KS4gSXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdXAgdG8gZGF0ZVxuXHQgKiBjb21wb25lbnQgYXJndW1lbnRzIChzdGF0ZSwgcHJvcHMsIGNvbnRleHQpLiBUaGVzZSB2YWx1ZXMgY2FuIGJlIGRpZmZlcmVudFxuXHQgKiBmcm9tIHRoaXMuKiBiZWNhdXNlIHlvdXIgZnVuY3Rpb24gbWF5IGJlIGNhbGxlZCBhZnRlciByZWNlaXZlUHJvcHMgYnV0IGJlZm9yZVxuXHQgKiBzaG91bGRDb21wb25lbnRVcGRhdGUsIGFuZCB0aGlzIG5ldyBzdGF0ZSwgcHJvcHMsIGFuZCBjb250ZXh0IHdpbGwgbm90IHlldCBiZVxuXHQgKiBhc3NpZ25lZCB0byB0aGlzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSBvciBmdW5jdGlvbiB0b1xuXHQgKiAgICAgICAgcHJvZHVjZSBuZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggY3VycmVudCBzdGF0ZS5cblx0ICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuXHQgKiBAZmluYWxcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cblx0UmVhY3RDb21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHBhcnRpYWxTdGF0ZSwgY2FsbGJhY2spIHtcblx0ICAhKHR5cGVvZiBwYXJ0aWFsU3RhdGUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBwYXJ0aWFsU3RhdGUgPT09ICdmdW5jdGlvbicgfHwgcGFydGlhbFN0YXRlID09IG51bGwpID8gIGZhbHNlID8gaW52YXJpYW50KGZhbHNlLCAnc2V0U3RhdGUoLi4uKTogdGFrZXMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcyB0byB1cGRhdGUgb3IgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMuJykgOiBfcHJvZEludmFyaWFudCgnODUnKSA6IHZvaWQgMDtcblx0ICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFN0YXRlKHRoaXMsIHBhcnRpYWxTdGF0ZSk7XG5cdCAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrLCAnc2V0U3RhdGUnKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuXHQgKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cblx0ICpcblx0ICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuXHQgKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cblx0ICpcblx0ICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuXHQgKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuXHQgKlxuXHQgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHVwZGF0ZSBpcyBjb21wbGV0ZS5cblx0ICogQGZpbmFsXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG5cdFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcyk7XG5cdCAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrLCAnZm9yY2VVcGRhdGUnKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVwcmVjYXRlZCBBUElzLiBUaGVzZSBBUElzIHVzZWQgdG8gZXhpc3Qgb24gY2xhc3NpYyBSZWFjdCBjbGFzc2VzIGJ1dCBzaW5jZVxuXHQgKiB3ZSB3b3VsZCBsaWtlIHRvIGRlcHJlY2F0ZSB0aGVtLCB3ZSdyZSBub3QgZ29pbmcgdG8gbW92ZSB0aGVtIG92ZXIgdG8gdGhpc1xuXHQgKiBtb2Rlcm4gYmFzZSBjbGFzcy4gSW5zdGVhZCwgd2UgZGVmaW5lIGEgZ2V0dGVyIHRoYXQgd2FybnMgaWYgaXQncyBhY2Nlc3NlZC5cblx0ICovXG5cdGlmIChmYWxzZSkge1xuXHQgIHZhciBkZXByZWNhdGVkQVBJcyA9IHtcblx0ICAgIGlzTW91bnRlZDogWydpc01vdW50ZWQnLCAnSW5zdGVhZCwgbWFrZSBzdXJlIHRvIGNsZWFuIHVwIHN1YnNjcmlwdGlvbnMgYW5kIHBlbmRpbmcgcmVxdWVzdHMgaW4gJyArICdjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy4nXSxcblx0ICAgIHJlcGxhY2VTdGF0ZTogWydyZXBsYWNlU3RhdGUnLCAnUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgJyArICdodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzMyMzYpLiddXG5cdCAgfTtcblx0ICB2YXIgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGluZm8pIHtcblx0ICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhY3RDb21wb25lbnQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLikgaXMgZGVwcmVjYXRlZCBpbiBwbGFpbiBKYXZhU2NyaXB0IFJlYWN0IGNsYXNzZXMuICVzJywgaW5mb1swXSwgaW5mb1sxXSkgOiB2b2lkIDA7XG5cdCAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBmb3IgKHZhciBmbk5hbWUgaW4gZGVwcmVjYXRlZEFQSXMpIHtcblx0ICAgIGlmIChkZXByZWNhdGVkQVBJcy5oYXNPd25Qcm9wZXJ0eShmbk5hbWUpKSB7XG5cdCAgICAgIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyhmbk5hbWUsIGRlcHJlY2F0ZWRBUElzW2ZuTmFtZV0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudDtcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gd2Fybk5vb3AocHVibGljSW5zdGFuY2UsIGNhbGxlck5hbWUpIHtcblx0ICBpZiAoZmFsc2UpIHtcblx0ICAgIHZhciBjb25zdHJ1Y3RvciA9IHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yO1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgY29uc3RydWN0b3IgJiYgKGNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8IGNvbnN0cnVjdG9yLm5hbWUpIHx8ICdSZWFjdENsYXNzJykgOiB2b2lkIDA7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogVGhpcyBpcyB0aGUgYWJzdHJhY3QgQVBJIGZvciBhbiB1cGRhdGUgcXVldWUuXG5cdCAqL1xuXHR2YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cblx0ICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG5cdCAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG5cdCAgICogQHByb3RlY3RlZFxuXHQgICAqIEBmaW5hbFxuXHQgICAqL1xuXHQgIGlzTW91bnRlZDogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuXHQgICAqIGhhdmUgcHJvY2Vzc2VkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuXHQgICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBlbnF1ZXVlQ2FsbGJhY2s6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY2FsbGJhY2spIHt9LFxuXHRcblx0ICAvKipcblx0ICAgKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG5cdCAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG5cdCAgICpcblx0ICAgKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG5cdCAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG5cdCAgICpcblx0ICAgKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG5cdCAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBpbnRlcm5hbFxuXHQgICAqL1xuXHQgIGVucXVldWVGb3JjZVVwZGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG5cdCAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgJ2ZvcmNlVXBkYXRlJyk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuXHQgICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cblx0ICAgKlxuXHQgICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG5cdCAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG5cdCAgICogQGludGVybmFsXG5cdCAgICovXG5cdCAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG5cdCAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBUaGlzIG9ubHkgZXhpc3RzIGJlY2F1c2UgX3BlbmRpbmdTdGF0ZSBpc1xuXHQgICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuXHQgICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuXHQgICAqIGR1cmluZyB0aGUgbWVyZ2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cblx0ICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSB0byBiZSBtZXJnZWQgd2l0aCBzdGF0ZS5cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKi9cblx0ICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFN0YXRlKSB7XG5cdCAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgJ3NldFN0YXRlJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIF9fbG9jYWxlOiBcImVuXCIsXG5cdCAgZGF5czogWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddLFxuXHQgIGFiYnJldmlhdGVkX2RheXM6IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J10sXG5cdCAgbW9udGhzOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcblx0ICBhYmJyZXZpYXRlZF9tb250aHM6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcblx0ICBhbTogJ0FNJyxcblx0ICBwbTogJ1BNJ1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwICAgICAgPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBjb25jYXQgID0gYXAuY29uY2F0O1xuXHR2YXIgc2xpY2UgICA9IGFwLnNsaWNlO1xuXHR2YXIgaW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHRcblx0ZnVuY3Rpb24gZXhjZXB0KG9iamVjdCkge1xuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0ICB2YXIga2V5cyA9IGNvbmNhdC5hcHBseShhcCwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcblx0XG5cdCAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuXHQgICAgaWYgKGluZGV4T2Yoa2V5cywga2V5KSA9PT0gLTEpIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhjZXB0O1xuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYW4gZW51bWVyYXRpb24gd2l0aCBrZXlzIGVxdWFsIHRvIHRoZWlyIHZhbHVlLlxuXHQgKlxuXHQgKiBGb3IgZXhhbXBsZTpcblx0ICpcblx0ICogICB2YXIgQ09MT1JTID0ga2V5TWlycm9yKHtibHVlOiBudWxsLCByZWQ6IG51bGx9KTtcblx0ICogICB2YXIgbXlDb2xvciA9IENPTE9SUy5ibHVlO1xuXHQgKiAgIHZhciBpc0NvbG9yVmFsaWQgPSAhIUNPTE9SU1tteUNvbG9yXTtcblx0ICpcblx0ICogVGhlIGxhc3QgbGluZSBjb3VsZCBub3QgYmUgcGVyZm9ybWVkIGlmIHRoZSB2YWx1ZXMgb2YgdGhlIGdlbmVyYXRlZCBlbnVtIHdlcmVcblx0ICogbm90IGVxdWFsIHRvIHRoZWlyIGtleXMuXG5cdCAqXG5cdCAqICAgSW5wdXQ6ICB7a2V5MTogdmFsMSwga2V5MjogdmFsMn1cblx0ICogICBPdXRwdXQ6IHtrZXkxOiBrZXkxLCBrZXkyOiBrZXkyfVxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gb2JqXG5cdCAqIEByZXR1cm4ge29iamVjdH1cblx0ICovXG5cdHZhciBrZXlNaXJyb3IgPSBmdW5jdGlvbiBrZXlNaXJyb3Iob2JqKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgIShvYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgIUFycmF5LmlzQXJyYXkob2JqKSkgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdrZXlNaXJyb3IoLi4uKTogQXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdm9pZCAwO1xuXHQgIGZvciAoa2V5IGluIG9iaikge1xuXHQgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIHJldFtrZXldID0ga2V5O1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBrZXlNaXJyb3I7XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEN1cnJlbnRPd25lclxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBLZWVwcyB0cmFjayBvZiB0aGUgY3VycmVudCBvd25lci5cblx0ICpcblx0ICogVGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIGNvbXBvbmVudCB3aG8gc2hvdWxkIG93biBhbnkgY29tcG9uZW50cyB0aGF0IGFyZVxuXHQgKiBjdXJyZW50bHkgYmVpbmcgY29uc3RydWN0ZWQuXG5cdCAqL1xuXHRcblx0dmFyIFJlYWN0Q3VycmVudE93bmVyID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKiBAdHlwZSB7UmVhY3RDb21wb25lbnR9XG5cdCAgICovXG5cdCAgY3VycmVudDogbnVsbFxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDdXJyZW50T3duZXI7XG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHt9O1xuXHRcblx0aWYgKGZhbHNlKSB7XG5cdCAgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7XG5cdCAgICBwcm9wOiAncHJvcCcsXG5cdCAgICBjb250ZXh0OiAnY29udGV4dCcsXG5cdCAgICBjaGlsZENvbnRleHQ6ICdjaGlsZCBjb250ZXh0J1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXM7XG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBjYW5EZWZpbmVQcm9wZXJ0eVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xuXHRpZiAoZmFsc2UpIHtcblx0ICB0cnkge1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAneCcsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7fSB9KTtcblx0ICAgIGNhbkRlZmluZVByb3BlcnR5ID0gdHJ1ZTtcblx0ICB9IGNhdGNoICh4KSB7XG5cdCAgICAvLyBJRSB3aWxsIGZhaWwgb24gZGVmaW5lUHJvcGVydHlcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY2FuRGVmaW5lUHJvcGVydHk7XG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBnZXRJdGVyYXRvckZuXG5cdCAqIFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qIGdsb2JhbCBTeW1ib2wgKi9cblx0XG5cdHZhciBJVEVSQVRPUl9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvcjtcblx0dmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cdFxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBCZSBzdXJlIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgaXRlcmFibGUgYXMgY29udGV4dDpcblx0ICpcblx0ICogICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihteUl0ZXJhYmxlKTtcblx0ICogICAgIGlmIChpdGVyYXRvckZuKSB7XG5cdCAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTtcblx0ICogICAgICAgLi4uXG5cdCAqICAgICB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7P29iamVjdH0gbWF5YmVJdGVyYWJsZVxuXHQgKiBAcmV0dXJuIHs/ZnVuY3Rpb259XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcblx0ICB2YXIgaXRlcmF0b3JGbiA9IG1heWJlSXRlcmFibGUgJiYgKElURVJBVE9SX1NZTUJPTCAmJiBtYXliZUl0ZXJhYmxlW0lURVJBVE9SX1NZTUJPTF0gfHwgbWF5YmVJdGVyYWJsZVtGQVVYX0lURVJBVE9SX1NZTUJPTF0pO1xuXHQgIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm47XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldEl0ZXJhdG9yRm47XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHR2YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcblx0ZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7XG5cdCAgaWYgKCFpc1N0cmluZyhmKSkge1xuXHQgICAgdmFyIG9iamVjdHMgPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSAxO1xuXHQgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcblx0ICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7XG5cdCAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcblx0ICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG5cdCAgICBzd2l0Y2ggKHgpIHtcblx0ICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG5cdCAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuXHQgICAgICBjYXNlICclaic6XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuXHQgICAgICAgIH0gY2F0Y2ggKF8pIHtcblx0ICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG5cdCAgICAgICAgfVxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIHJldHVybiB4O1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG5cdCAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuXHQgICAgICBzdHIgKz0gJyAnICsgeDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gc3RyO1xuXHR9O1xuXHRcblx0XG5cdC8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG5cdC8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG5cdC8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5cdGV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykge1xuXHQgIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG5cdCAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG5cdCAgICByZXR1cm4gZm47XG5cdCAgfVxuXHRcblx0ICB2YXIgd2FybmVkID0gZmFsc2U7XG5cdCAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcblx0ICAgIGlmICghd2FybmVkKSB7XG5cdCAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcblx0ICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuXHQgICAgICB9XG5cdCAgICAgIHdhcm5lZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZXByZWNhdGVkO1xuXHR9O1xuXHRcblx0XG5cdHZhciBkZWJ1Z3MgPSB7fTtcblx0dmFyIGRlYnVnRW52aXJvbjtcblx0ZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkge1xuXHQgIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuXHQgICAgZGVidWdFbnZpcm9uID0gKHtcIk5PREVfRU5WXCI6XCJwcm9kdWN0aW9uXCJ9KS5OT0RFX0RFQlVHIHx8ICcnO1xuXHQgIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuXHQgIGlmICghZGVidWdzW3NldF0pIHtcblx0ICAgIGlmIChuZXcgUmVnRXhwKCdcXFxcYicgKyBzZXQgKyAnXFxcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkge1xuXHQgICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG5cdCAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkZWJ1Z3Nbc2V0XTtcblx0fTtcblx0XG5cdFxuXHQvKipcblx0ICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuXHQgKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cblx0ICovXG5cdC8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi9cblx0ZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcblx0ICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICB2YXIgY3R4ID0ge1xuXHQgICAgc2VlbjogW10sXG5cdCAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuXHQgIH07XG5cdCAgLy8gbGVnYWN5Li4uXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG5cdCAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuXHQgICAgLy8gbGVnYWN5Li4uXG5cdCAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG5cdCAgfSBlbHNlIGlmIChvcHRzKSB7XG5cdCAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG5cdCAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTtcblx0ICB9XG5cdCAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuXHQgIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuXHQgIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG5cdCAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xuXHR9XG5cdGV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cdFxuXHRcblx0Ly8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5cdGluc3BlY3QuY29sb3JzID0ge1xuXHQgICdib2xkJyA6IFsxLCAyMl0sXG5cdCAgJ2l0YWxpYycgOiBbMywgMjNdLFxuXHQgICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcblx0ICAnaW52ZXJzZScgOiBbNywgMjddLFxuXHQgICd3aGl0ZScgOiBbMzcsIDM5XSxcblx0ICAnZ3JleScgOiBbOTAsIDM5XSxcblx0ICAnYmxhY2snIDogWzMwLCAzOV0sXG5cdCAgJ2JsdWUnIDogWzM0LCAzOV0sXG5cdCAgJ2N5YW4nIDogWzM2LCAzOV0sXG5cdCAgJ2dyZWVuJyA6IFszMiwgMzldLFxuXHQgICdtYWdlbnRhJyA6IFszNSwgMzldLFxuXHQgICdyZWQnIDogWzMxLCAzOV0sXG5cdCAgJ3llbGxvdycgOiBbMzMsIDM5XVxuXHR9O1xuXHRcblx0Ly8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5cdGluc3BlY3Quc3R5bGVzID0ge1xuXHQgICdzcGVjaWFsJzogJ2N5YW4nLFxuXHQgICdudW1iZXInOiAneWVsbG93Jyxcblx0ICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuXHQgICd1bmRlZmluZWQnOiAnZ3JleScsXG5cdCAgJ251bGwnOiAnYm9sZCcsXG5cdCAgJ3N0cmluZyc6ICdncmVlbicsXG5cdCAgJ2RhdGUnOiAnbWFnZW50YScsXG5cdCAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcblx0ICAncmVnZXhwJzogJ3JlZCdcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG5cdCAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblx0XG5cdCAgaWYgKHN0eWxlKSB7XG5cdCAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG5cdCAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHN0cjtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuXHQgIHJldHVybiBzdHI7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuXHQgIHZhciBoYXNoID0ge307XG5cdFxuXHQgIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcblx0ICAgIGhhc2hbdmFsXSA9IHRydWU7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBoYXNoO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG5cdCAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuXHQgIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuXHQgIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuXHQgICAgICB2YWx1ZSAmJlxuXHQgICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG5cdCAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuXHQgICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcblx0ICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG5cdCAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcblx0ICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcblx0ICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuXHQgICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXQ7XG5cdCAgfVxuXHRcblx0ICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuXHQgIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG5cdCAgaWYgKHByaW1pdGl2ZSkge1xuXHQgICAgcmV0dXJuIHByaW1pdGl2ZTtcblx0ICB9XG5cdFxuXHQgIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblx0XG5cdCAgaWYgKGN0eC5zaG93SGlkZGVuKSB7XG5cdCAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuXHQgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG5cdCAgaWYgKGlzRXJyb3IodmFsdWUpXG5cdCAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuXHQgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXHRcblx0ICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBhcnJheSA9IHRydWU7XG5cdCAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG5cdCAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuXHQgICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuXHQgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG5cdCAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3Jcblx0ICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcblx0ICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cdFxuXHQgIHZhciBvdXRwdXQ7XG5cdCAgaWYgKGFycmF5KSB7XG5cdCAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucG9wKCk7XG5cdFxuXHQgIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuXHQgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcblx0ICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG5cdCAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG5cdCAgfVxuXHQgIGlmIChpc051bWJlcih2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuXHQgIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG5cdCAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuXHQgIGlmIChpc051bGwodmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG5cdCAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcblx0ICB2YXIgb3V0cHV0ID0gW107XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcblx0ICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuXHQgICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuXHQgICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvdXRwdXQucHVzaCgnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0ICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuXHQgICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuXHQgICAgICAgICAga2V5LCB0cnVlKSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIG91dHB1dDtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcblx0ICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuXHQgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTtcblx0ICBpZiAoZGVzYy5nZXQpIHtcblx0ICAgIGlmIChkZXNjLnNldCkge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChkZXNjLnNldCkge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7XG5cdCAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuXHQgIH1cblx0ICBpZiAoIXN0cikge1xuXHQgICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG5cdCAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuXHQgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcblx0ICAgICAgICBpZiAoYXJyYXkpIHtcblx0ICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuXHQgICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcblx0ICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcblx0ICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdCAgICAgIHJldHVybiBzdHI7XG5cdCAgICB9XG5cdCAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuXHQgICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuXHQgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHQgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcblx0ICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcblx0ICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG5cdCAgdmFyIG51bUxpbmVzRXN0ID0gMDtcblx0ICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcblx0ICAgIG51bUxpbmVzRXN0Kys7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG5cdCAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG5cdCAgfSwgMCk7XG5cdFxuXHQgIGlmIChsZW5ndGggPiA2MCkge1xuXHQgICAgcmV0dXJuIGJyYWNlc1swXSArXG5cdCAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG5cdCAgICAgICAgICAgJyAnICtcblx0ICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuXHQgICAgICAgICAgICcgJyArXG5cdCAgICAgICAgICAgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcblx0fVxuXHRcblx0XG5cdC8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuXHQvLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblx0ZnVuY3Rpb24gaXNBcnJheShhcikge1xuXHQgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTtcblx0fVxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0ZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXHRcblx0ZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xuXHR9XG5cdGV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblx0XG5cdGZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcblx0fVxuXHRleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblx0ZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcblx0ICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0ZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cdFxuXHRmdW5jdGlvbiBpc0RhdGUoZCkge1xuXHQgIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gaXNFcnJvcihlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG5cdCAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xuXHR9XG5cdGV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cdFxuXHRmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cdFxuXHRleHBvcnRzLmlzQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nik7XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHBhZChuKSB7XG5cdCAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG5cdH1cblx0XG5cdFxuXHR2YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG5cdCAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cdFxuXHQvLyAyNiBGZWIgMTY6MTk6MzRcblx0ZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuXHQgIHZhciBkID0gbmV3IERhdGUoKTtcblx0ICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcblx0ICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuXHQgICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcblx0ICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xuXHR9XG5cdFxuXHRcblx0Ly8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuXHRleHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuXHQgIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG5cdCAqXG5cdCAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcblx0ICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG5cdCAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG5cdCAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuXHQgKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuXHQgKiAgICAgcHJvdG90eXBlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cblx0ICovXG5cdGV4cG9ydHMuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTtcblx0XG5cdGV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7XG5cdCAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuXHQgIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXHRcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiBvcmlnaW47XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSkpXG5cbi8qKiovIH0sXG4vKiAyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9EYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHR2YXIgX0RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0ZSk7XG5cdFxuXHR2YXIgX1Jlc291cmNlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0dmFyIF9SZXNvdXJjZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVzb3VyY2VzKTtcblx0XG5cdHZhciBfQXVjdGlvblJlc291cmNlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9BdWN0aW9uUmVzb3VyY2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0F1Y3Rpb25SZXNvdXJjZXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGFuZ3VsYXIubW9kdWxlKCduZXh0Z2VhcldlYkFwcCcpLmRpcmVjdGl2ZSgnZGF0ZUNvbXBvbmVudCcsIGZ1bmN0aW9uIChyZWFjdERpcmVjdGl2ZSkge1xuXHQgIHJldHVybiByZWFjdERpcmVjdGl2ZShfRGF0ZTIuZGVmYXVsdCk7XG5cdH0pO1xuXHRhbmd1bGFyLm1vZHVsZSgnbmV4dGdlYXJXZWJBcHAnKS5kaXJlY3RpdmUoJ3Jlc291cmNlc0NvbXBvbmVudCcsIGZ1bmN0aW9uIChyZWFjdERpcmVjdGl2ZSkge1xuXHQgIHJldHVybiByZWFjdERpcmVjdGl2ZShfUmVzb3VyY2VzMi5kZWZhdWx0KTtcblx0fSk7XG5cdGFuZ3VsYXIubW9kdWxlKCduZXh0Z2VhcldlYkFwcCcpLmRpcmVjdGl2ZSgnYXVjdGlvblJlc291cmNlc0NvbXBvbmVudCcsIGZ1bmN0aW9uIChyZWFjdERpcmVjdGl2ZSkge1xuXHQgIHJldHVybiByZWFjdERpcmVjdGl2ZShfQXVjdGlvblJlc291cmNlczIuZGVmYXVsdCk7XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCk7XG5cdFxuXHR2YXIgX0xpc3RJdGVtTGluayA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9MaXN0SXRlbUxpbmsyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGlzdEl0ZW1MaW5rKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBBdWN0aW9uUmVzb3VyY2VEb2NzID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhBdWN0aW9uUmVzb3VyY2VEb2NzLCBfQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBBdWN0aW9uUmVzb3VyY2VEb2NzKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdWN0aW9uUmVzb3VyY2VEb2NzKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChBdWN0aW9uUmVzb3VyY2VEb2NzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQXVjdGlvblJlc291cmNlRG9jcykpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhBdWN0aW9uUmVzb3VyY2VEb2NzLCBbe1xuXHQgICAgICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICB2YXIgZG9jTGlua3MgPSB0aGlzLnByb3BzLmRvY3MubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xpc3RJdGVtTGluazIuZGVmYXVsdCwgeyBuYW1lOiBpdGVtLm5hbWUsIHVybDogaXRlbS51cmwsIG1ldHJpYzogaXRlbS5tZXRyaWMsIGtleTogaXRlbS5pZCwgaGFuZGxlQ2xpY2s6IF90aGlzMi5wcm9wcy5oYW5kbGVDbGljayB9KTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2gyJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3dlbGwtdGl0bGUnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMucmVzb3VyY2VEb2NzLm5nY0RvY3VtZW50cycgfSlcblx0ICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsLWJvZHknIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICd1bCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndGV4dC1saXN0IHplcm9MZWZ0UGFkZGluZycgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZG9jTGlua3Ncblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBBdWN0aW9uUmVzb3VyY2VEb2NzO1xuXHR9KF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0QXVjdGlvblJlc291cmNlRG9jcy5wcm9wVHlwZXMgPSB7XG5cdCAgICBkb2NzOiBfcmVhY3QuUHJvcFR5cGVzLmFycmF5LFxuXHQgICAgaGFuZGxlQ2xpY2s6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuY1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQXVjdGlvblJlc291cmNlRG9jcztcblxuLyoqKi8gfSxcbi8qIDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX2NvdW50ZXJwYXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfY291bnRlcnBhcnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY291bnRlcnBhcnQpO1xuXHRcblx0dmFyIF9BdWN0aW9uUmVzb3VyY2VEb2NzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX0F1Y3Rpb25SZXNvdXJjZURvY3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXVjdGlvblJlc291cmNlRG9jcyk7XG5cdFxuXHR2YXIgX2F1Y3Rpb25Eb2NzTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9hdWN0aW9uRG9jc0xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXVjdGlvbkRvY3NMaXN0KTtcblx0XG5cdHZhciBfbWV0cmljID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfbWV0cmljMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldHJpYyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgQXVjdGlvblJlc291cmNlcyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoQXVjdGlvblJlc291cmNlcywgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gQXVjdGlvblJlc291cmNlcyhwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdWN0aW9uUmVzb3VyY2VzKTtcblx0XG5cdCAgICAgICAgLy8gc2V0IGN1cnJlbnQgbGFuZ3VhZ2Vcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQXVjdGlvblJlc291cmNlcy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEF1Y3Rpb25SZXNvdXJjZXMpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdFxuXHQgICAgICAgIF9jb3VudGVycGFydDIuZGVmYXVsdC5zZXRMb2NhbGUocHJvcHMucHJvcHMubGFuZ3VhZ2Uuc3Vic3RyaW5nKDAsIDIpKTtcblx0XG5cdCAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG5cdCAgICAgICAgICAgIGxhbmd1YWdlOiBfY291bnRlcnBhcnQyLmRlZmF1bHQuZ2V0TG9jYWxlKCksXG5cdCAgICAgICAgICAgIGRvY3M6IHByb3BzLnByb3BzLmlzVW5pdGVkU3RhdGVzID8gX2F1Y3Rpb25Eb2NzTGlzdDIuZGVmYXVsdCA6IFtdLFxuXHQgICAgICAgICAgICBpc1VuaXRlZFN0YXRlczogcHJvcHMucHJvcHMuaXNVbml0ZWRTdGF0ZXMgfHwgZmFsc2Vcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IF90aGlzLmhhbmRsZUNsaWNrLmJpbmQoX3RoaXMpO1xuXHRcblx0ICAgICAgICAvLyBsb2cgY3VycmVudCBwYWdlIHZpZXdcblx0ICAgICAgICBfdGhpcy5oYW5kbGVDbGljayhfbWV0cmljMi5kZWZhdWx0LlZJRVdfUkVTT1VSQ0VTX1BBR0UpO1xuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoQXVjdGlvblJlc291cmNlcywgW3tcblx0ICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKG1ldHJpY0tleSkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIGlmIChtZXRyaWNLZXkpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvcHMua2lzc01ldHJpY0luZm8uZ2V0S2lzc01ldHJpY0luZm8oKS50aGVuKGZ1bmN0aW9uIChpbmZvKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLnByb3BzLnNlZ21lbnRpby50cmFjayhtZXRyaWNLZXksIGluZm8pO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1tZC0xMicgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0F1Y3Rpb25SZXNvdXJjZURvY3MyLmRlZmF1bHQsIHsgZG9jczogdGhpcy5zdGF0ZS5kb2NzLCBoYW5kbGVDbGljazogdGhpcy5oYW5kbGVDbGljayB9KVxuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEF1Y3Rpb25SZXNvdXJjZXM7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRBdWN0aW9uUmVzb3VyY2VzLnByb3BUeXBlcyA9IHtcblx0ICAgIHByb3BzOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdFxuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQXVjdGlvblJlc291cmNlcztcblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCk7XG5cdFxuXHR2YXIgX0xpc3RJdGVtTGluayA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9MaXN0SXRlbUxpbmsyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGlzdEl0ZW1MaW5rKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgTW9iaWxlQXBwcyA9IGZ1bmN0aW9uIE1vYmlsZUFwcHMocHJvcHMpIHtcblx0ICAgIHZhciBhcHBMaW5rcyA9IHByb3BzLmFwcHMubWFwKGZ1bmN0aW9uIChhcHApIHtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xpc3RJdGVtTGluazIuZGVmYXVsdCwgeyBuYW1lOiBhcHAubmFtZSwgdXJsOiBhcHAudXJsLCBtZXRyaWM6IGFwcC5tZXRyaWMsIGtleTogYXBwLmlkLCBoYW5kbGVDbGljazogcHJvcHMuaGFuZGxlQ2xpY2sgfSk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAnZGl2Jyxcblx0ICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1tZC00JyB9LFxuXHQgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdoMicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3dlbGwtdGl0bGUnIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQyLmRlZmF1bHQsIHsgY29udGVudDogJ3Jlc291cmNlcy5tb2JpbGVBcHBzLnRpdGxlJyB9KVxuXHQgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbC1ib2R5JyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ3AnLFxuXHQgICAgICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMubW9iaWxlQXBwcy5zdWJUZXh0JyB9KVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICd1bCcsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0ZXh0LWxpc3QgemVyb0xlZnRQYWRkaW5nJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIGFwcExpbmtzXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgIClcblx0ICAgICAgICApXG5cdCAgICApO1xuXHR9O1xuXHRcblx0TW9iaWxlQXBwcy5wcm9wVHlwZXMgPSB7XG5cdCAgICBhcHBzOiBfcmVhY3QuUHJvcFR5cGVzLmFycmF5LFxuXHQgICAgaGFuZGxlQ2xpY2s6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuY1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTW9iaWxlQXBwcztcblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQpO1xuXHRcblx0dmFyIF9jb3VudGVycGFydCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NvdW50ZXJwYXJ0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvdW50ZXJwYXJ0KTtcblx0XG5cdHZhciBfTGlzdEl0ZW1MaW5rID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX0xpc3RJdGVtTGluazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MaXN0SXRlbUxpbmspO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIFJlc291cmNlRG9jcyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoUmVzb3VyY2VEb2NzLCBfQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBSZXNvdXJjZURvY3MoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlRG9jcyk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUmVzb3VyY2VEb2NzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUmVzb3VyY2VEb2NzKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFJlc291cmNlRG9jcywgW3tcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGRvY0xpbmtzID0gdGhpcy5wcm9wcy5kb2NzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9MaXN0SXRlbUxpbmsyLmRlZmF1bHQsIHsgbmFtZTogaXRlbS5uYW1lLCB1cmw6IGl0ZW0udXJsLCBtZXRyaWM6IGl0ZW0ubWV0cmljLCBrZXk6IGl0ZW0uaWQsIGhhbmRsZUNsaWNrOiBfdGhpczIucHJvcHMuaGFuZGxlQ2xpY2sgfSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB2YXIgY29sbGF0ZXJhbERvY0xpbmtzID0gdGhpcy5wcm9wcy5jb2xsYXRlcmFsRG9jcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTGlzdEl0ZW1MaW5rMi5kZWZhdWx0LCB7IG5hbWU6IGl0ZW0ubmFtZSwgdXJsOiBpdGVtLnVybCwgbWV0cmljOiBpdGVtLm1ldHJpYywga2V5OiBpdGVtLmlkLCBoYW5kbGVDbGljazogX3RoaXMyLnByb3BzLmhhbmRsZUNsaWNrIH0pO1xuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIHZhciBsYW5ndWFnZSA9IF9jb3VudGVycGFydDIuZGVmYXVsdC5nZXRMb2NhbGUoKTtcblx0ICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBsYW5ndWFnZSAhPT0gJ2VuJyA/ICdjb2wtbWQtNScgOiAnY29sLW1kLTQnO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NlcyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYW5lbCBwYW5lbC1kZWZhdWx0JyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAnaDInLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3dlbGwtdGl0bGUnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIuZGVmYXVsdCwgeyBjb250ZW50OiAncmVzb3VyY2VzLnJlc291cmNlRG9jcy5kb2N1bWVudHMnIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFuZWwtYm9keScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAndWwnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0ZXh0LWxpc3QgemVyb0xlZnRQYWRkaW5nJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jTGlua3Ncblx0ICAgICAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMucmVzb3VyY2VEb2NzLmNvbGxhdGVyYWxQcm9ncmFtJyB9KVxuXHQgICAgICAgICAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1bCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQtbGlzdCB6ZXJvTGVmdFBhZGRpbmcnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXRlcmFsRG9jTGlua3Ncblx0ICAgICAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFJlc291cmNlRG9jcztcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0XG5cdFJlc291cmNlRG9jcy5wcm9wVHlwZXMgPSB7XG5cdCAgICBkb2NzOiBfcmVhY3QuUHJvcFR5cGVzLmFycmF5LFxuXHQgICAgY29sbGF0ZXJhbERvY3M6IF9yZWFjdC5Qcm9wVHlwZXMuYXJyYXksXG5cdCAgICBoYW5kbGVDbGljazogX3JlYWN0LlByb3BUeXBlcy5mdW5jXG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXNvdXJjZURvY3M7XG5cbi8qKiovIH0sXG4vKiAyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBSZXNvdXJjZVZpZGVvcyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoUmVzb3VyY2VWaWRlb3MsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFJlc291cmNlVmlkZW9zKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXNvdXJjZVZpZGVvcyk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUmVzb3VyY2VWaWRlb3MuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihSZXNvdXJjZVZpZGVvcykpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhSZXNvdXJjZVZpZGVvcywgW3tcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtbWQtNCcgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdzZWN0aW9uJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdoMicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnd2VsbC10aXRsZScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMucmVzb3VyY2VWaWRlb3MubG9nZ2luZ0luJyB9KVxuXHQgICAgICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ254Zy12aWRlbycgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScsIHsgc3JjOiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvM3JxSGRFX1lnYkknLCBmcmFtZUJvcmRlcjogJzAnLCBhbGxvd0Z1bGxTY3JlZW46ICd0cnVlJywgd2lkdGg6ICc4NTQnLCBoZWlnaHQ6ICc0ODAnIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdzZWN0aW9uJyxcblx0ICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdoMicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnd2VsbC10aXRsZScgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMucmVzb3VyY2VWaWRlb3MuaG93VG9Vc2UnIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbnhnLXZpZGVvJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJywgeyBzcmM6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9oYWhMQjZVdTd6VScsIGZyYW1lQm9yZGVyOiAnMCcsIGFsbG93RnVsbFNjcmVlbjogJ3RydWUnLCB3aWR0aDogJzg1NCcsIGhlaWdodDogJzQ4MCcgfSlcblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBSZXNvdXJjZVZpZGVvcztcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlc291cmNlVmlkZW9zO1xuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfY291bnRlcnBhcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jb3VudGVycGFydDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb3VudGVycGFydCk7XG5cdFxuXHR2YXIgX1Jlc291cmNlVmlkZW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX1Jlc291cmNlVmlkZW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Jlc291cmNlVmlkZW9zKTtcblx0XG5cdHZhciBfUmVzb3VyY2VEb2NzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX1Jlc291cmNlRG9jczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZXNvdXJjZURvY3MpO1xuXHRcblx0dmFyIF9Nb2JpbGVBcHBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX01vYmlsZUFwcHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9iaWxlQXBwcyk7XG5cdFxuXHR2YXIgX2NvbGxhdGVyYWxEb2NzTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0dmFyIF9jb2xsYXRlcmFsRG9jc0xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29sbGF0ZXJhbERvY3NMaXN0KTtcblx0XG5cdHZhciBfbW9iaWxlQXBwc0xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0XG5cdHZhciBfbW9iaWxlQXBwc0xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9iaWxlQXBwc0xpc3QpO1xuXHRcblx0dmFyIF9kb2NzTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0dmFyIF9kb2NzTGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kb2NzTGlzdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgUmVzb3VyY2VzID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhSZXNvdXJjZXMsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFJlc291cmNlcyhwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXNvdXJjZXMpO1xuXHRcblx0ICAgICAgICAvLyBnZXQgZmVlIHNjaGVkdWxlIGNvbnRlbnQgbGlua1xuXHQgICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChSZXNvdXJjZXMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihSZXNvdXJjZXMpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdFxuXHQgICAgICAgIF9kb2NzTGlzdDIuZGVmYXVsdFswXS51cmwgPSBwcm9wcy5wcm9wcy5hcGkuY29udGVudExpbmsoJy9kZWFsZXIvZmVlc2NoZWR1bGUvRmVlU2NoZWR1bGUnLCB7fSk7XG5cdFxuXHQgICAgICAgIC8vIHNldCBjdXJyZW50IGxhbmd1YWdlXG5cdCAgICAgICAgX2NvdW50ZXJwYXJ0Mi5kZWZhdWx0LnNldExvY2FsZShwcm9wcy5wcm9wcy5sYW5ndWFnZS5zdWJzdHJpbmcoMCwgMikpO1xuXHRcblx0ICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgICAgICAgbGFuZ3VhZ2U6IF9jb3VudGVycGFydDIuZGVmYXVsdC5nZXRMb2NhbGUoKSxcblx0ICAgICAgICAgICAgZG9jczogcHJvcHMucHJvcHMuaXNVbml0ZWRTdGF0ZXMgPyBfZG9jc0xpc3QyLmRlZmF1bHQgOiBbXSxcblx0ICAgICAgICAgICAgY29sbGF0ZXJhbERvY3M6IF9jb2xsYXRlcmFsRG9jc0xpc3QyLmRlZmF1bHQsXG5cdCAgICAgICAgICAgIG1vYmlsZUFwcHM6IF9tb2JpbGVBcHBzTGlzdDIuZGVmYXVsdCxcblx0ICAgICAgICAgICAgaXNVbml0ZWRTdGF0ZXM6IHByb3BzLnByb3BzLmlzVW5pdGVkU3RhdGVzIHx8IGZhbHNlXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBfdGhpcy5oYW5kbGVDbGljay5iaW5kKF90aGlzKTtcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFJlc291cmNlcywgW3tcblx0ICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKG1ldHJpYykge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIGlmIChtZXRyaWMpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvcHMua2lzc01ldHJpY0luZm8uZ2V0S2lzc01ldHJpY0luZm8oKS50aGVuKGZ1bmN0aW9uIChpbmZvKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLnByb3BzLnNlZ21lbnRpby50cmFjayhtZXRyaWMsIGluZm8pO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuXHQgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5sYW5ndWFnZSA9PT0gJ2VuJyA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZXNvdXJjZVZpZGVvczIuZGVmYXVsdCwgeyBoYW5kbGVDbGljazogdGhpcy5oYW5kbGVDbGljayB9KSA6IG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Jlc291cmNlRG9jczIuZGVmYXVsdCwgeyBkb2NzOiB0aGlzLnN0YXRlLmRvY3MsIGNvbGxhdGVyYWxEb2NzOiB0aGlzLnN0YXRlLmNvbGxhdGVyYWxEb2NzLCBoYW5kbGVDbGljazogdGhpcy5oYW5kbGVDbGljayB9KSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTW9iaWxlQXBwczIuZGVmYXVsdCwgeyBhcHBzOiB0aGlzLnN0YXRlLm1vYmlsZUFwcHMsIGhhbmRsZUNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrIH0pXG5cdCAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBSZXNvdXJjZXM7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRSZXNvdXJjZXMucHJvcFR5cGVzID0ge1xuXHQgICAgcHJvcHM6IF9yZWFjdC5Qcm9wVHlwZXMub2JqZWN0XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXNvdXJjZXM7XG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCk7XG5cdFxuXHR2YXIgX2NvdW50ZXJwYXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfY291bnRlcnBhcnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY291bnRlcnBhcnQpO1xuXHRcblx0dmFyIF9tZXRyaWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9tZXRyaWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWV0cmljKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgbGFuZ3VhZ2VQcmVmaXggPSBfY291bnRlcnBhcnQyLmRlZmF1bHQuZ2V0TG9jYWxlKCk7XG5cdFxuXHRpZiAobGFuZ3VhZ2VQcmVmaXguaW5kZXhPZignX0NBJykgIT09IC0xKSB7XG5cdCAgICBsYW5ndWFnZVByZWZpeCA9ICdDQUUlMjAnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFt7XG5cdCAgICBpZDogMCxcblx0ICAgIG5hbWU6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIuZGVmYXVsdCwgeyBjb250ZW50OiAncmVzb3VyY2VzLmF1Y3Rpb25Eb2NzTGlzdC5zZWxsZXJHdWlkZScgfSksXG5cdCAgICBtZXRyaWM6IF9tZXRyaWMyLmRlZmF1bHQuQVVDVElPTl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9TRUxMRVJTX1BBR0UsXG5cdCAgICB1cmw6ICdkb2N1bWVudHMvJyArIGxhbmd1YWdlUHJlZml4ICsgJ05leHRHZWFyJTIwQ2FwaXRhbCUyMFdlYnNpdGUlMjBHdWlkZSUyMC0lMjBTZWxsZXJzLnBkZidcblx0fV07XG5cbi8qKiovIH0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCk7XG5cdFxuXHR2YXIgX2NvdW50ZXJwYXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfY291bnRlcnBhcnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY291bnRlcnBhcnQpO1xuXHRcblx0dmFyIF9tZXRyaWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9tZXRyaWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWV0cmljKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgbGFuZ3VhZ2VQcmVmaXggPSBfY291bnRlcnBhcnQyLmRlZmF1bHQuZ2V0TG9jYWxlKCk7XG5cdFxuXHRpZiAobGFuZ3VhZ2VQcmVmaXguaW5kZXhPZignX0NBJykgIT09IC0xKSB7XG5cdCAgICBsYW5ndWFnZVByZWZpeCA9ICdDQUUlMjAnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFt7XG5cdCAgICBpZDogMSxcblx0ICAgIG5hbWU6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIuZGVmYXVsdCwgeyBjb250ZW50OiAncmVzb3VyY2VzLmNvbGxhdGVyYWxEb2NzTGlzdC53ZWxjb21lTGV0dGVyJyB9KSxcblx0ICAgIHVybDogJ2RvY3VtZW50cy8nICsgbGFuZ3VhZ2VQcmVmaXggKyAnV2VsY29tZSUyMExldHRlci5wZGYnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfV0VMQ09NRV9MRVRURVJfUEFHRVxuXHR9LCB7XG5cdCAgICBpZDogMixcblx0ICAgIG5hbWU6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIuZGVmYXVsdCwgeyBjb250ZW50OiAncmVzb3VyY2VzLmNvbGxhdGVyYWxEb2NzTGlzdC5ndWlkZWxpbmVzJyB9KSxcblx0ICAgIHVybDogJ2RvY3VtZW50cy8nICsgbGFuZ3VhZ2VQcmVmaXggKyAnSW5zdXJhbmNlJTIwR3VpZGVsaW5lcy5wZGYnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfR1VJREVMSU5FU19QQUdFXG5cdH0sIHtcblx0ICAgIGlkOiAzLFxuXHQgICAgbmFtZTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMuY29sbGF0ZXJhbERvY3NMaXN0LmluZm9ybWF0aW9uU2hlZXQnIH0pLFxuXHQgICAgdXJsOiAnZG9jdW1lbnRzLycgKyBsYW5ndWFnZVByZWZpeCArICdJbmZvcm1hdGlvbiUyMFNoZWV0LnBkZicsXG5cdCAgICBtZXRyaWM6IF9tZXRyaWMyLmRlZmF1bHQuREVBTEVSX1JFU09VUkNFU19JTkZPUk1BVElPTl9TSEVFVF9QQUdFXG5cdH0sIHtcblx0ICAgIGlkOiA0LFxuXHQgICAgbmFtZTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMuY29sbGF0ZXJhbERvY3NMaXN0LmNsYWltRm9ybScgfSksXG5cdCAgICB1cmw6ICdkb2N1bWVudHMvJyArIGxhbmd1YWdlUHJlZml4ICsgJ0NsYWltJTIwRm9ybS5wZGYnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfQ0xBSU1fRk9STV9QQUdFXG5cdH1dO1xuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQpO1xuXHRcblx0dmFyIF9jb3VudGVycGFydCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NvdW50ZXJwYXJ0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvdW50ZXJwYXJ0KTtcblx0XG5cdHZhciBfbWV0cmljID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfbWV0cmljMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldHJpYyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIGxhbmd1YWdlUHJlZml4ID0gX2NvdW50ZXJwYXJ0Mi5kZWZhdWx0LmdldExvY2FsZSgpO1xuXHRcblx0aWYgKGxhbmd1YWdlUHJlZml4LmluZGV4T2YoJ19DQScpICE9PSAtMSkge1xuXHQgICAgbGFuZ3VhZ2VQcmVmaXggPSAnQ0FFJTIwJztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBbe1xuXHQgICAgaWQ6IDAsXG5cdCAgICBuYW1lOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQyLmRlZmF1bHQsIHsgY29udGVudDogJ3Jlc291cmNlcy5kb2NzTGlzdC5yYXRlcycgfSksXG5cdCAgICBtZXRyaWM6IF9tZXRyaWMyLmRlZmF1bHQuREVBTEVSX1JFU09VUkNFU19SQVRFU19BTkRfRkVFU19QQUdFLFxuXHQgICAgdXJsOiAnJ1xuXHR9LCB7XG5cdCAgICBpZDogMSxcblx0ICAgIG5hbWU6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIuZGVmYXVsdCwgeyBjb250ZW50OiAncmVzb3VyY2VzLmRvY3NMaXN0LndlbGNvbWVQYWNrZXQnIH0pLFxuXHQgICAgdXJsOiAnaHR0cDovL3d3dy5uZXh0Z2VhcmNhcGl0YWwuY29tL3dlbGNvbWUtcGFja2V0LycsXG5cdCAgICBtZXRyaWM6IF9tZXRyaWMyLmRlZmF1bHQuREVBTEVSX1JFU09VUkNFU19XRUxDT01FX1BBQ0tFVF9QQUdFXG5cdH0sIHtcblx0ICAgIGlkOiAyLFxuXHQgICAgbmFtZTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMuZG9jc0xpc3QuZGVhbGVyQ2hlY2tsaXN0JyB9KSxcblx0ICAgIHVybDogJ2RvY3VtZW50cy8nICsgbGFuZ3VhZ2VQcmVmaXggKyAnRGVhbGVyJTIwRnVuZGluZyUyMENoZWNrbGlzdC5wZGYnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfREVBTEVSX0ZVTkRJTkdfQ0hFQ0tMSVNUX1BBR0Vcblx0fSwge1xuXHQgICAgaWQ6IDMsXG5cdCAgICBuYW1lOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQyLmRlZmF1bHQsIHsgY29udGVudDogJ3Jlc291cmNlcy5kb2NzTGlzdC5mYXEnIH0pLFxuXHQgICAgdXJsOiAnZG9jdW1lbnRzLycgKyBsYW5ndWFnZVByZWZpeCArICdSZWNvcmRzJTIwVGl0bGUlMjBGQVEucGRmJyxcblx0ICAgIG1ldHJpYzogX21ldHJpYzIuZGVmYXVsdC5ERUFMRVJfUkVTT1VSQ0VTX1RJVExFX01BTkFHRU1FTlRfRkFRXG5cdH0sIHtcblx0ICAgIGlkOiA0LFxuXHQgICAgbmFtZTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50Mi5kZWZhdWx0LCB7IGNvbnRlbnQ6ICdyZXNvdXJjZXMuZG9jc0xpc3QuaW5zdHJ1Y3Rpb25zJyB9KSxcblx0ICAgIHVybDogJ2RvY3VtZW50cy8nICsgbGFuZ3VhZ2VQcmVmaXggKyAnTmV4dEdlYXIlMjBDYXBpdGFsJTIwV2Vic2l0ZSUyMEd1aWRlJTIwLSUyMEJ1eWVycy5wZGYnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9CVVlFUlNfUEFHRVxuXHR9XTtcblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0VHJhbnNsYXRlQ29tcG9uZW50KTtcblx0XG5cdHZhciBfbWV0cmljID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfbWV0cmljMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldHJpYyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBbe1xuXHQgICAgaWQ6IDEsXG5cdCAgICBuYW1lOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RUcmFuc2xhdGVDb21wb25lbnQyLmRlZmF1bHQsIHsgY29udGVudDogJ3Jlc291cmNlcy5tb2JpbGVBcHBzTGlzdC5tb2JpbGVJb3MnIH0pLFxuXHQgICAgdXJsOiAnaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL3VzL2FwcC9uZXh0Z2Vhci1jYXBpdGFsL2lkNzQ4NjA5ODg1P210PTgnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfSU9TX0FQUFxuXHR9LCB7XG5cdCAgICBpZDogMixcblx0ICAgIG5hbWU6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFRyYW5zbGF0ZUNvbXBvbmVudDIuZGVmYXVsdCwgeyBjb250ZW50OiAncmVzb3VyY2VzLm1vYmlsZUFwcHNMaXN0Lm1vYmlsZUFuZHJvaWQnIH0pLFxuXHQgICAgdXJsOiAnaHR0cHM6Ly9wbGF5Lmdvb2dsZS5jb20vc3RvcmUvYXBwcy9kZXRhaWxzP2lkPWNvbS5uZXh0Z2Vhci5tb2JpbGUnLFxuXHQgICAgbWV0cmljOiBfbWV0cmljMi5kZWZhdWx0LkRFQUxFUl9SRVNPVVJDRVNfQU5EUk9JRF9BUFBcblx0fV07XG5cbi8qKiovIH0sXG4vKiAzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgRGF0ZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoRGF0ZSwgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRGF0ZSgpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0ZSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRGF0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERhdGUpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoRGF0ZSwgW3tcblx0ICAgICAgICBrZXk6IFwicmVuZGVyXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgXCJkaXZcIixcblx0ICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBodG1sRm9yOiB0aGlzLnByb3BzLmxhYmVsRm9yIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5sYWJlbFxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJuZy1yZWFjdC1kYXRlLXBpY2tlciB7dGhpcy5zdGF0ZS5pbnZhbGlkfVwiLFxuXHQgICAgICAgICAgICAgICAgICAgIG1pbjogdGhpcy5wcm9wcy5taW5EYXRlLFxuXHQgICAgICAgICAgICAgICAgICAgIG1heDogdGhpcy5wcm9wcy5tYXhEYXRlLFxuXHQgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIm1tL2RkL3l5eXlcIixcblx0ICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5kYXRlLFxuXHQgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZVxuXHQgICAgICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICBcImJ1dHRvblwiLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgdGFiSW5kZXg6IFwiLTFcIiwgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImJ0bi11bnN0eWxlIGRpc2J1cnNlbWVudC1idG4tY2FsZW5kYXJcIiwgb25DbGljazogdGhpcy5oYW5kbGVDbGljayB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBcInNwYW5cIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwic3ZnLWljb24gaWNvbi1jYWxlbmRhclwiIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdmdcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiLCBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiBcInhNaWRZTWlkIG1lZXRcIiB9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1c2VcIiwgeyB4bGlua0hyZWY6IFwiI2ljb24tY2FsZW5kYXJcIiB9KVxuXHQgICAgICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gRGF0ZTtcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0XG5cdERhdGUucHJvcFR5cGVzID0ge1xuXHQgICAgbWluRGF0ZTogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBtYXhEYXRlOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGxhYmVsRm9yOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGxhYmVsOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZ1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRGF0ZTtcblxuLyoqKi8gfSxcbi8qIDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBMaW5rID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhMaW5rLCBfQ29tcG9uZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBMaW5rKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpbmspO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTGluay5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKExpbmspKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdFxuXHQgICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhMaW5rLCBbe1xuXHQgICAgICAgIGtleTogXCJoYW5kbGVDbGlja1wiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVDbGljayh0aGlzLnByb3BzLm1ldHJpYyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJyZW5kZXJcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICBcImFcIixcblx0ICAgICAgICAgICAgICAgIHsgaHJlZjogdGhpcy5wcm9wcy51cmwsIHRhcmdldDogXCJfYmxhbmtcIiwgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIiwgb25DbGljazogdGhpcy5oYW5kbGVDbGljayB9LFxuXHQgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5uYW1lXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBMaW5rO1xuXHR9KF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0TGluay5wcm9wVHlwZXMgPSB7XG5cdCAgICBuYW1lOiBfcmVhY3QuUHJvcFR5cGVzLmVsZW1lbnQsXG5cdCAgICB1cmw6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgbWV0cmljOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGhhbmRsZUNsaWNrOiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmNcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExpbms7XG5cbi8qKiovIH0sXG4vKiAzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgICByZXNvdXJjZXM6IHtcblx0ICAgICAgICByZXNvdXJjZVZpZGVvczoge1xuXHQgICAgICAgICAgICBsb2dnaW5nSW46ICdMb2dnaW5nIEluIHRvIG15TmV4dEdlYXInLFxuXHQgICAgICAgICAgICBob3dUb1VzZTogJ0hvdyB0byBVc2UgbXlOZXh0R2Vhcidcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHJlc291cmNlRG9jczoge1xuXHQgICAgICAgICAgICBjb2xsYXRlcmFsUHJvZ3JhbTogJ0NvbGxhdGVyYWwgUHJvdGVjdGlvbiBQcm9ncmFtJyxcblx0ICAgICAgICAgICAgZG9jdW1lbnRzOiAnRG9jdW1lbnRzJyxcblx0ICAgICAgICAgICAgbmdjRG9jdW1lbnRzOiAnTmV4dGdlYXIgQ2FwaXRhbCBEb2N1bWVudHMnXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBtb2JpbGVBcHBzOiB7XG5cdCAgICAgICAgICAgIHRpdGxlOiAnTW9iaWxlIEFwcHMnLFxuXHQgICAgICAgICAgICBzdWJUZXh0OiAnTWFuYWdlIHlvdXIgYnVzaW5lc3Mgd2l0aCBOZXh0R2VhciBDYXBpdGFsIG9uIHRoZSBnby4nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjb2xsYXRlcmFsRG9jc0xpc3Q6IHtcblx0ICAgICAgICAgICAgd2VsY29tZUxldHRlcjogJ1dlbGNvbWUgTGV0dGVyJyxcblx0ICAgICAgICAgICAgZ3VpZGVsaW5lczogJ0d1aWRlbGluZXMnLFxuXHQgICAgICAgICAgICBpbmZvcm1hdGlvblNoZWV0OiAnSW5mb3JtYXRpb24gU2hlZXQnLFxuXHQgICAgICAgICAgICBjbGFpbUZvcm06ICdDbGFpbSBGb3JtJ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgbW9iaWxlQXBwc0xpc3Q6IHtcblx0ICAgICAgICAgICAgbW9iaWxlSW9zOiAnRG93bmxvYWQgbXlOZXh0R2VhciBtb2JpbGUgaU9TJyxcblx0ICAgICAgICAgICAgbW9iaWxlQW5kcm9pZDogJ0Rvd25sb2FkIG15TmV4dEdlYXIgbW9iaWxlIEFuZHJvaWQnXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBkb2NzTGlzdDoge1xuXHQgICAgICAgICAgICB3ZWxjb21lUGFja2V0OiAnV2VsY29tZSBQYWNrZXQnLFxuXHQgICAgICAgICAgICBkZWFsZXJDaGVja2xpc3Q6ICdEZWFsZXIgRnVuZGluZyBDaGVja2xpc3QnLFxuXHQgICAgICAgICAgICBmYXE6ICdUaXRsZSBNYW5hZ2VtZW50IEZyZXF1ZW50bHkgQXNrZWQgUXVlc3Rpb25zJyxcblx0ICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnSW5zdHJ1Y3Rpb25zIGZvciBCdXllcnMnLFxuXHQgICAgICAgICAgICByYXRlczogJ1JhdGVzIGFuZCBGZWVzJ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgYXVjdGlvbkRvY3NMaXN0OiB7XG5cdCAgICAgICAgICAgIHNlbGxlckd1aWRlOiAnSW5zdHJ1Y3Rpb25zIGZvciBTZWxsZXJzJ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGVzdDoge1xuXHQgICAgICAgICAgICB0ZXN0OiBcInRlc3RcIixcblx0ICAgICAgICAgICAgdGVzdDI6IFwidGVzdDJcIlxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0geyBcInJlc291cmNlc1wiOiB7IFwicmVzb3VyY2VWaWRlb3NcIjogeyBcImxvZ2dpbmdJblwiOiBcIkluaWNpbyBkZSBzZXNpw7NuIGVuIG15TmV4dEdlYXJcIiwgXCJob3dUb1VzZVwiOiBcIkPDs21vIHV0aWxpemFyIG15TmV4dEdlYXJcIiB9LCBcInJlc291cmNlRG9jc1wiOiB7IFwiY29sbGF0ZXJhbFByb2dyYW1cIjogXCJDw7NtbyB1dGlsaXphciBteU5leHRHZWFyXCIsIFwiZG9jdW1lbnRzXCI6IFwiRG9jdW1lbnRvc1wiLCBcIm5nY0RvY3VtZW50c1wiOiBcIkRvY3VtZW50b3MgZGUgTmV4dEdlYXIgQ2FwaXRhbFwiIH0sIFwibW9iaWxlQXBwc1wiOiB7IFwidGl0bGVcIjogXCJBcGxpY2FjaW9uZXMgbcOzdmlsZXNcIiwgXCJzdWJUZXh0XCI6IFwiTWFuZWplIHN1IG5lZ29jaW8gY29uIE5leHRHZWFyIENhcGl0YWwgZW4gY3VhbHF1aWVyIHBhcnRlXCIgfSwgXCJjb2xsYXRlcmFsRG9jc0xpc3RcIjogeyBcIndlbGNvbWVMZXR0ZXJcIjogXCJDYXJ0YSBkZSBCaWVudmVuaWRhXCIsIFwiZ3VpZGVsaW5lc1wiOiBcIkxpbmVhbWllbnRvc1wiLCBcImluZm9ybWF0aW9uU2hlZXRcIjogXCJIb2phIGRlIGluZm9ybWFjacOzblwiLCBcImNsYWltRm9ybVwiOiBcIkZvcm11bGFyaW8gZGUgcmVjbGFtYWNpw7NuXCIgfSwgXCJtb2JpbGVBcHBzTGlzdFwiOiB7IFwibW9iaWxlSW9zXCI6IFwiRGVzY2FyZ3VlIG15TmV4dEdlYXIgbW9iaWxlIHBhcmEgaU9TXCIsIFwibW9iaWxlQW5kcm9pZFwiOiBcIkRlc2Nhcmd1ZSBteU5leHRHZWFyIG1vYmlsZSBwYXJhIEFuZHJvaWRcIiB9LCBcImRvY3NMaXN0XCI6IHsgXCJ3ZWxjb21lUGFja2V0XCI6IFwiUGFxdWV0ZSBkZSBCaWVudmVuaWRhXCIsIFwiZGVhbGVyQ2hlY2tsaXN0XCI6IFwiTGlzdGEgZGUgVmVyaWZpY2FjacOzbiBkZSBGaW5hbmNpYW1pZW50byBhIFByb3ZlZWRvcmVzXCIsIFwiZmFxXCI6IFwiTGlzdGEgZGUgVmVyaWZpY2FjacOzbiBkZSBGaW5hbmNpYW1pZW50byBhIFByb3ZlZWRvcmVzXCIsIFwiaW5zdHJ1Y3Rpb25zXCI6IFwiSW5zdHJ1Y2Npb25lcyBwYXJhIGNvbXByYWRvcmVzXCIsIFwicmF0ZXNcIjogXCJUYXNhcyB5IGNhcmdvc1wiIH0sIFwiYXVjdGlvbkRvY3NMaXN0XCI6IHsgXCJzZWxsZXJHdWlkZVwiOiBcIkluc3RydWNjaW9uZXMgcGFyYSB2ZW5kZWRvcmVzXCIgfSwgXCJ0ZXN0XCI6IHsgXCJ0ZXN0XCI6IFwidGVzdF9lc1wiLCBcInRlc3QyXCI6IFwidGVzdDJcIiB9IH0gfTtcblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0geyBcInJlc291cmNlc1wiOiB7IFwicmVzb3VyY2VWaWRlb3NcIjogeyBcImxvZ2dpbmdJblwiOiBcIk91dnJpciB1bmUgc2Vzc2lvbiBkYW5zIE5leHRHZWFyXCIsIFwiaG93VG9Vc2VcIjogXCJDb21tZW50IHV0aWxpc2VyIG15TmV4dEdlYXJcIiB9LCBcInJlc291cmNlRG9jc1wiOiB7IFwiY29sbGF0ZXJhbFByb2dyYW1cIjogXCJQcm9ncmFtbWUgZGUgcHJvdGVjdGlvbiBjb2xsYXTDqXJhbGVcIiwgXCJkb2N1bWVudHNcIjogXCJ0ZXN0X2ZyXCIsIFwibmdjRG9jdW1lbnRzXCI6IFwiRG9jdW1lbnRzIE5leHRHZWFyIENhcGl0YWxcIiB9LCBcIm1vYmlsZUFwcHNcIjogeyBcInRpdGxlXCI6IFwiQXBwbGljYXRpb25zIG1vYmlsZXNcIiwgXCJzdWJUZXh0XCI6IFwiR8OpcmV6IHZvdHJlIGVudHJlcHJpc2UgYXZlYyBOZXh0R2VhciBDYXBpdGFsIHBlbmRhbnQgdm9zIGTDqXBsYWNlbWVudHMuXCIgfSwgXCJjb2xsYXRlcmFsRG9jc0xpc3RcIjogeyBcIndlbGNvbWVMZXR0ZXJcIjogXCJMZXR0cmUgZGUgYmllbnZlbnVlXCIsIFwiZ3VpZGVsaW5lc1wiOiBcIkRpcmVjdGl2ZXNcIiwgXCJpbmZvcm1hdGlvblNoZWV0XCI6IFwiRmV1aWxsZXQgZCdpbmZvcm1hdGlvblwiLCBcImNsYWltRm9ybVwiOiBcIkZ1cm11bGFpcmUgZGUgcsOpY2xhbWF0aW9uXCIgfSwgXCJtb2JpbGVBcHBzTGlzdFwiOiB7IFwibW9iaWxlSW9zXCI6IFwiVMOpbMOpY2hhcmdlciBNeU5leHRHZWFyIE1vYmlsZSBzdXIgaU9TXCIsIFwibW9iaWxlQW5kcm9pZFwiOiBcIlTDqWzDqWNoYXJnZXIgTXlOZXh0R2VhciBNb2JpbGUgc3VyIEFuZHJvaWRcIiB9LCBcImRvY3NMaXN0XCI6IHsgXCJ3ZWxjb21lUGFja2V0XCI6IFwiVHJvdXNzZSBkZSBiaWVudmVudWVcIiwgXCJkZWFsZXJDaGVja2xpc3RcIjogXCJMaXN0ZSBkZSB2w6lyaWZpY2F0aW9uIGRlIGZpbmFuY2VtZW50IGR1IGNvbmNlc3Npb25uYWlyZVwiLCBcImZhcVwiOiBcIkZvaXJlIGF1eCBxdWVzdGlvbnMgc3VyIGxhIGdlc3Rpb24gZGVzIHRpdHJlc1wiLCBcImluc3RydWN0aW9uc1wiOiBcIkluc3RydWN0aW9ucyBwb3VyIGxlcyBhY2hldGV1cnNcIiwgXCJyYXRlc1wiOiBcIkluc3RydWN0aW9ucyBwb3VyIGxlcyBhY2hldGV1cnNcIiB9LCBcImF1Y3Rpb25Eb2NzTGlzdFwiOiB7IFwic2VsbGVyR3VpZGVcIjogXCJJbnN0cnVjdGlvbnMgcG91ciBsZXMgdmVuZGV1cnNcIiB9LCBcInRlc3RcIjogeyBcInRlc3RcIjogXCJ0ZXN0X2ZyXCIsIFwidGVzdDJcIjogXCJ0ZXN0MlwiIH0gfSB9O1xuXG4vKioqLyB9LFxuLyogMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY291bnRlcnBhcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jb3VudGVycGFydDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb3VudGVycGFydCk7XG5cdFxuXHR2YXIgX2VuID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2VuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VuKTtcblx0XG5cdHZhciBfZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0XG5cdHZhciBfZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXMpO1xuXHRcblx0dmFyIF9mciA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHRcblx0dmFyIF9mcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X2NvdW50ZXJwYXJ0Mi5kZWZhdWx0LnJlZ2lzdGVyVHJhbnNsYXRpb25zKCdlbicsIF9lbjIuZGVmYXVsdCk7XG5cdF9jb3VudGVycGFydDIuZGVmYXVsdC5yZWdpc3RlclRyYW5zbGF0aW9ucygnZXMnLCBfZXMyLmRlZmF1bHQpO1xuXHRfY291bnRlcnBhcnQyLmRlZmF1bHQucmVnaXN0ZXJUcmFuc2xhdGlvbnMoJ2ZyJywgX2ZyMi5kZWZhdWx0KTtcblxuLyoqKi8gfSxcbi8qIDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBUaGUgdHJhbnNsYXRpb25zIGluIHRoaXMgZmlsZSBhcmUgYWRkZWQgYnkgZGVmYXVsdC5cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGNvdW50ZXJwYXJ0OiB7XG5cdCAgICBuYW1lczogX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBwbHVyYWxpemU6IF9fd2VicGFja19yZXF1aXJlX18oNDcpLFxuXHRcblx0ICAgIGZvcm1hdHM6IHtcblx0ICAgICAgZGF0ZToge1xuXHQgICAgICAgICdkZWZhdWx0JzogICclYSwgJWUgJWIgJVknLFxuXHQgICAgICAgIGxvbmc6ICAgICAgICclQSwgJUIgJW8sICVZJyxcblx0ICAgICAgICBzaG9ydDogICAgICAnJWIgJWUnXG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB0aW1lOiB7XG5cdCAgICAgICAgJ2RlZmF1bHQnOiAgJyVIOiVNJyxcblx0ICAgICAgICBsb25nOiAgICAgICAnJUg6JU06JVMgJXonLFxuXHQgICAgICAgIHNob3J0OiAgICAgICclSDolTSdcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIGRhdGV0aW1lOiB7XG5cdCAgICAgICAgJ2RlZmF1bHQnOiAgJyVhLCAlZSAlYiAlWSAlSDolTScsXG5cdCAgICAgICAgbG9uZzogICAgICAgJyVBLCAlQiAlbywgJVkgJUg6JU06JVMgJXonLFxuXHQgICAgICAgIHNob3J0OiAgICAgICclZSAlYiAlSDolTSdcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBkYXRlTmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0XG5cdGZ1bmN0aW9uIHN0cmZ0aW1lKGRhdGUsIGZvcm1hdCwgbmFtZXMpIHtcblx0ICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG5cdFxuXHQgIG5hbWVzID0gbmFtZXMgfHwgZGF0ZU5hbWVzO1xuXHRcblx0ICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoLyUoWy1fMF0/LikvZywgZnVuY3Rpb24oXywgYykge1xuXHQgICAgdmFyIHBhZGRpbmcgPSBudWxsO1xuXHRcblx0ICAgIGlmIChjLmxlbmd0aCA9PSAyKSB7XG5cdCAgICAgIHN3aXRjaCAoY1swXSkge1xuXHQgICAgICAgIGNhc2UgJy0nOiBwYWRkaW5nID0gJyc7ICBicmVhaztcblx0ICAgICAgICBjYXNlICdfJzogcGFkZGluZyA9ICcgJzsgYnJlYWs7XG5cdCAgICAgICAgY2FzZSAnMCc6IHBhZGRpbmcgPSAnMCc7IGJyZWFrO1xuXHQgICAgICAgIGRlZmF1bHQ6IHJldHVybiBfOyAvLyBzaG91bGQgbmV2ZXIgcmVhY2ggdGhpcyBvbmVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgYyA9IGNbMV07XG5cdCAgICB9XG5cdFxuXHQgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgIGNhc2UgJ0EnOiByZXR1cm4gbmFtZXMuZGF5c1tkYXRlLmdldERheSgpXTtcblx0ICAgICAgY2FzZSAnYSc6IHJldHVybiBuYW1lcy5hYmJyZXZpYXRlZF9kYXlzW2RhdGUuZ2V0RGF5KCldO1xuXHQgICAgICBjYXNlICdCJzogcmV0dXJuIG5hbWVzLm1vbnRoc1tkYXRlLmdldE1vbnRoKCldO1xuXHQgICAgICBjYXNlICdiJzogcmV0dXJuIG5hbWVzLmFiYnJldmlhdGVkX21vbnRoc1tkYXRlLmdldE1vbnRoKCldO1xuXHQgICAgICBjYXNlICdDJzogcmV0dXJuIHBhZChNYXRoLmZsb29yKGRhdGUuZ2V0RnVsbFllYXIoKSAvIDEwMCksIHBhZGRpbmcpO1xuXHQgICAgICBjYXNlICdEJzogcmV0dXJuIHN0cmZ0aW1lKGRhdGUsICclbS8lZC8leScpO1xuXHQgICAgICBjYXNlICdkJzogcmV0dXJuIHBhZChkYXRlLmdldERhdGUoKSwgcGFkZGluZyk7XG5cdCAgICAgIGNhc2UgJ2UnOiByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG5cdCAgICAgIGNhc2UgJ0YnOiByZXR1cm4gc3RyZnRpbWUoZGF0ZSwgJyVZLSVtLSVkJyk7XG5cdCAgICAgIGNhc2UgJ0gnOiByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSwgcGFkZGluZyk7XG5cdCAgICAgIGNhc2UgJ2gnOiByZXR1cm4gbmFtZXMuYWJicmV2aWF0ZWRfbW9udGhzW2RhdGUuZ2V0TW9udGgoKV07XG5cdCAgICAgIGNhc2UgJ0knOiByZXR1cm4gcGFkKGhvdXJzMTIoZGF0ZSksIHBhZGRpbmcpO1xuXHQgICAgICBjYXNlICdqJzogcmV0dXJuIHBhZChNYXRoLmNlaWwoKGRhdGUuZ2V0VGltZSgpIC0gKG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMSkpLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpLCAzKTtcblx0ICAgICAgY2FzZSAnayc6IHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpLCBwYWRkaW5nID09PSBudWxsID8gJyAnIDogcGFkZGluZyk7XG5cdCAgICAgIGNhc2UgJ0wnOiByZXR1cm4gcGFkKE1hdGguZmxvb3IodGltZXN0YW1wICUgMTAwMCksIDMpO1xuXHQgICAgICBjYXNlICdsJzogcmV0dXJuIHBhZChob3VyczEyKGRhdGUpLCBwYWRkaW5nID09PSBudWxsID8gJyAnIDogcGFkZGluZyk7XG5cdCAgICAgIGNhc2UgJ00nOiByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpLCBwYWRkaW5nKTtcblx0ICAgICAgY2FzZSAnbSc6IHJldHVybiBwYWQoZGF0ZS5nZXRNb250aCgpICsgMSwgcGFkZGluZyk7XG5cdCAgICAgIGNhc2UgJ24nOiByZXR1cm4gJ1xcbic7XG5cdCAgICAgIGNhc2UgJ28nOiByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKSArIG9yZGluYWwoZGF0ZS5nZXREYXRlKCkpO1xuXHQgICAgICBjYXNlICdQJzogcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSA8IDEyID8gbmFtZXMuYW0udG9Mb3dlckNhc2UoKSA6IG5hbWVzLnBtLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgIGNhc2UgJ3AnOiByZXR1cm4gZGF0ZS5nZXRIb3VycygpIDwgMTIgPyBuYW1lcy5hbS50b1VwcGVyQ2FzZSgpIDogbmFtZXMucG0udG9VcHBlckNhc2UoKTtcblx0ICAgICAgY2FzZSAnUic6IHJldHVybiBzdHJmdGltZShkYXRlLCAnJUg6JU0nKTtcblx0ICAgICAgY2FzZSAncic6IHJldHVybiBzdHJmdGltZShkYXRlLCAnJUk6JU06JVMgJXAnKTtcblx0ICAgICAgY2FzZSAnUyc6IHJldHVybiBwYWQoZGF0ZS5nZXRTZWNvbmRzKCksIHBhZGRpbmcpO1xuXHQgICAgICBjYXNlICdzJzogcmV0dXJuIE1hdGguZmxvb3IodGltZXN0YW1wIC8gMTAwMCk7XG5cdCAgICAgIGNhc2UgJ1QnOiByZXR1cm4gc3RyZnRpbWUoZGF0ZSwgJyVIOiVNOiVTJyk7XG5cdCAgICAgIGNhc2UgJ3QnOiByZXR1cm4gJ1xcdCc7XG5cdCAgICAgIGNhc2UgJ1UnOiByZXR1cm4gcGFkKHdlZWtOdW1iZXIoZGF0ZSwgJ3N1bmRheScpLCBwYWRkaW5nKTtcblx0ICAgICAgY2FzZSAndSc6IHJldHVybiBkYXRlLmdldERheSgpID09PSAwID8gNyA6IGRhdGUuZ2V0RGF5KCk7XG5cdCAgICAgIGNhc2UgJ3YnOiByZXR1cm4gc3RyZnRpbWUoZGF0ZSwgJyVlLSViLSVZJyk7XG5cdCAgICAgIGNhc2UgJ1cnOiByZXR1cm4gcGFkKHdlZWtOdW1iZXIoZGF0ZSwgJ21vbmRheScpLCBwYWRkaW5nKTtcblx0ICAgICAgY2FzZSAndyc6IHJldHVybiBkYXRlLmdldERheSgpO1xuXHQgICAgICBjYXNlICdZJzogcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0ICAgICAgY2FzZSAneSc6IHZhciB5ID0gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSk7IHJldHVybiB5LnNsaWNlKHkubGVuZ3RoIC0gMik7XG5cdCAgICAgIGNhc2UgJ1onOiB2YXIgdHpTdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkubWF0Y2goL1xcKChcXHcrKVxcKS8pOyByZXR1cm4gdHpTdHJpbmcgJiYgdHpTdHJpbmdbMV0gfHwgJyc7XG5cdCAgICAgIGNhc2UgJ3onOiB2YXIgb2ZmID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpOyByZXR1cm4gKG9mZiA+IDAgPyAnLScgOiAnKycpICsgcGFkKE1hdGgucm91bmQoTWF0aC5hYnMob2ZmIC8gNjApKSwgMikgKyAnOicgKyBwYWQob2ZmICUgNjAsIDIpO1xuXHQgICAgICBkZWZhdWx0OiByZXR1cm4gYztcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFkKG4sIHBhZGRpbmcsIGxlbmd0aCkge1xuXHQgIGlmICh0eXBlb2YgcGFkZGluZyA9PT0gJ251bWJlcicpIHtcblx0ICAgIGxlbmd0aCA9IHBhZGRpbmc7XG5cdCAgICBwYWRkaW5nID0gJzAnO1xuXHQgIH1cblx0XG5cdCAgaWYgKHBhZGRpbmcgPT09IG51bGwpIHtcblx0ICAgIHBhZGRpbmcgPSAnMCc7XG5cdCAgfVxuXHRcblx0ICBsZW5ndGggPSBsZW5ndGggfHwgMjtcblx0XG5cdCAgdmFyIHMgPSBTdHJpbmcobik7XG5cdFxuXHQgIGlmIChwYWRkaW5nKSB7XG5cdCAgICB3aGlsZSAocy5sZW5ndGggPCBsZW5ndGgpIHtcblx0ICAgICAgcyA9IHBhZGRpbmcgKyBzO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhvdXJzMTIoZGF0ZSkge1xuXHQgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xuXHRcblx0ICBpZiAoaG91ciA9PT0gMCkge1xuXHQgICAgaG91ciA9IDEyO1xuXHQgIH0gZWxzZSBpZiAoaG91ciA+IDEyKSB7XG5cdCAgICBob3VyIC09IDEyO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGhvdXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9yZGluYWwobikge1xuXHQgIHZhciBpID0gbiAlIDEwLCBpaSA9IG4gJSAxMDA7XG5cdFxuXHQgIGlmICgoaWkgPj0gMTEgJiYgaWkgPD0gMTMpIHx8IGkgPT09IDAgfHwgaSA+PSA0KSB7XG5cdCAgICByZXR1cm4gJ3RoJztcblx0ICB9XG5cdFxuXHQgIHN3aXRjaCAoaSkge1xuXHQgICAgY2FzZSAxOiByZXR1cm4gJ3N0Jztcblx0ICAgIGNhc2UgMjogcmV0dXJuICduZCc7XG5cdCAgICBjYXNlIDM6IHJldHVybiAncmQnO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gd2Vla051bWJlcihkYXRlLCBmaXJzdFdlZWtkYXkpIHtcblx0ICBmaXJzdFdlZWtkYXkgPSBmaXJzdFdlZWtkYXkgfHwgJ3N1bmRheSc7XG5cdFxuXHQgIHZhciB3ZGF5ID0gZGF0ZS5nZXREYXkoKTtcblx0XG5cdCAgaWYgKGZpcnN0V2Vla2RheSA9PSAnbW9uZGF5Jykge1xuXHQgICAgaWYgKHdkYXkgPT09IDApIHsgLy8gU3VuZGF5XG5cdCAgICAgIHdkYXkgPSA2O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgd2RheS0tO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyXG5cdCAgICBmaXJzdERheU9mWWVhciA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMSksXG5cdCAgICB5ZGF5ID0gKGRhdGUgLSBmaXJzdERheU9mWWVhcikgLyA4NjQwMDAwMCxcblx0ICAgIHdlZWtOdW0gPSAoeWRheSArIDcgLSB3ZGF5KSAvIDc7XG5cdFxuXHQgIHJldHVybiBNYXRoLmZsb29yKHdlZWtOdW0pO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0cmZ0aW1lO1xuXG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cblxuLyoqKi8gfSxcbi8qIDQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuXHQgIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcblx0ICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXHRcblx0Ly8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5cdEV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblx0XG5cdC8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuXHQvLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuXHRFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXHRcblx0Ly8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG5cdC8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcblx0ICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblx0ICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdFxuXHQgIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cblx0ICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuXHQgICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcblx0ICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcblx0ICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG5cdCAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdCAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuXHQgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuXHQgICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG5cdCAgICAgICAgdGhyb3cgZXJyO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG5cdCAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgLy8gZmFzdCBjYXNlc1xuXHQgICAgICBjYXNlIDE6XG5cdCAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIDI6XG5cdCAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgMzpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICAvLyBzbG93ZXJcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0ICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcblx0ICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuXHQgICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcblx0ICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcblx0ICB2YXIgbTtcblx0XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdFxuXHQgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG5cdCAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuXHQgIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG5cdCAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcblx0ICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG5cdCAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcblx0ICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuXHQgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuXHQgICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuXHQgIGVsc2Vcblx0ICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuXHQgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXHRcblx0ICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuXHQgIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG5cdCAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcblx0ICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcblx0ICAgIH1cblx0XG5cdCAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuXHQgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcblx0ICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG5cdCAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG5cdCAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG5cdCAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcblx0ICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG5cdCAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXHRcblx0ICB2YXIgZmlyZWQgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gZygpIHtcblx0ICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cdFxuXHQgICAgaWYgKCFmaXJlZCkge1xuXHQgICAgICBmaXJlZCA9IHRydWU7XG5cdCAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG5cdCAgdGhpcy5vbih0eXBlLCBnKTtcblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcblx0ICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblx0XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcblx0ICBwb3NpdGlvbiA9IC0xO1xuXHRcblx0ICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcblx0ICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG5cdCAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcblx0ICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblx0XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuXHQgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuXHQgICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcblx0ICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuXHQgICAgICAgIHBvc2l0aW9uID0gaTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwb3NpdGlvbiA8IDApXG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBsaXN0Lmxlbmd0aCA9IDA7XG5cdCAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcblx0ICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXHRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cylcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuXHQgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcblx0ICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuXHQgICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcblx0ICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcblx0ICAgIH1cblx0ICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuXHQgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0XG5cdCAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuXHQgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuXHQgIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAvLyBMSUZPIG9yZGVyXG5cdCAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcblx0ICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcblx0ICB9XG5cdCAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIgcmV0O1xuXHQgIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICByZXQgPSBbXTtcblx0ICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG5cdCAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcblx0ICBlbHNlXG5cdCAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIGlmICh0aGlzLl9ldmVudHMpIHtcblx0ICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuXHQgICAgICByZXR1cm4gMTtcblx0ICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG5cdCAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcblx0ICB9XG5cdCAgcmV0dXJuIDA7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcblx0ICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHR2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0dmFyIGlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KGFycikge1xuXHRcdGlmICh0eXBlb2YgQXJyYXkuaXNBcnJheSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiB0b1N0ci5jYWxsKGFycikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cdFxuXHR2YXIgaXNQbGFpbk9iamVjdCA9IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG5cdFx0aWYgKCFvYmogfHwgdG9TdHIuY2FsbChvYmopICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0dmFyIGhhc093bkNvbnN0cnVjdG9yID0gaGFzT3duLmNhbGwob2JqLCAnY29uc3RydWN0b3InKTtcblx0XHR2YXIgaGFzSXNQcm90b3R5cGVPZiA9IG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY29uc3RydWN0b3IucHJvdG90eXBlICYmIGhhc093bi5jYWxsKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICdpc1Byb3RvdHlwZU9mJyk7XG5cdFx0Ly8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdFxuXHRcdGlmIChvYmouY29uc3RydWN0b3IgJiYgIWhhc093bkNvbnN0cnVjdG9yICYmICFoYXNJc1Byb3RvdHlwZU9mKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHQvLyBPd24gcHJvcGVydGllcyBhcmUgZW51bWVyYXRlZCBmaXJzdGx5LCBzbyB0byBzcGVlZCB1cCxcblx0XHQvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93bi5cblx0XHR2YXIga2V5O1xuXHRcdGZvciAoa2V5IGluIG9iaikgey8qKi99XG5cdFxuXHRcdHJldHVybiB0eXBlb2Yga2V5ID09PSAndW5kZWZpbmVkJyB8fCBoYXNPd24uY2FsbChvYmosIGtleSk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCgpIHtcblx0XHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMF0sXG5cdFx0XHRpID0gMSxcblx0XHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0XHRkZWVwID0gZmFsc2U7XG5cdFxuXHRcdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0XHRpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRkZWVwID0gdGFyZ2V0O1xuXHRcdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHRcdFx0Ly8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdFx0aSA9IDI7XG5cdFx0fSBlbHNlIGlmICgodHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJykgfHwgdGFyZ2V0ID09IG51bGwpIHtcblx0XHRcdHRhcmdldCA9IHt9O1xuXHRcdH1cblx0XG5cdFx0Zm9yICg7IGkgPCBsZW5ndGg7ICsraSkge1xuXHRcdFx0b3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdGlmIChvcHRpb25zICE9IG51bGwpIHtcblx0XHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0XHRmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuXHRcdFx0XHRcdHNyYyA9IHRhcmdldFtuYW1lXTtcblx0XHRcdFx0XHRjb3B5ID0gb3B0aW9uc1tuYW1lXTtcblx0XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRcdGlmICh0YXJnZXQgIT09IGNvcHkpIHtcblx0XHRcdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRcdFx0aWYgKGRlZXAgJiYgY29weSAmJiAoaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBpc0FycmF5KGNvcHkpKSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvcHlJc0FycmF5KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGV4dGVuZChkZWVwLCBjbG9uZSwgY29weSk7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgY29weSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gY29weTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdFx0cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cblxuLyoqKi8gfSxcbi8qIDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICovXG5cdFxuXHQvKipcblx0ICogQWxsb3dzIGV4dHJhY3Rpb24gb2YgYSBtaW5pZmllZCBrZXkuIExldCdzIHRoZSBidWlsZCBzeXN0ZW0gbWluaWZ5IGtleXNcblx0ICogd2l0aG91dCBsb3NpbmcgdGhlIGFiaWxpdHkgdG8gZHluYW1pY2FsbHkgdXNlIGtleSBzdHJpbmdzIGFzIHZhbHVlc1xuXHQgKiB0aGVtc2VsdmVzLiBQYXNzIGluIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIGtleS92YWwgcGFpciBhbmQgaXQgd2lsbCByZXR1cm5cblx0ICogeW91IHRoZSBzdHJpbmcga2V5IG9mIHRoYXQgc2luZ2xlIHJlY29yZC4gU3VwcG9zZSB5b3Ugd2FudCB0byBncmFiIHRoZVxuXHQgKiB2YWx1ZSBmb3IgYSBrZXkgJ2NsYXNzTmFtZScgaW5zaWRlIG9mIGFuIG9iamVjdC4gS2V5L3ZhbCBtaW5pZmljYXRpb24gbWF5XG5cdCAqIGhhdmUgYWxpYXNlZCB0aGF0IGtleSB0byBiZSAneGExMicuIGtleU9mKHtjbGFzc05hbWU6IG51bGx9KSB3aWxsIHJldHVyblxuXHQgKiAneGExMicgaW4gdGhhdCBjYXNlLiBSZXNvbHZlIGtleXMgeW91IHdhbnQgdG8gdXNlIG9uY2UgYXQgc3RhcnR1cCB0aW1lLCB0aGVuXG5cdCAqIHJldXNlIHRob3NlIHJlc29sdXRpb25zLlxuXHQgKi9cblx0dmFyIGtleU9mID0gZnVuY3Rpb24ga2V5T2Yob25lS2V5T2JqKSB7XG5cdCAgdmFyIGtleTtcblx0ICBmb3IgKGtleSBpbiBvbmVLZXlPYmopIHtcblx0ICAgIGlmICghb25lS2V5T2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5O1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ga2V5T2Y7XG5cbi8qKiovIH0sXG4vKiA0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XG5cdHZhciBpbmRleE9mID0gW10uaW5kZXhPZjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJyLCBvYmope1xuXHQgIGlmIChpbmRleE9mKSByZXR1cm4gYXJyLmluZGV4T2Yob2JqKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuXHQgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZW50cnksIGNvdW50KSB7XG5cdCAgdmFyIGtleTtcblx0XG5cdCAgaWYgKGNvdW50ID09PSAwICYmICd6ZXJvJyBpbiBlbnRyeSkge1xuXHQgICAga2V5ID0gJ3plcm8nO1xuXHQgIH1cblx0XG5cdCAga2V5ID0ga2V5IHx8IChjb3VudCA9PT0gMSA/ICdvbmUnIDogJ290aGVyJyk7XG5cdFxuXHQgIHJldHVybiBlbnRyeVtrZXldO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9ICgpKVxuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdFxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3QgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0dmFyIGludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXhjZXB0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciBleHRlbmQgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0ZnVuY3Rpb24gaXNTdHJpbmcob2JqZWN0KSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBTdHJpbmddJztcblx0fVxuXHRcblx0dmFyIFJFR0VYUCA9IC9cXCVcXCgoLis/KVxcKXMvO1xuXHR2YXIgT01JVFRFRF9QUk9QUyA9IFsnY2hpbGRyZW4nLCAnZm9ybWF0JywgJ2NvbXBvbmVudCcsICd1bnNhZmUnLCAnd2l0aCddO1xuXHRcblx0dmFyIEludGVycG9sYXRlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgIGRpc3BsYXlOYW1lOiAnSW50ZXJwb2xhdGUnLFxuXHRcblx0ICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHsgY29tcG9uZW50OiAnc3BhbicgfTtcblx0ICB9LFxuXHRcblx0ICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGZvcm1hdCAgICAgICAgID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblx0ICAgIHZhciBwYXJlbnQgICAgICAgICA9IHRoaXMucHJvcHMuY29tcG9uZW50O1xuXHQgICAgdmFyIHVuc2FmZSAgICAgICAgID0gdGhpcy5wcm9wcy51bnNhZmUgPT09IHRydWU7XG5cdCAgICB2YXIgaW50ZXJwb2xhdGlvbnMgPSBleHRlbmQoe30sIHRoaXMucHJvcHMsIHRoaXMucHJvcHMud2l0aCk7XG5cdCAgICB2YXIgcHJvcHMgICAgICAgICAgPSBleGNlcHQodGhpcy5wcm9wcywgT01JVFRFRF9QUk9QUyk7XG5cdFxuXHQgICAgdmFyIG1hdGNoZXMgPSBbXTtcblx0ICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuXHRcblx0ICAgIGlmICghaXNTdHJpbmcoZm9ybWF0KSkge1xuXHQgICAgICBmb3JtYXQgPSB0aGlzLnByb3BzLmZvcm1hdDtcblx0ICAgIH1cblx0XG5cdCAgICBpbnZhcmlhbnQoaXNTdHJpbmcoZm9ybWF0KSwgJ0ludGVycG9sYXRlIGV4cGVjdHMgZWl0aGVyIGEgZm9ybWF0IHN0cmluZyBhcyBvbmx5IGNoaWxkIG9yIGEgYGZvcm1hdGAgcHJvcCB3aXRoIGEgc3RyaW5nIHZhbHVlJyk7XG5cdFxuXHQgICAgaWYgKHVuc2FmZSkge1xuXHQgICAgICB2YXIgY29udGVudCA9IGZvcm1hdC5zcGxpdChSRUdFWFApLnJlZHVjZShmdW5jdGlvbihtZW1vLCBtYXRjaCwgaW5kZXgpIHtcblx0ICAgICAgICB2YXIgaHRtbDtcblx0XG5cdCAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuXHQgICAgICAgICAgaHRtbCA9IG1hdGNoO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBodG1sID0gaW50ZXJwb2xhdGlvbnNbbWF0Y2hdO1xuXHQgICAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChSZWFjdC5pc1ZhbGlkRWxlbWVudChodG1sKSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgaW50ZXJwb2xhdGUgYSBSZWFjdCBjb21wb25lbnQgaW50byB1bnNhZmUgdGV4dCcpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbWVtbyArPSBodG1sO1xuXHRcblx0ICAgICAgICByZXR1cm4gbWVtbztcblx0ICAgICAgfSwgJycpO1xuXHRcblx0ICAgICAgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPSB7IF9faHRtbDogY29udGVudCB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZm9ybWF0LnNwbGl0KFJFR0VYUCkucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIG1hdGNoLCBpbmRleCkge1xuXHQgICAgICAgIHZhciBjaGlsZDtcblx0XG5cdCAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuXHQgICAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbWVtbztcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBjaGlsZCA9IG1hdGNoO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjaGlsZCA9IGludGVycG9sYXRpb25zW21hdGNoXTtcblx0ICAgICAgICAgIG1hdGNoZXMucHVzaChtYXRjaCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBtZW1vLnB1c2goY2hpbGQpO1xuXHRcblx0ICAgICAgICByZXR1cm4gbWVtbztcblx0ICAgICAgfSwgY2hpbGRyZW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHByb3BzID0gZXhjZXB0KHByb3BzLCBtYXRjaGVzKTtcblx0XG5cdCAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudC5hcHBseSh0aGlzLCBbcGFyZW50LCBwcm9wc10uY29uY2F0KGNoaWxkcmVuKSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSW50ZXJwb2xhdGU7XG5cblxuLyoqKi8gfSxcbi8qIDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG5cdCAqXG5cdCAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG5cdCAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuXHQgKiBleHBlY3RpbmcuXG5cdCAqXG5cdCAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG5cdCAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcblx0ICBpZiAoZmFsc2UpIHtcblx0ICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoIWNvbmRpdGlvbikge1xuXHQgICAgdmFyIGVycm9yO1xuXHQgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcblx0ICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcblx0ICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcblx0ICAgICAgfSkpO1xuXHQgICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuXHQgICAgfVxuXHRcblx0ICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcblx0ICAgIHRocm93IGVycm9yO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cbi8qKiovIH0sXG4vKiA1MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBLZXlFc2NhcGVVdGlsc1xuXHQgKiBcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogRXNjYXBlIGFuZCB3cmFwIGtleSBzbyBpdCBpcyBzYWZlIHRvIHVzZSBhcyBhIHJlYWN0aWRcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSB0byBiZSBlc2NhcGVkLlxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBlc2NhcGVkIGtleS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBlc2NhcGUoa2V5KSB7XG5cdCAgdmFyIGVzY2FwZVJlZ2V4ID0gL1s9Ol0vZztcblx0ICB2YXIgZXNjYXBlckxvb2t1cCA9IHtcblx0ICAgICc9JzogJz0wJyxcblx0ICAgICc6JzogJz0yJ1xuXHQgIH07XG5cdCAgdmFyIGVzY2FwZWRTdHJpbmcgPSAoJycgKyBrZXkpLnJlcGxhY2UoZXNjYXBlUmVnZXgsIGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgcmV0dXJuIGVzY2FwZXJMb29rdXBbbWF0Y2hdO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gJyQnICsgZXNjYXBlZFN0cmluZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFVuZXNjYXBlIGFuZCB1bndyYXAga2V5IGZvciBodW1hbi1yZWFkYWJsZSBkaXNwbGF5XG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgdG8gdW5lc2NhcGUuXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gdGhlIHVuZXNjYXBlZCBrZXkuXG5cdCAqL1xuXHRmdW5jdGlvbiB1bmVzY2FwZShrZXkpIHtcblx0ICB2YXIgdW5lc2NhcGVSZWdleCA9IC8oPTB8PTIpL2c7XG5cdCAgdmFyIHVuZXNjYXBlckxvb2t1cCA9IHtcblx0ICAgICc9MCc6ICc9Jyxcblx0ICAgICc9Mic6ICc6J1xuXHQgIH07XG5cdCAgdmFyIGtleVN1YnN0cmluZyA9IGtleVswXSA9PT0gJy4nICYmIGtleVsxXSA9PT0gJyQnID8ga2V5LnN1YnN0cmluZygyKSA6IGtleS5zdWJzdHJpbmcoMSk7XG5cdFxuXHQgIHJldHVybiAoJycgKyBrZXlTdWJzdHJpbmcpLnJlcGxhY2UodW5lc2NhcGVSZWdleCwgZnVuY3Rpb24gKG1hdGNoKSB7XG5cdCAgICByZXR1cm4gdW5lc2NhcGVyTG9va3VwW21hdGNoXTtcblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIEtleUVzY2FwZVV0aWxzID0ge1xuXHQgIGVzY2FwZTogZXNjYXBlLFxuXHQgIHVuZXNjYXBlOiB1bmVzY2FwZVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBLZXlFc2NhcGVVdGlscztcblxuLyoqKi8gfSxcbi8qIDUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFBvb2xlZENsYXNzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9wcm9kSW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0LyoqXG5cdCAqIFN0YXRpYyBwb29sZXJzLiBTZXZlcmFsIGN1c3RvbSB2ZXJzaW9ucyBmb3IgZWFjaCBwb3RlbnRpYWwgbnVtYmVyIG9mXG5cdCAqIGFyZ3VtZW50cy4gQSBjb21wbGV0ZWx5IGdlbmVyaWMgcG9vbGVyIGlzIGVhc3kgdG8gaW1wbGVtZW50LCBidXQgd291bGRcblx0ICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuXHQgKiB0aGUgQ2xhc3MgaXRzZWxmLCBub3QgYW4gaW5zdGFuY2UuIElmIGFueSBvdGhlcnMgYXJlIG5lZWRlZCwgc2ltcGx5IGFkZCB0aGVtXG5cdCAqIGhlcmUsIG9yIGluIHRoZWlyIG93biBmaWxlcy5cblx0ICovXG5cdHZhciBvbmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChjb3B5RmllbGRzRnJvbSkge1xuXHQgIHZhciBLbGFzcyA9IHRoaXM7XG5cdCAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcblx0ICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGNvcHlGaWVsZHNGcm9tKTtcblx0ICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBLbGFzcyhjb3B5RmllbGRzRnJvbSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMikge1xuXHQgIHZhciBLbGFzcyA9IHRoaXM7XG5cdCAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcblx0ICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMik7XG5cdCAgICByZXR1cm4gaW5zdGFuY2U7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGhyZWVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzKSB7XG5cdCAgdmFyIEtsYXNzID0gdGhpcztcblx0ICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuXHQgICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuXHQgICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG5cdCAgICByZXR1cm4gaW5zdGFuY2U7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGZvdXJBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCkge1xuXHQgIHZhciBLbGFzcyA9IHRoaXM7XG5cdCAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcblx0ICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0KTtcblx0ICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGZpdmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCwgYTUpIHtcblx0ICB2YXIgS2xhc3MgPSB0aGlzO1xuXHQgIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG5cdCAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIsIGEzLCBhNCwgYTUpO1xuXHQgICAgcmV0dXJuIGluc3RhbmNlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0LCBhNSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHN0YW5kYXJkUmVsZWFzZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcblx0ICB2YXIgS2xhc3MgPSB0aGlzO1xuXHQgICEoaW5zdGFuY2UgaW5zdGFuY2VvZiBLbGFzcykgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdUcnlpbmcgdG8gcmVsZWFzZSBhbiBpbnN0YW5jZSBpbnRvIGEgcG9vbCBvZiBhIGRpZmZlcmVudCB0eXBlLicpIDogX3Byb2RJbnZhcmlhbnQoJzI1JykgOiB2b2lkIDA7XG5cdCAgaW5zdGFuY2UuZGVzdHJ1Y3RvcigpO1xuXHQgIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoIDwgS2xhc3MucG9vbFNpemUpIHtcblx0ICAgIEtsYXNzLmluc3RhbmNlUG9vbC5wdXNoKGluc3RhbmNlKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgREVGQVVMVF9QT09MX1NJWkUgPSAxMDtcblx0dmFyIERFRkFVTFRfUE9PTEVSID0gb25lQXJndW1lbnRQb29sZXI7XG5cdFxuXHQvKipcblx0ICogQXVnbWVudHMgYENvcHlDb25zdHJ1Y3RvcmAgdG8gYmUgYSBwb29sYWJsZSBjbGFzcywgYXVnbWVudGluZyBvbmx5IHRoZSBjbGFzc1xuXHQgKiBpdHNlbGYgKHN0YXRpY2FsbHkpIG5vdCBhZGRpbmcgYW55IHByb3RvdHlwaWNhbCBmaWVsZHMuIEFueSBDb3B5Q29uc3RydWN0b3Jcblx0ICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcblx0ICogcHJvdG90eXBpY2FsIGBkZXN0cnVjdG9yYCBvbiBpbnN0YW5jZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IENvcHlDb25zdHJ1Y3RvciBDb25zdHJ1Y3RvciB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlc2V0LlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb29sZXIgQ3VzdG9taXphYmxlIHBvb2xlci5cblx0ICovXG5cdHZhciBhZGRQb29saW5nVG8gPSBmdW5jdGlvbiAoQ29weUNvbnN0cnVjdG9yLCBwb29sZXIpIHtcblx0ICB2YXIgTmV3S2xhc3MgPSBDb3B5Q29uc3RydWN0b3I7XG5cdCAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG5cdCAgTmV3S2xhc3MuZ2V0UG9vbGVkID0gcG9vbGVyIHx8IERFRkFVTFRfUE9PTEVSO1xuXHQgIGlmICghTmV3S2xhc3MucG9vbFNpemUpIHtcblx0ICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG5cdCAgfVxuXHQgIE5ld0tsYXNzLnJlbGVhc2UgPSBzdGFuZGFyZFJlbGVhc2VyO1xuXHQgIHJldHVybiBOZXdLbGFzcztcblx0fTtcblx0XG5cdHZhciBQb29sZWRDbGFzcyA9IHtcblx0ICBhZGRQb29saW5nVG86IGFkZFBvb2xpbmdUbyxcblx0ICBvbmVBcmd1bWVudFBvb2xlcjogb25lQXJndW1lbnRQb29sZXIsXG5cdCAgdHdvQXJndW1lbnRQb29sZXI6IHR3b0FyZ3VtZW50UG9vbGVyLFxuXHQgIHRocmVlQXJndW1lbnRQb29sZXI6IHRocmVlQXJndW1lbnRQb29sZXIsXG5cdCAgZm91ckFyZ3VtZW50UG9vbGVyOiBmb3VyQXJndW1lbnRQb29sZXIsXG5cdCAgZml2ZUFyZ3VtZW50UG9vbGVyOiBmaXZlQXJndW1lbnRQb29sZXJcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUG9vbGVkQ2xhc3M7XG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBSZWFjdENoaWxkcmVuID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5cdHZhciBSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgUmVhY3RQdXJlQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdHZhciBSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdHZhciBSZWFjdERPTUZhY3RvcmllcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHR2YXIgUmVhY3RFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIFJlYWN0UHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdHZhciBSZWFjdFZlcnNpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0XG5cdHZhciBvbmx5Q2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIGNyZWF0ZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudDtcblx0dmFyIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeTtcblx0dmFyIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUVsZW1lbnQ7XG5cdFxuXHRpZiAoZmFsc2UpIHtcblx0ICB2YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcblx0ICBjcmVhdGVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUVsZW1lbnQ7XG5cdCAgY3JlYXRlRmFjdG9yeSA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVGYWN0b3J5O1xuXHQgIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jbG9uZUVsZW1lbnQ7XG5cdH1cblx0XG5cdHZhciBfX3NwcmVhZCA9IF9hc3NpZ247XG5cdFxuXHRpZiAoZmFsc2UpIHtcblx0ICB2YXIgd2FybmVkID0gZmFsc2U7XG5cdCAgX19zcHJlYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh3YXJuZWQsICdSZWFjdC5fX3NwcmVhZCBpcyBkZXByZWNhdGVkIGFuZCBzaG91bGQgbm90IGJlIHVzZWQuIFVzZSAnICsgJ09iamVjdC5hc3NpZ24gZGlyZWN0bHkgb3IgYW5vdGhlciBoZWxwZXIgZnVuY3Rpb24gd2l0aCBzaW1pbGFyICcgKyAnc2VtYW50aWNzLiBZb3UgbWF5IGJlIHNlZWluZyB0aGlzIHdhcm5pbmcgZHVlIHRvIHlvdXIgY29tcGlsZXIuICcgKyAnU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtc3ByZWFkLWRlcHJlY2F0aW9uIGZvciBtb3JlIGRldGFpbHMuJykgOiB2b2lkIDA7XG5cdCAgICB3YXJuZWQgPSB0cnVlO1xuXHQgICAgcmV0dXJuIF9hc3NpZ24uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgUmVhY3QgPSB7XG5cdFxuXHQgIC8vIE1vZGVyblxuXHRcblx0ICBDaGlsZHJlbjoge1xuXHQgICAgbWFwOiBSZWFjdENoaWxkcmVuLm1hcCxcblx0ICAgIGZvckVhY2g6IFJlYWN0Q2hpbGRyZW4uZm9yRWFjaCxcblx0ICAgIGNvdW50OiBSZWFjdENoaWxkcmVuLmNvdW50LFxuXHQgICAgdG9BcnJheTogUmVhY3RDaGlsZHJlbi50b0FycmF5LFxuXHQgICAgb25seTogb25seUNoaWxkXG5cdCAgfSxcblx0XG5cdCAgQ29tcG9uZW50OiBSZWFjdENvbXBvbmVudCxcblx0ICBQdXJlQ29tcG9uZW50OiBSZWFjdFB1cmVDb21wb25lbnQsXG5cdFxuXHQgIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG5cdCAgY2xvbmVFbGVtZW50OiBjbG9uZUVsZW1lbnQsXG5cdCAgaXNWYWxpZEVsZW1lbnQ6IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudCxcblx0XG5cdCAgLy8gQ2xhc3NpY1xuXHRcblx0ICBQcm9wVHlwZXM6IFJlYWN0UHJvcFR5cGVzLFxuXHQgIGNyZWF0ZUNsYXNzOiBSZWFjdENsYXNzLmNyZWF0ZUNsYXNzLFxuXHQgIGNyZWF0ZUZhY3Rvcnk6IGNyZWF0ZUZhY3RvcnksXG5cdCAgY3JlYXRlTWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuXHQgICAgLy8gQ3VycmVudGx5IGEgbm9vcC4gV2lsbCBiZSB1c2VkIHRvIHZhbGlkYXRlIGFuZCB0cmFjZSBtaXhpbnMuXG5cdCAgICByZXR1cm4gbWl4aW47XG5cdCAgfSxcblx0XG5cdCAgLy8gVGhpcyBsb29rcyBET00gc3BlY2lmaWMgYnV0IHRoZXNlIGFyZSBhY3R1YWxseSBpc29tb3JwaGljIGhlbHBlcnNcblx0ICAvLyBzaW5jZSB0aGV5IGFyZSBqdXN0IGdlbmVyYXRpbmcgRE9NIHN0cmluZ3MuXG5cdCAgRE9NOiBSZWFjdERPTUZhY3Rvcmllcyxcblx0XG5cdCAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXHRcblx0ICAvLyBEZXByZWNhdGVkIGhvb2sgZm9yIEpTWCBzcHJlYWQsIGRvbid0IHVzZSB0aGlzIGZvciBhbnl0aGluZy5cblx0ICBfX3NwcmVhZDogX19zcHJlYWRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbi8qKiovIH0sXG4vKiA1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkcmVuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFBvb2xlZENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIGVtcHR5RnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0XG5cdHZhciB0d29Bcmd1bWVudFBvb2xlciA9IFBvb2xlZENsYXNzLnR3b0FyZ3VtZW50UG9vbGVyO1xuXHR2YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyO1xuXHRcblx0dmFyIHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4ID0gL1xcLysvZztcblx0ZnVuY3Rpb24gZXNjYXBlVXNlclByb3ZpZGVkS2V5KHRleHQpIHtcblx0ICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgJyQmLycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG5cdCAqIHRyYXZlcnNhbC4gQWxsb3dzIGF2b2lkaW5nIGJpbmRpbmcgY2FsbGJhY2tzLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3IgRm9yRWFjaEJvb2tLZWVwaW5nXG5cdCAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBmb3JFYWNoRnVuY3Rpb24gRnVuY3Rpb24gdG8gcGVyZm9ybSB0cmF2ZXJzYWwgd2l0aC5cblx0ICogQHBhcmFtIHs/Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIGNvbnRleHQgd2l0aC5cblx0ICovXG5cdGZ1bmN0aW9uIEZvckVhY2hCb29rS2VlcGluZyhmb3JFYWNoRnVuY3Rpb24sIGZvckVhY2hDb250ZXh0KSB7XG5cdCAgdGhpcy5mdW5jID0gZm9yRWFjaEZ1bmN0aW9uO1xuXHQgIHRoaXMuY29udGV4dCA9IGZvckVhY2hDb250ZXh0O1xuXHQgIHRoaXMuY291bnQgPSAwO1xuXHR9XG5cdEZvckVhY2hCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmZ1bmMgPSBudWxsO1xuXHQgIHRoaXMuY29udGV4dCA9IG51bGw7XG5cdCAgdGhpcy5jb3VudCA9IDA7XG5cdH07XG5cdFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGb3JFYWNoQm9va0tlZXBpbmcsIHR3b0FyZ3VtZW50UG9vbGVyKTtcblx0XG5cdGZ1bmN0aW9uIGZvckVhY2hTaW5nbGVDaGlsZChib29rS2VlcGluZywgY2hpbGQsIG5hbWUpIHtcblx0ICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG5cdCAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXHRcblx0ICBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSXRlcmF0ZXMgdGhyb3VnaCBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuXG5cdCAqXG5cdCAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jaGlsZHJlbi5mb3JlYWNoXG5cdCAqXG5cdCAqIFRoZSBwcm92aWRlZCBmb3JFYWNoRnVuYyhjaGlsZCwgaW5kZXgpIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoXG5cdCAqIGxlYWYgY2hpbGQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZvckVhY2hGdW5jXG5cdCAqIEBwYXJhbSB7Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCBmb3IgZm9yRWFjaENvbnRleHQuXG5cdCAqL1xuXHRmdW5jdGlvbiBmb3JFYWNoQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuXHQgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gY2hpbGRyZW47XG5cdCAgfVxuXHQgIHZhciB0cmF2ZXJzZUNvbnRleHQgPSBGb3JFYWNoQm9va0tlZXBpbmcuZ2V0UG9vbGVkKGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCk7XG5cdCAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkLCB0cmF2ZXJzZUNvbnRleHQpO1xuXHQgIEZvckVhY2hCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQb29sZWRDbGFzcyByZXByZXNlbnRpbmcgdGhlIGJvb2trZWVwaW5nIGFzc29jaWF0ZWQgd2l0aCBwZXJmb3JtaW5nIGEgY2hpbGRcblx0ICogbWFwcGluZy4gQWxsb3dzIGF2b2lkaW5nIGJpbmRpbmcgY2FsbGJhY2tzLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3IgTWFwQm9va0tlZXBpbmdcblx0ICogQHBhcmFtIHshKn0gbWFwUmVzdWx0IE9iamVjdCBjb250YWluaW5nIHRoZSBvcmRlcmVkIG1hcCBvZiByZXN1bHRzLlxuXHQgKiBAcGFyYW0geyFmdW5jdGlvbn0gbWFwRnVuY3Rpb24gRnVuY3Rpb24gdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG5cdCAqIEBwYXJhbSB7Pyp9IG1hcENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIG1hcHBpbmcgd2l0aC5cblx0ICovXG5cdGZ1bmN0aW9uIE1hcEJvb2tLZWVwaW5nKG1hcFJlc3VsdCwga2V5UHJlZml4LCBtYXBGdW5jdGlvbiwgbWFwQ29udGV4dCkge1xuXHQgIHRoaXMucmVzdWx0ID0gbWFwUmVzdWx0O1xuXHQgIHRoaXMua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuXHQgIHRoaXMuZnVuYyA9IG1hcEZ1bmN0aW9uO1xuXHQgIHRoaXMuY29udGV4dCA9IG1hcENvbnRleHQ7XG5cdCAgdGhpcy5jb3VudCA9IDA7XG5cdH1cblx0TWFwQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5yZXN1bHQgPSBudWxsO1xuXHQgIHRoaXMua2V5UHJlZml4ID0gbnVsbDtcblx0ICB0aGlzLmZ1bmMgPSBudWxsO1xuXHQgIHRoaXMuY29udGV4dCA9IG51bGw7XG5cdCAgdGhpcy5jb3VudCA9IDA7XG5cdH07XG5cdFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhNYXBCb29rS2VlcGluZywgZm91ckFyZ3VtZW50UG9vbGVyKTtcblx0XG5cdGZ1bmN0aW9uIG1hcFNpbmdsZUNoaWxkSW50b0NvbnRleHQoYm9va0tlZXBpbmcsIGNoaWxkLCBjaGlsZEtleSkge1xuXHQgIHZhciByZXN1bHQgPSBib29rS2VlcGluZy5yZXN1bHQ7XG5cdCAgdmFyIGtleVByZWZpeCA9IGJvb2tLZWVwaW5nLmtleVByZWZpeDtcblx0ICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG5cdCAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXHRcblx0XG5cdCAgdmFyIG1hcHBlZENoaWxkID0gZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBib29rS2VlcGluZy5jb3VudCsrKTtcblx0ICBpZiAoQXJyYXkuaXNBcnJheShtYXBwZWRDaGlsZCkpIHtcblx0ICAgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwobWFwcGVkQ2hpbGQsIHJlc3VsdCwgY2hpbGRLZXksIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG5cdCAgfSBlbHNlIGlmIChtYXBwZWRDaGlsZCAhPSBudWxsKSB7XG5cdCAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG1hcHBlZENoaWxkKSkge1xuXHQgICAgICBtYXBwZWRDaGlsZCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkobWFwcGVkQ2hpbGQsXG5cdCAgICAgIC8vIEtlZXAgYm90aCB0aGUgKG1hcHBlZCkgYW5kIG9sZCBrZXlzIGlmIHRoZXkgZGlmZmVyLCBqdXN0IGFzXG5cdCAgICAgIC8vIHRyYXZlcnNlQWxsQ2hpbGRyZW4gdXNlZCB0byBkbyBmb3Igb2JqZWN0cyBhcyBjaGlsZHJlblxuXHQgICAgICBrZXlQcmVmaXggKyAobWFwcGVkQ2hpbGQua2V5ICYmICghY2hpbGQgfHwgY2hpbGQua2V5ICE9PSBtYXBwZWRDaGlsZC5rZXkpID8gZXNjYXBlVXNlclByb3ZpZGVkS2V5KG1hcHBlZENoaWxkLmtleSkgKyAnLycgOiAnJykgKyBjaGlsZEtleSk7XG5cdCAgICB9XG5cdCAgICByZXN1bHQucHVzaChtYXBwZWRDaGlsZCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCBhcnJheSwgcHJlZml4LCBmdW5jLCBjb250ZXh0KSB7XG5cdCAgdmFyIGVzY2FwZWRQcmVmaXggPSAnJztcblx0ICBpZiAocHJlZml4ICE9IG51bGwpIHtcblx0ICAgIGVzY2FwZWRQcmVmaXggPSBlc2NhcGVVc2VyUHJvdmlkZWRLZXkocHJlZml4KSArICcvJztcblx0ICB9XG5cdCAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IE1hcEJvb2tLZWVwaW5nLmdldFBvb2xlZChhcnJheSwgZXNjYXBlZFByZWZpeCwgZnVuYywgY29udGV4dCk7XG5cdCAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgdHJhdmVyc2VDb250ZXh0KTtcblx0ICBNYXBCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYXBzIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYC5cblx0ICpcblx0ICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNoaWxkcmVuLm1hcFxuXHQgKlxuXHQgKiBUaGUgcHJvdmlkZWQgbWFwRnVuY3Rpb24oY2hpbGQsIGtleSwgaW5kZXgpIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoXG5cdCAqIGxlYWYgY2hpbGQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZ1bmMgVGhlIG1hcCBmdW5jdGlvbi5cblx0ICogQHBhcmFtIHsqfSBjb250ZXh0IENvbnRleHQgZm9yIG1hcEZ1bmN0aW9uLlxuXHQgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCBjb250YWluaW5nIHRoZSBvcmRlcmVkIG1hcCBvZiByZXN1bHRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmMsIGNvbnRleHQpIHtcblx0ICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGNoaWxkcmVuO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBmdW5jLCBjb250ZXh0KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGREdW1teSh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG5cdCAgcmV0dXJuIG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXNcblx0ICogYHByb3BzLmNoaWxkcmVuYC5cblx0ICpcblx0ICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNoaWxkcmVuLmNvdW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4uXG5cdCAqL1xuXHRmdW5jdGlvbiBjb3VudENoaWxkcmVuKGNoaWxkcmVuLCBjb250ZXh0KSB7XG5cdCAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZER1bW15LCBudWxsKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsYXR0ZW4gYSBjaGlsZHJlbiBvYmplY3QgKHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCkgYW5kXG5cdCAqIHJldHVybiBhbiBhcnJheSB3aXRoIGFwcHJvcHJpYXRlbHkgcmUta2V5ZWQgY2hpbGRyZW4uXG5cdCAqXG5cdCAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jaGlsZHJlbi50b2FycmF5XG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FycmF5KGNoaWxkcmVuKSB7XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHR2YXIgUmVhY3RDaGlsZHJlbiA9IHtcblx0ICBmb3JFYWNoOiBmb3JFYWNoQ2hpbGRyZW4sXG5cdCAgbWFwOiBtYXBDaGlsZHJlbixcblx0ICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsOiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsLFxuXHQgIGNvdW50OiBjb3VudENoaWxkcmVuLFxuXHQgIHRvQXJyYXk6IHRvQXJyYXlcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZHJlbjtcblxuLyoqKi8gfSxcbi8qIDU1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q2xhc3Ncblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3Byb2RJbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgX2Fzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgUmVhY3RDb21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cdHZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBlbXB0eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIGtleU1pcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIga2V5T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIE1JWElOU19LRVkgPSBrZXlPZih7IG1peGluczogbnVsbCB9KTtcblx0XG5cdC8qKlxuXHQgKiBQb2xpY2llcyB0aGF0IGRlc2NyaWJlIG1ldGhvZHMgaW4gYFJlYWN0Q2xhc3NJbnRlcmZhY2VgLlxuXHQgKi9cblx0dmFyIFNwZWNQb2xpY3kgPSBrZXlNaXJyb3Ioe1xuXHQgIC8qKlxuXHQgICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgb25seSBvbmNlIGJ5IHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIG9yIG1peGluLlxuXHQgICAqL1xuXHQgIERFRklORV9PTkNFOiBudWxsLFxuXHQgIC8qKlxuXHQgICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgYnkgYm90aCB0aGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBhbmQgbWl4aW5zLlxuXHQgICAqIFN1YnNlcXVlbnQgZGVmaW5pdGlvbnMgd2lsbCBiZSBjaGFpbmVkLiBUaGVzZSBtZXRob2RzIG11c3QgcmV0dXJuIHZvaWQuXG5cdCAgICovXG5cdCAgREVGSU5FX01BTlk6IG51bGwsXG5cdCAgLyoqXG5cdCAgICogVGhlc2UgbWV0aG9kcyBhcmUgb3ZlcnJpZGluZyB0aGUgYmFzZSBjbGFzcy5cblx0ICAgKi9cblx0ICBPVkVSUklERV9CQVNFOiBudWxsLFxuXHQgIC8qKlxuXHQgICAqIFRoZXNlIG1ldGhvZHMgYXJlIHNpbWlsYXIgdG8gREVGSU5FX01BTlksIGV4Y2VwdCB3ZSBhc3N1bWUgdGhleSByZXR1cm5cblx0ICAgKiBvYmplY3RzLiBXZSB0cnkgdG8gbWVyZ2UgdGhlIGtleXMgb2YgdGhlIHJldHVybiB2YWx1ZXMgb2YgYWxsIHRoZSBtaXhlZCBpblxuXHQgICAqIGZ1bmN0aW9ucy4gSWYgdGhlcmUgaXMgYSBrZXkgY29uZmxpY3Qgd2UgdGhyb3cuXG5cdCAgICovXG5cdCAgREVGSU5FX01BTllfTUVSR0VEOiBudWxsXG5cdH0pO1xuXHRcblx0dmFyIGluamVjdGVkTWl4aW5zID0gW107XG5cdFxuXHQvKipcblx0ICogQ29tcG9zaXRlIGNvbXBvbmVudHMgYXJlIGhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHRoYXQgY29tcG9zZSBvdGhlciBjb21wb3NpdGVcblx0ICogb3IgaG9zdCBjb21wb25lbnRzLlxuXHQgKlxuXHQgKiBUbyBjcmVhdGUgYSBuZXcgdHlwZSBvZiBgUmVhY3RDbGFzc2AsIHBhc3MgYSBzcGVjaWZpY2F0aW9uIG9mXG5cdCAqIHlvdXIgbmV3IGNsYXNzIHRvIGBSZWFjdC5jcmVhdGVDbGFzc2AuIFRoZSBvbmx5IHJlcXVpcmVtZW50IG9mIHlvdXIgY2xhc3Ncblx0ICogc3BlY2lmaWNhdGlvbiBpcyB0aGF0IHlvdSBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuXG5cdCAqXG5cdCAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcblx0ICogICAgICAgcmV0dXJuIDxkaXY+SGVsbG8gV29ybGQ8L2Rpdj47XG5cdCAqICAgICB9XG5cdCAqICAgfSk7XG5cdCAqXG5cdCAqIFRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIHN1cHBvcnRzIGEgc3BlY2lmaWMgcHJvdG9jb2wgb2YgbWV0aG9kcyB0aGF0IGhhdmVcblx0ICogc3BlY2lhbCBtZWFuaW5nIChlLmcuIGByZW5kZXJgKS4gU2VlIGBSZWFjdENsYXNzSW50ZXJmYWNlYCBmb3Jcblx0ICogbW9yZSB0aGUgY29tcHJlaGVuc2l2ZSBwcm90b2NvbC4gQW55IG90aGVyIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgaW4gdGhlXG5cdCAqIGNsYXNzIHNwZWNpZmljYXRpb24gd2lsbCBiZSBhdmFpbGFibGUgb24gdGhlIHByb3RvdHlwZS5cblx0ICpcblx0ICogQGludGVyZmFjZSBSZWFjdENsYXNzSW50ZXJmYWNlXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0dmFyIFJlYWN0Q2xhc3NJbnRlcmZhY2UgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFuIGFycmF5IG9mIE1peGluIG9iamVjdHMgdG8gaW5jbHVkZSB3aGVuIGRlZmluaW5nIHlvdXIgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHR5cGUge2FycmF5fVxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIG1peGluczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLyoqXG5cdCAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyBhbmQgbWV0aG9kcyB0aGF0IHNob3VsZCBiZSBkZWZpbmVkIG9uXG5cdCAgICogdGhlIGNvbXBvbmVudCdzIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgaXRzIHByb3RvdHlwZSAoc3RhdGljIG1ldGhvZHMpLlxuXHQgICAqXG5cdCAgICogQHR5cGUge29iamVjdH1cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBzdGF0aWNzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWZpbml0aW9uIG9mIHByb3AgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHR5cGUge29iamVjdH1cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBwcm9wVHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyBmb3IgdGhpcyBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7b2JqZWN0fVxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIGNvbnRleHRUeXBlczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVmaW5pdGlvbiBvZiBjb250ZXh0IHR5cGVzIHRoaXMgY29tcG9uZW50IHNldHMgZm9yIGl0cyBjaGlsZHJlbi5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtvYmplY3R9XG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgY2hpbGRDb250ZXh0VHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8vID09PT0gRGVmaW5pdGlvbiBtZXRob2RzID09PT1cblx0XG5cdCAgLyoqXG5cdCAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVmFsdWVzIGluIHRoZSBtYXBwaW5nIHdpbGwgYmUgc2V0IG9uXG5cdCAgICogYHRoaXMucHJvcHNgIGlmIHRoYXQgcHJvcCBpcyBub3Qgc3BlY2lmaWVkIChpLmUuIHVzaW5nIGFuIGBpbmAgY2hlY2spLlxuXHQgICAqXG5cdCAgICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBiZWZvcmUgYGdldEluaXRpYWxTdGF0ZWAgYW5kIHRoZXJlZm9yZSBjYW5ub3QgcmVseVxuXHQgICAqIG9uIGB0aGlzLnN0YXRlYCBvciB1c2UgYHRoaXMuc2V0U3RhdGVgLlxuXHQgICAqXG5cdCAgICogQHJldHVybiB7b2JqZWN0fVxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIGdldERlZmF1bHRQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgb25jZSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZFxuXHQgICAqIGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIGB0aGlzLnN0YXRlYC5cblx0ICAgKlxuXHQgICAqICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcblx0ICAgKiAgICAgcmV0dXJuIHtcblx0ICAgKiAgICAgICBpc09uOiBmYWxzZSxcblx0ICAgKiAgICAgICBmb29CYXo6IG5ldyBCYXpGb28oKVxuXHQgICAqICAgICB9XG5cdCAgICogICB9XG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtvYmplY3R9XG5cdCAgICogQG9wdGlvbmFsXG5cdCAgICovXG5cdCAgZ2V0SW5pdGlhbFN0YXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCxcblx0XG5cdCAgLyoqXG5cdCAgICogQHJldHVybiB7b2JqZWN0fVxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIGdldENoaWxkQ29udGV4dDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVzZXMgcHJvcHMgZnJvbSBgdGhpcy5wcm9wc2AgYW5kIHN0YXRlIGZyb20gYHRoaXMuc3RhdGVgIHRvIHJlbmRlciB0aGVcblx0ICAgKiBzdHJ1Y3R1cmUgb2YgdGhlIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIE5vIGd1YXJhbnRlZXMgYXJlIG1hZGUgYWJvdXQgd2hlbiBvciBob3cgb2Z0ZW4gdGhpcyBtZXRob2QgaXMgaW52b2tlZCwgc29cblx0ICAgKiBpdCBtdXN0IG5vdCBoYXZlIHNpZGUgZWZmZWN0cy5cblx0ICAgKlxuXHQgICAqICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcblx0ICAgKiAgICAgdmFyIG5hbWUgPSB0aGlzLnByb3BzLm5hbWU7XG5cdCAgICogICAgIHJldHVybiA8ZGl2PkhlbGxvLCB7bmFtZX0hPC9kaXY+O1xuXHQgICAqICAgfVxuXHQgICAqXG5cdCAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG5cdCAgICogQG5vc2lkZWVmZmVjdHNcblx0ICAgKiBAcmVxdWlyZWRcblx0ICAgKi9cblx0ICByZW5kZXI6IFNwZWNQb2xpY3kuREVGSU5FX09OQ0UsXG5cdFxuXHQgIC8vID09PT0gRGVsZWdhdGUgbWV0aG9kcyA9PT09XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluaXRpYWxseSBjcmVhdGVkIGFuZCBhYm91dCB0byBiZSBtb3VudGVkLlxuXHQgICAqIFRoaXMgbWF5IGhhdmUgc2lkZSBlZmZlY3RzLCBidXQgYW55IGV4dGVybmFsIHN1YnNjcmlwdGlvbnMgb3IgZGF0YSBjcmVhdGVkXG5cdCAgICogYnkgdGhpcyBtZXRob2QgbXVzdCBiZSBjbGVhbmVkIHVwIGluIGBjb21wb25lbnRXaWxsVW5tb3VudGAuXG5cdCAgICpcblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb21wb25lbnRXaWxsTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgYW5kIGhhcyBhIERPTSByZXByZXNlbnRhdGlvbi5cblx0ICAgKiBIb3dldmVyLCB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgRE9NIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuXHQgICAqXG5cdCAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcblx0ICAgKiBiZWVuIG1vdW50ZWQgKGluaXRpYWxpemVkIGFuZCByZW5kZXJlZCkgZm9yIHRoZSBmaXJzdCB0aW1lLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb21wb25lbnREaWRNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW52b2tlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCByZWNlaXZlcyBuZXcgcHJvcHMuXG5cdCAgICpcblx0ICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byByZWFjdCB0byBhIHByb3AgdHJhbnNpdGlvbiBieSB1cGRhdGluZyB0aGVcblx0ICAgKiBzdGF0ZSB1c2luZyBgdGhpcy5zZXRTdGF0ZWAuIEN1cnJlbnQgcHJvcHMgYXJlIGFjY2Vzc2VkIHZpYSBgdGhpcy5wcm9wc2AuXG5cdCAgICpcblx0ICAgKiAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcblx0ICAgKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICogICAgICAgbGlrZXNJbmNyZWFzaW5nOiBuZXh0UHJvcHMubGlrZUNvdW50ID4gdGhpcy5wcm9wcy5saWtlQ291bnRcblx0ICAgKiAgICAgfSk7XG5cdCAgICogICB9XG5cdCAgICpcblx0ICAgKiBOT1RFOiBUaGVyZSBpcyBubyBlcXVpdmFsZW50IGBjb21wb25lbnRXaWxsUmVjZWl2ZVN0YXRlYC4gQW4gaW5jb21pbmcgcHJvcFxuXHQgICAqIHRyYW5zaXRpb24gbWF5IGNhdXNlIGEgc3RhdGUgY2hhbmdlLCBidXQgdGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlLiBJZiB5b3Vcblx0ICAgKiBuZWVkIGl0LCB5b3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgZm9yIGBjb21wb25lbnRXaWxsVXBkYXRlYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIHdoaWxlIGRlY2lkaW5nIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2Zcblx0ICAgKiByZWNlaXZpbmcgbmV3IHByb3BzLCBzdGF0ZSBhbmQvb3IgY29udGV4dC5cblx0ICAgKlxuXHQgICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGByZXR1cm4gZmFsc2VgIHdoZW4geW91J3JlIGNlcnRhaW4gdGhhdCB0aGVcblx0ICAgKiB0cmFuc2l0aW9uIHRvIHRoZSBuZXcgcHJvcHMvc3RhdGUvY29udGV4dCB3aWxsIG5vdCByZXF1aXJlIGEgY29tcG9uZW50XG5cdCAgICogdXBkYXRlLlxuXHQgICAqXG5cdCAgICogICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCkge1xuXHQgICAqICAgICByZXR1cm4gIWVxdWFsKG5leHRQcm9wcywgdGhpcy5wcm9wcykgfHxcblx0ICAgKiAgICAgICAhZXF1YWwobmV4dFN0YXRlLCB0aGlzLnN0YXRlKSB8fFxuXHQgICAqICAgICAgICFlcXVhbChuZXh0Q29udGV4dCwgdGhpcy5jb250ZXh0KTtcblx0ICAgKiAgIH1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcblx0ICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIHVwZGF0ZS5cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBzaG91bGRDb21wb25lbnRVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX09OQ0UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIHVwZGF0ZSBkdWUgdG8gYSB0cmFuc2l0aW9uIGZyb21cblx0ICAgKiBgdGhpcy5wcm9wc2AsIGB0aGlzLnN0YXRlYCBhbmQgYHRoaXMuY29udGV4dGAgdG8gYG5leHRQcm9wc2AsIGBuZXh0U3RhdGVgXG5cdCAgICogYW5kIGBuZXh0Q29udGV4dGAuXG5cdCAgICpcblx0ICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBwZXJmb3JtIHByZXBhcmF0aW9uIGJlZm9yZSBhbiB1cGRhdGUgb2NjdXJzLlxuXHQgICAqXG5cdCAgICogTk9URTogWW91ICoqY2Fubm90KiogdXNlIGB0aGlzLnNldFN0YXRlKClgIGluIHRoaXMgbWV0aG9kLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuXHQgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG5cdCAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dFxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb21wb25lbnRXaWxsVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCdzIERPTSByZXByZXNlbnRhdGlvbiBoYXMgYmVlbiB1cGRhdGVkLlxuXHQgICAqXG5cdCAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcblx0ICAgKiBiZWVuIHVwZGF0ZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gcHJldlByb3BzXG5cdCAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2U3RhdGVcblx0ICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZDb250ZXh0XG5cdCAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cblx0ICAgKiBAb3B0aW9uYWxcblx0ICAgKi9cblx0ICBjb21wb25lbnREaWRVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQgZnJvbSBpdHMgcGFyZW50IGFuZCBoYXZlXG5cdCAgICogaXRzIERPTSByZXByZXNlbnRhdGlvbiBkZXN0cm95ZWQuXG5cdCAgICpcblx0ICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBkZWFsbG9jYXRlIGFueSBleHRlcm5hbCByZXNvdXJjZXMuXG5cdCAgICpcblx0ICAgKiBOT1RFOiBUaGVyZSBpcyBubyBgY29tcG9uZW50RGlkVW5tb3VudGAgc2luY2UgeW91ciBjb21wb25lbnQgd2lsbCBoYXZlIGJlZW5cblx0ICAgKiBkZXN0cm95ZWQgYnkgdGhhdCBwb2ludC5cblx0ICAgKlxuXHQgICAqIEBvcHRpb25hbFxuXHQgICAqL1xuXHQgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXHRcblx0ICAvLyA9PT09IEFkdmFuY2VkIG1ldGhvZHMgPT09PVxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGVzIHRoZSBjb21wb25lbnQncyBjdXJyZW50bHkgbW91bnRlZCBET00gcmVwcmVzZW50YXRpb24uXG5cdCAgICpcblx0ICAgKiBCeSBkZWZhdWx0LCB0aGlzIGltcGxlbWVudHMgUmVhY3QncyByZW5kZXJpbmcgYW5kIHJlY29uY2lsaWF0aW9uIGFsZ29yaXRobS5cblx0ICAgKiBTb3BoaXN0aWNhdGVkIGNsaWVudHMgbWF5IHdpc2ggdG8gb3ZlcnJpZGUgdGhpcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cblx0ICAgKiBAaW50ZXJuYWxcblx0ICAgKiBAb3ZlcnJpZGFibGVcblx0ICAgKi9cblx0ICB1cGRhdGVDb21wb25lbnQ6IFNwZWNQb2xpY3kuT1ZFUlJJREVfQkFTRVxuXHRcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBNYXBwaW5nIGZyb20gY2xhc3Mgc3BlY2lmaWNhdGlvbiBrZXlzIHRvIHNwZWNpYWwgcHJvY2Vzc2luZyBmdW5jdGlvbnMuXG5cdCAqXG5cdCAqIEFsdGhvdWdoIHRoZXNlIGFyZSBkZWNsYXJlZCBsaWtlIGluc3RhbmNlIHByb3BlcnRpZXMgaW4gdGhlIHNwZWNpZmljYXRpb25cblx0ICogd2hlbiBkZWZpbmluZyBjbGFzc2VzIHVzaW5nIGBSZWFjdC5jcmVhdGVDbGFzc2AsIHRoZXkgYXJlIGFjdHVhbGx5IHN0YXRpY1xuXHQgKiBhbmQgYXJlIGFjY2Vzc2libGUgb24gdGhlIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgdGhlIHByb3RvdHlwZS4gRGVzcGl0ZVxuXHQgKiBiZWluZyBzdGF0aWMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIG91dHNpZGUgb2YgdGhlIFwic3RhdGljc1wiIGtleSB1bmRlclxuXHQgKiB3aGljaCBhbGwgb3RoZXIgc3RhdGljIG1ldGhvZHMgYXJlIGRlZmluZWQuXG5cdCAqL1xuXHR2YXIgUkVTRVJWRURfU1BFQ19LRVlTID0ge1xuXHQgIGRpc3BsYXlOYW1lOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGRpc3BsYXlOYW1lKSB7XG5cdCAgICBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuXHQgIH0sXG5cdCAgbWl4aW5zOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIG1peGlucykge1xuXHQgICAgaWYgKG1peGlucykge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBtaXhpbnNbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBjaGlsZENvbnRleHRUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBjaGlsZENvbnRleHRUeXBlcykge1xuXHQgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcblx0ICAgIH1cblx0ICAgIENvbnN0cnVjdG9yLmNoaWxkQ29udGV4dFR5cGVzID0gX2Fzc2lnbih7fSwgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMsIGNoaWxkQ29udGV4dFR5cGVzKTtcblx0ICB9LFxuXHQgIGNvbnRleHRUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMpIHtcblx0ICAgIGlmIChmYWxzZSkge1xuXHQgICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jb250ZXh0KTtcblx0ICAgIH1cblx0ICAgIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcyA9IF9hc3NpZ24oe30sIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcywgY29udGV4dFR5cGVzKTtcblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIFNwZWNpYWwgY2FzZSBnZXREZWZhdWx0UHJvcHMgd2hpY2ggc2hvdWxkIG1vdmUgaW50byBzdGF0aWNzIGJ1dCByZXF1aXJlc1xuXHQgICAqIGF1dG9tYXRpYyBtZXJnaW5nLlxuXHQgICAqL1xuXHQgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBnZXREZWZhdWx0UHJvcHMpIHtcblx0ICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcblx0ICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24oQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLCBnZXREZWZhdWx0UHJvcHMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gZ2V0RGVmYXVsdFByb3BzO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcHJvcFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3BUeXBlcykge1xuXHQgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgcHJvcFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuXHQgICAgfVxuXHQgICAgQ29uc3RydWN0b3IucHJvcFR5cGVzID0gX2Fzc2lnbih7fSwgQ29uc3RydWN0b3IucHJvcFR5cGVzLCBwcm9wVHlwZXMpO1xuXHQgIH0sXG5cdCAgc3RhdGljczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBzdGF0aWNzKSB7XG5cdCAgICBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcyk7XG5cdCAgfSxcblx0ICBhdXRvYmluZDogZnVuY3Rpb24gKCkge30gfTtcblx0XG5cdC8vIG5vb3Bcblx0ZnVuY3Rpb24gdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCB0eXBlRGVmLCBsb2NhdGlvbikge1xuXHQgIGZvciAodmFyIHByb3BOYW1lIGluIHR5cGVEZWYpIHtcblx0ICAgIGlmICh0eXBlRGVmLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuXHQgICAgICAvLyB1c2UgYSB3YXJuaW5nIGluc3RlYWQgb2YgYW4gaW52YXJpYW50IHNvIGNvbXBvbmVudHNcblx0ICAgICAgLy8gZG9uJ3Qgc2hvdyB1cCBpbiBwcm9kIGJ1dCBvbmx5IGluIF9fREVWX19cblx0ICAgICAgIGZhbHNlID8gd2FybmluZyh0eXBlb2YgdHlwZURlZltwcm9wTmFtZV0gPT09ICdmdW5jdGlvbicsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiB2b2lkIDA7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlKGlzQWxyZWFkeURlZmluZWQsIG5hbWUpIHtcblx0ICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSkgPyBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdIDogbnVsbDtcblx0XG5cdCAgLy8gRGlzYWxsb3cgb3ZlcnJpZGluZyBvZiBiYXNlIGNsYXNzIG1ldGhvZHMgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cblx0ICBpZiAoUmVhY3RDbGFzc01peGluLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAhKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuT1ZFUlJJREVfQkFTRSkgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgYCVzYCBmcm9tIHlvdXIgY2xhc3Mgc3BlY2lmaWNhdGlvbi4gRW5zdXJlIHRoYXQgeW91ciBtZXRob2QgbmFtZXMgZG8gbm90IG92ZXJsYXAgd2l0aCBSZWFjdCBtZXRob2RzLicsIG5hbWUpIDogX3Byb2RJbnZhcmlhbnQoJzczJywgbmFtZSkgOiB2b2lkIDA7XG5cdCAgfVxuXHRcblx0ICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG5cdCAgaWYgKGlzQWxyZWFkeURlZmluZWQpIHtcblx0ICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSB8fCBzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lIGAlc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSB0byBhIG1peGluLicsIG5hbWUpIDogX3Byb2RJbnZhcmlhbnQoJzc0JywgbmFtZSkgOiB2b2lkIDA7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWl4aW4gaGVscGVyIHdoaWNoIGhhbmRsZXMgcG9saWN5IHZhbGlkYXRpb24gYW5kIHJlc2VydmVkXG5cdCAqIHNwZWNpZmljYXRpb24ga2V5cyB3aGVuIGJ1aWxkaW5nIFJlYWN0IGNsYXNzZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYykge1xuXHQgIGlmICghc3BlYykge1xuXHQgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgIHZhciB0eXBlb2ZTcGVjID0gdHlwZW9mIHNwZWM7XG5cdCAgICAgIHZhciBpc01peGluVmFsaWQgPSB0eXBlb2ZTcGVjID09PSAnb2JqZWN0JyAmJiBzcGVjICE9PSBudWxsO1xuXHRcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoaXNNaXhpblZhbGlkLCAnJXM6IFlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gaW5jbHVkZSBhIG1peGluIHRoYXQgaXMgZWl0aGVyIG51bGwgJyArICdvciBub3QgYW4gb2JqZWN0LiBDaGVjayB0aGUgbWl4aW5zIGluY2x1ZGVkIGJ5IHRoZSBjb21wb25lbnQsICcgKyAnYXMgd2VsbCBhcyBhbnkgbWl4aW5zIHRoZXkgaW5jbHVkZSB0aGVtc2VsdmVzLiAnICsgJ0V4cGVjdGVkIG9iamVjdCBidXQgZ290ICVzLicsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENsYXNzJywgc3BlYyA9PT0gbnVsbCA/IG51bGwgOiB0eXBlb2ZTcGVjKSA6IHZvaWQgMDtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAhKHR5cGVvZiBzcGVjICE9PSAnZnVuY3Rpb24nKSA/ICBmYWxzZSA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gdXNlIGEgY29tcG9uZW50IGNsYXNzIG9yIGZ1bmN0aW9uIGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBfcHJvZEludmFyaWFudCgnNzUnKSA6IHZvaWQgMDtcblx0ICAhIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzcGVjKSA/ICBmYWxzZSA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gdXNlIGEgY29tcG9uZW50IGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBfcHJvZEludmFyaWFudCgnNzYnKSA6IHZvaWQgMDtcblx0XG5cdCAgdmFyIHByb3RvID0gQ29uc3RydWN0b3IucHJvdG90eXBlO1xuXHQgIHZhciBhdXRvQmluZFBhaXJzID0gcHJvdG8uX19yZWFjdEF1dG9CaW5kUGFpcnM7XG5cdFxuXHQgIC8vIEJ5IGhhbmRsaW5nIG1peGlucyBiZWZvcmUgYW55IG90aGVyIHByb3BlcnRpZXMsIHdlIGVuc3VyZSB0aGUgc2FtZVxuXHQgIC8vIGNoYWluaW5nIG9yZGVyIGlzIGFwcGxpZWQgdG8gbWV0aG9kcyB3aXRoIERFRklORV9NQU5ZIHBvbGljeSwgd2hldGhlclxuXHQgIC8vIG1peGlucyBhcmUgbGlzdGVkIGJlZm9yZSBvciBhZnRlciB0aGVzZSBtZXRob2RzIGluIHRoZSBzcGVjLlxuXHQgIGlmIChzcGVjLmhhc093blByb3BlcnR5KE1JWElOU19LRVkpKSB7XG5cdCAgICBSRVNFUlZFRF9TUEVDX0tFWVMubWl4aW5zKENvbnN0cnVjdG9yLCBzcGVjLm1peGlucyk7XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBuYW1lIGluIHNwZWMpIHtcblx0ICAgIGlmICghc3BlYy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAobmFtZSA9PT0gTUlYSU5TX0tFWSkge1xuXHQgICAgICAvLyBXZSBoYXZlIGFscmVhZHkgaGFuZGxlZCBtaXhpbnMgaW4gYSBzcGVjaWFsIGNhc2UgYWJvdmUuXG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwcm9wZXJ0eSA9IHNwZWNbbmFtZV07XG5cdCAgICB2YXIgaXNBbHJlYWR5RGVmaW5lZCA9IHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpO1xuXHQgICAgdmFsaWRhdGVNZXRob2RPdmVycmlkZShpc0FscmVhZHlEZWZpbmVkLCBuYW1lKTtcblx0XG5cdCAgICBpZiAoUkVTRVJWRURfU1BFQ19LRVlTLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAgIFJFU0VSVkVEX1NQRUNfS0VZU1tuYW1lXShDb25zdHJ1Y3RvciwgcHJvcGVydHkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gU2V0dXAgbWV0aG9kcyBvbiBwcm90b3R5cGU6XG5cdCAgICAgIC8vIFRoZSBmb2xsb3dpbmcgbWVtYmVyIG1ldGhvZHMgc2hvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGJvdW5kOlxuXHQgICAgICAvLyAxLiBFeHBlY3RlZCBSZWFjdENsYXNzIG1ldGhvZHMgKGluIHRoZSBcImludGVyZmFjZVwiKS5cblx0ICAgICAgLy8gMi4gT3ZlcnJpZGRlbiBtZXRob2RzICh0aGF0IHdlcmUgbWl4ZWQgaW4pLlxuXHQgICAgICB2YXIgaXNSZWFjdENsYXNzTWV0aG9kID0gUmVhY3RDbGFzc0ludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcblx0ICAgICAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbic7XG5cdCAgICAgIHZhciBzaG91bGRBdXRvQmluZCA9IGlzRnVuY3Rpb24gJiYgIWlzUmVhY3RDbGFzc01ldGhvZCAmJiAhaXNBbHJlYWR5RGVmaW5lZCAmJiBzcGVjLmF1dG9iaW5kICE9PSBmYWxzZTtcblx0XG5cdCAgICAgIGlmIChzaG91bGRBdXRvQmluZCkge1xuXHQgICAgICAgIGF1dG9CaW5kUGFpcnMucHVzaChuYW1lLCBwcm9wZXJ0eSk7XG5cdCAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoaXNBbHJlYWR5RGVmaW5lZCkge1xuXHQgICAgICAgICAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdO1xuXHRcblx0ICAgICAgICAgIC8vIFRoZXNlIGNhc2VzIHNob3VsZCBhbHJlYWR5IGJlIGNhdWdodCBieSB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlLlxuXHQgICAgICAgICAgIShpc1JlYWN0Q2xhc3NNZXRob2QgJiYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpKSA/ICBmYWxzZSA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFVuZXhwZWN0ZWQgc3BlYyBwb2xpY3kgJXMgZm9yIGtleSAlcyB3aGVuIG1peGluZyBpbiBjb21wb25lbnQgc3BlY3MuJywgc3BlY1BvbGljeSwgbmFtZSkgOiBfcHJvZEludmFyaWFudCgnNzcnLCBzcGVjUG9saWN5LCBuYW1lKSA6IHZvaWQgMDtcblx0XG5cdCAgICAgICAgICAvLyBGb3IgbWV0aG9kcyB3aGljaCBhcmUgZGVmaW5lZCBtb3JlIHRoYW4gb25jZSwgY2FsbCB0aGUgZXhpc3Rpbmdcblx0ICAgICAgICAgIC8vIG1ldGhvZHMgYmVmb3JlIGNhbGxpbmcgdGhlIG5ldyBwcm9wZXJ0eSwgbWVyZ2luZyBpZiBhcHByb3ByaWF0ZS5cblx0ICAgICAgICAgIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkge1xuXHQgICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKHByb3RvW25hbWVdLCBwcm9wZXJ0eSk7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpIHtcblx0ICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcblx0ICAgICAgICAgIGlmIChmYWxzZSkge1xuXHQgICAgICAgICAgICAvLyBBZGQgdmVyYm9zZSBkaXNwbGF5TmFtZSB0byB0aGUgZnVuY3Rpb24sIHdoaWNoIGhlbHBzIHdoZW4gbG9va2luZ1xuXHQgICAgICAgICAgICAvLyBhdCBwcm9maWxpbmcgdG9vbHMuXG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbicgJiYgc3BlYy5kaXNwbGF5TmFtZSkge1xuXHQgICAgICAgICAgICAgIHByb3RvW25hbWVdLmRpc3BsYXlOYW1lID0gc3BlYy5kaXNwbGF5TmFtZSArICdfJyArIG5hbWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKSB7XG5cdCAgaWYgKCFzdGF0aWNzKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGZvciAodmFyIG5hbWUgaW4gc3RhdGljcykge1xuXHQgICAgdmFyIHByb3BlcnR5ID0gc3RhdGljc1tuYW1lXTtcblx0ICAgIGlmICghc3RhdGljcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaXNSZXNlcnZlZCA9IG5hbWUgaW4gUkVTRVJWRURfU1BFQ19LRVlTO1xuXHQgICAgISFpc1Jlc2VydmVkID8gIGZhbHNlID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSBhIHJlc2VydmVkIHByb3BlcnR5LCBgJXNgLCB0aGF0IHNob3VsZG5cXCd0IGJlIG9uIHRoZSBcInN0YXRpY3NcIiBrZXkuIERlZmluZSBpdCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBpbnN0ZWFkOyBpdCB3aWxsIHN0aWxsIGJlIGFjY2Vzc2libGUgb24gdGhlIGNvbnN0cnVjdG9yLicsIG5hbWUpIDogX3Byb2RJbnZhcmlhbnQoJzc4JywgbmFtZSkgOiB2b2lkIDA7XG5cdFxuXHQgICAgdmFyIGlzSW5oZXJpdGVkID0gbmFtZSBpbiBDb25zdHJ1Y3Rvcjtcblx0ICAgICEhaXNJbmhlcml0ZWQgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lIGAlc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSB0byBhIG1peGluLicsIG5hbWUpIDogX3Byb2RJbnZhcmlhbnQoJzc5JywgbmFtZSkgOiB2b2lkIDA7XG5cdCAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvYmplY3RzLCBidXQgdGhyb3cgaWYgYm90aCBjb250YWluIHRoZSBzYW1lIGtleS5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IG9uZSBUaGUgZmlyc3Qgb2JqZWN0LCB3aGljaCBpcyBtdXRhdGVkLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gdHdvIFRoZSBzZWNvbmQgb2JqZWN0XG5cdCAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMob25lLCB0d28pIHtcblx0ICAhKG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcpID8gIGZhbHNlID8gaW52YXJpYW50KGZhbHNlLCAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiBDYW5ub3QgbWVyZ2Ugbm9uLW9iamVjdHMuJykgOiBfcHJvZEludmFyaWFudCgnODAnKSA6IHZvaWQgMDtcblx0XG5cdCAgZm9yICh2YXIga2V5IGluIHR3bykge1xuXHQgICAgaWYgKHR3by5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICEob25lW2tleV0gPT09IHVuZGVmaW5lZCkgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKCk6IFRyaWVkIHRvIG1lcmdlIHR3byBvYmplY3RzIHdpdGggdGhlIHNhbWUga2V5OiBgJXNgLiBUaGlzIGNvbmZsaWN0IG1heSBiZSBkdWUgdG8gYSBtaXhpbjsgaW4gcGFydGljdWxhciwgdGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHR3byBnZXRJbml0aWFsU3RhdGUoKSBvciBnZXREZWZhdWx0UHJvcHMoKSBtZXRob2RzIHJldHVybmluZyBvYmplY3RzIHdpdGggY2xhc2hpbmcga2V5cy4nLCBrZXkpIDogX3Byb2RJbnZhcmlhbnQoJzgxJywga2V5KSA6IHZvaWQgMDtcblx0ICAgICAgb25lW2tleV0gPSB0d29ba2V5XTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG9uZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgbWVyZ2VzIHRoZWlyIHJldHVybiB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ob25lLCB0d28pIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkUmVzdWx0KCkge1xuXHQgICAgdmFyIGEgPSBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIHZhciBiID0gdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoYSA9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybiBiO1xuXHQgICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIGE7XG5cdCAgICB9XG5cdCAgICB2YXIgYyA9IHt9O1xuXHQgICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBhKTtcblx0ICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYik7XG5cdCAgICByZXR1cm4gYztcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBpZ25vcmVzIHRoZWlyIHJldHVybiB2YWxlcy5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG5cdCAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ob25lLCB0d28pIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY2hhaW5lZEZ1bmN0aW9uKCkge1xuXHQgICAgb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQmluZHMgYSBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWV0aG9kIHRvIGJlIGJvdW5kLlxuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGJvdW5kIG1ldGhvZC5cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCkge1xuXHQgIHZhciBib3VuZE1ldGhvZCA9IG1ldGhvZC5iaW5kKGNvbXBvbmVudCk7XG5cdCAgaWYgKGZhbHNlKSB7XG5cdCAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRDb250ZXh0ID0gY29tcG9uZW50O1xuXHQgICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuXHQgICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gbnVsbDtcblx0ICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50LmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lO1xuXHQgICAgdmFyIF9iaW5kID0gYm91bmRNZXRob2QuYmluZDtcblx0ICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbiAobmV3VGhpcykge1xuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gVXNlciBpcyB0cnlpbmcgdG8gYmluZCgpIGFuIGF1dG9ib3VuZCBtZXRob2Q7IHdlIGVmZmVjdGl2ZWx5IHdpbGxcblx0ICAgICAgLy8gaWdub3JlIHRoZSB2YWx1ZSBvZiBcInRoaXNcIiB0aGF0IHRoZSB1c2VyIGlzIHRyeWluZyB0byB1c2UsIHNvXG5cdCAgICAgIC8vIGxldCdzIHdhcm4uXG5cdCAgICAgIGlmIChuZXdUaGlzICE9PSBjb21wb25lbnQgJiYgbmV3VGhpcyAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArICdjb21wb25lbnQgaW5zdGFuY2UuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdm9pZCAwO1xuXHQgICAgICB9IGVsc2UgaWYgKCFhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBZb3UgYXJlIGJpbmRpbmcgYSBjb21wb25lbnQgbWV0aG9kIHRvIHRoZSBjb21wb25lbnQuICcgKyAnUmVhY3QgZG9lcyB0aGlzIGZvciB5b3UgYXV0b21hdGljYWxseSBpbiBhIGhpZ2gtcGVyZm9ybWFuY2UgJyArICd3YXksIHNvIHlvdSBjYW4gc2FmZWx5IHJlbW92ZSB0aGlzIGNhbGwuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdm9pZCAwO1xuXHQgICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmVib3VuZE1ldGhvZCA9IF9iaW5kLmFwcGx5KGJvdW5kTWV0aG9kLCBhcmd1bWVudHMpO1xuXHQgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG5cdCAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuXHQgICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IGFyZ3M7XG5cdCAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGJvdW5kTWV0aG9kO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQmluZHMgYWxsIGF1dG8tYm91bmQgbWV0aG9kcyBpbiBhIGNvbXBvbmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmluZEF1dG9CaW5kTWV0aG9kcyhjb21wb25lbnQpIHtcblx0ICB2YXIgcGFpcnMgPSBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kUGFpcnM7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkgKz0gMikge1xuXHQgICAgdmFyIGF1dG9CaW5kS2V5ID0gcGFpcnNbaV07XG5cdCAgICB2YXIgbWV0aG9kID0gcGFpcnNbaSArIDFdO1xuXHQgICAgY29tcG9uZW50W2F1dG9CaW5kS2V5XSA9IGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIG1vcmUgdG8gdGhlIFJlYWN0Q2xhc3MgYmFzZSBjbGFzcy4gVGhlc2UgYXJlIGFsbCBsZWdhY3kgZmVhdHVyZXMgYW5kXG5cdCAqIHRoZXJlZm9yZSBub3QgYWxyZWFkeSBwYXJ0IG9mIHRoZSBtb2Rlcm4gUmVhY3RDb21wb25lbnQuXG5cdCAqL1xuXHR2YXIgUmVhY3RDbGFzc01peGluID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBUT0RPOiBUaGlzIHdpbGwgYmUgZGVwcmVjYXRlZCBiZWNhdXNlIHN0YXRlIHNob3VsZCBhbHdheXMga2VlcCBhIGNvbnNpc3RlbnRcblx0ICAgKiB0eXBlIHNpZ25hdHVyZSBhbmQgdGhlIG9ubHkgdXNlIGNhc2UgZm9yIHRoaXMsIGlzIHRvIGF2b2lkIHRoYXQuXG5cdCAgICovXG5cdCAgcmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAobmV3U3RhdGUsIGNhbGxiYWNrKSB7XG5cdCAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VTdGF0ZSh0aGlzLCBuZXdTdGF0ZSk7XG5cdCAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjaywgJ3JlcGxhY2VTdGF0ZScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cblx0ICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0ICAgKiBAcHJvdGVjdGVkXG5cdCAgICogQGZpbmFsXG5cdCAgICovXG5cdCAgaXNNb3VudGVkOiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy51cGRhdGVyLmlzTW91bnRlZCh0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgUmVhY3RDbGFzc0NvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHt9O1xuXHRfYXNzaWduKFJlYWN0Q2xhc3NDb21wb25lbnQucHJvdG90eXBlLCBSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q2xhc3NNaXhpbik7XG5cdFxuXHQvKipcblx0ICogTW9kdWxlIGZvciBjcmVhdGluZyBjb21wb3NpdGUgY29tcG9uZW50cy5cblx0ICpcblx0ICogQGNsYXNzIFJlYWN0Q2xhc3Ncblx0ICovXG5cdHZhciBSZWFjdENsYXNzID0ge1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGVzIGEgY29tcG9zaXRlIGNvbXBvbmVudCBjbGFzcyBnaXZlbiBhIGNsYXNzIHNwZWNpZmljYXRpb24uXG5cdCAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNyZWF0ZWNsYXNzXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge29iamVjdH0gc3BlYyBDbGFzcyBzcGVjaWZpY2F0aW9uICh3aGljaCBtdXN0IGRlZmluZSBgcmVuZGVyYCkuXG5cdCAgICogQHJldHVybiB7ZnVuY3Rpb259IENvbXBvbmVudCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdCAgY3JlYXRlQ2xhc3M6IGZ1bmN0aW9uIChzcGVjKSB7XG5cdCAgICB2YXIgQ29uc3RydWN0b3IgPSBmdW5jdGlvbiAocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcblx0ICAgICAgLy8gVGhpcyBjb25zdHJ1Y3RvciBnZXRzIG92ZXJyaWRkZW4gYnkgbW9ja3MuIFRoZSBhcmd1bWVudCBpcyB1c2VkXG5cdCAgICAgIC8vIGJ5IG1vY2tzIHRvIGFzc2VydCBvbiB3aGF0IGdldHMgbW91bnRlZC5cblx0XG5cdCAgICAgIGlmIChmYWxzZSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHRoaXMgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvciwgJ1NvbWV0aGluZyBpcyBjYWxsaW5nIGEgUmVhY3QgY29tcG9uZW50IGRpcmVjdGx5LiBVc2UgYSBmYWN0b3J5IG9yICcgKyAnSlNYIGluc3RlYWQuIFNlZTogaHR0cHM6Ly9mYi5tZS9yZWFjdC1sZWdhY3lmYWN0b3J5JykgOiB2b2lkIDA7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFdpcmUgdXAgYXV0by1iaW5kaW5nXG5cdCAgICAgIGlmICh0aGlzLl9fcmVhY3RBdXRvQmluZFBhaXJzLmxlbmd0aCkge1xuXHQgICAgICAgIGJpbmRBdXRvQmluZE1ldGhvZHModGhpcyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcblx0ICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0ICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG5cdCAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cdFxuXHQgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcblx0XG5cdCAgICAgIC8vIFJlYWN0Q2xhc3NlcyBkb2Vzbid0IGhhdmUgY29uc3RydWN0b3JzLiBJbnN0ZWFkLCB0aGV5IHVzZSB0aGVcblx0ICAgICAgLy8gZ2V0SW5pdGlhbFN0YXRlIGFuZCBjb21wb25lbnRXaWxsTW91bnQgbWV0aG9kcyBmb3IgaW5pdGlhbGl6YXRpb24uXG5cdFxuXHQgICAgICB2YXIgaW5pdGlhbFN0YXRlID0gdGhpcy5nZXRJbml0aWFsU3RhdGUgPyB0aGlzLmdldEluaXRpYWxTdGF0ZSgpIDogbnVsbDtcblx0ICAgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgICAgLy8gV2UgYWxsb3cgYXV0by1tb2NrcyB0byBwcm9jZWVkIGFzIGlmIHRoZXkncmUgcmV0dXJuaW5nIG51bGwuXG5cdCAgICAgICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkICYmIHRoaXMuZ2V0SW5pdGlhbFN0YXRlLl9pc01vY2tGdW5jdGlvbikge1xuXHQgICAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBiYWQgcHJhY3RpY2UuIENvbnNpZGVyIHdhcm5pbmcgaGVyZSBhbmRcblx0ICAgICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG5cdCAgICAgICAgICBpbml0aWFsU3RhdGUgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICAhKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGluaXRpYWxTdGF0ZSkpID8gIGZhbHNlID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0SW5pdGlhbFN0YXRlKCk6IG11c3QgcmV0dXJuIGFuIG9iamVjdCBvciBudWxsJywgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBfcHJvZEludmFyaWFudCgnODInLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHZvaWQgMDtcblx0XG5cdCAgICAgIHRoaXMuc3RhdGUgPSBpbml0aWFsU3RhdGU7XG5cdCAgICB9O1xuXHQgICAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gbmV3IFJlYWN0Q2xhc3NDb21wb25lbnQoKTtcblx0ICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXHQgICAgQ29uc3RydWN0b3IucHJvdG90eXBlLl9fcmVhY3RBdXRvQmluZFBhaXJzID0gW107XG5cdFxuXHQgICAgaW5qZWN0ZWRNaXhpbnMuZm9yRWFjaChtaXhTcGVjSW50b0NvbXBvbmVudC5iaW5kKG51bGwsIENvbnN0cnVjdG9yKSk7XG5cdFxuXHQgICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpO1xuXHRcblx0ICAgIC8vIEluaXRpYWxpemUgdGhlIGRlZmF1bHRQcm9wcyBwcm9wZXJ0eSBhZnRlciBhbGwgbWl4aW5zIGhhdmUgYmVlbiBtZXJnZWQuXG5cdCAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG5cdCAgICAgIENvbnN0cnVjdG9yLmRlZmF1bHRQcm9wcyA9IENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcygpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChmYWxzZSkge1xuXHQgICAgICAvLyBUaGlzIGlzIGEgdGFnIHRvIGluZGljYXRlIHRoYXQgdGhlIHVzZSBvZiB0aGVzZSBtZXRob2QgbmFtZXMgaXMgb2ssXG5cdCAgICAgIC8vIHNpbmNlIGl0J3MgdXNlZCB3aXRoIGNyZWF0ZUNsYXNzLiBJZiBpdCdzIG5vdCwgdGhlbiBpdCdzIGxpa2VseSBhXG5cdCAgICAgIC8vIG1pc3Rha2Ugc28gd2UnbGwgd2FybiB5b3UgdG8gdXNlIHRoZSBzdGF0aWMgcHJvcGVydHksIHByb3BlcnR5XG5cdCAgICAgIC8vIGluaXRpYWxpemVyIG9yIGNvbnN0cnVjdG9yIHJlc3BlY3RpdmVseS5cblx0ICAgICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuXHQgICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlKSB7XG5cdCAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZS5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZW5kZXIgPyAgZmFsc2UgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVDbGFzcyguLi4pOiBDbGFzcyBzcGVjaWZpY2F0aW9uIG11c3QgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLicpIDogX3Byb2RJbnZhcmlhbnQoJzgzJykgOiB2b2lkIDA7XG5cdFxuXHQgICAgaWYgKGZhbHNlKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50U2hvdWxkVXBkYXRlLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/ICcgKyAnVGhlIG5hbWUgaXMgcGhyYXNlZCBhcyBhIHF1ZXN0aW9uIGJlY2F1c2UgdGhlIGZ1bmN0aW9uIGlzICcgKyAnZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdmFsdWUuJywgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnKSA6IHZvaWQgMDtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLCBzcGVjLmRpc3BsYXlOYW1lIHx8ICdBIGNvbXBvbmVudCcpIDogdm9pZCAwO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFJlZHVjZSB0aW1lIHNwZW50IGRvaW5nIGxvb2t1cHMgYnkgc2V0dGluZyB0aGVzZSBvbiB0aGUgcHJvdG90eXBlLlxuXHQgICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG5cdCAgICAgIGlmICghQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG5cdCAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9LFxuXHRcblx0ICBpbmplY3Rpb246IHtcblx0ICAgIGluamVjdE1peGluOiBmdW5jdGlvbiAobWl4aW4pIHtcblx0ICAgICAgaW5qZWN0ZWRNaXhpbnMucHVzaChtaXhpbik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RDbGFzcztcblxuLyoqKi8gfSxcbi8qIDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NRmFjdG9yaWVzXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlYWN0RWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgZmFjdG9yeSB0aGF0IGNyZWF0ZXMgSFRNTCB0YWcgZWxlbWVudHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHR2YXIgY3JlYXRlRE9NRmFjdG9yeSA9IFJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5O1xuXHRpZiAoZmFsc2UpIHtcblx0ICB2YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcblx0ICBjcmVhdGVET01GYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3Rvcnk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbWFwcGluZyBmcm9tIHN1cHBvcnRlZCBIVE1MIHRhZ3MgdG8gYFJlYWN0RE9NQ29tcG9uZW50YCBjbGFzc2VzLlxuXHQgKiBUaGlzIGlzIGFsc28gYWNjZXNzaWJsZSB2aWEgYFJlYWN0LkRPTWAuXG5cdCAqXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdHZhciBSZWFjdERPTUZhY3RvcmllcyA9IHtcblx0ICBhOiBjcmVhdGVET01GYWN0b3J5KCdhJyksXG5cdCAgYWJicjogY3JlYXRlRE9NRmFjdG9yeSgnYWJicicpLFxuXHQgIGFkZHJlc3M6IGNyZWF0ZURPTUZhY3RvcnkoJ2FkZHJlc3MnKSxcblx0ICBhcmVhOiBjcmVhdGVET01GYWN0b3J5KCdhcmVhJyksXG5cdCAgYXJ0aWNsZTogY3JlYXRlRE9NRmFjdG9yeSgnYXJ0aWNsZScpLFxuXHQgIGFzaWRlOiBjcmVhdGVET01GYWN0b3J5KCdhc2lkZScpLFxuXHQgIGF1ZGlvOiBjcmVhdGVET01GYWN0b3J5KCdhdWRpbycpLFxuXHQgIGI6IGNyZWF0ZURPTUZhY3RvcnkoJ2InKSxcblx0ICBiYXNlOiBjcmVhdGVET01GYWN0b3J5KCdiYXNlJyksXG5cdCAgYmRpOiBjcmVhdGVET01GYWN0b3J5KCdiZGknKSxcblx0ICBiZG86IGNyZWF0ZURPTUZhY3RvcnkoJ2JkbycpLFxuXHQgIGJpZzogY3JlYXRlRE9NRmFjdG9yeSgnYmlnJyksXG5cdCAgYmxvY2txdW90ZTogY3JlYXRlRE9NRmFjdG9yeSgnYmxvY2txdW90ZScpLFxuXHQgIGJvZHk6IGNyZWF0ZURPTUZhY3RvcnkoJ2JvZHknKSxcblx0ICBicjogY3JlYXRlRE9NRmFjdG9yeSgnYnInKSxcblx0ICBidXR0b246IGNyZWF0ZURPTUZhY3RvcnkoJ2J1dHRvbicpLFxuXHQgIGNhbnZhczogY3JlYXRlRE9NRmFjdG9yeSgnY2FudmFzJyksXG5cdCAgY2FwdGlvbjogY3JlYXRlRE9NRmFjdG9yeSgnY2FwdGlvbicpLFxuXHQgIGNpdGU6IGNyZWF0ZURPTUZhY3RvcnkoJ2NpdGUnKSxcblx0ICBjb2RlOiBjcmVhdGVET01GYWN0b3J5KCdjb2RlJyksXG5cdCAgY29sOiBjcmVhdGVET01GYWN0b3J5KCdjb2wnKSxcblx0ICBjb2xncm91cDogY3JlYXRlRE9NRmFjdG9yeSgnY29sZ3JvdXAnKSxcblx0ICBkYXRhOiBjcmVhdGVET01GYWN0b3J5KCdkYXRhJyksXG5cdCAgZGF0YWxpc3Q6IGNyZWF0ZURPTUZhY3RvcnkoJ2RhdGFsaXN0JyksXG5cdCAgZGQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2RkJyksXG5cdCAgZGVsOiBjcmVhdGVET01GYWN0b3J5KCdkZWwnKSxcblx0ICBkZXRhaWxzOiBjcmVhdGVET01GYWN0b3J5KCdkZXRhaWxzJyksXG5cdCAgZGZuOiBjcmVhdGVET01GYWN0b3J5KCdkZm4nKSxcblx0ICBkaWFsb2c6IGNyZWF0ZURPTUZhY3RvcnkoJ2RpYWxvZycpLFxuXHQgIGRpdjogY3JlYXRlRE9NRmFjdG9yeSgnZGl2JyksXG5cdCAgZGw6IGNyZWF0ZURPTUZhY3RvcnkoJ2RsJyksXG5cdCAgZHQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2R0JyksXG5cdCAgZW06IGNyZWF0ZURPTUZhY3RvcnkoJ2VtJyksXG5cdCAgZW1iZWQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2VtYmVkJyksXG5cdCAgZmllbGRzZXQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2ZpZWxkc2V0JyksXG5cdCAgZmlnY2FwdGlvbjogY3JlYXRlRE9NRmFjdG9yeSgnZmlnY2FwdGlvbicpLFxuXHQgIGZpZ3VyZTogY3JlYXRlRE9NRmFjdG9yeSgnZmlndXJlJyksXG5cdCAgZm9vdGVyOiBjcmVhdGVET01GYWN0b3J5KCdmb290ZXInKSxcblx0ICBmb3JtOiBjcmVhdGVET01GYWN0b3J5KCdmb3JtJyksXG5cdCAgaDE6IGNyZWF0ZURPTUZhY3RvcnkoJ2gxJyksXG5cdCAgaDI6IGNyZWF0ZURPTUZhY3RvcnkoJ2gyJyksXG5cdCAgaDM6IGNyZWF0ZURPTUZhY3RvcnkoJ2gzJyksXG5cdCAgaDQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2g0JyksXG5cdCAgaDU6IGNyZWF0ZURPTUZhY3RvcnkoJ2g1JyksXG5cdCAgaDY6IGNyZWF0ZURPTUZhY3RvcnkoJ2g2JyksXG5cdCAgaGVhZDogY3JlYXRlRE9NRmFjdG9yeSgnaGVhZCcpLFxuXHQgIGhlYWRlcjogY3JlYXRlRE9NRmFjdG9yeSgnaGVhZGVyJyksXG5cdCAgaGdyb3VwOiBjcmVhdGVET01GYWN0b3J5KCdoZ3JvdXAnKSxcblx0ICBocjogY3JlYXRlRE9NRmFjdG9yeSgnaHInKSxcblx0ICBodG1sOiBjcmVhdGVET01GYWN0b3J5KCdodG1sJyksXG5cdCAgaTogY3JlYXRlRE9NRmFjdG9yeSgnaScpLFxuXHQgIGlmcmFtZTogY3JlYXRlRE9NRmFjdG9yeSgnaWZyYW1lJyksXG5cdCAgaW1nOiBjcmVhdGVET01GYWN0b3J5KCdpbWcnKSxcblx0ICBpbnB1dDogY3JlYXRlRE9NRmFjdG9yeSgnaW5wdXQnKSxcblx0ICBpbnM6IGNyZWF0ZURPTUZhY3RvcnkoJ2lucycpLFxuXHQgIGtiZDogY3JlYXRlRE9NRmFjdG9yeSgna2JkJyksXG5cdCAga2V5Z2VuOiBjcmVhdGVET01GYWN0b3J5KCdrZXlnZW4nKSxcblx0ICBsYWJlbDogY3JlYXRlRE9NRmFjdG9yeSgnbGFiZWwnKSxcblx0ICBsZWdlbmQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2xlZ2VuZCcpLFxuXHQgIGxpOiBjcmVhdGVET01GYWN0b3J5KCdsaScpLFxuXHQgIGxpbms6IGNyZWF0ZURPTUZhY3RvcnkoJ2xpbmsnKSxcblx0ICBtYWluOiBjcmVhdGVET01GYWN0b3J5KCdtYWluJyksXG5cdCAgbWFwOiBjcmVhdGVET01GYWN0b3J5KCdtYXAnKSxcblx0ICBtYXJrOiBjcmVhdGVET01GYWN0b3J5KCdtYXJrJyksXG5cdCAgbWVudTogY3JlYXRlRE9NRmFjdG9yeSgnbWVudScpLFxuXHQgIG1lbnVpdGVtOiBjcmVhdGVET01GYWN0b3J5KCdtZW51aXRlbScpLFxuXHQgIG1ldGE6IGNyZWF0ZURPTUZhY3RvcnkoJ21ldGEnKSxcblx0ICBtZXRlcjogY3JlYXRlRE9NRmFjdG9yeSgnbWV0ZXInKSxcblx0ICBuYXY6IGNyZWF0ZURPTUZhY3RvcnkoJ25hdicpLFxuXHQgIG5vc2NyaXB0OiBjcmVhdGVET01GYWN0b3J5KCdub3NjcmlwdCcpLFxuXHQgIG9iamVjdDogY3JlYXRlRE9NRmFjdG9yeSgnb2JqZWN0JyksXG5cdCAgb2w6IGNyZWF0ZURPTUZhY3RvcnkoJ29sJyksXG5cdCAgb3B0Z3JvdXA6IGNyZWF0ZURPTUZhY3RvcnkoJ29wdGdyb3VwJyksXG5cdCAgb3B0aW9uOiBjcmVhdGVET01GYWN0b3J5KCdvcHRpb24nKSxcblx0ICBvdXRwdXQ6IGNyZWF0ZURPTUZhY3RvcnkoJ291dHB1dCcpLFxuXHQgIHA6IGNyZWF0ZURPTUZhY3RvcnkoJ3AnKSxcblx0ICBwYXJhbTogY3JlYXRlRE9NRmFjdG9yeSgncGFyYW0nKSxcblx0ICBwaWN0dXJlOiBjcmVhdGVET01GYWN0b3J5KCdwaWN0dXJlJyksXG5cdCAgcHJlOiBjcmVhdGVET01GYWN0b3J5KCdwcmUnKSxcblx0ICBwcm9ncmVzczogY3JlYXRlRE9NRmFjdG9yeSgncHJvZ3Jlc3MnKSxcblx0ICBxOiBjcmVhdGVET01GYWN0b3J5KCdxJyksXG5cdCAgcnA6IGNyZWF0ZURPTUZhY3RvcnkoJ3JwJyksXG5cdCAgcnQ6IGNyZWF0ZURPTUZhY3RvcnkoJ3J0JyksXG5cdCAgcnVieTogY3JlYXRlRE9NRmFjdG9yeSgncnVieScpLFxuXHQgIHM6IGNyZWF0ZURPTUZhY3RvcnkoJ3MnKSxcblx0ICBzYW1wOiBjcmVhdGVET01GYWN0b3J5KCdzYW1wJyksXG5cdCAgc2NyaXB0OiBjcmVhdGVET01GYWN0b3J5KCdzY3JpcHQnKSxcblx0ICBzZWN0aW9uOiBjcmVhdGVET01GYWN0b3J5KCdzZWN0aW9uJyksXG5cdCAgc2VsZWN0OiBjcmVhdGVET01GYWN0b3J5KCdzZWxlY3QnKSxcblx0ICBzbWFsbDogY3JlYXRlRE9NRmFjdG9yeSgnc21hbGwnKSxcblx0ICBzb3VyY2U6IGNyZWF0ZURPTUZhY3RvcnkoJ3NvdXJjZScpLFxuXHQgIHNwYW46IGNyZWF0ZURPTUZhY3RvcnkoJ3NwYW4nKSxcblx0ICBzdHJvbmc6IGNyZWF0ZURPTUZhY3RvcnkoJ3N0cm9uZycpLFxuXHQgIHN0eWxlOiBjcmVhdGVET01GYWN0b3J5KCdzdHlsZScpLFxuXHQgIHN1YjogY3JlYXRlRE9NRmFjdG9yeSgnc3ViJyksXG5cdCAgc3VtbWFyeTogY3JlYXRlRE9NRmFjdG9yeSgnc3VtbWFyeScpLFxuXHQgIHN1cDogY3JlYXRlRE9NRmFjdG9yeSgnc3VwJyksXG5cdCAgdGFibGU6IGNyZWF0ZURPTUZhY3RvcnkoJ3RhYmxlJyksXG5cdCAgdGJvZHk6IGNyZWF0ZURPTUZhY3RvcnkoJ3Rib2R5JyksXG5cdCAgdGQ6IGNyZWF0ZURPTUZhY3RvcnkoJ3RkJyksXG5cdCAgdGV4dGFyZWE6IGNyZWF0ZURPTUZhY3RvcnkoJ3RleHRhcmVhJyksXG5cdCAgdGZvb3Q6IGNyZWF0ZURPTUZhY3RvcnkoJ3Rmb290JyksXG5cdCAgdGg6IGNyZWF0ZURPTUZhY3RvcnkoJ3RoJyksXG5cdCAgdGhlYWQ6IGNyZWF0ZURPTUZhY3RvcnkoJ3RoZWFkJyksXG5cdCAgdGltZTogY3JlYXRlRE9NRmFjdG9yeSgndGltZScpLFxuXHQgIHRpdGxlOiBjcmVhdGVET01GYWN0b3J5KCd0aXRsZScpLFxuXHQgIHRyOiBjcmVhdGVET01GYWN0b3J5KCd0cicpLFxuXHQgIHRyYWNrOiBjcmVhdGVET01GYWN0b3J5KCd0cmFjaycpLFxuXHQgIHU6IGNyZWF0ZURPTUZhY3RvcnkoJ3UnKSxcblx0ICB1bDogY3JlYXRlRE9NRmFjdG9yeSgndWwnKSxcblx0ICAndmFyJzogY3JlYXRlRE9NRmFjdG9yeSgndmFyJyksXG5cdCAgdmlkZW86IGNyZWF0ZURPTUZhY3RvcnkoJ3ZpZGVvJyksXG5cdCAgd2JyOiBjcmVhdGVET01GYWN0b3J5KCd3YnInKSxcblx0XG5cdCAgLy8gU1ZHXG5cdCAgY2lyY2xlOiBjcmVhdGVET01GYWN0b3J5KCdjaXJjbGUnKSxcblx0ICBjbGlwUGF0aDogY3JlYXRlRE9NRmFjdG9yeSgnY2xpcFBhdGgnKSxcblx0ICBkZWZzOiBjcmVhdGVET01GYWN0b3J5KCdkZWZzJyksXG5cdCAgZWxsaXBzZTogY3JlYXRlRE9NRmFjdG9yeSgnZWxsaXBzZScpLFxuXHQgIGc6IGNyZWF0ZURPTUZhY3RvcnkoJ2cnKSxcblx0ICBpbWFnZTogY3JlYXRlRE9NRmFjdG9yeSgnaW1hZ2UnKSxcblx0ICBsaW5lOiBjcmVhdGVET01GYWN0b3J5KCdsaW5lJyksXG5cdCAgbGluZWFyR3JhZGllbnQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2xpbmVhckdyYWRpZW50JyksXG5cdCAgbWFzazogY3JlYXRlRE9NRmFjdG9yeSgnbWFzaycpLFxuXHQgIHBhdGg6IGNyZWF0ZURPTUZhY3RvcnkoJ3BhdGgnKSxcblx0ICBwYXR0ZXJuOiBjcmVhdGVET01GYWN0b3J5KCdwYXR0ZXJuJyksXG5cdCAgcG9seWdvbjogY3JlYXRlRE9NRmFjdG9yeSgncG9seWdvbicpLFxuXHQgIHBvbHlsaW5lOiBjcmVhdGVET01GYWN0b3J5KCdwb2x5bGluZScpLFxuXHQgIHJhZGlhbEdyYWRpZW50OiBjcmVhdGVET01GYWN0b3J5KCdyYWRpYWxHcmFkaWVudCcpLFxuXHQgIHJlY3Q6IGNyZWF0ZURPTUZhY3RvcnkoJ3JlY3QnKSxcblx0ICBzdG9wOiBjcmVhdGVET01GYWN0b3J5KCdzdG9wJyksXG5cdCAgc3ZnOiBjcmVhdGVET01GYWN0b3J5KCdzdmcnKSxcblx0ICB0ZXh0OiBjcmVhdGVET01GYWN0b3J5KCd0ZXh0JyksXG5cdCAgdHNwYW46IGNyZWF0ZURPTUZhY3RvcnkoJ3RzcGFuJylcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUmVhY3RET01GYWN0b3JpZXM7XG5cbi8qKiovIH0sXG4vKiA1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlTG9jYXRpb25zXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGtleU1pcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHRcblx0dmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSBrZXlNaXJyb3Ioe1xuXHQgIHByb3A6IG51bGwsXG5cdCAgY29udGV4dDogbnVsbCxcblx0ICBjaGlsZENvbnRleHQ6IG51bGxcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnM7XG5cbi8qKiovIH0sXG4vKiA1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlc1xuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWFjdEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cdFxuXHR2YXIgZW1wdHlGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgZ2V0SXRlcmF0b3JGbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHQvKipcblx0ICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIHRoYXQgYWxsb3cgZGVjbGFyYXRpb24gYW5kIHZhbGlkYXRpb24gb2YgcHJvcHMgdGhhdCBhcmVcblx0ICogc3VwcGxpZWQgdG8gUmVhY3QgY29tcG9uZW50cy4gRXhhbXBsZSB1c2FnZTpcblx0ICpcblx0ICogICB2YXIgUHJvcHMgPSByZXF1aXJlKCdSZWFjdFByb3BUeXBlcycpO1xuXHQgKiAgIHZhciBNeUFydGljbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdCAqICAgICBwcm9wVHlwZXM6IHtcblx0ICogICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIHByb3AgbmFtZWQgXCJkZXNjcmlwdGlvblwiLlxuXHQgKiAgICAgICBkZXNjcmlwdGlvbjogUHJvcHMuc3RyaW5nLFxuXHQgKlxuXHQgKiAgICAgICAvLyBBIHJlcXVpcmVkIGVudW0gcHJvcCBuYW1lZCBcImNhdGVnb3J5XCIuXG5cdCAqICAgICAgIGNhdGVnb3J5OiBQcm9wcy5vbmVPZihbJ05ld3MnLCdQaG90b3MnXSkuaXNSZXF1aXJlZCxcblx0ICpcblx0ICogICAgICAgLy8gQSBwcm9wIG5hbWVkIFwiZGlhbG9nXCIgdGhhdCByZXF1aXJlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2cuXG5cdCAqICAgICAgIGRpYWxvZzogUHJvcHMuaW5zdGFuY2VPZihEaWFsb2cpLmlzUmVxdWlyZWRcblx0ICogICAgIH0sXG5cdCAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgeyAuLi4gfVxuXHQgKiAgIH0pO1xuXHQgKlxuXHQgKiBBIG1vcmUgZm9ybWFsIHNwZWNpZmljYXRpb24gb2YgaG93IHRoZXNlIG1ldGhvZHMgYXJlIHVzZWQ6XG5cdCAqXG5cdCAqICAgdHlwZSA6PSBhcnJheXxib29sfGZ1bmN8b2JqZWN0fG51bWJlcnxzdHJpbmd8b25lT2YoWy4uLl0pfGluc3RhbmNlT2YoLi4uKVxuXHQgKiAgIGRlY2wgOj0gUmVhY3RQcm9wVHlwZXMue3R5cGV9KC5pc1JlcXVpcmVkKT9cblx0ICpcblx0ICogRWFjaCBhbmQgZXZlcnkgZGVjbGFyYXRpb24gcHJvZHVjZXMgYSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIHNpZ25hdHVyZS4gVGhpc1xuXHQgKiBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6XG5cdCAqXG5cdCAqICB2YXIgTXlMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgKiAgICBwcm9wVHlwZXM6IHtcblx0ICogICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgb3IgVVJJIHByb3AgbmFtZWQgXCJocmVmXCIuXG5cdCAqICAgICAgaHJlZjogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG5cdCAqICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuXHQgKiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPSBudWxsICYmIHR5cGVvZiBwcm9wVmFsdWUgIT09ICdzdHJpbmcnICYmXG5cdCAqICAgICAgICAgICAgIShwcm9wVmFsdWUgaW5zdGFuY2VvZiBVUkkpKSB7XG5cdCAqICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoXG5cdCAqICAgICAgICAgICAgJ0V4cGVjdGVkIGEgc3RyaW5nIG9yIGFuIFVSSSBmb3IgJyArIHByb3BOYW1lICsgJyBpbiAnICtcblx0ICogICAgICAgICAgICBjb21wb25lbnROYW1lXG5cdCAqICAgICAgICAgICk7XG5cdCAqICAgICAgICB9XG5cdCAqICAgICAgfVxuXHQgKiAgICB9LFxuXHQgKiAgICByZW5kZXI6IGZ1bmN0aW9uKCkgey4uLn1cblx0ICogIH0pO1xuXHQgKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdFxuXHR2YXIgQU5PTllNT1VTID0gJzw8YW5vbnltb3VzPj4nO1xuXHRcblx0dmFyIFJlYWN0UHJvcFR5cGVzID0ge1xuXHQgIGFycmF5OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYXJyYXknKSxcblx0ICBib29sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLFxuXHQgIGZ1bmM6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdmdW5jdGlvbicpLFxuXHQgIG51bWJlcjogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ251bWJlcicpLFxuXHQgIG9iamVjdDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLFxuXHQgIHN0cmluZzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N0cmluZycpLFxuXHQgIHN5bWJvbDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N5bWJvbCcpLFxuXHRcblx0ICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksXG5cdCAgYXJyYXlPZjogY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyLFxuXHQgIGVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpLFxuXHQgIGluc3RhbmNlT2Y6IGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsXG5cdCAgbm9kZTogY3JlYXRlTm9kZUNoZWNrZXIoKSxcblx0ICBvYmplY3RPZjogY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcixcblx0ICBvbmVPZjogY3JlYXRlRW51bVR5cGVDaGVja2VyLFxuXHQgIG9uZU9mVHlwZTogY3JlYXRlVW5pb25UeXBlQ2hlY2tlcixcblx0ICBzaGFwZTogY3JlYXRlU2hhcGVUeXBlQ2hlY2tlclxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd25cblx0ICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG5cdCAqL1xuXHQvKmVzbGludC1kaXNhYmxlIG5vLXNlbGYtY29tcGFyZSovXG5cdGZ1bmN0aW9uIGlzKHgsIHkpIHtcblx0ICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtXG5cdCAgaWYgKHggPT09IHkpIHtcblx0ICAgIC8vIFN0ZXBzIDEtNSwgNy0xMFxuXHQgICAgLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTBcblx0ICAgIHJldHVybiB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gU3RlcCA2LmE6IE5hTiA9PSBOYU5cblx0ICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG5cdCAgfVxuXHR9XG5cdC8qZXNsaW50LWVuYWJsZSBuby1zZWxmLWNvbXBhcmUqL1xuXHRcblx0LyoqXG5cdCAqIFdlIHVzZSBhbiBFcnJvci1saWtlIG9iamVjdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBhcyBwZW9wbGUgbWF5IGNhbGxcblx0ICogUHJvcFR5cGVzIGRpcmVjdGx5IGFuZCBpbnNwZWN0IHRoZWlyIG91dHB1dC4gSG93ZXZlciB3ZSBkb24ndCB1c2UgcmVhbFxuXHQgKiBFcnJvcnMgYW55bW9yZS4gV2UgZG9uJ3QgaW5zcGVjdCB0aGVpciBzdGFjayBhbnl3YXksIGFuZCBjcmVhdGluZyB0aGVtXG5cdCAqIGlzIHByb2hpYml0aXZlbHkgZXhwZW5zaXZlIGlmIHRoZXkgYXJlIGNyZWF0ZWQgdG9vIG9mdGVuLCBzdWNoIGFzIHdoYXRcblx0ICogaGFwcGVucyBpbiBvbmVPZlR5cGUoKSBmb3IgYW55IHR5cGUgYmVmb3JlIHRoZSBvbmUgdGhhdCBtYXRjaGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gUHJvcFR5cGVFcnJvcihtZXNzYWdlKSB7XG5cdCAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0ICB0aGlzLnN0YWNrID0gJyc7XG5cdH1cblx0Ly8gTWFrZSBgaW5zdGFuY2VvZiBFcnJvcmAgc3RpbGwgd29yayBmb3IgcmV0dXJuZWQgZXJyb3JzLlxuXHRQcm9wVHlwZUVycm9yLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKSB7XG5cdCAgaWYgKGZhbHNlKSB7XG5cdCAgICB2YXIgbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGUgPSB7fTtcblx0ICB9XG5cdCAgZnVuY3Rpb24gY2hlY2tUeXBlKGlzUmVxdWlyZWQsIHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG5cdCAgICBjb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZSB8fCBBTk9OWU1PVVM7XG5cdCAgICBwcm9wRnVsbE5hbWUgPSBwcm9wRnVsbE5hbWUgfHwgcHJvcE5hbWU7XG5cdCAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgaWYgKHNlY3JldCAhPT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgdmFyIGNhY2hlS2V5ID0gY29tcG9uZW50TmFtZSArICc6JyArIHByb3BOYW1lO1xuXHQgICAgICAgIGlmICghbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldKSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1lvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBhIFJlYWN0LlByb3BUeXBlcyB2YWxpZGF0aW9uICcgKyAnZnVuY3Rpb24gZm9yIHRoZSBgJXNgIHByb3Agb24gYCVzYC4gVGhpcyBpcyBkZXByZWNhdGVkICcgKyAnYW5kIHdpbGwgbm90IHdvcmsgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbi4gWW91IG1heSBiZSAnICsgJ3NlZWluZyB0aGlzIHdhcm5pbmcgZHVlIHRvIGEgdGhpcmQtcGFydHkgUHJvcFR5cGVzIGxpYnJhcnkuICcgKyAnU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1kb250LWNhbGwtcHJvcHR5cGVzIGZvciBkZXRhaWxzLicsIHByb3BGdWxsTmFtZSwgY29tcG9uZW50TmFtZSkgOiB2b2lkIDA7XG5cdCAgICAgICAgICBtYW51YWxQcm9wVHlwZUNhbGxDYWNoZVtjYWNoZUtleV0gPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PSBudWxsKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdSZXF1aXJlZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHdhcyBub3Qgc3BlY2lmaWVkIGluICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGNoYWluZWRDaGVja1R5cGUgPSBjaGVja1R5cGUuYmluZChudWxsLCBmYWxzZSk7XG5cdCAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7XG5cdFxuXHQgIHJldHVybiBjaGFpbmVkQ2hlY2tUeXBlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcihleHBlY3RlZFR5cGUpIHtcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkge1xuXHQgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcblx0ICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG5cdCAgICBpZiAocHJvcFR5cGUgIT09IGV4cGVjdGVkVHlwZSkge1xuXHQgICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuXHQgICAgICAvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCdcblx0ICAgICAgLy8gY2hlY2ssIGJ1dCB3ZSBjYW4gb2ZmZXIgYSBtb3JlIHByZWNpc2UgZXJyb3IgbWVzc2FnZSBoZXJlIHJhdGhlciB0aGFuXG5cdCAgICAgIC8vICdvZiB0eXBlIGBvYmplY3RgJy5cblx0ICAgICAgdmFyIHByZWNpc2VUeXBlID0gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKTtcblx0XG5cdCAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcmVjaXNlVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnYCcgKyBleHBlY3RlZFR5cGUgKyAnYC4nKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKSB7XG5cdCAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMobnVsbCkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcblx0ICAgIGlmICh0eXBlb2YgdHlwZUNoZWNrZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdQcm9wZXJ0eSBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIGNvbXBvbmVudCBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgYXJyYXlPZi4nKTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuXHQgICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuXHQgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuXHQgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpO1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJywgUmVhY3RQcm9wVHlwZXNTZWNyZXQpO1xuXHQgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuXHQgICAgICAgIHJldHVybiBlcnJvcjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpIHtcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcblx0ICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG5cdCAgICBpZiAoIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQuJykpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIoZXhwZWN0ZWRDbGFzcykge1xuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgaWYgKCEocHJvcHNbcHJvcE5hbWVdIGluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpIHtcblx0ICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcblx0ICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUztcblx0ICAgICAgdmFyIGFjdHVhbENsYXNzTmFtZSA9IGdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pO1xuXHQgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgYWN0dWFsQ2xhc3NOYW1lICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdpbnN0YW5jZSBvZiBgJyArIGV4cGVjdGVkQ2xhc3NOYW1lICsgJ2AuJykpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcykge1xuXHQgIGlmICghQXJyYXkuaXNBcnJheShleHBlY3RlZFZhbHVlcykpIHtcblx0ICAgICBmYWxzZSA/IHdhcm5pbmcoZmFsc2UsICdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKSA6IHZvaWQgMDtcblx0ICAgIHJldHVybiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRWYWx1ZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKGlzKHByb3BWYWx1ZSwgZXhwZWN0ZWRWYWx1ZXNbaV0pKSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuXHQgICAgdmFyIHZhbHVlc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGV4cGVjdGVkVmFsdWVzKTtcblx0ICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHZhbHVlIGAnICsgcHJvcFZhbHVlICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIG9uZSBvZiAnICsgdmFsdWVzU3RyaW5nICsgJy4nKSk7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcblx0ICAgIGlmICh0eXBlb2YgdHlwZUNoZWNrZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdQcm9wZXJ0eSBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIGNvbXBvbmVudCBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgb2JqZWN0T2YuJyk7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuXHQgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcblx0ICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHtcblx0ICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcFZhbHVlKSB7XG5cdCAgICAgIGlmIChwcm9wVmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7XG5cdCAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0ICAgICAgICAgIHJldHVybiBlcnJvcjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVVbmlvblR5cGVDaGVja2VyKGFycmF5T2ZUeXBlQ2hlY2tlcnMpIHtcblx0ICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2VycykpIHtcblx0ICAgICBmYWxzZSA/IHdhcm5pbmcoZmFsc2UsICdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJykgOiB2b2lkIDA7XG5cdCAgICByZXR1cm4gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGw7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgY2hlY2tlciA9IGFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07XG5cdCAgICAgIGlmIChjaGVja2VyKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpID09IG51bGwpIHtcblx0ICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nKSk7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZU5vZGVDaGVja2VyKCkge1xuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgaWYgKCFpc05vZGUocHJvcHNbcHJvcE5hbWVdKSkge1xuXHQgICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuXHQgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBSZWFjdE5vZGUuJykpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykge1xuXHQgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuXHQgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcblx0ICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG5cdCAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG5cdCAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gc2hhcGVUeXBlcykge1xuXHQgICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTtcblx0ICAgICAgaWYgKCFjaGVja2VyKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGVycm9yID0gY2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpO1xuXHQgICAgICBpZiAoZXJyb3IpIHtcblx0ICAgICAgICByZXR1cm4gZXJyb3I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc05vZGUocHJvcFZhbHVlKSB7XG5cdCAgc3dpdGNoICh0eXBlb2YgcHJvcFZhbHVlKSB7XG5cdCAgICBjYXNlICdudW1iZXInOlxuXHQgICAgY2FzZSAnc3RyaW5nJzpcblx0ICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgY2FzZSAnYm9vbGVhbic6XG5cdCAgICAgIHJldHVybiAhcHJvcFZhbHVlO1xuXHQgICAgY2FzZSAnb2JqZWN0Jzpcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuXHQgICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocHJvcFZhbHVlID09PSBudWxsIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO1xuXHQgICAgICBpZiAoaXRlcmF0b3JGbikge1xuXHQgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChwcm9wVmFsdWUpO1xuXHQgICAgICAgIHZhciBzdGVwO1xuXHQgICAgICAgIGlmIChpdGVyYXRvckZuICE9PSBwcm9wVmFsdWUuZW50cmllcykge1xuXHQgICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuXHQgICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cblx0ICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcblx0ICAgICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKGVudHJ5KSB7XG5cdCAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1N5bWJvbChwcm9wVHlwZSwgcHJvcFZhbHVlKSB7XG5cdCAgLy8gTmF0aXZlIFN5bWJvbC5cblx0ICBpZiAocHJvcFR5cGUgPT09ICdzeW1ib2wnKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdFxuXHQgIC8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10gPT09ICdTeW1ib2wnXG5cdCAgaWYgKHByb3BWYWx1ZVsnQEB0b1N0cmluZ1RhZyddID09PSAnU3ltYm9sJykge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHRcblx0ICAvLyBGYWxsYmFjayBmb3Igbm9uLXNwZWMgY29tcGxpYW50IFN5bWJvbHMgd2hpY2ggYXJlIHBvbHlmaWxsZWQuXG5cdCAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgcHJvcFZhbHVlIGluc3RhbmNlb2YgU3ltYm9sKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0Ly8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuXHRmdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpIHtcblx0ICB2YXIgcHJvcFR5cGUgPSB0eXBlb2YgcHJvcFZhbHVlO1xuXHQgIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcblx0ICAgIHJldHVybiAnYXJyYXknO1xuXHQgIH1cblx0ICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG5cdCAgICAvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuXG5cdCAgICAvLyAnb2JqZWN0JyBmb3IgdHlwZW9mIGEgUmVnRXhwLiBXZSdsbCBub3JtYWxpemUgdGhpcyBoZXJlIHNvIHRoYXQgL2JsYS9cblx0ICAgIC8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LlxuXHQgICAgcmV0dXJuICdvYmplY3QnO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wocHJvcFR5cGUsIHByb3BWYWx1ZSkpIHtcblx0ICAgIHJldHVybiAnc3ltYm9sJztcblx0ICB9XG5cdCAgcmV0dXJuIHByb3BUeXBlO1xuXHR9XG5cdFxuXHQvLyBUaGlzIGhhbmRsZXMgbW9yZSB0eXBlcyB0aGFuIGBnZXRQcm9wVHlwZWAuIE9ubHkgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG5cdC8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLlxuXHRmdW5jdGlvbiBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpIHtcblx0ICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuXHQgIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdCAgICAgIHJldHVybiAnZGF0ZSc7XG5cdCAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuXHQgICAgICByZXR1cm4gJ3JlZ2V4cCc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBwcm9wVHlwZTtcblx0fVxuXHRcblx0Ly8gUmV0dXJucyBjbGFzcyBuYW1lIG9mIHRoZSBvYmplY3QsIGlmIGFueS5cblx0ZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKHByb3BWYWx1ZSkge1xuXHQgIGlmICghcHJvcFZhbHVlLmNvbnN0cnVjdG9yIHx8ICFwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZSkge1xuXHQgICAgcmV0dXJuIEFOT05ZTU9VUztcblx0ICB9XG5cdCAgcmV0dXJuIHByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzO1xuXG4vKioqLyB9LFxuLyogNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgKlxuXHQgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcblx0ICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG5cdCAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuXHQgKlxuXHQgKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZXNTZWNyZXRcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcblxuLyoqKi8gfSxcbi8qIDYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHVyZUNvbXBvbmVudFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBSZWFjdENvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBlbXB0eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0LyoqXG5cdCAqIEJhc2UgY2xhc3MgaGVscGVycyBmb3IgdGhlIHVwZGF0aW5nIHN0YXRlIG9mIGEgY29tcG9uZW50LlxuXHQgKi9cblx0ZnVuY3Rpb24gUmVhY3RQdXJlQ29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG5cdCAgLy8gRHVwbGljYXRlZCBmcm9tIFJlYWN0Q29tcG9uZW50LlxuXHQgIHRoaXMucHJvcHMgPSBwcm9wcztcblx0ICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXHQgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuXHQgIC8vIFdlIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgdXBkYXRlciBidXQgdGhlIHJlYWwgb25lIGdldHMgaW5qZWN0ZWQgYnkgdGhlXG5cdCAgLy8gcmVuZGVyZXIuXG5cdCAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ29tcG9uZW50RHVtbXkoKSB7fVxuXHRDb21wb25lbnREdW1teS5wcm90b3R5cGUgPSBSZWFjdENvbXBvbmVudC5wcm90b3R5cGU7XG5cdFJlYWN0UHVyZUNvbXBvbmVudC5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50RHVtbXkoKTtcblx0UmVhY3RQdXJlQ29tcG9uZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWN0UHVyZUNvbXBvbmVudDtcblx0Ly8gQXZvaWQgYW4gZXh0cmEgcHJvdG90eXBlIGp1bXAgZm9yIHRoZXNlIG1ldGhvZHMuXG5cdF9hc3NpZ24oUmVhY3RQdXJlQ29tcG9uZW50LnByb3RvdHlwZSwgUmVhY3RDb21wb25lbnQucHJvdG90eXBlKTtcblx0UmVhY3RQdXJlQ29tcG9uZW50LnByb3RvdHlwZS5pc1B1cmVSZWFjdENvbXBvbmVudCA9IHRydWU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHVyZUNvbXBvbmVudDtcblxuLyoqKi8gfSxcbi8qIDYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuXHQgKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICpcblx0ICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VmVyc2lvblxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gJzE1LjMuMic7XG5cbi8qKiovIH0sXG4vKiA2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSBvbmx5Q2hpbGRcblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfcHJvZEludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgUmVhY3RFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGZpcnN0IGNoaWxkIGluIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiBhbmQgdmVyaWZpZXMgdGhhdCB0aGVyZVxuXHQgKiBpcyBvbmx5IG9uZSBjaGlsZCBpbiB0aGUgY29sbGVjdGlvbi5cblx0ICpcblx0ICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNoaWxkcmVuLm9ubHlcblx0ICpcblx0ICogVGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBzaW5nbGUgY2hpbGQgZ2V0c1xuXHQgKiBwYXNzZWQgd2l0aG91dCBhIHdyYXBwZXIsIGJ1dCB0aGUgcHVycG9zZSBvZiB0aGlzIGhlbHBlciBmdW5jdGlvbiBpcyB0b1xuXHQgKiBhYnN0cmFjdCBhd2F5IHRoZSBwYXJ0aWN1bGFyIHN0cnVjdHVyZSBvZiBjaGlsZHJlbi5cblx0ICpcblx0ICogQHBhcmFtIHs/b2JqZWN0fSBjaGlsZHJlbiBDaGlsZCBjb2xsZWN0aW9uIHN0cnVjdHVyZS5cblx0ICogQHJldHVybiB7UmVhY3RFbGVtZW50fSBUaGUgZmlyc3QgYW5kIG9ubHkgYFJlYWN0RWxlbWVudGAgY29udGFpbmVkIGluIHRoZVxuXHQgKiBzdHJ1Y3R1cmUuXG5cdCAqL1xuXHRmdW5jdGlvbiBvbmx5Q2hpbGQoY2hpbGRyZW4pIHtcblx0ICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSA/ICBmYWxzZSA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0LkNoaWxkcmVuLm9ubHkgZXhwZWN0ZWQgdG8gcmVjZWl2ZSBhIHNpbmdsZSBSZWFjdCBlbGVtZW50IGNoaWxkLicpIDogX3Byb2RJbnZhcmlhbnQoJzE0MycpIDogdm9pZCAwO1xuXHQgIHJldHVybiBjaGlsZHJlbjtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBvbmx5Q2hpbGQ7XG5cbi8qKiovIH0sXG4vKiA2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG5cdCAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuXHQgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcblx0ICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG5cdCAqXG5cdCAqIEBwcm92aWRlc01vZHVsZSB0cmF2ZXJzZUFsbENoaWxkcmVuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9wcm9kSW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBSZWFjdEN1cnJlbnRPd25lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgUmVhY3RFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBnZXRJdGVyYXRvckZuID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdHZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgS2V5RXNjYXBlVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIHdhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIFNFUEFSQVRPUiA9ICcuJztcblx0dmFyIFNVQlNFUEFSQVRPUiA9ICc6Jztcblx0XG5cdC8qKlxuXHQgKiBUT0RPOiBUZXN0IHRoYXQgYSBzaW5nbGUgY2hpbGQgYW5kIGFuIGFycmF5IHdpdGggb25lIGl0ZW0gaGF2ZSB0aGUgc2FtZSBrZXlcblx0ICogcGF0dGVybi5cblx0ICovXG5cdFxuXHR2YXIgZGlkV2FybkFib3V0TWFwcyA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEga2V5IHN0cmluZyB0aGF0IGlkZW50aWZpZXMgYSBjb21wb25lbnQgd2l0aGluIGEgc2V0LlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGNvbXBvbmVudCBBIGNvbXBvbmVudCB0aGF0IGNvdWxkIGNvbnRhaW4gYSBtYW51YWwga2V5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggdGhhdCBpcyB1c2VkIGlmIGEgbWFudWFsIGtleSBpcyBub3QgcHJvdmlkZWQuXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGdldENvbXBvbmVudEtleShjb21wb25lbnQsIGluZGV4KSB7XG5cdCAgLy8gRG8gc29tZSB0eXBlY2hlY2tpbmcgaGVyZSBzaW5jZSB3ZSBjYWxsIHRoaXMgYmxpbmRseS4gV2Ugd2FudCB0byBlbnN1cmVcblx0ICAvLyB0aGF0IHdlIGRvbid0IGJsb2NrIHBvdGVudGlhbCBmdXR1cmUgRVMgQVBJcy5cblx0ICBpZiAoY29tcG9uZW50ICYmIHR5cGVvZiBjb21wb25lbnQgPT09ICdvYmplY3QnICYmIGNvbXBvbmVudC5rZXkgIT0gbnVsbCkge1xuXHQgICAgLy8gRXhwbGljaXQga2V5XG5cdCAgICByZXR1cm4gS2V5RXNjYXBlVXRpbHMuZXNjYXBlKGNvbXBvbmVudC5rZXkpO1xuXHQgIH1cblx0ICAvLyBJbXBsaWNpdCBrZXkgZGV0ZXJtaW5lZCBieSB0aGUgaW5kZXggaW4gdGhlIHNldFxuXHQgIHJldHVybiBpbmRleC50b1N0cmluZygzNik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cblx0ICogQHBhcmFtIHshc3RyaW5nfSBuYW1lU29GYXIgTmFtZSBvZiB0aGUga2V5IHBhdGggc28gZmFyLlxuXHQgKiBAcGFyYW0geyFmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgdG8gaW52b2tlIHdpdGggZWFjaCBjaGlsZCBmb3VuZC5cblx0ICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IFVzZWQgdG8gcGFzcyBpbmZvcm1hdGlvbiB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWxcblx0ICogcHJvY2Vzcy5cblx0ICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZHJlbiwgbmFtZVNvRmFyLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG5cdFxuXHQgIGlmICh0eXBlID09PSAndW5kZWZpbmVkJyB8fCB0eXBlID09PSAnYm9vbGVhbicpIHtcblx0ICAgIC8vIEFsbCBvZiB0aGUgYWJvdmUgYXJlIHBlcmNlaXZlZCBhcyBudWxsLlxuXHQgICAgY2hpbGRyZW4gPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKGNoaWxkcmVuID09PSBudWxsIHx8IHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcblx0ICAgIGNhbGxiYWNrKHRyYXZlcnNlQ29udGV4dCwgY2hpbGRyZW4sXG5cdCAgICAvLyBJZiBpdCdzIHRoZSBvbmx5IGNoaWxkLCB0cmVhdCB0aGUgbmFtZSBhcyBpZiBpdCB3YXMgd3JhcHBlZCBpbiBhbiBhcnJheVxuXHQgICAgLy8gc28gdGhhdCBpdCdzIGNvbnNpc3RlbnQgaWYgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBncm93cy5cblx0ICAgIG5hbWVTb0ZhciA9PT0gJycgPyBTRVBBUkFUT1IgKyBnZXRDb21wb25lbnRLZXkoY2hpbGRyZW4sIDApIDogbmFtZVNvRmFyKTtcblx0ICAgIHJldHVybiAxO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNoaWxkO1xuXHQgIHZhciBuZXh0TmFtZTtcblx0ICB2YXIgc3VidHJlZUNvdW50ID0gMDsgLy8gQ291bnQgb2YgY2hpbGRyZW4gZm91bmQgaW4gdGhlIGN1cnJlbnQgc3VidHJlZS5cblx0ICB2YXIgbmV4dE5hbWVQcmVmaXggPSBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SIDogbmFtZVNvRmFyICsgU1VCU0VQQVJBVE9SO1xuXHRcblx0ICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIGdldENvbXBvbmVudEtleShjaGlsZCwgaSk7XG5cdCAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4oY2hpbGRyZW4pO1xuXHQgICAgaWYgKGl0ZXJhdG9yRm4pIHtcblx0ICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKGNoaWxkcmVuKTtcblx0ICAgICAgdmFyIHN0ZXA7XG5cdCAgICAgIGlmIChpdGVyYXRvckZuICE9PSBjaGlsZHJlbi5lbnRyaWVzKSB7XG5cdCAgICAgICAgdmFyIGlpID0gMDtcblx0ICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgICBjaGlsZCA9IHN0ZXAudmFsdWU7XG5cdCAgICAgICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCBpaSsrKTtcblx0ICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgICAgIHZhciBtYXBzQXNDaGlsZHJlbkFkZGVuZHVtID0gJyc7XG5cdCAgICAgICAgICBpZiAoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuXHQgICAgICAgICAgICB2YXIgbWFwc0FzQ2hpbGRyZW5Pd25lck5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcblx0ICAgICAgICAgICAgaWYgKG1hcHNBc0NoaWxkcmVuT3duZXJOYW1lKSB7XG5cdCAgICAgICAgICAgICAgbWFwc0FzQ2hpbGRyZW5BZGRlbmR1bSA9ICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBtYXBzQXNDaGlsZHJlbk93bmVyTmFtZSArICdgLic7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRpZFdhcm5BYm91dE1hcHMsICdVc2luZyBNYXBzIGFzIGNoaWxkcmVuIGlzIG5vdCB5ZXQgZnVsbHkgc3VwcG9ydGVkLiBJdCBpcyBhbiAnICsgJ2V4cGVyaW1lbnRhbCBmZWF0dXJlIHRoYXQgbWlnaHQgYmUgcmVtb3ZlZC4gQ29udmVydCBpdCB0byBhICcgKyAnc2VxdWVuY2UgLyBpdGVyYWJsZSBvZiBrZXllZCBSZWFjdEVsZW1lbnRzIGluc3RlYWQuJXMnLCBtYXBzQXNDaGlsZHJlbkFkZGVuZHVtKSA6IHZvaWQgMDtcblx0ICAgICAgICAgIGRpZFdhcm5BYm91dE1hcHMgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cblx0ICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG5cdCAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuXHQgICAgICAgICAgaWYgKGVudHJ5KSB7XG5cdCAgICAgICAgICAgIGNoaWxkID0gZW50cnlbMV07XG5cdCAgICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBLZXlFc2NhcGVVdGlscy5lc2NhcGUoZW50cnlbMF0pICsgU1VCU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCAwKTtcblx0ICAgICAgICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHZhciBhZGRlbmR1bSA9ICcnO1xuXHQgICAgICBpZiAoZmFsc2UpIHtcblx0ICAgICAgICBhZGRlbmR1bSA9ICcgSWYgeW91IG1lYW50IHRvIHJlbmRlciBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4sIHVzZSBhbiBhcnJheSAnICsgJ2luc3RlYWQgb3Igd3JhcCB0aGUgb2JqZWN0IHVzaW5nIGNyZWF0ZUZyYWdtZW50KG9iamVjdCkgZnJvbSB0aGUgJyArICdSZWFjdCBhZGQtb25zLic7XG5cdCAgICAgICAgaWYgKGNoaWxkcmVuLl9pc1JlYWN0RWxlbWVudCkge1xuXHQgICAgICAgICAgYWRkZW5kdW0gPSAnIEl0IGxvb2tzIGxpa2UgeW91XFwncmUgdXNpbmcgYW4gZWxlbWVudCBjcmVhdGVkIGJ5IGEgZGlmZmVyZW50ICcgKyAndmVyc2lvbiBvZiBSZWFjdC4gTWFrZSBzdXJlIHRvIHVzZSBvbmx5IG9uZSBjb3B5IG9mIFJlYWN0Lic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG5cdCAgICAgICAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuXHQgICAgICAgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgICAgICAgYWRkZW5kdW0gKz0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YXIgY2hpbGRyZW5TdHJpbmcgPSBTdHJpbmcoY2hpbGRyZW4pO1xuXHQgICAgICAgdHJ1ZSA/ICBmYWxzZSA/IGludmFyaWFudChmYWxzZSwgJ09iamVjdHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkIChmb3VuZDogJXMpLiVzJywgY2hpbGRyZW5TdHJpbmcgPT09ICdbb2JqZWN0IE9iamVjdF0nID8gJ29iamVjdCB3aXRoIGtleXMgeycgKyBPYmplY3Qua2V5cyhjaGlsZHJlbikuam9pbignLCAnKSArICd9JyA6IGNoaWxkcmVuU3RyaW5nLCBhZGRlbmR1bSkgOiBfcHJvZEludmFyaWFudCgnMzEnLCBjaGlsZHJlblN0cmluZyA9PT0gJ1tvYmplY3QgT2JqZWN0XScgPyAnb2JqZWN0IHdpdGgga2V5cyB7JyArIE9iamVjdC5rZXlzKGNoaWxkcmVuKS5qb2luKCcsICcpICsgJ30nIDogY2hpbGRyZW5TdHJpbmcsIGFkZGVuZHVtKSA6IHZvaWQgMDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBzdWJ0cmVlQ291bnQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmF2ZXJzZXMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLCBidXRcblx0ICogbWlnaHQgYWxzbyBiZSBzcGVjaWZpZWQgdGhyb3VnaCBhdHRyaWJ1dGVzOlxuXHQgKlxuXHQgKiAtIGB0cmF2ZXJzZUFsbENoaWxkcmVuKHRoaXMucHJvcHMuY2hpbGRyZW4sIC4uLilgXG5cdCAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5sZWZ0UGFuZWxDaGlsZHJlbiwgLi4uKWBcblx0ICpcblx0ICogVGhlIGB0cmF2ZXJzZUNvbnRleHRgIGlzIGFuIG9wdGlvbmFsIGFyZ3VtZW50IHRoYXQgaXMgcGFzc2VkIHRocm91Z2ggdGhlXG5cdCAqIGVudGlyZSB0cmF2ZXJzYWwuIEl0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIGFjY3VtdWxhdGlvbnMgb3IgYW55dGhpbmcgZWxzZSB0aGF0XG5cdCAqIHRoZSBjYWxsYmFjayBtaWdodCBmaW5kIHJlbGV2YW50LlxuXHQgKlxuXHQgKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIG9iamVjdC5cblx0ICogQHBhcmFtIHshZnVuY3Rpb259IGNhbGxiYWNrIFRvIGludm9rZSB1cG9uIHRyYXZlcnNpbmcgZWFjaCBjaGlsZC5cblx0ICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgZm9yIHRyYXZlcnNhbC5cblx0ICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KSB7XG5cdCAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcblx0ICAgIHJldHVybiAwO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCAnJywgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdHJhdmVyc2VBbGxDaGlsZHJlbjtcblxuLyoqKi8gfSxcbi8qIDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQoZnVuY3Rpb24od2luZG93KSB7XG5cdCAgICB2YXIgcmUgPSB7XG5cdCAgICAgICAgbm90X3N0cmluZzogL1tec10vLFxuXHQgICAgICAgIG51bWJlcjogL1tkaWVmZ10vLFxuXHQgICAgICAgIGpzb246IC9bal0vLFxuXHQgICAgICAgIG5vdF9qc29uOiAvW15qXS8sXG5cdCAgICAgICAgdGV4dDogL15bXlxceDI1XSsvLFxuXHQgICAgICAgIG1vZHVsbzogL15cXHgyNXsyfS8sXG5cdCAgICAgICAgcGxhY2Vob2xkZXI6IC9eXFx4MjUoPzooWzEtOV1cXGQqKVxcJHxcXCgoW15cXCldKylcXCkpPyhcXCspPygwfCdbXiRdKT8oLSk/KFxcZCspPyg/OlxcLihcXGQrKSk/KFtiLWdpam9zdXhYXSkvLFxuXHQgICAgICAgIGtleTogL14oW2Etel9dW2Etel9cXGRdKikvaSxcblx0ICAgICAgICBrZXlfYWNjZXNzOiAvXlxcLihbYS16X11bYS16X1xcZF0qKS9pLFxuXHQgICAgICAgIGluZGV4X2FjY2VzczogL15cXFsoXFxkKylcXF0vLFxuXHQgICAgICAgIHNpZ246IC9eW1xcK1xcLV0vXG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gc3ByaW50ZigpIHtcblx0ICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdLCBjYWNoZSA9IHNwcmludGYuY2FjaGVcblx0ICAgICAgICBpZiAoIShjYWNoZVtrZXldICYmIGNhY2hlLmhhc093blByb3BlcnR5KGtleSkpKSB7XG5cdCAgICAgICAgICAgIGNhY2hlW2tleV0gPSBzcHJpbnRmLnBhcnNlKGtleSlcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHNwcmludGYuZm9ybWF0LmNhbGwobnVsbCwgY2FjaGVba2V5XSwgYXJndW1lbnRzKVxuXHQgICAgfVxuXHRcblx0ICAgIHNwcmludGYuZm9ybWF0ID0gZnVuY3Rpb24ocGFyc2VfdHJlZSwgYXJndikge1xuXHQgICAgICAgIHZhciBjdXJzb3IgPSAxLCB0cmVlX2xlbmd0aCA9IHBhcnNlX3RyZWUubGVuZ3RoLCBub2RlX3R5cGUgPSBcIlwiLCBhcmcsIG91dHB1dCA9IFtdLCBpLCBrLCBtYXRjaCwgcGFkLCBwYWRfY2hhcmFjdGVyLCBwYWRfbGVuZ3RoLCBpc19wb3NpdGl2ZSA9IHRydWUsIHNpZ24gPSBcIlwiXG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyZWVfbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgbm9kZV90eXBlID0gZ2V0X3R5cGUocGFyc2VfdHJlZVtpXSlcblx0ICAgICAgICAgICAgaWYgKG5vZGVfdHlwZSA9PT0gXCJzdHJpbmdcIikge1xuXHQgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gcGFyc2VfdHJlZVtpXVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKG5vZGVfdHlwZSA9PT0gXCJhcnJheVwiKSB7XG5cdCAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcnNlX3RyZWVbaV0gLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuXHQgICAgICAgICAgICAgICAgaWYgKG1hdGNoWzJdKSB7IC8vIGtleXdvcmQgYXJndW1lbnRcblx0ICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W2N1cnNvcl1cblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbWF0Y2hbMl0ubGVuZ3RoOyBrKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmcuaGFzT3duUHJvcGVydHkobWF0Y2hbMl1ba10pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3ByaW50ZihcIltzcHJpbnRmXSBwcm9wZXJ0eSAnJXMnIGRvZXMgbm90IGV4aXN0XCIsIG1hdGNoWzJdW2tdKSlcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmdbbWF0Y2hbMl1ba11dXG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hbMV0pIHsgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoZXhwbGljaXQpXG5cdCAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndlttYXRjaFsxXV1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBwb3NpdGlvbmFsIGFyZ3VtZW50IChpbXBsaWNpdClcblx0ICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W2N1cnNvcisrXVxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChnZXRfdHlwZShhcmcpID09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZygpXG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKHJlLm5vdF9zdHJpbmcudGVzdChtYXRjaFs4XSkgJiYgcmUubm90X2pzb24udGVzdChtYXRjaFs4XSkgJiYgKGdldF90eXBlKGFyZykgIT0gXCJudW1iZXJcIiAmJiBpc05hTihhcmcpKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3Ioc3ByaW50ZihcIltzcHJpbnRmXSBleHBlY3RpbmcgbnVtYmVyIGJ1dCBmb3VuZCAlc1wiLCBnZXRfdHlwZShhcmcpKSlcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QobWF0Y2hbOF0pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXNfcG9zaXRpdmUgPSBhcmcgPj0gMFxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hbOF0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYlwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMilcblx0ICAgICAgICAgICAgICAgICAgICBicmVha1xuXHQgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjXCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYXJnKVxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRcIjpcblx0ICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaVwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwYXJzZUludChhcmcsIDEwKVxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgICAgICAgICAgICAgY2FzZSBcImpcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gSlNPTi5zdHJpbmdpZnkoYXJnLCBudWxsLCBtYXRjaFs2XSA/IHBhcnNlSW50KG1hdGNoWzZdKSA6IDApXG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWtcblx0ICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZVwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaFs3XSA/IGFyZy50b0V4cG9uZW50aWFsKG1hdGNoWzddKSA6IGFyZy50b0V4cG9uZW50aWFsKClcblx0ICAgICAgICAgICAgICAgICAgICBicmVha1xuXHQgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmXCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gcGFyc2VGbG9hdChhcmcpLnRvRml4ZWQobWF0Y2hbN10pIDogcGFyc2VGbG9hdChhcmcpXG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWtcblx0ICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ1wiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaFs3XSA/IHBhcnNlRmxvYXQoYXJnKS50b1ByZWNpc2lvbihtYXRjaFs3XSkgOiBwYXJzZUZsb2F0KGFyZylcblx0ICAgICAgICAgICAgICAgICAgICBicmVha1xuXHQgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvXCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZyg4KVxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gKChhcmcgPSBTdHJpbmcoYXJnKSkgJiYgbWF0Y2hbN10gPyBhcmcuc3Vic3RyaW5nKDAsIG1hdGNoWzddKSA6IGFyZylcblx0ICAgICAgICAgICAgICAgICAgICBicmVha1xuXHQgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1XCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZyA+Pj4gMFxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgICAgICAgICAgICAgY2FzZSBcInhcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDE2KVxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlhcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChyZS5qc29uLnRlc3QobWF0Y2hbOF0pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gYXJnXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QobWF0Y2hbOF0pICYmICghaXNfcG9zaXRpdmUgfHwgbWF0Y2hbM10pKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSBpc19wb3NpdGl2ZSA/IFwiK1wiIDogXCItXCJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKCkucmVwbGFjZShyZS5zaWduLCBcIlwiKVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc2lnbiA9IFwiXCJcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcGFkX2NoYXJhY3RlciA9IG1hdGNoWzRdID8gbWF0Y2hbNF0gPT09IFwiMFwiID8gXCIwXCIgOiBtYXRjaFs0XS5jaGFyQXQoMSkgOiBcIiBcIlxuXHQgICAgICAgICAgICAgICAgICAgIHBhZF9sZW5ndGggPSBtYXRjaFs2XSAtIChzaWduICsgYXJnKS5sZW5ndGhcblx0ICAgICAgICAgICAgICAgICAgICBwYWQgPSBtYXRjaFs2XSA/IChwYWRfbGVuZ3RoID4gMCA/IHN0cl9yZXBlYXQocGFkX2NoYXJhY3RlciwgcGFkX2xlbmd0aCkgOiBcIlwiKSA6IFwiXCJcblx0ICAgICAgICAgICAgICAgICAgICBvdXRwdXRbb3V0cHV0Lmxlbmd0aF0gPSBtYXRjaFs1XSA/IHNpZ24gKyBhcmcgKyBwYWQgOiAocGFkX2NoYXJhY3RlciA9PT0gXCIwXCIgPyBzaWduICsgcGFkICsgYXJnIDogcGFkICsgc2lnbiArIGFyZylcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oXCJcIilcblx0ICAgIH1cblx0XG5cdCAgICBzcHJpbnRmLmNhY2hlID0ge31cblx0XG5cdCAgICBzcHJpbnRmLnBhcnNlID0gZnVuY3Rpb24oZm10KSB7XG5cdCAgICAgICAgdmFyIF9mbXQgPSBmbXQsIG1hdGNoID0gW10sIHBhcnNlX3RyZWUgPSBbXSwgYXJnX25hbWVzID0gMFxuXHQgICAgICAgIHdoaWxlIChfZm10KSB7XG5cdCAgICAgICAgICAgIGlmICgobWF0Y2ggPSByZS50ZXh0LmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IG1hdGNoWzBdXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAoKG1hdGNoID0gcmUubW9kdWxvLmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IFwiJVwiXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAoKG1hdGNoID0gcmUucGxhY2Vob2xkZXIuZXhlYyhfZm10KSkgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAxXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkX2xpc3QgPSBbXSwgcmVwbGFjZW1lbnRfZmllbGQgPSBtYXRjaFsyXSwgZmllbGRfbWF0Y2ggPSBbXVxuXHQgICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXkuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChyZXBsYWNlbWVudF9maWVsZCA9IHJlcGxhY2VtZW50X2ZpZWxkLnN1YnN0cmluZyhmaWVsZF9tYXRjaFswXS5sZW5ndGgpKSAhPT0gXCJcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmtleV9hY2Nlc3MuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdFtmaWVsZF9saXN0Lmxlbmd0aF0gPSBmaWVsZF9tYXRjaFsxXVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKGZpZWxkX21hdGNoID0gcmUuaW5kZXhfYWNjZXNzLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSBmYWlsZWQgdG8gcGFyc2UgbmFtZWQgYXJndW1lbnQga2V5XCIpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSBmYWlsZWQgdG8gcGFyc2UgbmFtZWQgYXJndW1lbnQga2V5XCIpXG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIG1hdGNoWzJdID0gZmllbGRfbGlzdFxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYXJnX25hbWVzIHw9IDJcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChhcmdfbmFtZXMgPT09IDMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbc3ByaW50Zl0gbWl4aW5nIHBvc2l0aW9uYWwgYW5kIG5hbWVkIHBsYWNlaG9sZGVycyBpcyBub3QgKHlldCkgc3VwcG9ydGVkXCIpXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IG1hdGNoXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJbc3ByaW50Zl0gdW5leHBlY3RlZCBwbGFjZWhvbGRlclwiKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIF9mbXQgPSBfZm10LnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBwYXJzZV90cmVlXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHZzcHJpbnRmID0gZnVuY3Rpb24oZm10LCBhcmd2LCBfYXJndikge1xuXHQgICAgICAgIF9hcmd2ID0gKGFyZ3YgfHwgW10pLnNsaWNlKDApXG5cdCAgICAgICAgX2FyZ3Yuc3BsaWNlKDAsIDAsIGZtdClcblx0ICAgICAgICByZXR1cm4gc3ByaW50Zi5hcHBseShudWxsLCBfYXJndilcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIGhlbHBlcnNcblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gZ2V0X3R5cGUodmFyaWFibGUpIHtcblx0ICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHN0cl9yZXBlYXQoaW5wdXQsIG11bHRpcGxpZXIpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkobXVsdGlwbGllciArIDEpLmpvaW4oaW5wdXQpXG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBleHBvcnQgdG8gZWl0aGVyIGJyb3dzZXIgb3Igbm9kZS5qc1xuXHQgICAgICovXG5cdCAgICBpZiAodHJ1ZSkge1xuXHQgICAgICAgIGV4cG9ydHMuc3ByaW50ZiA9IHNwcmludGZcblx0ICAgICAgICBleHBvcnRzLnZzcHJpbnRmID0gdnNwcmludGZcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHdpbmRvdy5zcHJpbnRmID0gc3ByaW50ZlxuXHQgICAgICAgIHdpbmRvdy52c3ByaW50ZiA9IHZzcHJpbnRmXG5cdFxuXHQgICAgICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuXHQgICAgICAgICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgICAgIHNwcmludGY6IHNwcmludGYsXG5cdCAgICAgICAgICAgICAgICAgICAgdnNwcmludGY6IHZzcHJpbnRmXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pXG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9KSh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IHdpbmRvdyk7XG5cblxuLyoqKi8gfSxcbi8qIDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcblx0ICAgICAgY29uc3RydWN0b3I6IHtcblx0ICAgICAgICB2YWx1ZTogY3Rvcixcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cblx0ICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcblx0ICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcblx0ICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcblx0ICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG5cdCAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcblx0ICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogcmVhY3QtYXBwLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCAxMjFlOGFjZTUzMzVhNzJjMTJjYVxuICoqLyIsImltcG9ydCBkaXJlY3RpdmVzIGZyb20gJy4vYW5ndWxhci1kaXJlY3RpdmVzJztcclxuaW1wb3J0IHRyYW5zbGF0aW9ucyBmcm9tICcuL3RyYW5zbGF0aW9ucyc7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3QvYXBwLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL1JlYWN0Jyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9yZWFjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV4dGVuZCAgPSByZXF1aXJlKCdleHRlbmQnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgndXRpbCcpLmlzQXJyYXk7XG52YXIgaXNEYXRlICA9IHJlcXVpcmUoJ3V0aWwnKS5pc0RhdGU7XG52YXIgc3ByaW50ZiA9IHJlcXVpcmUoXCJzcHJpbnRmLWpzXCIpLnNwcmludGY7XG52YXIgZXZlbnRzICA9IHJlcXVpcmUoJ2V2ZW50cycpO1xudmFyIGV4Y2VwdCAgPSByZXF1aXJlKCdleGNlcHQnKTtcblxudmFyIHN0cmZ0aW1lID0gcmVxdWlyZSgnLi9zdHJmdGltZScpO1xuXG52YXIgdHJhbnNsYXRpb25TY29wZSA9ICdjb3VudGVycGFydCc7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWwpIHtcbiAgLy9EZWFsIHdpdGggb2xkZXIgYnJvd3NlcnMgKElFOCkgdGhhdCBkb24ndCByZXR1cm4gW29iamVjdCBOdWxsXSBpbiB0aGlzIGNhc2UuXG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuZnVuY3Rpb24gaXNTeW1ib2woa2V5KSB7XG4gIHJldHVybiBpc1N0cmluZyhrZXkpICYmIGtleVswXSA9PT0gJzonO1xufVxuXG5mdW5jdGlvbiBoYXNPd25Qcm9wKG9iaiwga2V5KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG5mdW5jdGlvbiBnZXRFbnRyeSh0cmFuc2xhdGlvbnMsIGtleXMpIHtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwga2V5KSB7XG4gICAgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0KSAmJiBoYXNPd25Qcm9wKHJlc3VsdCwga2V5KSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHRyYW5zbGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIENvdW50ZXJwYXJ0KCkge1xuICB0aGlzLl9yZWdpc3RyeSA9IHtcbiAgICBsb2NhbGU6ICdlbicsXG4gICAgaW50ZXJwb2xhdGU6IHRydWUsXG4gICAgZmFsbGJhY2tMb2NhbGU6IG51bGwsXG4gICAgc2NvcGU6IG51bGwsXG4gICAgdHJhbnNsYXRpb25zOiB7fSxcbiAgICBpbnRlcnBvbGF0aW9uczoge30sXG4gICAgbm9ybWFsaXplZEtleXM6IHt9LFxuICAgIHNlcGFyYXRvcjogJy4nLFxuICAgIGtlZXBUcmFpbGluZ0RvdDogZmFsc2UsXG4gICAga2V5VHJhbnNmb3JtZXI6IGZ1bmN0aW9uKGtleSkgeyByZXR1cm4ga2V5OyB9XG4gIH07XG5cbiAgdGhpcy5yZWdpc3RlclRyYW5zbGF0aW9ucygnZW4nLCByZXF1aXJlKCcuL2xvY2FsZXMvZW4nKSk7XG4gIHRoaXMuc2V0TWF4TGlzdGVuZXJzKDApO1xufVxuXG5leHRlbmQoQ291bnRlcnBhcnQucHJvdG90eXBlLCBldmVudHMuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5nZXRMb2NhbGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX3JlZ2lzdHJ5LmxvY2FsZTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5zZXRMb2NhbGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgcHJldmlvdXMgPSB0aGlzLl9yZWdpc3RyeS5sb2NhbGU7XG5cbiAgaWYgKHByZXZpb3VzICE9IHZhbHVlKSB7XG4gICAgdGhpcy5fcmVnaXN0cnkubG9jYWxlID0gdmFsdWU7XG4gICAgdGhpcy5lbWl0KCdsb2NhbGVjaGFuZ2UnLCB2YWx1ZSwgcHJldmlvdXMpO1xuICB9XG5cbiAgcmV0dXJuIHByZXZpb3VzO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLmdldEZhbGxiYWNrTG9jYWxlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9yZWdpc3RyeS5mYWxsYmFja0xvY2FsZTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5zZXRGYWxsYmFja0xvY2FsZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBwcmV2aW91cyA9IHRoaXMuX3JlZ2lzdHJ5LmZhbGxiYWNrTG9jYWxlO1xuICB0aGlzLl9yZWdpc3RyeS5mYWxsYmFja0xvY2FsZSA9IHZhbHVlO1xuICByZXR1cm4gcHJldmlvdXM7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUuZ2V0QXZhaWxhYmxlTG9jYWxlcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fcmVnaXN0cnkuYXZhaWxhYmxlTG9jYWxlcyB8fCBPYmplY3Qua2V5cyh0aGlzLl9yZWdpc3RyeS50cmFuc2xhdGlvbnMpO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLnNldEF2YWlsYWJsZUxvY2FsZXMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgcHJldmlvdXMgPSB0aGlzLmdldEF2YWlsYWJsZUxvY2FsZXMoKTtcbiAgdGhpcy5fcmVnaXN0cnkuYXZhaWxhYmxlTG9jYWxlcyA9IHZhbHVlO1xuICByZXR1cm4gcHJldmlvdXM7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUuZ2V0U2VwYXJhdG9yID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9yZWdpc3RyeS5zZXBhcmF0b3I7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUuc2V0U2VwYXJhdG9yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIHByZXZpb3VzID0gdGhpcy5fcmVnaXN0cnkuc2VwYXJhdG9yO1xuICB0aGlzLl9yZWdpc3RyeS5zZXBhcmF0b3IgPSB2YWx1ZTtcbiAgcmV0dXJuIHByZXZpb3VzO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLnNldEludGVycG9sYXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIHByZXZpb3VzID0gdGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGU7XG4gIHRoaXMuX3JlZ2lzdHJ5LmludGVycG9sYXRlID0gdmFsdWU7XG4gIHJldHVybiBwcmV2aW91cztcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5nZXRJbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGU7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUuc2V0S2V5VHJhbnNmb3JtZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgcHJldmlvdXMgPSB0aGlzLl9yZWdpc3RyeS5rZXlUcmFuc2Zvcm1lcjtcbiAgdGhpcy5fcmVnaXN0cnkua2V5VHJhbnNmb3JtZXIgPSB2YWx1ZTtcbiAgcmV0dXJuIHByZXZpb3VzO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLmdldEtleVRyYW5zZm9ybWVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9yZWdpc3RyeS5rZXlUcmFuc2Zvcm1lcjtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5yZWdpc3RlclRyYW5zbGF0aW9ucyA9IGZ1bmN0aW9uKGxvY2FsZSwgZGF0YSkge1xuICB2YXIgdHJhbnNsYXRpb25zID0ge307XG4gIHRyYW5zbGF0aW9uc1tsb2NhbGVdID0gZGF0YTtcbiAgZXh0ZW5kKHRydWUsIHRoaXMuX3JlZ2lzdHJ5LnRyYW5zbGF0aW9ucywgdHJhbnNsYXRpb25zKTtcbiAgcmV0dXJuIHRyYW5zbGF0aW9ucztcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5yZWdpc3RlckludGVycG9sYXRpb25zID0gZnVuY3Rpb24oZGF0YSkge1xuICByZXR1cm4gZXh0ZW5kKHRydWUsIHRoaXMuX3JlZ2lzdHJ5LmludGVycG9sYXRpb25zLCBkYXRhKTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5vbkxvY2FsZUNoYW5nZSA9XG5Db3VudGVycGFydC5wcm90b3R5cGUuYWRkTG9jYWxlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB0aGlzLmFkZExpc3RlbmVyKCdsb2NhbGVjaGFuZ2UnLCBjYWxsYmFjayk7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUub2ZmTG9jYWxlQ2hhbmdlID1cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5yZW1vdmVMb2NhbGVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2xvY2FsZWNoYW5nZScsIGNhbGxiYWNrKTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5vblRyYW5zbGF0aW9uTm90Rm91bmQgPVxuQ291bnRlcnBhcnQucHJvdG90eXBlLmFkZFRyYW5zbGF0aW9uTm90Rm91bmRMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHRoaXMuYWRkTGlzdGVuZXIoJ3RyYW5zbGF0aW9ubm90Zm91bmQnLCBjYWxsYmFjayk7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUub2ZmVHJhbnNsYXRpb25Ob3RGb3VuZCA9XG5Db3VudGVycGFydC5wcm90b3R5cGUucmVtb3ZlVHJhbnNsYXRpb25Ob3RGb3VuZExpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcigndHJhbnNsYXRpb25ub3Rmb3VuZCcsIGNhbGxiYWNrKTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbihrZXksIG9wdGlvbnMpIHtcbiAgaWYgKCFpc0FycmF5KGtleSkgJiYgIWlzU3RyaW5nKGtleSkgfHwgIWtleS5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnQ6IGtleScpO1xuICB9XG5cbiAgaWYgKGlzU3ltYm9sKGtleSkpIHtcbiAgICBrZXkgPSBrZXkuc3Vic3RyKDEpO1xuICB9XG5cbiAga2V5ID0gdGhpcy5fcmVnaXN0cnkua2V5VHJhbnNmb3JtZXIoa2V5LCBvcHRpb25zKTtcblxuICBvcHRpb25zID0gZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcblxuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgdGhpcy5fcmVnaXN0cnkubG9jYWxlO1xuICBkZWxldGUgb3B0aW9ucy5sb2NhbGU7XG5cbiAgdmFyIHNjb3BlID0gb3B0aW9ucy5zY29wZSB8fCB0aGlzLl9yZWdpc3RyeS5zY29wZTtcbiAgZGVsZXRlIG9wdGlvbnMuc2NvcGU7XG5cbiAgdmFyIHNlcGFyYXRvciA9IG9wdGlvbnMuc2VwYXJhdG9yIHx8IHRoaXMuX3JlZ2lzdHJ5LnNlcGFyYXRvcjtcbiAgZGVsZXRlIG9wdGlvbnMuc2VwYXJhdG9yO1xuXG4gIHZhciBmYWxsYmFja0xvY2FsZSA9IG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUgfHwgdGhpcy5fcmVnaXN0cnkuZmFsbGJhY2tMb2NhbGU7XG4gIGRlbGV0ZSBvcHRpb25zLmZhbGxiYWNrTG9jYWxlO1xuXG4gIHZhciBrZXlzID0gdGhpcy5fbm9ybWFsaXplS2V5cyhsb2NhbGUsIHNjb3BlLCBrZXksIHNlcGFyYXRvcik7XG5cbiAgdmFyIGVudHJ5ID0gZ2V0RW50cnkodGhpcy5fcmVnaXN0cnkudHJhbnNsYXRpb25zLCBrZXlzKTtcblxuICBpZiAoZW50cnkgPT09IG51bGwgJiYgb3B0aW9ucy5mYWxsYmFjaykge1xuICAgIHRoaXMuZW1pdCgndHJhbnNsYXRpb25ub3Rmb3VuZCcsIGxvY2FsZSwga2V5LCBvcHRpb25zLmZhbGxiYWNrKTtcbiAgICBlbnRyeSA9IHRoaXMuX2ZhbGxiYWNrKGxvY2FsZSwgc2NvcGUsIGtleSwgb3B0aW9ucy5mYWxsYmFjaywgb3B0aW9ucyk7XG4gIH1cblxuICBpZiAoZW50cnkgPT09IG51bGwgJiYgZmFsbGJhY2tMb2NhbGUgJiYgbG9jYWxlICE9PSBmYWxsYmFja0xvY2FsZSkge1xuICAgIHZhciBmYWxsYmFja0tleXMgPSB0aGlzLl9ub3JtYWxpemVLZXlzKGZhbGxiYWNrTG9jYWxlLCBzY29wZSwga2V5LCBzZXBhcmF0b3IpO1xuICAgIGVudHJ5ID0gZ2V0RW50cnkodGhpcy5fcmVnaXN0cnkudHJhbnNsYXRpb25zLCBmYWxsYmFja0tleXMpO1xuXG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICBsb2NhbGUgPSBmYWxsYmFja0xvY2FsZTtcbiAgICB9XG4gIH1cblxuICBpZiAoZW50cnkgPT09IG51bGwpIHtcbiAgICBlbnRyeSA9ICdtaXNzaW5nIHRyYW5zbGF0aW9uOiAnICsga2V5cy5qb2luKHNlcGFyYXRvcik7XG4gIH1cblxuICBlbnRyeSA9IHRoaXMuX3BsdXJhbGl6ZShsb2NhbGUsIGVudHJ5LCBvcHRpb25zLmNvdW50KTtcblxuICBpZiAodGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGUgIT09IGZhbHNlICYmIG9wdGlvbnMuaW50ZXJwb2xhdGUgIT09IGZhbHNlKSB7XG4gICAgZW50cnkgPSB0aGlzLl9pbnRlcnBvbGF0ZShlbnRyeSwgb3B0aW9ucyk7XG4gIH1cblxuICByZXR1cm4gZW50cnk7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUubG9jYWxpemUgPSBmdW5jdGlvbihvYmplY3QsIG9wdGlvbnMpIHtcbiAgaWYgKCFpc0RhdGUob2JqZWN0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudDogb2JqZWN0IG11c3QgYmUgYSBkYXRlJyk7XG4gIH1cblxuICBvcHRpb25zID0gZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcblxuICB2YXIgbG9jYWxlICA9IG9wdGlvbnMubG9jYWxlICB8fCB0aGlzLl9yZWdpc3RyeS5sb2NhbGU7XG4gIHZhciBzY29wZSAgID0gb3B0aW9ucy5zY29wZSAgIHx8IHRyYW5zbGF0aW9uU2NvcGU7XG4gIHZhciB0eXBlICAgID0gb3B0aW9ucy50eXBlICAgIHx8ICdkYXRldGltZSc7XG4gIHZhciBmb3JtYXQgID0gb3B0aW9ucy5mb3JtYXQgIHx8ICdkZWZhdWx0JztcblxuICBvcHRpb25zID0geyBsb2NhbGU6IGxvY2FsZSwgc2NvcGU6IHNjb3BlLCBpbnRlcnBvbGF0ZTogZmFsc2UgfTtcbiAgZm9ybWF0ICA9IHRoaXMudHJhbnNsYXRlKFsnZm9ybWF0cycsIHR5cGUsIGZvcm1hdF0sIGV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucykpO1xuXG4gIHJldHVybiBzdHJmdGltZShvYmplY3QsIGZvcm1hdCwgdGhpcy50cmFuc2xhdGUoJ25hbWVzJywgb3B0aW9ucykpO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLl9wbHVyYWxpemUgPSBmdW5jdGlvbihsb2NhbGUsIGVudHJ5LCBjb3VudCkge1xuICBpZiAodHlwZW9mIGVudHJ5ICE9PSAnb2JqZWN0JyB8fCBlbnRyeSA9PT0gbnVsbCB8fCB0eXBlb2YgY291bnQgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgdmFyIHBsdXJhbGl6ZUZ1bmMgPSB0aGlzLnRyYW5zbGF0ZSgncGx1cmFsaXplJywgeyBsb2NhbGU6IGxvY2FsZSwgc2NvcGU6IHRyYW5zbGF0aW9uU2NvcGUgfSk7XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwbHVyYWxpemVGdW5jKSAhPT0gJ1tvYmplY3QgRnVuY3Rpb25dJykge1xuICAgIHJldHVybiBwbHVyYWxpemVGdW5jO1xuICB9XG5cbiAgcmV0dXJuIHBsdXJhbGl6ZUZ1bmMoZW50cnksIGNvdW50KTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS53aXRoTG9jYWxlID0gZnVuY3Rpb24obG9jYWxlLCBjYWxsYmFjaywgY29udGV4dCkge1xuICB2YXIgcHJldmlvdXMgPSB0aGlzLl9yZWdpc3RyeS5sb2NhbGU7XG4gIHRoaXMuX3JlZ2lzdHJ5LmxvY2FsZSA9IGxvY2FsZTtcbiAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gIHRoaXMuX3JlZ2lzdHJ5LmxvY2FsZSA9IHByZXZpb3VzO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLndpdGhTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBjYWxsYmFjaywgY29udGV4dCkge1xuICB2YXIgcHJldmlvdXMgPSB0aGlzLl9yZWdpc3RyeS5zY29wZTtcbiAgdGhpcy5fcmVnaXN0cnkuc2NvcGUgPSBzY29wZTtcbiAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gIHRoaXMuX3JlZ2lzdHJ5LnNjb3BlID0gcHJldmlvdXM7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5Db3VudGVycGFydC5wcm90b3R5cGUud2l0aFNlcGFyYXRvciA9IGZ1bmN0aW9uKHNlcGFyYXRvciwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgdmFyIHByZXZpb3VzID0gdGhpcy5zZXRTZXBhcmF0b3Ioc2VwYXJhdG9yKTtcbiAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gIHRoaXMuc2V0U2VwYXJhdG9yKHByZXZpb3VzKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5fbm9ybWFsaXplS2V5cyA9IGZ1bmN0aW9uKGxvY2FsZSwgc2NvcGUsIGtleSwgc2VwYXJhdG9yKSB7XG4gIHZhciBrZXlzID0gW107XG5cbiAga2V5cyA9IGtleXMuY29uY2F0KHRoaXMuX25vcm1hbGl6ZUtleShsb2NhbGUsIHNlcGFyYXRvcikpO1xuICBrZXlzID0ga2V5cy5jb25jYXQodGhpcy5fbm9ybWFsaXplS2V5KHNjb3BlLCBzZXBhcmF0b3IpKTtcbiAga2V5cyA9IGtleXMuY29uY2F0KHRoaXMuX25vcm1hbGl6ZUtleShrZXksIHNlcGFyYXRvcikpO1xuXG4gIHJldHVybiBrZXlzO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLl9ub3JtYWxpemVLZXkgPSBmdW5jdGlvbihrZXksIHNlcGFyYXRvcikge1xuICB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdID0gdGhpcy5fcmVnaXN0cnkubm9ybWFsaXplZEtleXNbc2VwYXJhdG9yXSB8fCB7fTtcblxuICB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdW2tleV0gPSB0aGlzLl9yZWdpc3RyeS5ub3JtYWxpemVkS2V5c1tzZXBhcmF0b3JdW2tleV0gfHwgKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmIChpc0FycmF5KGtleSkpIHtcbiAgICAgIHZhciBub3JtYWxpemVkS2V5QXJyYXkgPSBrZXkubWFwKGZ1bmN0aW9uKGspIHsgcmV0dXJuIHRoaXMuX25vcm1hbGl6ZUtleShrLCBzZXBhcmF0b3IpOyB9LmJpbmQodGhpcykpO1xuXG4gICAgICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBub3JtYWxpemVkS2V5QXJyYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3VuZGVmaW5lZCcgfHwga2V5ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoc2VwYXJhdG9yKTtcblxuICAgICAgZm9yICh2YXIgaSA9IGtleXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKGtleXNbaV0gPT09ICcnKSB7XG4gICAgICAgICAga2V5cy5zcGxpY2UoaSwgMSk7XG5cbiAgICAgICAgICBpZiAodGhpcy5fcmVnaXN0cnkua2VlcFRyYWlsaW5nRG90ID09PSB0cnVlICYmIGkgPT0ga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGtleXNba2V5cy5sZW5ndGggLSAxXSArPSAnJyArIHNlcGFyYXRvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICB9LmJpbmQodGhpcykpKGtleSk7XG5cbiAgcmV0dXJuIHRoaXMuX3JlZ2lzdHJ5Lm5vcm1hbGl6ZWRLZXlzW3NlcGFyYXRvcl1ba2V5XTtcbn07XG5cbkNvdW50ZXJwYXJ0LnByb3RvdHlwZS5faW50ZXJwb2xhdGUgPSBmdW5jdGlvbihlbnRyeSwgdmFsdWVzKSB7XG4gIGlmICh0eXBlb2YgZW50cnkgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgcmV0dXJuIHNwcmludGYoZW50cnksIGV4dGVuZCh7fSwgdGhpcy5fcmVnaXN0cnkuaW50ZXJwb2xhdGlvbnMsIHZhbHVlcykpO1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLl9yZXNvbHZlID0gZnVuY3Rpb24obG9jYWxlLCBzY29wZSwgb2JqZWN0LCBzdWJqZWN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmIChvcHRpb25zLnJlc29sdmUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHN1YmplY3Q7XG4gIH1cblxuICB2YXIgcmVzdWx0O1xuXG4gIGlmIChpc1N5bWJvbChzdWJqZWN0KSkge1xuICAgIHJlc3VsdCA9IHRoaXMudHJhbnNsYXRlKHN1YmplY3QsIGV4dGVuZCh7fSwgb3B0aW9ucywgeyBsb2NhbGU6IGxvY2FsZSwgc2NvcGU6IHNjb3BlIH0pKTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHN1YmplY3QpKSB7XG4gICAgdmFyIGRhdGVPclRpbWU7XG5cbiAgICBpZiAob3B0aW9ucy5vYmplY3QpIHtcbiAgICAgIGRhdGVPclRpbWUgPSBvcHRpb25zLm9iamVjdDtcbiAgICAgIGRlbGV0ZSBvcHRpb25zLm9iamVjdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZU9yVGltZSA9IG9iamVjdDtcbiAgICB9XG5cbiAgICByZXN1bHQgPSB0aGlzLl9yZXNvbHZlKGxvY2FsZSwgc2NvcGUsIG9iamVjdCwgc3ViamVjdChkYXRlT3JUaW1lLCBvcHRpb25zKSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gc3ViamVjdDtcbiAgfVxuXG4gIHJldHVybiAvXm1pc3NpbmcgdHJhbnNsYXRpb246Ly50ZXN0KHJlc3VsdCkgPyBudWxsIDogcmVzdWx0O1xufTtcblxuQ291bnRlcnBhcnQucHJvdG90eXBlLl9mYWxsYmFjayA9IGZ1bmN0aW9uKGxvY2FsZSwgc2NvcGUsIG9iamVjdCwgc3ViamVjdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZXhjZXB0KG9wdGlvbnMsICdmYWxsYmFjaycpO1xuXG4gIGlmIChpc0FycmF5KHN1YmplY3QpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3ViamVjdC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fcmVzb2x2ZShsb2NhbGUsIHNjb3BlLCBvYmplY3QsIHN1YmplY3RbaV0sIG9wdGlvbnMpO1xuXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc29sdmUobG9jYWxlLCBzY29wZSwgb2JqZWN0LCBzdWJqZWN0LCBvcHRpb25zKTtcbiAgfVxufTtcblxudmFyIGluc3RhbmNlID0gbmV3IENvdW50ZXJwYXJ0KCk7XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZSgpIHtcbiAgcmV0dXJuIGluc3RhbmNlLnRyYW5zbGF0ZS5hcHBseShpbnN0YW5jZSwgYXJndW1lbnRzKTtcbn1cblxuZXh0ZW5kKHRyYW5zbGF0ZSwgaW5zdGFuY2UsIHtcbiAgSW5zdGFuY2U6IENvdW50ZXJwYXJ0LFxuICBUcmFuc2xhdG9yOiBDb3VudGVycGFydFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhbnNsYXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY291bnRlcnBhcnQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCAgICAgICA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgSW50ZXJwb2xhdGUgPSByZXF1aXJlKCdyZWFjdC1pbnRlcnBvbGF0ZS1jb21wb25lbnQnKTtcbnZhciB0cmFuc2xhdG9yICA9IHJlcXVpcmUoJ2NvdW50ZXJwYXJ0Jyk7XG52YXIgZXh0ZW5kICAgICAgPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBQcm9wVHlwZXMgPSBSZWFjdC5Qcm9wVHlwZXM7XG5cbnZhciB0cmFuc2xhdG9yVHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gIGdldExvY2FsZTogICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICBvbkxvY2FsZUNoYW5nZTogICBQcm9wVHlwZXMuZnVuYyxcbiAgb2ZmTG9jYWxlQ2hhbmdlOiAgUHJvcFR5cGVzLmZ1bmMsXG4gIHRyYW5zbGF0ZTogICAgICAgIFByb3BUeXBlcy5mdW5jXG59KTtcblxudmFyIGtleVR5cGUgPSBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgUHJvcFR5cGVzLnN0cmluZyxcbiAgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZylcbl0pO1xuXG52YXIgVHJhbnNsYXRlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1RyYW5zbGF0ZScsXG5cbiAgY29udGV4dFR5cGVzOiB7XG4gICAgdHJhbnNsYXRvcjogdHJhbnNsYXRvclR5cGUsXG4gICAgc2NvcGU6IGtleVR5cGVcbiAgfSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICBsb2NhbGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY291bnQ6ICBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGNvbnRlbnQ6IGtleVR5cGUsXG4gICAgc2NvcGU6IGtleVR5cGUsXG4gICAgYXR0cmlidXRlczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB3aXRoOiBQcm9wVHlwZXMub2JqZWN0XG4gIH0sXG5cbiAgc3RhdGljczoge1xuICAgIHRleHRDb250ZW50Q29tcG9uZW50czogWyd0aXRsZScsICdvcHRpb24nLCAndGV4dGFyZWEnXVxuICB9LFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgY29tcG9uZW50OiAnc3BhbicgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IGxvY2FsZTogdGhpcy5nZXRUcmFuc2xhdG9yKCkuZ2V0TG9jYWxlKCkgfTtcbiAgfSxcblxuICBnZXRUcmFuc2xhdG9yOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LnRyYW5zbGF0b3IgfHwgdHJhbnNsYXRvcjtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmxvY2FsZSkge1xuICAgICAgdGhpcy5nZXRUcmFuc2xhdG9yKCkub25Mb2NhbGVDaGFuZ2UodGhpcy5sb2NhbGVDaGFuZ2VkKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5wcm9wcy5sb2NhbGUpIHtcbiAgICAgIHRoaXMuZ2V0VHJhbnNsYXRvcigpLm9mZkxvY2FsZUNoYW5nZSh0aGlzLmxvY2FsZUNoYW5nZWQpO1xuICAgIH1cbiAgfSxcblxuICBsb2NhbGVDaGFuZ2VkOiBmdW5jdGlvbihuZXdMb2NhbGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgbG9jYWxlOiBuZXdMb2NhbGUgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvcHMgICAgICAgICAgID0gZXh0ZW5kKHt9LCB0aGlzLnByb3BzKTtcbiAgICB2YXIgdHJhbnNsYXRvciAgICAgID0gdGhpcy5nZXRUcmFuc2xhdG9yKCk7XG4gICAgdmFyIHRleHRDb250ZW50ICAgICA9IFRyYW5zbGF0ZS50ZXh0Q29udGVudENvbXBvbmVudHMuaW5kZXhPZihwcm9wcy5jb21wb25lbnQpID4gLTE7XG4gICAgdmFyIGludGVycG9sYXRlICAgICA9IHRleHRDb250ZW50IHx8IHByb3BzLnVuc2FmZSA9PT0gdHJ1ZTtcbiAgICB2YXIgaW50ZXJwb2xhdGlvbnMgID0gcHJvcHMud2l0aDtcblxuICAgIHZhciBhdHRyaWJ1dGVLZXk7XG5cbiAgICB2YXIgYXR0cmlidXRlVHJhbnNsYXRpb25PcHRpb25zID0gZXh0ZW5kKFxuICAgICAgeyBsb2NhbGU6IHRoaXMuc3RhdGUubG9jYWxlLCBzY29wZTogdGhpcy5jb250ZXh0LnNjb3BlIH0sXG4gICAgICBwcm9wcyxcbiAgICAgIGludGVycG9sYXRpb25zLFxuICAgICAgeyBpbnRlcnBvbGF0ZTogdHJ1ZSB9XG4gICAgKTtcblxuICAgIHZhciBjb250ZW50VHJhbnNsYXRpb25PcHRpb25zID0gZXh0ZW5kKFxuICAgICAge30sXG4gICAgICBhdHRyaWJ1dGVUcmFuc2xhdGlvbk9wdGlvbnMsXG4gICAgICB7IGludGVycG9sYXRlOiBpbnRlcnBvbGF0ZSB9XG4gICAgKTtcblxuICAgIGRlbGV0ZSBwcm9wcy5sb2NhbGU7XG4gICAgZGVsZXRlIHByb3BzLnNjb3BlO1xuICAgIGRlbGV0ZSBwcm9wcy5jb3VudDtcbiAgICBkZWxldGUgcHJvcHMud2l0aDtcblxuICAgIGlmIChwcm9wcy5hdHRyaWJ1dGVzKSB7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYXR0cmlidXRlS2V5ID0gcHJvcHMuYXR0cmlidXRlc1tuYW1lXTtcblxuICAgICAgICBpZiAoYXR0cmlidXRlS2V5KSB7XG4gICAgICAgICAgcHJvcHNbbmFtZV0gPSB0cmFuc2xhdG9yLnRyYW5zbGF0ZShhdHRyaWJ1dGVLZXksIGF0dHJpYnV0ZVRyYW5zbGF0aW9uT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGVsZXRlIHByb3BzLmF0dHJpYnV0ZXM7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLmNvbnRlbnQpIHtcbiAgICAgIHZhciB0cmFuc2xhdGlvbiAgICAgID0gdHJhbnNsYXRvci50cmFuc2xhdGUocHJvcHMuY29udGVudCwgY29udGVudFRyYW5zbGF0aW9uT3B0aW9ucyk7XG4gICAgICB2YXIgaW50ZXJwb2xhdGVQcm9wcyA9IGV4dGVuZCh7fSwgcHJvcHMsIHsgd2l0aDogaW50ZXJwb2xhdGlvbnMgfSk7XG5cbiAgICAgIGRlbGV0ZSBpbnRlcnBvbGF0ZVByb3BzLmNvbnRlbnQ7XG4gICAgICBkZWxldGUgaW50ZXJwb2xhdGVQcm9wcy5jaGlsZHJlbjtcblxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW50ZXJwb2xhdGUsIGludGVycG9sYXRlUHJvcHMsIHRyYW5zbGF0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IHByb3BzLmNvbXBvbmVudDtcblxuICAgICAgZGVsZXRlIHByb3BzLmNvbXBvbmVudDtcbiAgICAgIGRlbGV0ZSBwcm9wcy51bnNhZmU7XG5cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgcHJvcHMpO1xuICAgIH1cbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNsYXRlO1xuXG5tb2R1bGUuZXhwb3J0cy50cmFuc2xhdGUgPSBmdW5jdGlvbihrZXksIG9wdGlvbnMpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNsYXRlLCBleHRlbmQoe30sIG9wdGlvbnMsIHsgY29udGVudDoga2V5IH0pKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzLnRyYW5zbGF0b3JUeXBlID0gdHJhbnNsYXRvclR5cGU7XG5cbm1vZHVsZS5leHBvcnRzLmdldExvY2FsZSA9IHRyYW5zbGF0b3IuZ2V0TG9jYWxlLmJpbmQodHJhbnNsYXRvcik7XG5tb2R1bGUuZXhwb3J0cy5zZXRMb2NhbGUgPSB0cmFuc2xhdG9yLnNldExvY2FsZS5iaW5kKHRyYW5zbGF0b3IpO1xubW9kdWxlLmV4cG9ydHMub25Mb2NhbGVDaGFuZ2UgPSB0cmFuc2xhdG9yLm9uTG9jYWxlQ2hhbmdlLmJpbmQodHJhbnNsYXRvcik7XG5tb2R1bGUuZXhwb3J0cy5vZmZMb2NhbGVDaGFuZ2UgPSB0cmFuc2xhdG9yLm9mZkxvY2FsZUNoYW5nZS5iaW5kKHRyYW5zbGF0b3IpO1xubW9kdWxlLmV4cG9ydHMucmVnaXN0ZXJUcmFuc2xhdGlvbnMgPSB0cmFuc2xhdG9yLnJlZ2lzdGVyVHJhbnNsYXRpb25zLmJpbmQodHJhbnNsYXRvcik7XG5cbmZ1bmN0aW9uIHdpdGhUcmFuc2xhdGlvbnMoRGVjb3JhdGVkQ29tcG9uZW50LCB0cmFuc2xhdGlvbnMpIHtcbiAgaWYgKCF0cmFuc2xhdGlvbnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZGVjb3JhdGVkQ29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gd2l0aFRyYW5zbGF0aW9ucyhkZWNvcmF0ZWRDb21wb25lbnQsIERlY29yYXRlZENvbXBvbmVudCk7XG4gICAgfTtcbiAgfVxuXG4gIHZhciBkaXNwbGF5TmFtZSA9XG4gICAgRGVjb3JhdGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8XG4gICAgRGVjb3JhdGVkQ29tcG9uZW50Lm5hbWUgfHxcbiAgICAnQ29tcG9uZW50JztcblxuICBmb3IgKHZhciBsb2NhbGUgaW4gdHJhbnNsYXRpb25zKSB7XG4gICAgdmFyIGxvY2FsZVRyYW5zbGF0aW9ucyA9IHRyYW5zbGF0aW9uc1tsb2NhbGVdO1xuICAgIHZhciBzY29wZWRUcmFuc2xhdGlvbnMgPSB7fTtcblxuICAgIHNjb3BlZFRyYW5zbGF0aW9uc1tkaXNwbGF5TmFtZV0gPSBsb2NhbGVUcmFuc2xhdGlvbnM7XG5cbiAgICB0cmFuc2xhdG9yLnJlZ2lzdGVyVHJhbnNsYXRpb25zKGxvY2FsZSwgc2NvcGVkVHJhbnNsYXRpb25zKTtcbiAgfVxuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lICsgJ1dpdGhUcmFuc2xhdGlvbnMnLFxuXG4gICAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICAgIHNjb3BlOiBrZXlUeXBlXG4gICAgfSxcblxuICAgIGdldENoaWxkQ29udGV4dDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzY29wZTogZGlzcGxheU5hbWVcbiAgICAgIH07XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEZWNvcmF0ZWRDb21wb25lbnQsIHRoaXMucHJvcHMpO1xuICAgIH1cbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzLndpdGhUcmFuc2xhdGlvbnMgPSB3aXRoVHJhbnNsYXRpb25zO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtdHJhbnNsYXRlLWNvbXBvbmVudC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9lbXB0eUZ1bmN0aW9uJyk7XG5cbi8qKlxuICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGVcbiAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuICovXG5cbnZhciB3YXJuaW5nID0gZW1wdHlGdW5jdGlvbjtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKGZvcm1hdCkge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG4gICAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFja1xuICAgICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBjYXRjaCAoeCkge31cbiAgICB9O1xuXG4gICAgd2FybmluZyA9IGZ1bmN0aW9uIHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQpIHtcbiAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9ybWF0LmluZGV4T2YoJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICcpID09PSAwKSB7XG4gICAgICAgIHJldHVybjsgLy8gSWdub3JlIENvbXBvc2l0ZUNvbXBvbmVudCBwcm9wdHlwZSBjaGVjay5cbiAgICAgIH1cblxuICAgICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIgPiAyID8gX2xlbjIgLSAyIDogMCksIF9rZXkyID0gMjsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTIgLSAyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cblxuICAgICAgICBwcmludFdhcm5pbmcuYXBwbHkodW5kZWZpbmVkLCBbZm9ybWF0XS5jb25jYXQoYXJncykpO1xuICAgICAgfVxuICAgIH07XG4gIH0pKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybmluZztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9mYmpzL2xpYi93YXJuaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RWxlbWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9hc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcblxudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQgdHlwZS4gSWYgdGhlcmUgaXMgbm8gbmF0aXZlIFN5bWJvbFxuLy8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLlxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sWydmb3InXSAmJiBTeW1ib2xbJ2ZvciddKCdyZWFjdC5lbGVtZW50JykgfHwgMHhlYWM3O1xuXG52YXIgUkVTRVJWRURfUFJPUFMgPSB7XG4gIGtleTogdHJ1ZSxcbiAgcmVmOiB0cnVlLFxuICBfX3NlbGY6IHRydWUsXG4gIF9fc291cmNlOiB0cnVlXG59O1xuXG52YXIgc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24sIHNwZWNpYWxQcm9wUmVmV2FybmluZ1Nob3duO1xuXG5mdW5jdGlvbiBoYXNWYWxpZFJlZihjb25maWcpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsICdyZWYnKSkge1xuICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCAncmVmJykuZ2V0O1xuICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY29uZmlnLnJlZiAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsICdrZXknKSkge1xuICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCAna2V5JykuZ2V0O1xuICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY29uZmlnLmtleSAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHtcbiAgdmFyIHdhcm5BYm91dEFjY2Vzc2luZ0tleSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duKSB7XG4gICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9IHRydWU7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0ICcgKyAnaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSAnICsgJ3ZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgJyArICdwcm9wLiAoaHR0cHM6Ly9mYi5tZS9yZWFjdC1zcGVjaWFsLXByb3BzKScsIGRpc3BsYXlOYW1lKSA6IHZvaWQgMDtcbiAgICB9XG4gIH07XG4gIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9IHRydWU7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgJ2tleScsIHtcbiAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ0tleSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRlZmluZVJlZlByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSkge1xuICB2YXIgd2FybkFib3V0QWNjZXNzaW5nUmVmID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd24pIHtcbiAgICAgIHNwZWNpYWxQcm9wUmVmV2FybmluZ1Nob3duID0gdHJ1ZTtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXM6IGByZWZgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgJyArICdpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lICcgKyAndmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCAnICsgJ3Byb3AuIChodHRwczovL2ZiLm1lL3JlYWN0LXNwZWNpYWwtcHJvcHMpJywgZGlzcGxheU5hbWUpIDogdm9pZCAwO1xuICAgIH1cbiAgfTtcbiAgd2FybkFib3V0QWNjZXNzaW5nUmVmLmlzUmVhY3RXYXJuaW5nID0gdHJ1ZTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCAncmVmJywge1xuICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nUmVmLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLyoqXG4gKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgUmVhY3QgZWxlbWVudC4gVGhpcyBubyBsb25nZXIgYWRoZXJlcyB0b1xuICogdGhlIGNsYXNzIHBhdHRlcm4sIHNvIGRvIG5vdCB1c2UgbmV3IHRvIGNhbGwgaXQuIEFsc28sIG5vIGluc3RhbmNlb2YgY2hlY2tcbiAqIHdpbGwgd29yay4gSW5zdGVhZCB0ZXN0ICQkdHlwZW9mIGZpZWxkIGFnYWluc3QgU3ltYm9sLmZvcigncmVhY3QuZWxlbWVudCcpIHRvIGNoZWNrXG4gKiBpZiBzb21ldGhpbmcgaXMgYSBSZWFjdCBFbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7Kn0gdHlwZVxuICogQHBhcmFtIHsqfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVmXG4gKiBAcGFyYW0geyp9IHNlbGYgQSAqdGVtcG9yYXJ5KiBoZWxwZXIgdG8gZGV0ZWN0IHBsYWNlcyB3aGVyZSBgdGhpc2AgaXNcbiAqIGRpZmZlcmVudCBmcm9tIHRoZSBgb3duZXJgIHdoZW4gUmVhY3QuY3JlYXRlRWxlbWVudCBpcyBjYWxsZWQsIHNvIHRoYXQgd2VcbiAqIGNhbiB3YXJuLiBXZSB3YW50IHRvIGdldCByaWQgb2Ygb3duZXIgYW5kIHJlcGxhY2Ugc3RyaW5nIGByZWZgcyB3aXRoIGFycm93XG4gKiBmdW5jdGlvbnMsIGFuZCBhcyBsb25nIGFzIGB0aGlzYCBhbmQgb3duZXIgYXJlIHRoZSBzYW1lLCB0aGVyZSB3aWxsIGJlIG5vXG4gKiBjaGFuZ2UgaW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBBbiBhbm5vdGF0aW9uIG9iamVjdCAoYWRkZWQgYnkgYSB0cmFuc3BpbGVyIG9yIG90aGVyd2lzZSlcbiAqIGluZGljYXRpbmcgZmlsZW5hbWUsIGxpbmUgbnVtYmVyLCBhbmQvb3Igb3RoZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0geyp9IG93bmVyXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0RWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIGVsZW1lbnQgPSB7XG4gICAgLy8gVGhpcyB0YWcgYWxsb3cgdXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyBhcyBhIFJlYWN0IEVsZW1lbnRcbiAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuXG4gICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuICAgIHR5cGU6IHR5cGUsXG4gICAga2V5OiBrZXksXG4gICAgcmVmOiByZWYsXG4gICAgcHJvcHM6IHByb3BzLFxuXG4gICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICBfb3duZXI6IG93bmVyXG4gIH07XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBUaGUgdmFsaWRhdGlvbiBmbGFnIGlzIGN1cnJlbnRseSBtdXRhdGl2ZS4gV2UgcHV0IGl0IG9uXG4gICAgLy8gYW4gZXh0ZXJuYWwgYmFja2luZyBzdG9yZSBzbyB0aGF0IHdlIGNhbiBmcmVlemUgdGhlIHdob2xlIG9iamVjdC5cbiAgICAvLyBUaGlzIGNhbiBiZSByZXBsYWNlZCB3aXRoIGEgV2Vha01hcCBvbmNlIHRoZXkgYXJlIGltcGxlbWVudGVkIGluXG4gICAgLy8gY29tbW9ubHkgdXNlZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMuXG4gICAgZWxlbWVudC5fc3RvcmUgPSB7fTtcbiAgICB2YXIgc2hhZG93Q2hpbGRyZW4gPSBBcnJheS5pc0FycmF5KHByb3BzLmNoaWxkcmVuKSA/IHByb3BzLmNoaWxkcmVuLnNsaWNlKDApIDogcHJvcHMuY2hpbGRyZW47XG5cbiAgICAvLyBUbyBtYWtlIGNvbXBhcmluZyBSZWFjdEVsZW1lbnRzIGVhc2llciBmb3IgdGVzdGluZyBwdXJwb3Nlcywgd2UgbWFrZVxuICAgIC8vIHRoZSB2YWxpZGF0aW9uIGZsYWcgbm9uLWVudW1lcmFibGUgKHdoZXJlIHBvc3NpYmxlLCB3aGljaCBzaG91bGRcbiAgICAvLyBpbmNsdWRlIGV2ZXJ5IGVudmlyb25tZW50IHdlIHJ1biB0ZXN0cyBpbiksIHNvIHRoZSB0ZXN0IGZyYW1ld29ya1xuICAgIC8vIGlnbm9yZXMgaXQuXG4gICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudC5fc3RvcmUsICd2YWxpZGF0ZWQnLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIC8vIHNlbGYgYW5kIHNvdXJjZSBhcmUgREVWIG9ubHkgcHJvcGVydGllcy5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50LCAnX3NlbGYnLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBzZWxmXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50LCAnX3NoYWRvd0NoaWxkcmVuJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc2hhZG93Q2hpbGRyZW5cbiAgICAgIH0pO1xuICAgICAgLy8gVHdvIGVsZW1lbnRzIGNyZWF0ZWQgaW4gdHdvIGRpZmZlcmVudCBwbGFjZXMgc2hvdWxkIGJlIGNvbnNpZGVyZWRcbiAgICAgIC8vIGVxdWFsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCB0aGVyZWZvcmUgd2UgaGlkZSBpdCBmcm9tIGVudW1lcmF0aW9uLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc291cmNlJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICBlbGVtZW50Ll9zZWxmID0gc2VsZjtcbiAgICAgIGVsZW1lbnQuX3NoYWRvd0NoaWxkcmVuID0gc2hhZG93Q2hpbGRyZW47XG4gICAgICBlbGVtZW50Ll9zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIGlmIChPYmplY3QuZnJlZXplKSB7XG4gICAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQucHJvcHMpO1xuICAgICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGFuZCByZXR1cm4gYSBuZXcgUmVhY3RFbGVtZW50IG9mIHRoZSBnaXZlbiB0eXBlLlxuICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNyZWF0ZWVsZW1lbnRcbiAqL1xuUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAodHlwZSwgY29uZmlnLCBjaGlsZHJlbikge1xuICB2YXIgcHJvcE5hbWU7XG5cbiAgLy8gUmVzZXJ2ZWQgbmFtZXMgYXJlIGV4dHJhY3RlZFxuICB2YXIgcHJvcHMgPSB7fTtcblxuICB2YXIga2V5ID0gbnVsbDtcbiAgdmFyIHJlZiA9IG51bGw7XG4gIHZhciBzZWxmID0gbnVsbDtcbiAgdmFyIHNvdXJjZSA9IG51bGw7XG5cbiAgaWYgKGNvbmZpZyAhPSBudWxsKSB7XG4gICAgaWYgKGhhc1ZhbGlkUmVmKGNvbmZpZykpIHtcbiAgICAgIHJlZiA9IGNvbmZpZy5yZWY7XG4gICAgfVxuICAgIGlmIChoYXNWYWxpZEtleShjb25maWcpKSB7XG4gICAgICBrZXkgPSAnJyArIGNvbmZpZy5rZXk7XG4gICAgfVxuXG4gICAgc2VsZiA9IGNvbmZpZy5fX3NlbGYgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zZWxmO1xuICAgIHNvdXJjZSA9IGNvbmZpZy5fX3NvdXJjZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGNvbmZpZy5fX3NvdXJjZTtcbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBhcmUgYWRkZWQgdG8gYSBuZXcgcHJvcHMgb2JqZWN0XG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG4gIC8vIHRoZSBuZXdseSBhbGxvY2F0ZWQgcHJvcHMgb2JqZWN0LlxuICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbkxlbmd0aCA+IDEpIHtcbiAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkQXJyYXlbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIH1cbiAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gIH1cblxuICAvLyBSZXNvbHZlIGRlZmF1bHQgcHJvcHNcbiAgaWYgKHR5cGUgJiYgdHlwZS5kZWZhdWx0UHJvcHMpIHtcbiAgICB2YXIgZGVmYXVsdFByb3BzID0gdHlwZS5kZWZhdWx0UHJvcHM7XG4gICAgZm9yIChwcm9wTmFtZSBpbiBkZWZhdWx0UHJvcHMpIHtcbiAgICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChrZXkgfHwgcmVmKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzLiQkdHlwZW9mID09PSAndW5kZWZpbmVkJyB8fCBwcm9wcy4kJHR5cGVvZiAhPT0gUkVBQ1RfRUxFTUVOVF9UWVBFKSB7XG4gICAgICAgIHZhciBkaXNwbGF5TmFtZSA9IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgJ1Vua25vd24nIDogdHlwZTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlZikge1xuICAgICAgICAgIGRlZmluZVJlZlByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFJlYWN0RWxlbWVudCh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgUmVhY3RFbGVtZW50cyBvZiBhIGdpdmVuIHR5cGUuXG4gKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90b3AtbGV2ZWwtYXBpLmh0bWwjcmVhY3QuY3JlYXRlZmFjdG9yeVxuICovXG5SZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIHZhciBmYWN0b3J5ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChudWxsLCB0eXBlKTtcbiAgLy8gRXhwb3NlIHRoZSB0eXBlIG9uIHRoZSBmYWN0b3J5IGFuZCB0aGUgcHJvdG90eXBlIHNvIHRoYXQgaXQgY2FuIGJlXG4gIC8vIGVhc2lseSBhY2Nlc3NlZCBvbiBlbGVtZW50cy4gRS5nLiBgPEZvbyAvPi50eXBlID09PSBGb29gLlxuICAvLyBUaGlzIHNob3VsZCBub3QgYmUgbmFtZWQgYGNvbnN0cnVjdG9yYCBzaW5jZSB0aGlzIG1heSBub3QgYmUgdGhlIGZ1bmN0aW9uXG4gIC8vIHRoYXQgY3JlYXRlZCB0aGUgZWxlbWVudCwgYW5kIGl0IG1heSBub3QgZXZlbiBiZSBhIGNvbnN0cnVjdG9yLlxuICAvLyBMZWdhY3kgaG9vayBUT0RPOiBXYXJuIGlmIHRoaXMgaXMgYWNjZXNzZWRcbiAgZmFjdG9yeS50eXBlID0gdHlwZTtcbiAgcmV0dXJuIGZhY3Rvcnk7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlS2V5ID0gZnVuY3Rpb24gKG9sZEVsZW1lbnQsIG5ld0tleSkge1xuICB2YXIgbmV3RWxlbWVudCA9IFJlYWN0RWxlbWVudChvbGRFbGVtZW50LnR5cGUsIG5ld0tleSwgb2xkRWxlbWVudC5yZWYsIG9sZEVsZW1lbnQuX3NlbGYsIG9sZEVsZW1lbnQuX3NvdXJjZSwgb2xkRWxlbWVudC5fb3duZXIsIG9sZEVsZW1lbnQucHJvcHMpO1xuXG4gIHJldHVybiBuZXdFbGVtZW50O1xufTtcblxuLyoqXG4gKiBDbG9uZSBhbmQgcmV0dXJuIGEgbmV3IFJlYWN0RWxlbWVudCB1c2luZyBlbGVtZW50IGFzIHRoZSBzdGFydGluZyBwb2ludC5cbiAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jbG9uZWVsZW1lbnRcbiAqL1xuUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBPcmlnaW5hbCBwcm9wcyBhcmUgY29waWVkXG4gIHZhciBwcm9wcyA9IF9hc3NpZ24oe30sIGVsZW1lbnQucHJvcHMpO1xuXG4gIC8vIFJlc2VydmVkIG5hbWVzIGFyZSBleHRyYWN0ZWRcbiAgdmFyIGtleSA9IGVsZW1lbnQua2V5O1xuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIC8vIFNlbGYgaXMgcHJlc2VydmVkIHNpbmNlIHRoZSBvd25lciBpcyBwcmVzZXJ2ZWQuXG4gIHZhciBzZWxmID0gZWxlbWVudC5fc2VsZjtcbiAgLy8gU291cmNlIGlzIHByZXNlcnZlZCBzaW5jZSBjbG9uZUVsZW1lbnQgaXMgdW5saWtlbHkgdG8gYmUgdGFyZ2V0ZWQgYnkgYVxuICAvLyB0cmFuc3BpbGVyLCBhbmQgdGhlIG9yaWdpbmFsIHNvdXJjZSBpcyBwcm9iYWJseSBhIGJldHRlciBpbmRpY2F0b3Igb2YgdGhlXG4gIC8vIHRydWUgb3duZXIuXG4gIHZhciBzb3VyY2UgPSBlbGVtZW50Ll9zb3VyY2U7XG5cbiAgLy8gT3duZXIgd2lsbCBiZSBwcmVzZXJ2ZWQsIHVubGVzcyByZWYgaXMgb3ZlcnJpZGRlblxuICB2YXIgb3duZXIgPSBlbGVtZW50Ll9vd25lcjtcblxuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICBpZiAoaGFzVmFsaWRSZWYoY29uZmlnKSkge1xuICAgICAgLy8gU2lsZW50bHkgc3RlYWwgdGhlIHJlZiBmcm9tIHRoZSBwYXJlbnQuXG4gICAgICByZWYgPSBjb25maWcucmVmO1xuICAgICAgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgIH1cbiAgICBpZiAoaGFzVmFsaWRLZXkoY29uZmlnKSkge1xuICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuICAgIH1cblxuICAgIC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIG92ZXJyaWRlIGV4aXN0aW5nIHByb3BzXG4gICAgdmFyIGRlZmF1bHRQcm9wcztcbiAgICBpZiAoZWxlbWVudC50eXBlICYmIGVsZW1lbnQudHlwZS5kZWZhdWx0UHJvcHMpIHtcbiAgICAgIGRlZmF1bHRQcm9wcyA9IGVsZW1lbnQudHlwZS5kZWZhdWx0UHJvcHM7XG4gICAgfVxuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIGlmIChjb25maWdbcHJvcE5hbWVdID09PSB1bmRlZmluZWQgJiYgZGVmYXVsdFByb3BzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBSZXNvbHZlIGRlZmF1bHQgcHJvcHNcbiAgICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG4gIC8vIHRoZSBuZXdseSBhbGxvY2F0ZWQgcHJvcHMgb2JqZWN0LlxuICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbkxlbmd0aCA+IDEpIHtcbiAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkQXJyYXlbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIH1cbiAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KGVsZW1lbnQudHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgb3duZXIsIHByb3BzKTtcbn07XG5cbi8qKlxuICogVmVyaWZpZXMgdGhlIG9iamVjdCBpcyBhIFJlYWN0RWxlbWVudC5cbiAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5pc3ZhbGlkZWxlbWVudFxuICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYG9iamVjdGAgaXMgYSB2YWxpZCBjb21wb25lbnQuXG4gKiBAZmluYWxcbiAqL1xuUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xufTtcblxuUmVhY3RFbGVtZW50LlJFQUNUX0VMRU1FTlRfVFlQRSA9IFJFQUNUX0VMRU1FTlRfVFlQRTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVsZW1lbnQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0RWxlbWVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSkpO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZmJqcy9saWIvaW52YXJpYW50LmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCkge1xuXHR0cnkge1xuXHRcdGlmICghT2JqZWN0LmFzc2lnbikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIERldGVjdCBidWdneSBwcm9wZXJ0eSBlbnVtZXJhdGlvbiBvcmRlciBpbiBvbGRlciBWOCB2ZXJzaW9ucy5cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTQxMThcblx0XHR2YXIgdGVzdDEgPSBuZXcgU3RyaW5nKCdhYmMnKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xuXHRcdH1cblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xuXHRcdH0pO1xuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XG5cdFx0fSk7XG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdC8vIFdlIGRvbid0IGV4cGVjdCBhbnkgb2YgdGhlIGFib3ZlIHRvIHRocm93LCBidXQgYmV0dGVyIHRvIGJlIHNhZmUuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXNlTmF0aXZlKCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHR2YXIgc3ltYm9scztcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcblx0XHRcdHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vb2JqZWN0LWFzc2lnbi9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImNvbnN0IG1ldHJpYyA9IHtcclxuXHJcbiAgICAvLyAqKioqKioqKioqKioqKioqKk5FVyBFVkVOVFMgVFJBQ0tFRCoqKioqKioqKioqKioqKioqKipcclxuICAgIExPR0lOX1NVQ0NFU1NGVUw6ICdMb2dpbiBTdWNjZXNzZnVsJyxcclxuICAgIFNFQ1VSSVRZX1FVRVNUSU9OU19DT01QTEVURUQ6ICdTZWN1cml0eSBRdWVzdGlvbnMgQ29tcGxldGVkJyxcclxuXHJcbiAgICAvLyBMb2dpbiBFdmVudHNcclxuICAgIEFUVEVNUFRfUEFTU1dPUkRfUkVDT1ZFUlk6ICdBdHRlbXB0IHRvIFJlY292ZXIgUGFzc3dvcmQnLCAvLyB4XHJcbiAgICBBVFRFTVBUX1BBU1NXT1JEX1JFQ09WRVJZX1FVRVNUSU9OUzogJ0F0dGVtcHQgdG8gQW5zd2VyIFBhc3N3b3JkIFJlY292ZXJ5IFF1ZXN0aW9ucycsXHJcbiAgICBBVFRFTVBUX1VTRVJOQU1FX1JFQ09WRVJZOiAnQXR0ZW1wdCB0byBSZWNvdmVyIFVzZXJuYW1lJywgLy8geFxyXG4gICAgUEFTU1dPUkRfUkVDT1ZFUllfU1VDQ0VTUzogJ1N1Ym1pdHRlZCBQYXNzd29yZCBSZWNvdmVyeSBTdWNjZXNzZnVsbHknLFxyXG4gICAgVVNFUk5BTUVfUkVDT1ZFUllfU1VDQ0VTUzogJ1N1Ym1pdHRlZCBVc2VybmFtZSBSZWNvdmVyeSBTdWNjZXNzZnVsbHknLFxyXG5cclxuICAgIC8vIEZsb29yaW5nIGNhclxyXG4gICAgREVBTEVSX1NVQ0NFU1NGVUxfRkxPT1JJTkdfUkVRVUVTVF9TVUJNSVRURUQ6ICdEZWFsZXIgLSBTdWNjZXNzZnVsIEZsb29yaW5nIFJlcXVlc3QgU3VibWl0dGVkJyxcclxuICAgIEZMT09SUExBTl9SRVFVRVNUX1JFU1VMVDogJ0Zsb29ycGxhbiBSZXF1ZXN0IFJlc3VsdCcsXHJcblxyXG4gICAgLy8gR2xvYmFsIEV2ZW50c1xyXG4gICAgQ0xJQ0tfQ0hBVF9OT1dfTElOSzogJ0NsaWNrIENoYXQgTm93IExpbmsnLCAvLyB4XHJcblxyXG4gICAgLy8gQ2hlY2tvdXQgRXZlbnRzXHJcbiAgICBERUFMRVJfUkVQT1JUU19FWFBPUlRfUEFZTUVOVFNfU1VNTUFSWV9CVVRUT046ICdEZWFsZXIgUmVwb3J0cyAtIEV4cG9ydCBQYXltZW50IFN1bW1hcnknLCAvLyB4XHJcbiAgICBERUFMRVJfUEFZTUVOVF9TVUJNSVRURUQ6ICdEZWFsZXIgLSBQYXltZW50IFN1Ym1pdHRlZCcsXHJcbiAgICBERUFMRVJfQ0hFQ0tPVVRfUkVDRUlQVF9HRU5FUkFURUQ6ICdEZWFsZXIgLSBDaGVja291dCBSZWNlaXB0IEdlbmVyYXRlZCcsXHJcblxyXG4gICAgLy8gUkVDRUlQVCBQYWdlXHJcbiAgICBERUFMRVJfUkVDRUlQVF9QQUdFX1JFQ0VJUFRfR0VORVJBVEVEOiAnRGVhbGVyIC0gUmVjZWlwdCBQYWdlIFJlY2VpcHQgR2VuZXJhdGVkJyxcclxuXHJcbiAgICAvLyBWZWhpY2xlIGRldGFpbHNcclxuICAgIERFQUxFUl9WSUVXX1ZFSElDTEVfREVUQUlMUzogJ0RlYWxlciAtIFZpZXcgVmVoaWNsZSBEZXRhaWxzJyxcclxuICAgIERFQUxFUl9WRUhJQ0xFX0RFVEFJTFNfQVRUQUNIRURfRE9DVU1FTlRTOiAnRGVhbGVyIC0gVmVoaWNsZSBEZXRhaWxzIEF0dGFjaGVkIERvY3VtZW50cycsXHJcblxyXG4gICAgLy8gUHJvbW8gUGFnZVxyXG4gICAgVklFV19QUk9NT19QQUdFOiAnVmlldyBQcm9tbyBQYWdlJyxcclxuICAgIENMSUNLX1BST01PX0RFVEFJTFM6ICdDbGljayBQcm9tbyBEZXRhaWxzJyxcclxuXHJcbiAgICAvLyBUaXRsZSBSZWxlYXNlIFByb2dyYW0gRXZlbnRzXHJcbiAgICBERUFMRVJfVElUTEVfUkVMRUFTRV9SRVFVRVNUOiAnRGVhbGVyIC0gUmVxdWVzdGVkIFRpdGxlIFJlbGVhc2UnLCAvLyB4XHJcblxyXG4gICAgLy9WaWV3IGEgUmVwb3J0IEV2ZW50c1xyXG4gICAgREVBTEVSX1JFUE9SVFNfVkVISUNMRV9ISVNUT1JZX0RFVEFJTDogJ0RlYWxlciBSZXBvcnRzIC0gVmVoaWNsZSBIaXN0b3J5IERldGFpbCcsXHJcbiAgICBERUFMRVJfUkVQT1JUU19SRUNFSVZBQkxFX0RFVEFJTDogJ0RlYWxlciBSZXBvcnRzIC0gUmVjZWl2YWJsZSBEZXRhaWwnLFxyXG4gICAgREVBTEVSX1JFUE9SVFNfVVBDT01JTkdfQ1VSVEFJTE1FTlRfUEFZT0ZGX1FVT1RFOiAnRGVhbGVyIFJlcG9ydHMgLSBVcGNvbWluZyBDdXJ0YWlsbWVudC9QYXlvZmYgUXVvdGUnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVQT1JUU19FWFBPUlRBQkxFX0lOVkVOVE9SWTogJ0RlYWxlciBSZXBvcnRzIC0gRXhwb3J0YWJsZSBJbnZlbnRvcnknLCAvLyB4XHJcbiAgICBERUFMRVJfUkVQT1JUX0RFQUxFUl9TVEFURU1FTlQ6ICdEZWFsZXIgUmVwb3J0cyAtIERlYWxlciBTdGF0ZW1lbnQnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVQT1JUU19ESVNCVVJTRU1FTlRfREVUQUlMOiAnRGVhbGVyIFJlcG9ydCAtIERpc2J1cnNlbWVudCBEZXRhaWwnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVQT1JUU19QQUlEX09GRl9TVU1NQVJZOiAnRGVhbGVyIFJlcG9ydCAtIFBhaWQgT2ZmIFN1bW1hcnknLCAvLyB4XHJcblxyXG4gICAgLy8gVmlldyBBbmFseXRpY3MgRXZlbnRzXHJcbiAgICBWSUVXX1ZJRVdfQU5BTFlUSUNTX1BBR0U6ICdWaWV3IFZpZXcgQW5hbHl0aWNzIFBhZ2UnLCAvLyB4XHJcblxyXG4gICAgLy8gUmVzb3VyY2VzIEV2ZW50c1xyXG4gICAgVklFV19SRVNPVVJDRVNfUEFHRTogJ1ZpZXcgUmVzb3VyY2VzIFBhZ2UnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVTT1VSQ0VTX1JBVEVTX0FORF9GRUVTX1BBR0U6ICdEZWFsZXIgUmVzb3VyY2VzIC0gUmF0ZXMgYW5kIEZlZXMnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVTT1VSQ0VTX1dFTENPTUVfUEFDS0VUX1BBR0U6ICdEZWFsZXIgUmVzb3VyY2VzIC0gV2VsY29tZSBQYWNrZXQnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVTT1VSQ0VTX0RFQUxFUl9GVU5ESU5HX0NIRUNLTElTVF9QQUdFOiAnRGVhbGVyIFJlc291cmNlcyAtIERlYWxlciBGdW5kaW5nIENoZWNrbGlzdCcsIC8vIHhcclxuICAgIERFQUxFUl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9CVVlFUlNfUEFHRTogJ0RlYWxlciBSZXNvdXJjZXMgLSBJbnN0cnVjdGlvbnMgRm9yIEJ1eWVycycsIC8vIHhcclxuICAgIERFQUxFUl9SRVNPVVJDRVNfV0VMQ09NRV9MRVRURVJfUEFHRTogJ0RlYWxlciBSZXNvdXJjZXMgLSBXZWxjb21lIExldHRlcicsIC8vIHhcclxuICAgIERFQUxFUl9SRVNPVVJDRVNfR1VJREVMSU5FU19QQUdFOiAnRGVhbGVyIFJlc291cmNlcyAtIEd1aWRlbGluZXMnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVTT1VSQ0VTX0lORk9STUFUSU9OX1NIRUVUX1BBR0U6ICdEZWFsZXIgUmVzb3VyY2VzIC0gSW5mb3JtYXRpb24gU2hlZXQnLCAvLyB4XHJcbiAgICBERUFMRVJfUkVTT1VSQ0VTX0NMQUlNX0ZPUk1fUEFHRTogJ0RlYWxlciBSZXNvdXJjZXMgLSBDbGFpbSBGb3JtJywgLy8geFxyXG4gICAgREVBTEVSX1JFU09VUkNFU19USVRMRV9NQU5BR0VNRU5UX0ZBUTogJ0RlYWxlciBSZXNvdXJjZXMgLSBUaXRsZSBNYW5hZ2VtZW50IEZBUScsIC8vIHhcclxuICAgIERFQUxFUl9SRVNPVVJDRVNfSU9TX0FQUDogJ0RlYWxlciBSZXNvdXJjZXMgLSBpT1MgQXBwcycsIC8vIHhcclxuICAgIERFQUxFUl9SRVNPVVJDRVNfQU5EUk9JRF9BUFA6ICdEZWFsZXIgUmVzb3VyY2VzIC0gQW5kcm9pZCBBcHBzJywgLy8geFxyXG4gICAgVklFV19SRVFVRVNUX0NSRURJVF9JTkNSRUFTRV9QQUdFOiAnVmlldyBSZXF1ZXN0IENyZWRpdCBJbmNyZWFzZScsIC8vIHhcclxuICAgIERFQUxFUl9URU1QX0NSRURJVF9JTkNSRUFTRV9SRVFVRVNUX1NVQk1JVFRFRF9QQUdFOiAnRGVhbGVyIC0gVGVtcCBDcmVkaXQgSW5jcmVhc2UgUmVxdWVzdCBTdWJtaXR0ZWQnLCAvLyB4XHJcbiAgICBERUFMRVJfUEVSTUFORU5UX0NSRURJVF9JTkNSRUFTRV9SRVFVRVNUX1NVQk1JVFRFRDogJ0RlYWxlciAtIFBlcm1hbmVudCBDcmVkaXQgSW5jcmVhc2UgUmVxdWVzdCBTdWJtaXR0ZWQnLCAvLyB4XHJcblxyXG4gICAgLy8gUmVzb3VyY2VzIEV2ZW50cyBmb3IgIC0gQXVjdGlvblxyXG4gICAgVklFV19BVUNUSU9OX1JFUE9SVFNfUEFHRTogJ1ZpZXcgQXVjdGlvbiBSZXBvcnRzJyxcclxuICAgIEFVQ1RJT05fUkVTT1VSQ0VTX1dFTENPTUVfUEFDS0VUX1BBR0U6ICdBdWN0aW9uIFJlc291cmNlcyAtIFdlbGNvbWUgUGFja2V0JywgLy8geFxyXG4gICAgQVVDVElPTl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9TRUxMRVJTX1BBR0U6ICdBdWN0aW9uIFJlc291cmNlcyAtIEluc3RydWN0aW9ucyBmb3IgU2VsbGVycycsIC8vIHhcclxuICAgIEFVQ1RJT05fUkVQT1JUU19DUkVESVRfQVZBSUxBQklMSVRZX1FVRVJZX0hJU1RPUllfUEFHRTogJ0F1Y3Rpb24gUmVwb3J0cyAtIENyZWRpdCBBdmFpbGFiaWxpdHkgUXVlcnkgSGlzdG9yeScsIC8vIHhcclxuICAgIEFVQ1RJT05fUkVQT1JUU19ESVNCVVJTRU1FTlRfREVUQUlMX1BBR0U6ICdBdWN0aW9uIFJlcG9ydHMgLSBEaXNidXJzZW1lbnQgRGV0YWlsJywgLy8geFxyXG4gICAgTUFOVUZBQ1RVUkVSX1JFUE9SVFNfQUdJTkdfUkVQT1JUX1BBR0U6ICdNYW51ZmFjdHVyZXIgUmVwb3J0cyAtIEFnaW5nIFJlcG9ydCcsXHJcblxyXG4gICAgQVVDVElPTl9TVUNDRVNTRlVMX0ZMT09SSU5HX1JFUVVFU1RfU1VCTUlUVEVEX1BBR0U6ICdBdWN0aW9uIC0gU3VjY2Vzc2Z1bCBGbG9vcmluZyBSZXF1ZXN0IFN1Ym1pdHRlZCcsIC8vIHhcclxuICAgIEFVQ1RJT05fSU5ESVZJRFVBTF9ERUFMRVJfTE9DX1FVRVJZX1BBR0U6ICdBdWN0aW9uIC0gSW5kaXZpZHVhbCBEZWFsZXIgTE9DIFF1ZXJ5JywgLy8geFxyXG5cclxuXHJcbiAgICAvLyBWYWx1ZSBMb29rdXAgRXZlbnRzXHJcbiAgICBDTElDS19WQUxVRV9MT09LVVBfVklOX1dJVEhfWklQX0xPT0tVUF9CVVRUT046ICdDbGljayBWYWx1ZSBMb29rdXAgVklOIFdpdGggWmlwIExvb2t1cCBCdXR0b24nLFxyXG4gICAgQ0xJQ0tfVkFMVUVfTE9PS1VQX1ZJTl9XSVRIT1VUX1pJUF9MT09LVVBfQlVUVE9OOiAnQ2xpY2sgVmFsdWUgTG9va3VwIFZJTiBXaXRob3V0IFppcCBMb29rdXAgQnV0dG9uJyxcclxuICAgIENMSUNLX1ZBTFVFX0xPT0tVUF9OR0NfTE9PS1VQX0JVVFRPTjogJ0NsaWNrIFZhbHVlIExvb2t1cCBOR0MgTG9va3VwIEJ1dHRvbicsXHJcbiAgICBDTElDS19WQUxVRV9MT09LVVBfTU1SX0xPT0tVUF9CVVRUT046ICdDbGljayBWYWx1ZSBMb29rdXAgTU1SIExvb2t1cCBCdXR0b24nLFxyXG4gICAgQ0xJQ0tfVkFMVUVfTE9PS1VQX0tCQl9MT09LVVBfQlVUVE9OOiAnQ2xpY2sgVmFsdWUgTG9va3VwIEtCQiBMb29rdXAgQnV0dG9uJyxcclxuXHJcbiAgICAvLyBBY2NvdW50IE1hbmFnZW1lbnQgRXZlbnRzXHJcbiAgICBERUFMRVJfVklFV19BQ0NPVU5UX01BTkFHRU1FTlRfUEFHRTogJ0RlYWxlciAtIFZpZXcgQWNjb3VudCBNYW5hZ2VtZW50IFBhZ2UnLFxyXG4gICAgREVBTEVSX0FERF9CQU5LX0FDQ09VTlQ6ICdEZWFsZXIgLSBBZGQgQmFuayBBY2NvdW50JyxcclxuICAgIERFQUxFUl9FRElUX0JBTktfQUNDT1VOVDogJ0RlYWxlciAtIEVkaXQgQmFuayBBY2NvdW50JyxcclxuXHJcbiAgICAvLyBGb290ZXIgcGFydG5lciBsaW5rc1xyXG4gICAgQVVUT1RSQURFUl9JTkRFWDogJ0F1dG90cmFkZXIgUGFydG5lciBMaW5rJyxcclxuICAgIERFQUxTSElFTERfSU5ERVg6ICdEZWFsc2hpZWxkIFBhcnRuZXIgTGluaycsXHJcbiAgICBHT0FVVE9FWENIQU5HRV9JTkRFWDogJ0dvIEF1dG8gRXhjaGFuZ2UgUGFydG5lciBMaW5rJyxcclxuICAgIEdPRklOQU5DSUFMX0lOREVYOiAnR28gRmluYW5jaWFsIFBhcnRuZXIgTGluaycsXHJcbiAgICBIQVlTVEFDS19JTkRFWDogJ0hheXN0YWNrIERpZ2l0YWwgTWFya2V0aW5nIFBhcnRuZXIgTGluaycsXHJcbiAgICBIT01FTkVUX0lOREVYOiAnSG9tZU5ldCBBdXRvbW90aXZlIFBhcnRuZXIgTGluaycsXHJcbiAgICBLRUxMWUJMVUVCT09LX0lOREVYOiAnS2VsbHkgQmx1ZSBCb29rIFBhcnRuZXIgTGluaycsXHJcbiAgICBNQU5IRUlNX0lOREVYOiAnTWFuaGVpbSBQYXJ0bmVyIExpbmsnLFxyXG4gICAgUkVBRFlBVVRPX0lOREVYOiAnUmVhZHkgQXV0byBUcmFuc3BvcnQgUGFydG5lciBMaW5rJyxcclxuICAgIFZBVVRPX0lOREVYOiAndkF1dG8gUGFydG5lciBMaW5rJyxcclxuICAgIFZJTlNPTFVUSU9OU19JTkRFWDogJ1ZpbiBTb2x1dGlvbnMgUGFydG5lciBMaW5rJyxcclxuXHJcbiAgICAvLyBGZWRFeFxyXG4gICAgV0FZQklMTF9QUklOVEVEOiAnRmVkRXggV2F5YmlsbCBHZW5lcmF0ZWQnXHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtZXRyaWM7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3Qvc2hhcmVkL21ldHJpYy5qc1xuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgcmVhY3RQcm9kSW52YXJpYW50XG4gKiBcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFdBUk5JTkc6IERPIE5PVCBtYW51YWxseSByZXF1aXJlIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyBhIHJlcGxhY2VtZW50IGZvciBgaW52YXJpYW50KC4uLilgIHVzZWQgYnkgdGhlIGVycm9yIGNvZGUgc3lzdGVtXG4gKiBhbmQgd2lsbCBfb25seV8gYmUgcmVxdWlyZWQgYnkgdGhlIGNvcnJlc3BvbmRpbmcgYmFiZWwgcGFzcy5cbiAqIEl0IGFsd2F5cyB0aHJvd3MuXG4gKi9cblxuZnVuY3Rpb24gcmVhY3RQcm9kSW52YXJpYW50KGNvZGUpIHtcbiAgdmFyIGFyZ0NvdW50ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG5cbiAgdmFyIG1lc3NhZ2UgPSAnTWluaWZpZWQgUmVhY3QgZXJyb3IgIycgKyBjb2RlICsgJzsgdmlzaXQgJyArICdodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvZXJyb3ItZGVjb2Rlci5odG1sP2ludmFyaWFudD0nICsgY29kZTtcblxuICBmb3IgKHZhciBhcmdJZHggPSAwOyBhcmdJZHggPCBhcmdDb3VudDsgYXJnSWR4KyspIHtcbiAgICBtZXNzYWdlICs9ICcmYXJnc1tdPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2FyZ0lkeCArIDFdKTtcbiAgfVxuXG4gIG1lc3NhZ2UgKz0gJyBmb3IgdGhlIGZ1bGwgbWVzc2FnZSBvciB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQnICsgJyBmb3IgZnVsbCBlcnJvcnMgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nO1xuXG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IHJlYWN0UHJvZEludmFyaWFudCdzIG93biBmcmFtZVxuXG4gIHRocm93IGVycm9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlYWN0UHJvZEludmFyaWFudDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9saWIvcmVhY3RQcm9kSW52YXJpYW50LmpzXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IExpbmsgZnJvbSAnLi9MaW5rJztcclxuXHJcbmNvbnN0IExpc3RJdGVtTGluayA9IHByb3BzID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICA8TGluayB7Li4ucHJvcHN9IC8+XHJcbiAgICAgICAgPC9saT5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMaXN0SXRlbUxpbms7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3Qvc2hhcmVkL0xpc3RJdGVtTGluay5qc1xuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogXG4gKi9cblxuZnVuY3Rpb24gbWFrZUVtcHR5RnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFyZztcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW5kIGRpc2NhcmRzIGlucHV0czsgaXQgaGFzIG5vIHNpZGUgZWZmZWN0cy4gVGhpcyBpc1xuICogcHJpbWFyaWx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5IGZvciBvdmVycmlkYWJsZSBmdW5jdGlvbiBlbmRwb2ludHMgd2hpY2hcbiAqIGFsd2F5cyBuZWVkIHRvIGJlIGNhbGxhYmxlLCBzaW5jZSBKUyBsYWNrcyBhIG51bGwtY2FsbCBpZGlvbSBhbGEgQ29jb2EuXG4gKi9cbnZhciBlbXB0eUZ1bmN0aW9uID0gZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9O1xuXG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zID0gbWFrZUVtcHR5RnVuY3Rpb247XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UgPSBtYWtlRW1wdHlGdW5jdGlvbihmYWxzZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKHRydWUpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwgPSBtYWtlRW1wdHlGdW5jdGlvbihudWxsKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUaGlzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcztcbn07XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQgPSBmdW5jdGlvbiAoYXJnKSB7XG4gIHJldHVybiBhcmc7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVtcHR5RnVuY3Rpb247XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5T2JqZWN0ID0ge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIE9iamVjdC5mcmVlemUoZW1wdHlPYmplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVtcHR5T2JqZWN0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2ZianMvbGliL2VtcHR5T2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9wcm9kSW52YXJpYW50ID0gcmVxdWlyZSgnLi9yZWFjdFByb2RJbnZhcmlhbnQnKTtcblxudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBoZWxwZXJzIGZvciB0aGUgdXBkYXRpbmcgc3RhdGUgb2YgYSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIFJlYWN0Q29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gIC8vIFdlIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgdXBkYXRlciBidXQgdGhlIHJlYWwgb25lIGdldHMgaW5qZWN0ZWQgYnkgdGhlXG4gIC8vIHJlbmRlcmVyLlxuICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xufVxuXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuXG4vKipcbiAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgdG8gbXV0YXRlXG4gKiBzdGF0ZS4gWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGNhbGxzIHRvIGBzZXRTdGF0ZWAgd2lsbCBydW4gc3luY2hyb25vdXNseSxcbiAqIGFzIHRoZXkgbWF5IGV2ZW50dWFsbHkgYmUgYmF0Y2hlZCB0b2dldGhlci4gIFlvdSBjYW4gcHJvdmlkZSBhbiBvcHRpb25hbFxuICogY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGNhbGwgdG8gc2V0U3RhdGUgaXMgYWN0dWFsbHlcbiAqIGNvbXBsZXRlZC5cbiAqXG4gKiBXaGVuIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQgdG8gc2V0U3RhdGUsIGl0IHdpbGwgYmUgY2FsbGVkIGF0IHNvbWUgcG9pbnQgaW5cbiAqIHRoZSBmdXR1cmUgKG5vdCBzeW5jaHJvbm91c2x5KS4gSXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdXAgdG8gZGF0ZVxuICogY29tcG9uZW50IGFyZ3VtZW50cyAoc3RhdGUsIHByb3BzLCBjb250ZXh0KS4gVGhlc2UgdmFsdWVzIGNhbiBiZSBkaWZmZXJlbnRcbiAqIGZyb20gdGhpcy4qIGJlY2F1c2UgeW91ciBmdW5jdGlvbiBtYXkgYmUgY2FsbGVkIGFmdGVyIHJlY2VpdmVQcm9wcyBidXQgYmVmb3JlXG4gKiBzaG91bGRDb21wb25lbnRVcGRhdGUsIGFuZCB0aGlzIG5ldyBzdGF0ZSwgcHJvcHMsIGFuZCBjb250ZXh0IHdpbGwgbm90IHlldCBiZVxuICogYXNzaWduZWQgdG8gdGhpcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSBvciBmdW5jdGlvbiB0b1xuICogICAgICAgIHByb2R1Y2UgbmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIGN1cnJlbnQgc3RhdGUuXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gKiBAZmluYWxcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHBhcnRpYWxTdGF0ZSwgY2FsbGJhY2spIHtcbiAgISh0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnZnVuY3Rpb24nIHx8IHBhcnRpYWxTdGF0ZSA9PSBudWxsKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdzZXRTdGF0ZSguLi4pOiB0YWtlcyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzIHRvIHVwZGF0ZSBvciBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcy4nKSA6IF9wcm9kSW52YXJpYW50KCc4NScpIDogdm9pZCAwO1xuICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFN0YXRlKHRoaXMsIHBhcnRpYWxTdGF0ZSk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2ssICdzZXRTdGF0ZScpO1xuICB9XG59O1xuXG4vKipcbiAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuICpcbiAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuICpcbiAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG4gKlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciB1cGRhdGUgaXMgY29tcGxldGUuXG4gKiBAZmluYWxcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcyk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2ssICdmb3JjZVVwZGF0ZScpO1xuICB9XG59O1xuXG4vKipcbiAqIERlcHJlY2F0ZWQgQVBJcy4gVGhlc2UgQVBJcyB1c2VkIHRvIGV4aXN0IG9uIGNsYXNzaWMgUmVhY3QgY2xhc3NlcyBidXQgc2luY2VcbiAqIHdlIHdvdWxkIGxpa2UgdG8gZGVwcmVjYXRlIHRoZW0sIHdlJ3JlIG5vdCBnb2luZyB0byBtb3ZlIHRoZW0gb3ZlciB0byB0aGlzXG4gKiBtb2Rlcm4gYmFzZSBjbGFzcy4gSW5zdGVhZCwgd2UgZGVmaW5lIGEgZ2V0dGVyIHRoYXQgd2FybnMgaWYgaXQncyBhY2Nlc3NlZC5cbiAqL1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIGRlcHJlY2F0ZWRBUElzID0ge1xuICAgIGlzTW91bnRlZDogWydpc01vdW50ZWQnLCAnSW5zdGVhZCwgbWFrZSBzdXJlIHRvIGNsZWFuIHVwIHN1YnNjcmlwdGlvbnMgYW5kIHBlbmRpbmcgcmVxdWVzdHMgaW4gJyArICdjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy4nXSxcbiAgICByZXBsYWNlU3RhdGU6IFsncmVwbGFjZVN0YXRlJywgJ1JlZmFjdG9yIHlvdXIgY29kZSB0byB1c2Ugc2V0U3RhdGUgaW5zdGVhZCAoc2VlICcgKyAnaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS4nXVxuICB9O1xuICB2YXIgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGluZm8pIHtcbiAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsIG1ldGhvZE5hbWUsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pIGlzIGRlcHJlY2F0ZWQgaW4gcGxhaW4gSmF2YVNjcmlwdCBSZWFjdCBjbGFzc2VzLiAlcycsIGluZm9bMF0sIGluZm9bMV0pIDogdm9pZCAwO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZm9yICh2YXIgZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKSB7XG4gICAgaWYgKGRlcHJlY2F0ZWRBUElzLmhhc093blByb3BlcnR5KGZuTmFtZSkpIHtcbiAgICAgIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyhmbk5hbWUsIGRlcHJlY2F0ZWRBUElzW2ZuTmFtZV0pO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROb29wVXBkYXRlUXVldWVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yO1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXMoLi4uKTogQ2FuIG9ubHkgdXBkYXRlIGEgbW91bnRlZCBvciBtb3VudGluZyBjb21wb25lbnQuICcgKyAnVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBjYWxsZWQgJXMoKSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50LiAnICsgJ1RoaXMgaXMgYSBuby1vcC4gUGxlYXNlIGNoZWNrIHRoZSBjb2RlIGZvciB0aGUgJXMgY29tcG9uZW50LicsIGNhbGxlck5hbWUsIGNhbGxlck5hbWUsIGNvbnN0cnVjdG9yICYmIChjb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCBjb25zdHJ1Y3Rvci5uYW1lKSB8fCAnUmVhY3RDbGFzcycpIDogdm9pZCAwO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYWJzdHJhY3QgQVBJIGZvciBhbiB1cGRhdGUgcXVldWUuXG4gKi9cbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIHRoZSBwZW5kaW5nIHVwZGF0ZXNcbiAgICogaGF2ZSBwcm9jZXNzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIHVzZSBhcyBgdGhpc2AgY29udGV4dC5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVDYWxsYmFjazogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjYWxsYmFjaykge30sXG5cbiAgLyoqXG4gICAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgJ2ZvcmNlVXBkYXRlJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyBvciBgc2V0U3RhdGVgIHRvIG11dGF0ZSBzdGF0ZS5cbiAgICogWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICAgKlxuICAgKiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCBgdGhpcy5zdGF0ZWAgd2lsbCBiZSBpbW1lZGlhdGVseSB1cGRhdGVkLCBzb1xuICAgKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBsZXRlU3RhdGUgTmV4dCBzdGF0ZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNvbXBsZXRlU3RhdGUpIHtcbiAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBzdGF0ZS4gVGhpcyBvbmx5IGV4aXN0cyBiZWNhdXNlIF9wZW5kaW5nU3RhdGUgaXNcbiAgICogaW50ZXJuYWwuIFRoaXMgcHJvdmlkZXMgYSBtZXJnaW5nIHN0cmF0ZWd5IHRoYXQgaXMgbm90IGF2YWlsYWJsZSB0byBkZWVwXG4gICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuICAgKiBkdXJpbmcgdGhlIG1lcmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxTdGF0ZSBOZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxTdGF0ZSkge1xuICAgIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCAnc2V0U3RhdGUnKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9saWIvUmVhY3ROb29wVXBkYXRlUXVldWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBfX2xvY2FsZTogXCJlblwiLFxuICBkYXlzOiBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J10sXG4gIGFiYnJldmlhdGVkX2RheXM6IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J10sXG4gIG1vbnRoczogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG4gIGFiYnJldmlhdGVkX21vbnRoczogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLFxuICBhbTogJ0FNJyxcbiAgcG06ICdQTSdcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kYXRlLW5hbWVzL2VuLmpzXG4gKiogbW9kdWxlIGlkID0gMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFwICAgICAgPSBBcnJheS5wcm90b3R5cGU7XG52YXIgY29uY2F0ICA9IGFwLmNvbmNhdDtcbnZhciBzbGljZSAgID0gYXAuc2xpY2U7XG52YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcblxuZnVuY3Rpb24gZXhjZXB0KG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIHZhciBrZXlzID0gY29uY2F0LmFwcGx5KGFwLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuXG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoaW5kZXhPZihrZXlzLCBrZXkpID09PSAtMSkge1xuICAgICAgcmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4Y2VwdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2V4Y2VwdC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYW4gZW51bWVyYXRpb24gd2l0aCBrZXlzIGVxdWFsIHRvIHRoZWlyIHZhbHVlLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqICAgdmFyIENPTE9SUyA9IGtleU1pcnJvcih7Ymx1ZTogbnVsbCwgcmVkOiBudWxsfSk7XG4gKiAgIHZhciBteUNvbG9yID0gQ09MT1JTLmJsdWU7XG4gKiAgIHZhciBpc0NvbG9yVmFsaWQgPSAhIUNPTE9SU1tteUNvbG9yXTtcbiAqXG4gKiBUaGUgbGFzdCBsaW5lIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQgaWYgdGhlIHZhbHVlcyBvZiB0aGUgZ2VuZXJhdGVkIGVudW0gd2VyZVxuICogbm90IGVxdWFsIHRvIHRoZWlyIGtleXMuXG4gKlxuICogICBJbnB1dDogIHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfVxuICogICBPdXRwdXQ6IHtrZXkxOiBrZXkxLCBrZXkyOiBrZXkyfVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xudmFyIGtleU1pcnJvciA9IGZ1bmN0aW9uIGtleU1pcnJvcihvYmopIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIga2V5O1xuICAhKG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhQXJyYXkuaXNBcnJheShvYmopKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdrZXlNaXJyb3IoLi4uKTogQXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdm9pZCAwO1xuICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBrZXk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5TWlycm9yO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2ZianMvbGliL2tleU1pcnJvci5qc1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDdXJyZW50T3duZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIGN1cnJlbnQgb3duZXIuXG4gKlxuICogVGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIGNvbXBvbmVudCB3aG8gc2hvdWxkIG93biBhbnkgY29tcG9uZW50cyB0aGF0IGFyZVxuICogY3VycmVudGx5IGJlaW5nIGNvbnN0cnVjdGVkLlxuICovXG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIEB0eXBlIHtSZWFjdENvbXBvbmVudH1cbiAgICovXG4gIGN1cnJlbnQ6IG51bGxcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEN1cnJlbnRPd25lcjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9saWIvUmVhY3RDdXJyZW50T3duZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSB7XG4gICAgcHJvcDogJ3Byb3AnLFxuICAgIGNvbnRleHQ6ICdjb250ZXh0JyxcbiAgICBjaGlsZENvbnRleHQ6ICdjaGlsZCBjb250ZXh0J1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcy5qc1xuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FuRGVmaW5lUHJvcGVydHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICd4JywgeyBnZXQ6IGZ1bmN0aW9uICgpIHt9IH0pO1xuICAgIGNhbkRlZmluZVByb3BlcnR5ID0gdHJ1ZTtcbiAgfSBjYXRjaCAoeCkge1xuICAgIC8vIElFIHdpbGwgZmFpbCBvbiBkZWZpbmVQcm9wZXJ0eVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2FuRGVmaW5lUHJvcGVydHk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL2NhbkRlZmluZVByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRJdGVyYXRvckZuXG4gKiBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qIGdsb2JhbCBTeW1ib2wgKi9cblxudmFyIElURVJBVE9SX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yO1xudmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LlxuICpcbiAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OlxuICpcbiAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7XG4gKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTtcbiAqICAgICAgIC4uLlxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGVcbiAqIEByZXR1cm4gez9mdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7XG4gIHZhciBpdGVyYXRvckZuID0gbWF5YmVJdGVyYWJsZSAmJiAoSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXSk7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpdGVyYXRvckZuO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0SXRlcmF0b3JGbjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9saWIvZ2V0SXRlcmF0b3JGbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi91dGlsL3V0aWwuanNcbiAqKiBtb2R1bGUgaWQgPSAyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IERhdGUgZnJvbSAnLi9zaGFyZWQvRGF0ZSdcclxuaW1wb3J0IFJlc291cmNlcyBmcm9tICcuL3Jlc291cmNlcy9SZXNvdXJjZXMnO1xyXG5pbXBvcnQgQXVjdGlvblJlc291cmNlcyBmcm9tICcuL3Jlc291cmNlcy9BdWN0aW9uUmVzb3VyY2VzJztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCduZXh0Z2VhcldlYkFwcCcpLmRpcmVjdGl2ZSgnZGF0ZUNvbXBvbmVudCcsIChyZWFjdERpcmVjdGl2ZSkgPT4gcmVhY3REaXJlY3RpdmUoRGF0ZSkpO1xyXG5hbmd1bGFyLm1vZHVsZSgnbmV4dGdlYXJXZWJBcHAnKS5kaXJlY3RpdmUoJ3Jlc291cmNlc0NvbXBvbmVudCcsIChyZWFjdERpcmVjdGl2ZSkgPT4gcmVhY3REaXJlY3RpdmUoUmVzb3VyY2VzKSk7XHJcbmFuZ3VsYXIubW9kdWxlKCduZXh0Z2VhcldlYkFwcCcpLmRpcmVjdGl2ZSgnYXVjdGlvblJlc291cmNlc0NvbXBvbmVudCcsIChyZWFjdERpcmVjdGl2ZSkgPT4gcmVhY3REaXJlY3RpdmUoQXVjdGlvblJlc291cmNlcykpO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L2FuZ3VsYXItZGlyZWN0aXZlcy5qc1xuICoqLyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tICdyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50JztcclxuaW1wb3J0IExpc3RJdGVtTGluayBmcm9tICcuLi9zaGFyZWQvTGlzdEl0ZW1MaW5rJztcclxuXHJcbmNsYXNzIEF1Y3Rpb25SZXNvdXJjZURvY3MgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGRvY0xpbmtzID0gdGhpcy5wcm9wcy5kb2NzLm1hcCgoaXRlbSkgPT4gPExpc3RJdGVtTGluayBuYW1lPXtpdGVtLm5hbWV9IHVybD17aXRlbS51cmx9IG1ldHJpYz17aXRlbS5tZXRyaWN9IGtleT17aXRlbS5pZH0gaGFuZGxlQ2xpY2s9e3RoaXMucHJvcHMuaGFuZGxlQ2xpY2t9IC8+KVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPlxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cIndlbGwtdGl0bGVcIj48VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMucmVzb3VyY2VEb2NzLm5nY0RvY3VtZW50c1wiIC8+PC9oMj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJ0ZXh0LWxpc3QgemVyb0xlZnRQYWRkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NMaW5rc31cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkF1Y3Rpb25SZXNvdXJjZURvY3MucHJvcFR5cGVzID0ge1xyXG4gICAgZG9jczogUHJvcFR5cGVzLmFycmF5LFxyXG4gICAgaGFuZGxlQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXVjdGlvblJlc291cmNlRG9jcztcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9yZWFjdC9yZXNvdXJjZXMvQXVjdGlvblJlc291cmNlRG9jcy5qc1xuICoqLyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gJ2NvdW50ZXJwYXJ0JztcclxuaW1wb3J0IEF1Y3Rpb25SZXNvdXJjZURvY3MgZnJvbSAnLi9BdWN0aW9uUmVzb3VyY2VEb2NzJztcclxuaW1wb3J0IGF1Y3Rpb25Eb2NzTGlzdCBmcm9tICcuL19hdWN0aW9uRG9jc0xpc3QnO1xyXG5pbXBvcnQgbWV0cmljIGZyb20gJy4uL3NoYXJlZC9tZXRyaWMnO1xyXG5cclxuY2xhc3MgQXVjdGlvblJlc291cmNlcyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IGN1cnJlbnQgbGFuZ3VhZ2VcclxuICAgICAgICBjb3VudGVycGFydC5zZXRMb2NhbGUocHJvcHMucHJvcHMubGFuZ3VhZ2Uuc3Vic3RyaW5nKDAsIDIpKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGNvdW50ZXJwYXJ0LmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBkb2NzOiBwcm9wcy5wcm9wcy5pc1VuaXRlZFN0YXRlcyA/IGF1Y3Rpb25Eb2NzTGlzdCA6IFtdLFxyXG4gICAgICAgICAgICBpc1VuaXRlZFN0YXRlczogcHJvcHMucHJvcHMuaXNVbml0ZWRTdGF0ZXMgfHwgZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIGxvZyBjdXJyZW50IHBhZ2Ugdmlld1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sobWV0cmljLlZJRVdfUkVTT1VSQ0VTX1BBR0UpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNsaWNrKG1ldHJpY0tleSkge1xyXG4gICAgICAgIGlmIChtZXRyaWNLZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9wcy5raXNzTWV0cmljSW5mby5nZXRLaXNzTWV0cmljSW5mbygpLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJvcHMuc2VnbWVudGlvLnRyYWNrKG1ldHJpY0tleSwgaW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEF1Y3Rpb25SZXNvdXJjZURvY3MgZG9jcz17dGhpcy5zdGF0ZS5kb2NzfSBoYW5kbGVDbGljaz17dGhpcy5oYW5kbGVDbGlja30gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BdWN0aW9uUmVzb3VyY2VzLnByb3BUeXBlcyA9IHtcclxuICAgIHByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBdWN0aW9uUmVzb3VyY2VzO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3Jlc291cmNlcy9BdWN0aW9uUmVzb3VyY2VzLmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7IFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFRyYW5zbGF0ZSBmcm9tICdyZWFjdC10cmFuc2xhdGUtY29tcG9uZW50JztcclxuaW1wb3J0IExpc3RJdGVtTGluayBmcm9tICcuLi9zaGFyZWQvTGlzdEl0ZW1MaW5rJztcclxuXHJcbmNvbnN0IE1vYmlsZUFwcHMgPSBwcm9wcyA9PiB7XHJcbiAgICBjb25zdCBhcHBMaW5rcyA9IHByb3BzLmFwcHMubWFwKChhcHApID0+IDxMaXN0SXRlbUxpbmsgbmFtZT17YXBwLm5hbWV9IHVybD17YXBwLnVybH0gbWV0cmljPXthcHAubWV0cmljfSBrZXk9e2FwcC5pZH0gaGFuZGxlQ2xpY2s9e3Byb3BzLmhhbmRsZUNsaWNrfSAvPilcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cclxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ3ZWxsLXRpdGxlXCI+PFRyYW5zbGF0ZSBjb250ZW50PVwicmVzb3VyY2VzLm1vYmlsZUFwcHMudGl0bGVcIiAvPjwvaDI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8cD48VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMubW9iaWxlQXBwcy5zdWJUZXh0XCIgLz48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cInRleHQtbGlzdCB6ZXJvTGVmdFBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2FwcExpbmtzfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59O1xyXG5cclxuTW9iaWxlQXBwcy5wcm9wVHlwZXMgPSB7XHJcbiAgICBhcHBzOiBQcm9wVHlwZXMuYXJyYXksXHJcbiAgICBoYW5kbGVDbGljazogUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb2JpbGVBcHBzO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3Jlc291cmNlcy9Nb2JpbGVBcHBzLmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gJ3JlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSAnY291bnRlcnBhcnQnO1xyXG5pbXBvcnQgTGlzdEl0ZW1MaW5rIGZyb20gJy4uL3NoYXJlZC9MaXN0SXRlbUxpbmsnO1xyXG5cclxuY2xhc3MgUmVzb3VyY2VEb2NzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCBkb2NMaW5rcyA9IHRoaXMucHJvcHMuZG9jcy5tYXAoKGl0ZW0pID0+IDxMaXN0SXRlbUxpbmsgbmFtZT17aXRlbS5uYW1lfSB1cmw9e2l0ZW0udXJsfSBtZXRyaWM9e2l0ZW0ubWV0cmljfSBrZXk9e2l0ZW0uaWR9IGhhbmRsZUNsaWNrPXt0aGlzLnByb3BzLmhhbmRsZUNsaWNrfSAvPilcclxuICAgICAgICBjb25zdCBjb2xsYXRlcmFsRG9jTGlua3MgPSB0aGlzLnByb3BzLmNvbGxhdGVyYWxEb2NzLm1hcCgoaXRlbSkgPT4gPExpc3RJdGVtTGluayBuYW1lPXtpdGVtLm5hbWV9IHVybD17aXRlbS51cmx9IG1ldHJpYz17aXRlbS5tZXRyaWN9IGtleT17aXRlbS5pZH0gaGFuZGxlQ2xpY2s9e3RoaXMucHJvcHMuaGFuZGxlQ2xpY2t9IC8+KVxyXG5cclxuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGNvdW50ZXJwYXJ0LmdldExvY2FsZSgpO1xyXG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSBsYW5ndWFnZSAhPT0gJ2VuJyA/ICdjb2wtbWQtNScgOiAnY29sLW1kLTQnO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlc30+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwid2VsbC10aXRsZVwiPjxUcmFuc2xhdGUgY29udGVudD1cInJlc291cmNlcy5yZXNvdXJjZURvY3MuZG9jdW1lbnRzXCIgLz48L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwidGV4dC1saXN0IHplcm9MZWZ0UGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY0xpbmtzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD48VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMucmVzb3VyY2VEb2NzLmNvbGxhdGVyYWxQcm9ncmFtXCIgLz48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJ0ZXh0LWxpc3QgemVyb0xlZnRQYWRkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29sbGF0ZXJhbERvY0xpbmtzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblJlc291cmNlRG9jcy5wcm9wVHlwZXMgPSB7XHJcbiAgICBkb2NzOiBQcm9wVHlwZXMuYXJyYXksXHJcbiAgICBjb2xsYXRlcmFsRG9jczogUHJvcFR5cGVzLmFycmF5LFxyXG4gICAgaGFuZGxlQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVzb3VyY2VEb2NzO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3Jlc291cmNlcy9SZXNvdXJjZURvY3MuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gJ3JlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnQnO1xyXG5cclxuY2xhc3MgUmVzb3VyY2VWaWRlb3MgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTRcIj5cclxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwid2VsbC10aXRsZVwiPjxUcmFuc2xhdGUgY29udGVudD1cInJlc291cmNlcy5yZXNvdXJjZVZpZGVvcy5sb2dnaW5nSW5cIiAvPjwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJueGctdmlkZW9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlmcmFtZSBzcmM9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8zcnFIZEVfWWdiSVwiIGZyYW1lQm9yZGVyPVwiMFwiIGFsbG93RnVsbFNjcmVlbj1cInRydWVcIiB3aWR0aD1cIjg1NFwiIGhlaWdodD1cIjQ4MFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cIndlbGwtdGl0bGVcIj48VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMucmVzb3VyY2VWaWRlb3MuaG93VG9Vc2VcIiAvPjwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJueGctdmlkZW9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlmcmFtZSBzcmM9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9oYWhMQjZVdTd6VVwiIGZyYW1lQm9yZGVyPVwiMFwiIGFsbG93RnVsbFNjcmVlbj1cInRydWVcIiB3aWR0aD1cIjg1NFwiIGhlaWdodD1cIjQ4MFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlc291cmNlVmlkZW9zO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3Jlc291cmNlcy9SZXNvdXJjZVZpZGVvcy5qc1xuICoqLyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGNvdW50ZXJwYXJ0IGZyb20gJ2NvdW50ZXJwYXJ0JztcclxuaW1wb3J0IFJlc291cmNlVmlkZW9zIGZyb20gJy4vUmVzb3VyY2VWaWRlb3MnO1xyXG5pbXBvcnQgUmVzb3VyY2VEb2NzIGZyb20gJy4vUmVzb3VyY2VEb2NzJztcclxuaW1wb3J0IE1vYmlsZUFwcHMgZnJvbSAnLi9Nb2JpbGVBcHBzJztcclxuaW1wb3J0IGNvbGxhdGVyYWxEb2NzTGlzdCBmcm9tICcuL19jb2xsYXRlcmFsRG9jc0xpc3QnO1xyXG5pbXBvcnQgbW9iaWxlQXBwc0xpc3QgZnJvbSAnLi9fbW9iaWxlQXBwc0xpc3QnO1xyXG5pbXBvcnQgZG9jc0xpc3QgZnJvbSAnLi9fZG9jc0xpc3QnO1xyXG5cclxuY2xhc3MgUmVzb3VyY2VzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgICAgICAvLyBnZXQgZmVlIHNjaGVkdWxlIGNvbnRlbnQgbGlua1xyXG4gICAgICAgIGRvY3NMaXN0WzBdLnVybCA9IHByb3BzLnByb3BzLmFwaS5jb250ZW50TGluaygnL2RlYWxlci9mZWVzY2hlZHVsZS9GZWVTY2hlZHVsZScsIHt9KTtcclxuXHJcbiAgICAgICAgLy8gc2V0IGN1cnJlbnQgbGFuZ3VhZ2VcclxuICAgICAgICBjb3VudGVycGFydC5zZXRMb2NhbGUocHJvcHMucHJvcHMubGFuZ3VhZ2Uuc3Vic3RyaW5nKDAsIDIpKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGNvdW50ZXJwYXJ0LmdldExvY2FsZSgpLFxyXG4gICAgICAgICAgICBkb2NzOiBwcm9wcy5wcm9wcy5pc1VuaXRlZFN0YXRlcyA/IGRvY3NMaXN0IDogW10sXHJcbiAgICAgICAgICAgIGNvbGxhdGVyYWxEb2NzOiBjb2xsYXRlcmFsRG9jc0xpc3QsXHJcbiAgICAgICAgICAgIG1vYmlsZUFwcHM6IG1vYmlsZUFwcHNMaXN0LFxyXG4gICAgICAgICAgICBpc1VuaXRlZFN0YXRlczogcHJvcHMucHJvcHMuaXNVbml0ZWRTdGF0ZXMgfHwgZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2sobWV0cmljKSB7XHJcbiAgICAgICAgaWYgKG1ldHJpYykge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnByb3BzLmtpc3NNZXRyaWNJbmZvLmdldEtpc3NNZXRyaWNJbmZvKCkudGhlbigoaW5mbykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9wcy5zZWdtZW50aW8udHJhY2sobWV0cmljLCBpbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMuc3RhdGUubGFuZ3VhZ2UgPT09ICdlbicgPyA8UmVzb3VyY2VWaWRlb3MgaGFuZGxlQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+IDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICAgICAgPFJlc291cmNlRG9jcyBkb2NzPXt0aGlzLnN0YXRlLmRvY3N9IGNvbGxhdGVyYWxEb2NzPXt0aGlzLnN0YXRlLmNvbGxhdGVyYWxEb2NzfSBoYW5kbGVDbGljaz17dGhpcy5oYW5kbGVDbGlja30gLz5cclxuICAgICAgICAgICAgICAgICAgICA8TW9iaWxlQXBwcyBhcHBzPXt0aGlzLnN0YXRlLm1vYmlsZUFwcHN9IGhhbmRsZUNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblJlc291cmNlcy5wcm9wVHlwZXMgPSB7XHJcbiAgICBwcm9wczogUHJvcFR5cGVzLm9iamVjdCxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVzb3VyY2VzO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3Jlc291cmNlcy9SZXNvdXJjZXMuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gJ3JlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSAnY291bnRlcnBhcnQnO1xyXG5pbXBvcnQgbWV0cmljIGZyb20gJy4uL3NoYXJlZC9tZXRyaWMnO1xyXG5cclxubGV0IGxhbmd1YWdlUHJlZml4ID0gY291bnRlcnBhcnQuZ2V0TG9jYWxlKCk7XHJcblxyXG5pZiAobGFuZ3VhZ2VQcmVmaXguaW5kZXhPZignX0NBJykgIT09IC0xKSB7XHJcbiAgICBsYW5ndWFnZVByZWZpeCA9ICdDQUUlMjAnO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFtcclxuICAgIHtcclxuICAgICAgICBpZDogMCxcclxuICAgICAgICBuYW1lOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMuYXVjdGlvbkRvY3NMaXN0LnNlbGxlckd1aWRlXCIgLz4sXHJcbiAgICAgICAgbWV0cmljOiBtZXRyaWMuQVVDVElPTl9SRVNPVVJDRVNfSU5TVFJVQ1RJT05TX0ZPUl9TRUxMRVJTX1BBR0UsXHJcbiAgICAgICAgdXJsOiBgZG9jdW1lbnRzLyR7bGFuZ3VhZ2VQcmVmaXh9TmV4dEdlYXIlMjBDYXBpdGFsJTIwV2Vic2l0ZSUyMEd1aWRlJTIwLSUyMFNlbGxlcnMucGRmYFxyXG4gICAgfVxyXG5dXHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3QvcmVzb3VyY2VzL19hdWN0aW9uRG9jc0xpc3QuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gJ3JlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSAnY291bnRlcnBhcnQnO1xyXG5pbXBvcnQgbWV0cmljIGZyb20gJy4uL3NoYXJlZC9tZXRyaWMnO1xyXG5cclxubGV0IGxhbmd1YWdlUHJlZml4ID0gY291bnRlcnBhcnQuZ2V0TG9jYWxlKCk7XHJcblxyXG5pZiAobGFuZ3VhZ2VQcmVmaXguaW5kZXhPZignX0NBJykgIT09IC0xKSB7XHJcbiAgICBsYW5ndWFnZVByZWZpeCA9ICdDQUUlMjAnO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFtcclxuICAgIHtcclxuICAgICAgICBpZDogMSxcclxuICAgICAgICBuYW1lOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMuY29sbGF0ZXJhbERvY3NMaXN0LndlbGNvbWVMZXR0ZXJcIiAvPixcclxuICAgICAgICB1cmw6IGBkb2N1bWVudHMvJHtsYW5ndWFnZVByZWZpeH1XZWxjb21lJTIwTGV0dGVyLnBkZmAsXHJcbiAgICAgICAgbWV0cmljOiBtZXRyaWMuREVBTEVSX1JFU09VUkNFU19XRUxDT01FX0xFVFRFUl9QQUdFXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOiAyLFxyXG4gICAgICAgIG5hbWU6IDxUcmFuc2xhdGUgY29udGVudD1cInJlc291cmNlcy5jb2xsYXRlcmFsRG9jc0xpc3QuZ3VpZGVsaW5lc1wiIC8+LFxyXG4gICAgICAgIHVybDogYGRvY3VtZW50cy8ke2xhbmd1YWdlUHJlZml4fUluc3VyYW5jZSUyMEd1aWRlbGluZXMucGRmYCxcclxuICAgICAgICBtZXRyaWM6IG1ldHJpYy5ERUFMRVJfUkVTT1VSQ0VTX0dVSURFTElORVNfUEFHRVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDogMyxcclxuICAgICAgICBuYW1lOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMuY29sbGF0ZXJhbERvY3NMaXN0LmluZm9ybWF0aW9uU2hlZXRcIiAvPixcclxuICAgICAgICB1cmw6IGBkb2N1bWVudHMvJHtsYW5ndWFnZVByZWZpeH1JbmZvcm1hdGlvbiUyMFNoZWV0LnBkZmAsXHJcbiAgICAgICAgbWV0cmljOiBtZXRyaWMuREVBTEVSX1JFU09VUkNFU19JTkZPUk1BVElPTl9TSEVFVF9QQUdFXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOiA0LFxyXG4gICAgICAgIG5hbWU6IDxUcmFuc2xhdGUgY29udGVudD1cInJlc291cmNlcy5jb2xsYXRlcmFsRG9jc0xpc3QuY2xhaW1Gb3JtXCIgLz4sXHJcbiAgICAgICAgdXJsOiBgZG9jdW1lbnRzLyR7bGFuZ3VhZ2VQcmVmaXh9Q2xhaW0lMjBGb3JtLnBkZmAsXHJcbiAgICAgICAgbWV0cmljOiBtZXRyaWMuREVBTEVSX1JFU09VUkNFU19DTEFJTV9GT1JNX1BBR0VcclxuICAgIH1cclxuXVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3QvcmVzb3VyY2VzL19jb2xsYXRlcmFsRG9jc0xpc3QuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gJ3JlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgY291bnRlcnBhcnQgZnJvbSAnY291bnRlcnBhcnQnO1xyXG5pbXBvcnQgbWV0cmljIGZyb20gJy4uL3NoYXJlZC9tZXRyaWMnO1xyXG5cclxubGV0IGxhbmd1YWdlUHJlZml4ID0gY291bnRlcnBhcnQuZ2V0TG9jYWxlKCk7XHJcblxyXG5pZiAobGFuZ3VhZ2VQcmVmaXguaW5kZXhPZignX0NBJykgIT09IC0xKSB7XHJcbiAgICBsYW5ndWFnZVByZWZpeCA9ICdDQUUlMjAnO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFtcclxuICAgIHtcclxuICAgICAgICBpZDogMCxcclxuICAgICAgICBuYW1lOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMuZG9jc0xpc3QucmF0ZXNcIiAvPixcclxuICAgICAgICBtZXRyaWM6IG1ldHJpYy5ERUFMRVJfUkVTT1VSQ0VTX1JBVEVTX0FORF9GRUVTX1BBR0UsXHJcbiAgICAgICAgdXJsOiAnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDogMSxcclxuICAgICAgICBuYW1lOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMuZG9jc0xpc3Qud2VsY29tZVBhY2tldFwiIC8+LFxyXG4gICAgICAgIHVybDogJ2h0dHA6Ly93d3cubmV4dGdlYXJjYXBpdGFsLmNvbS93ZWxjb21lLXBhY2tldC8nLFxyXG4gICAgICAgIG1ldHJpYzogbWV0cmljLkRFQUxFUl9SRVNPVVJDRVNfV0VMQ09NRV9QQUNLRVRfUEFHRVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDogMixcclxuICAgICAgICBuYW1lOiA8VHJhbnNsYXRlIGNvbnRlbnQ9XCJyZXNvdXJjZXMuZG9jc0xpc3QuZGVhbGVyQ2hlY2tsaXN0XCIgLz4sXHJcbiAgICAgICAgdXJsOiBgZG9jdW1lbnRzLyR7bGFuZ3VhZ2VQcmVmaXh9RGVhbGVyJTIwRnVuZGluZyUyMENoZWNrbGlzdC5wZGZgLFxyXG4gICAgICAgIG1ldHJpYzogbWV0cmljLkRFQUxFUl9SRVNPVVJDRVNfREVBTEVSX0ZVTkRJTkdfQ0hFQ0tMSVNUX1BBR0VcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6IDMsXHJcbiAgICAgICAgbmFtZTogPFRyYW5zbGF0ZSBjb250ZW50PVwicmVzb3VyY2VzLmRvY3NMaXN0LmZhcVwiIC8+LFxyXG4gICAgICAgIHVybDogYGRvY3VtZW50cy8ke2xhbmd1YWdlUHJlZml4fVJlY29yZHMlMjBUaXRsZSUyMEZBUS5wZGZgLFxyXG4gICAgICAgIG1ldHJpYzogbWV0cmljLkRFQUxFUl9SRVNPVVJDRVNfVElUTEVfTUFOQUdFTUVOVF9GQVFcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6IDQsXHJcbiAgICAgICAgbmFtZTogPFRyYW5zbGF0ZSBjb250ZW50PVwicmVzb3VyY2VzLmRvY3NMaXN0Lmluc3RydWN0aW9uc1wiIC8+LFxyXG4gICAgICAgIHVybDogYGRvY3VtZW50cy8ke2xhbmd1YWdlUHJlZml4fU5leHRHZWFyJTIwQ2FwaXRhbCUyMFdlYnNpdGUlMjBHdWlkZSUyMC0lMjBCdXllcnMucGRmYCxcclxuICAgICAgICBtZXRyaWM6IG1ldHJpYy5ERUFMRVJfUkVTT1VSQ0VTX0lOU1RSVUNUSU9OU19GT1JfQlVZRVJTX1BBR0VcclxuICAgIH1cclxuXVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3Jlc291cmNlcy9fZG9jc0xpc3QuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgVHJhbnNsYXRlIGZyb20gJ3JlYWN0LXRyYW5zbGF0ZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgbWV0cmljIGZyb20gJy4uL3NoYXJlZC9tZXRyaWMnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6IDEsXHJcbiAgICAgICAgbmFtZTogPFRyYW5zbGF0ZSBjb250ZW50PVwicmVzb3VyY2VzLm1vYmlsZUFwcHNMaXN0Lm1vYmlsZUlvc1wiIC8+LFxyXG4gICAgICAgIHVybDogJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS91cy9hcHAvbmV4dGdlYXItY2FwaXRhbC9pZDc0ODYwOTg4NT9tdD04JyxcclxuICAgICAgICBtZXRyaWM6IG1ldHJpYy5ERUFMRVJfUkVTT1VSQ0VTX0lPU19BUFAsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOiAyLFxyXG4gICAgICAgIG5hbWU6IDxUcmFuc2xhdGUgY29udGVudD1cInJlc291cmNlcy5tb2JpbGVBcHBzTGlzdC5tb2JpbGVBbmRyb2lkXCIgLz4sXHJcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9wbGF5Lmdvb2dsZS5jb20vc3RvcmUvYXBwcy9kZXRhaWxzP2lkPWNvbS5uZXh0Z2Vhci5tb2JpbGUnLFxyXG4gICAgICAgIG1ldHJpYzogbWV0cmljLkRFQUxFUl9SRVNPVVJDRVNfQU5EUk9JRF9BUFAsXHJcbiAgICB9XHJcbl1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9yZWFjdC9yZXNvdXJjZXMvX21vYmlsZUFwcHNMaXN0LmpzXG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuY2xhc3MgRGF0ZSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPXt0aGlzLnByb3BzLmxhYmVsRm9yfT57dGhpcy5wcm9wcy5sYWJlbH08L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibmctcmVhY3QtZGF0ZS1waWNrZXIge3RoaXMuc3RhdGUuaW52YWxpZH1cIlxyXG4gICAgICAgICAgICAgICAgICAgIG1pbj17dGhpcy5wcm9wcy5taW5EYXRlfVxyXG4gICAgICAgICAgICAgICAgICAgIG1heD17dGhpcy5wcm9wcy5tYXhEYXRlfVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwibW0vZGQveXl5eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZGF0ZX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD1cIi0xXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0bi11bnN0eWxlIGRpc2J1cnNlbWVudC1idG4tY2FsZW5kYXJcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN2Zy1pY29uIGljb24tY2FsZW5kYXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pZFlNaWQgbWVldFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbmtIcmVmPVwiI2ljb24tY2FsZW5kYXJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhdGUucHJvcFR5cGVzID0ge1xyXG4gICAgbWluRGF0ZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIG1heERhdGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBsYWJlbEZvcjogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGF0ZTtcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9yZWFjdC9zaGFyZWQvRGF0ZS5qc1xuICoqLyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmNsYXNzIExpbmsgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVDbGljayh0aGlzLnByb3BzLm1ldHJpYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxhIGhyZWY9e3RoaXMucHJvcHMudXJsfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5uYW1lfVxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuTGluay5wcm9wVHlwZXMgPSB7XHJcbiAgICBuYW1lOiBQcm9wVHlwZXMuZWxlbWVudCxcclxuICAgIHVybDogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIG1ldHJpYzogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIGhhbmRsZUNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpbms7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3Qvc2hhcmVkL0xpbmsuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHJlc291cmNlczoge1xyXG4gICAgICAgIHJlc291cmNlVmlkZW9zOiB7XHJcbiAgICAgICAgICAgIGxvZ2dpbmdJbjogJ0xvZ2dpbmcgSW4gdG8gbXlOZXh0R2VhcicsXHJcbiAgICAgICAgICAgIGhvd1RvVXNlOiAnSG93IHRvIFVzZSBteU5leHRHZWFyJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzb3VyY2VEb2NzOiB7XHJcbiAgICAgICAgICAgIGNvbGxhdGVyYWxQcm9ncmFtOiAnQ29sbGF0ZXJhbCBQcm90ZWN0aW9uIFByb2dyYW0nLFxyXG4gICAgICAgICAgICBkb2N1bWVudHM6ICdEb2N1bWVudHMnLFxyXG4gICAgICAgICAgICBuZ2NEb2N1bWVudHM6ICdOZXh0Z2VhciBDYXBpdGFsIERvY3VtZW50cydcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vYmlsZUFwcHM6IHtcclxuICAgICAgICAgICAgdGl0bGU6ICdNb2JpbGUgQXBwcycsXHJcbiAgICAgICAgICAgIHN1YlRleHQ6ICdNYW5hZ2UgeW91ciBidXNpbmVzcyB3aXRoIE5leHRHZWFyIENhcGl0YWwgb24gdGhlIGdvLidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbGxhdGVyYWxEb2NzTGlzdDoge1xyXG4gICAgICAgICAgICB3ZWxjb21lTGV0dGVyOiAnV2VsY29tZSBMZXR0ZXInLFxyXG4gICAgICAgICAgICBndWlkZWxpbmVzOiAnR3VpZGVsaW5lcycsXHJcbiAgICAgICAgICAgIGluZm9ybWF0aW9uU2hlZXQ6ICdJbmZvcm1hdGlvbiBTaGVldCcsXHJcbiAgICAgICAgICAgIGNsYWltRm9ybTogJ0NsYWltIEZvcm0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb2JpbGVBcHBzTGlzdDoge1xyXG4gICAgICAgICAgICBtb2JpbGVJb3M6ICdEb3dubG9hZCBteU5leHRHZWFyIG1vYmlsZSBpT1MnLFxyXG4gICAgICAgICAgICBtb2JpbGVBbmRyb2lkOiAnRG93bmxvYWQgbXlOZXh0R2VhciBtb2JpbGUgQW5kcm9pZCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRvY3NMaXN0OiB7XHJcbiAgICAgICAgICAgIHdlbGNvbWVQYWNrZXQ6ICdXZWxjb21lIFBhY2tldCcsXHJcbiAgICAgICAgICAgIGRlYWxlckNoZWNrbGlzdDogJ0RlYWxlciBGdW5kaW5nIENoZWNrbGlzdCcsXHJcbiAgICAgICAgICAgIGZhcTogJ1RpdGxlIE1hbmFnZW1lbnQgRnJlcXVlbnRseSBBc2tlZCBRdWVzdGlvbnMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdJbnN0cnVjdGlvbnMgZm9yIEJ1eWVycycsXHJcbiAgICAgICAgICAgIHJhdGVzOiAnUmF0ZXMgYW5kIEZlZXMnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdWN0aW9uRG9jc0xpc3Q6IHtcclxuICAgICAgICAgICAgc2VsbGVyR3VpZGU6ICdJbnN0cnVjdGlvbnMgZm9yIFNlbGxlcnMnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZXN0OiB7XHJcbiAgICAgICAgICB0ZXN0OiBcInRlc3RcIixcclxuICAgICAgICAgIHRlc3QyOiBcInRlc3QyXCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcmVhY3QvdHJhbnNsYXRpb25zL2VuLmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7XCJyZXNvdXJjZXNcIjp7XCJyZXNvdXJjZVZpZGVvc1wiOntcImxvZ2dpbmdJblwiOlwiSW5pY2lvIGRlIHNlc2nDs24gZW4gbXlOZXh0R2VhclwiLFwiaG93VG9Vc2VcIjpcIkPDs21vIHV0aWxpemFyIG15TmV4dEdlYXJcIn0sXCJyZXNvdXJjZURvY3NcIjp7XCJjb2xsYXRlcmFsUHJvZ3JhbVwiOlwiQ8OzbW8gdXRpbGl6YXIgbXlOZXh0R2VhclwiLFwiZG9jdW1lbnRzXCI6XCJEb2N1bWVudG9zXCIsXCJuZ2NEb2N1bWVudHNcIjpcIkRvY3VtZW50b3MgZGUgTmV4dEdlYXIgQ2FwaXRhbFwifSxcIm1vYmlsZUFwcHNcIjp7XCJ0aXRsZVwiOlwiQXBsaWNhY2lvbmVzIG3Ds3ZpbGVzXCIsXCJzdWJUZXh0XCI6XCJNYW5lamUgc3UgbmVnb2NpbyBjb24gTmV4dEdlYXIgQ2FwaXRhbCBlbiBjdWFscXVpZXIgcGFydGVcIn0sXCJjb2xsYXRlcmFsRG9jc0xpc3RcIjp7XCJ3ZWxjb21lTGV0dGVyXCI6XCJDYXJ0YSBkZSBCaWVudmVuaWRhXCIsXCJndWlkZWxpbmVzXCI6XCJMaW5lYW1pZW50b3NcIixcImluZm9ybWF0aW9uU2hlZXRcIjpcIkhvamEgZGUgaW5mb3JtYWNpw7NuXCIsXCJjbGFpbUZvcm1cIjpcIkZvcm11bGFyaW8gZGUgcmVjbGFtYWNpw7NuXCJ9LFwibW9iaWxlQXBwc0xpc3RcIjp7XCJtb2JpbGVJb3NcIjpcIkRlc2Nhcmd1ZSBteU5leHRHZWFyIG1vYmlsZSBwYXJhIGlPU1wiLFwibW9iaWxlQW5kcm9pZFwiOlwiRGVzY2FyZ3VlIG15TmV4dEdlYXIgbW9iaWxlIHBhcmEgQW5kcm9pZFwifSxcImRvY3NMaXN0XCI6e1wid2VsY29tZVBhY2tldFwiOlwiUGFxdWV0ZSBkZSBCaWVudmVuaWRhXCIsXCJkZWFsZXJDaGVja2xpc3RcIjpcIkxpc3RhIGRlIFZlcmlmaWNhY2nDs24gZGUgRmluYW5jaWFtaWVudG8gYSBQcm92ZWVkb3Jlc1wiLFwiZmFxXCI6XCJMaXN0YSBkZSBWZXJpZmljYWNpw7NuIGRlIEZpbmFuY2lhbWllbnRvIGEgUHJvdmVlZG9yZXNcIixcImluc3RydWN0aW9uc1wiOlwiSW5zdHJ1Y2Npb25lcyBwYXJhIGNvbXByYWRvcmVzXCIsXCJyYXRlc1wiOlwiVGFzYXMgeSBjYXJnb3NcIn0sXCJhdWN0aW9uRG9jc0xpc3RcIjp7XCJzZWxsZXJHdWlkZVwiOlwiSW5zdHJ1Y2Npb25lcyBwYXJhIHZlbmRlZG9yZXNcIn0sXCJ0ZXN0XCI6e1widGVzdFwiOlwidGVzdF9lc1wiLFwidGVzdDJcIjpcInRlc3QyXCJ9fX1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3RyYW5zbGF0aW9ucy9lcy5qc1xuICoqLyIsIm1vZHVsZS5leHBvcnRzID0ge1wicmVzb3VyY2VzXCI6e1wicmVzb3VyY2VWaWRlb3NcIjp7XCJsb2dnaW5nSW5cIjpcIk91dnJpciB1bmUgc2Vzc2lvbiBkYW5zIE5leHRHZWFyXCIsXCJob3dUb1VzZVwiOlwiQ29tbWVudCB1dGlsaXNlciBteU5leHRHZWFyXCJ9LFwicmVzb3VyY2VEb2NzXCI6e1wiY29sbGF0ZXJhbFByb2dyYW1cIjpcIlByb2dyYW1tZSBkZSBwcm90ZWN0aW9uIGNvbGxhdMOpcmFsZVwiLFwiZG9jdW1lbnRzXCI6XCJ0ZXN0X2ZyXCIsXCJuZ2NEb2N1bWVudHNcIjpcIkRvY3VtZW50cyBOZXh0R2VhciBDYXBpdGFsXCJ9LFwibW9iaWxlQXBwc1wiOntcInRpdGxlXCI6XCJBcHBsaWNhdGlvbnMgbW9iaWxlc1wiLFwic3ViVGV4dFwiOlwiR8OpcmV6IHZvdHJlIGVudHJlcHJpc2UgYXZlYyBOZXh0R2VhciBDYXBpdGFsIHBlbmRhbnQgdm9zIGTDqXBsYWNlbWVudHMuXCJ9LFwiY29sbGF0ZXJhbERvY3NMaXN0XCI6e1wid2VsY29tZUxldHRlclwiOlwiTGV0dHJlIGRlIGJpZW52ZW51ZVwiLFwiZ3VpZGVsaW5lc1wiOlwiRGlyZWN0aXZlc1wiLFwiaW5mb3JtYXRpb25TaGVldFwiOlwiRmV1aWxsZXQgZCdpbmZvcm1hdGlvblwiLFwiY2xhaW1Gb3JtXCI6XCJGdXJtdWxhaXJlIGRlIHLDqWNsYW1hdGlvblwifSxcIm1vYmlsZUFwcHNMaXN0XCI6e1wibW9iaWxlSW9zXCI6XCJUw6lsw6ljaGFyZ2VyIE15TmV4dEdlYXIgTW9iaWxlIHN1ciBpT1NcIixcIm1vYmlsZUFuZHJvaWRcIjpcIlTDqWzDqWNoYXJnZXIgTXlOZXh0R2VhciBNb2JpbGUgc3VyIEFuZHJvaWRcIn0sXCJkb2NzTGlzdFwiOntcIndlbGNvbWVQYWNrZXRcIjpcIlRyb3Vzc2UgZGUgYmllbnZlbnVlXCIsXCJkZWFsZXJDaGVja2xpc3RcIjpcIkxpc3RlIGRlIHbDqXJpZmljYXRpb24gZGUgZmluYW5jZW1lbnQgZHUgY29uY2Vzc2lvbm5haXJlXCIsXCJmYXFcIjpcIkZvaXJlIGF1eCBxdWVzdGlvbnMgc3VyIGxhIGdlc3Rpb24gZGVzIHRpdHJlc1wiLFwiaW5zdHJ1Y3Rpb25zXCI6XCJJbnN0cnVjdGlvbnMgcG91ciBsZXMgYWNoZXRldXJzXCIsXCJyYXRlc1wiOlwiSW5zdHJ1Y3Rpb25zIHBvdXIgbGVzIGFjaGV0ZXVyc1wifSxcImF1Y3Rpb25Eb2NzTGlzdFwiOntcInNlbGxlckd1aWRlXCI6XCJJbnN0cnVjdGlvbnMgcG91ciBsZXMgdmVuZGV1cnNcIn0sXCJ0ZXN0XCI6e1widGVzdFwiOlwidGVzdF9mclwiLFwidGVzdDJcIjpcInRlc3QyXCJ9fX1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3JlYWN0L3RyYW5zbGF0aW9ucy9mci5qc1xuICoqLyIsImltcG9ydCBjb3VudGVycGFydCBmcm9tICdjb3VudGVycGFydCc7XHJcblxyXG5pbXBvcnQgZW5Mb2NhbGUgZnJvbSAnLi9lbic7XHJcbmltcG9ydCBlc0xvY2FsZSBmcm9tICcuL2VzJztcclxuaW1wb3J0IGZyTG9jYWxlIGZyb20gJy4vZnInO1xyXG5cclxuY291bnRlcnBhcnQucmVnaXN0ZXJUcmFuc2xhdGlvbnMoJ2VuJywgZW5Mb2NhbGUpO1xyXG5jb3VudGVycGFydC5yZWdpc3RlclRyYW5zbGF0aW9ucygnZXMnLCBlc0xvY2FsZSk7XHJcbmNvdW50ZXJwYXJ0LnJlZ2lzdGVyVHJhbnNsYXRpb25zKCdmcicsIGZyTG9jYWxlKTtcclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9yZWFjdC90cmFuc2xhdGlvbnMvaW5kZXguanNcbiAqKi8iLCIvLyBUaGUgdHJhbnNsYXRpb25zIGluIHRoaXMgZmlsZSBhcmUgYWRkZWQgYnkgZGVmYXVsdC5cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY291bnRlcnBhcnQ6IHtcbiAgICBuYW1lczogcmVxdWlyZSgnZGF0ZS1uYW1lcy9lbicpLFxuICAgIHBsdXJhbGl6ZTogcmVxdWlyZSgncGx1cmFsaXplcnMvZW4nKSxcblxuICAgIGZvcm1hdHM6IHtcbiAgICAgIGRhdGU6IHtcbiAgICAgICAgJ2RlZmF1bHQnOiAgJyVhLCAlZSAlYiAlWScsXG4gICAgICAgIGxvbmc6ICAgICAgICclQSwgJUIgJW8sICVZJyxcbiAgICAgICAgc2hvcnQ6ICAgICAgJyViICVlJ1xuICAgICAgfSxcblxuICAgICAgdGltZToge1xuICAgICAgICAnZGVmYXVsdCc6ICAnJUg6JU0nLFxuICAgICAgICBsb25nOiAgICAgICAnJUg6JU06JVMgJXonLFxuICAgICAgICBzaG9ydDogICAgICAnJUg6JU0nXG4gICAgICB9LFxuXG4gICAgICBkYXRldGltZToge1xuICAgICAgICAnZGVmYXVsdCc6ICAnJWEsICVlICViICVZICVIOiVNJyxcbiAgICAgICAgbG9uZzogICAgICAgJyVBLCAlQiAlbywgJVkgJUg6JU06JVMgJXonLFxuICAgICAgICBzaG9ydDogICAgICAnJWUgJWIgJUg6JU0nXG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY291bnRlcnBhcnQvbG9jYWxlcy9lbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkYXRlTmFtZXMgPSByZXF1aXJlKCdkYXRlLW5hbWVzJyk7XG5cbmZ1bmN0aW9uIHN0cmZ0aW1lKGRhdGUsIGZvcm1hdCwgbmFtZXMpIHtcbiAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuXG4gIG5hbWVzID0gbmFtZXMgfHwgZGF0ZU5hbWVzO1xuXG4gIHJldHVybiBmb3JtYXQucmVwbGFjZSgvJShbLV8wXT8uKS9nLCBmdW5jdGlvbihfLCBjKSB7XG4gICAgdmFyIHBhZGRpbmcgPSBudWxsO1xuXG4gICAgaWYgKGMubGVuZ3RoID09IDIpIHtcbiAgICAgIHN3aXRjaCAoY1swXSkge1xuICAgICAgICBjYXNlICctJzogcGFkZGluZyA9ICcnOyAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ18nOiBwYWRkaW5nID0gJyAnOyBicmVhaztcbiAgICAgICAgY2FzZSAnMCc6IHBhZGRpbmcgPSAnMCc7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gXzsgLy8gc2hvdWxkIG5ldmVyIHJlYWNoIHRoaXMgb25lXG4gICAgICB9XG5cbiAgICAgIGMgPSBjWzFdO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYykge1xuICAgICAgY2FzZSAnQSc6IHJldHVybiBuYW1lcy5kYXlzW2RhdGUuZ2V0RGF5KCldO1xuICAgICAgY2FzZSAnYSc6IHJldHVybiBuYW1lcy5hYmJyZXZpYXRlZF9kYXlzW2RhdGUuZ2V0RGF5KCldO1xuICAgICAgY2FzZSAnQic6IHJldHVybiBuYW1lcy5tb250aHNbZGF0ZS5nZXRNb250aCgpXTtcbiAgICAgIGNhc2UgJ2InOiByZXR1cm4gbmFtZXMuYWJicmV2aWF0ZWRfbW9udGhzW2RhdGUuZ2V0TW9udGgoKV07XG4gICAgICBjYXNlICdDJzogcmV0dXJuIHBhZChNYXRoLmZsb29yKGRhdGUuZ2V0RnVsbFllYXIoKSAvIDEwMCksIHBhZGRpbmcpO1xuICAgICAgY2FzZSAnRCc6IHJldHVybiBzdHJmdGltZShkYXRlLCAnJW0vJWQvJXknKTtcbiAgICAgIGNhc2UgJ2QnOiByZXR1cm4gcGFkKGRhdGUuZ2V0RGF0ZSgpLCBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ2UnOiByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gICAgICBjYXNlICdGJzogcmV0dXJuIHN0cmZ0aW1lKGRhdGUsICclWS0lbS0lZCcpO1xuICAgICAgY2FzZSAnSCc6IHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpLCBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ2gnOiByZXR1cm4gbmFtZXMuYWJicmV2aWF0ZWRfbW9udGhzW2RhdGUuZ2V0TW9udGgoKV07XG4gICAgICBjYXNlICdJJzogcmV0dXJuIHBhZChob3VyczEyKGRhdGUpLCBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ2onOiByZXR1cm4gcGFkKE1hdGguY2VpbCgoZGF0ZS5nZXRUaW1lKCkgLSAobmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAxKSkuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSksIDMpO1xuICAgICAgY2FzZSAnayc6IHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpLCBwYWRkaW5nID09PSBudWxsID8gJyAnIDogcGFkZGluZyk7XG4gICAgICBjYXNlICdMJzogcmV0dXJuIHBhZChNYXRoLmZsb29yKHRpbWVzdGFtcCAlIDEwMDApLCAzKTtcbiAgICAgIGNhc2UgJ2wnOiByZXR1cm4gcGFkKGhvdXJzMTIoZGF0ZSksIHBhZGRpbmcgPT09IG51bGwgPyAnICcgOiBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ00nOiByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpLCBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ20nOiByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEsIHBhZGRpbmcpO1xuICAgICAgY2FzZSAnbic6IHJldHVybiAnXFxuJztcbiAgICAgIGNhc2UgJ28nOiByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKSArIG9yZGluYWwoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgY2FzZSAnUCc6IHJldHVybiBkYXRlLmdldEhvdXJzKCkgPCAxMiA/IG5hbWVzLmFtLnRvTG93ZXJDYXNlKCkgOiBuYW1lcy5wbS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY2FzZSAncCc6IHJldHVybiBkYXRlLmdldEhvdXJzKCkgPCAxMiA/IG5hbWVzLmFtLnRvVXBwZXJDYXNlKCkgOiBuYW1lcy5wbS50b1VwcGVyQ2FzZSgpO1xuICAgICAgY2FzZSAnUic6IHJldHVybiBzdHJmdGltZShkYXRlLCAnJUg6JU0nKTtcbiAgICAgIGNhc2UgJ3InOiByZXR1cm4gc3RyZnRpbWUoZGF0ZSwgJyVJOiVNOiVTICVwJyk7XG4gICAgICBjYXNlICdTJzogcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSwgcGFkZGluZyk7XG4gICAgICBjYXNlICdzJzogcmV0dXJuIE1hdGguZmxvb3IodGltZXN0YW1wIC8gMTAwMCk7XG4gICAgICBjYXNlICdUJzogcmV0dXJuIHN0cmZ0aW1lKGRhdGUsICclSDolTTolUycpO1xuICAgICAgY2FzZSAndCc6IHJldHVybiAnXFx0JztcbiAgICAgIGNhc2UgJ1UnOiByZXR1cm4gcGFkKHdlZWtOdW1iZXIoZGF0ZSwgJ3N1bmRheScpLCBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ3UnOiByZXR1cm4gZGF0ZS5nZXREYXkoKSA9PT0gMCA/IDcgOiBkYXRlLmdldERheSgpO1xuICAgICAgY2FzZSAndic6IHJldHVybiBzdHJmdGltZShkYXRlLCAnJWUtJWItJVknKTtcbiAgICAgIGNhc2UgJ1cnOiByZXR1cm4gcGFkKHdlZWtOdW1iZXIoZGF0ZSwgJ21vbmRheScpLCBwYWRkaW5nKTtcbiAgICAgIGNhc2UgJ3cnOiByZXR1cm4gZGF0ZS5nZXREYXkoKTtcbiAgICAgIGNhc2UgJ1knOiByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgY2FzZSAneSc6IHZhciB5ID0gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSk7IHJldHVybiB5LnNsaWNlKHkubGVuZ3RoIC0gMik7XG4gICAgICBjYXNlICdaJzogdmFyIHR6U3RyaW5nID0gZGF0ZS50b1N0cmluZygpLm1hdGNoKC9cXCgoXFx3KylcXCkvKTsgcmV0dXJuIHR6U3RyaW5nICYmIHR6U3RyaW5nWzFdIHx8ICcnO1xuICAgICAgY2FzZSAneic6IHZhciBvZmYgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7IHJldHVybiAob2ZmID4gMCA/ICctJyA6ICcrJykgKyBwYWQoTWF0aC5yb3VuZChNYXRoLmFicyhvZmYgLyA2MCkpLCAyKSArICc6JyArIHBhZChvZmYgJSA2MCwgMik7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gYztcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwYWQobiwgcGFkZGluZywgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgcGFkZGluZyA9PT0gJ251bWJlcicpIHtcbiAgICBsZW5ndGggPSBwYWRkaW5nO1xuICAgIHBhZGRpbmcgPSAnMCc7XG4gIH1cblxuICBpZiAocGFkZGluZyA9PT0gbnVsbCkge1xuICAgIHBhZGRpbmcgPSAnMCc7XG4gIH1cblxuICBsZW5ndGggPSBsZW5ndGggfHwgMjtcblxuICB2YXIgcyA9IFN0cmluZyhuKTtcblxuICBpZiAocGFkZGluZykge1xuICAgIHdoaWxlIChzLmxlbmd0aCA8IGxlbmd0aCkge1xuICAgICAgcyA9IHBhZGRpbmcgKyBzO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBob3VyczEyKGRhdGUpIHtcbiAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG5cbiAgaWYgKGhvdXIgPT09IDApIHtcbiAgICBob3VyID0gMTI7XG4gIH0gZWxzZSBpZiAoaG91ciA+IDEyKSB7XG4gICAgaG91ciAtPSAxMjtcbiAgfVxuXG4gIHJldHVybiBob3VyO1xufVxuXG5mdW5jdGlvbiBvcmRpbmFsKG4pIHtcbiAgdmFyIGkgPSBuICUgMTAsIGlpID0gbiAlIDEwMDtcblxuICBpZiAoKGlpID49IDExICYmIGlpIDw9IDEzKSB8fCBpID09PSAwIHx8IGkgPj0gNCkge1xuICAgIHJldHVybiAndGgnO1xuICB9XG5cbiAgc3dpdGNoIChpKSB7XG4gICAgY2FzZSAxOiByZXR1cm4gJ3N0JztcbiAgICBjYXNlIDI6IHJldHVybiAnbmQnO1xuICAgIGNhc2UgMzogcmV0dXJuICdyZCc7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2Vla051bWJlcihkYXRlLCBmaXJzdFdlZWtkYXkpIHtcbiAgZmlyc3RXZWVrZGF5ID0gZmlyc3RXZWVrZGF5IHx8ICdzdW5kYXknO1xuXG4gIHZhciB3ZGF5ID0gZGF0ZS5nZXREYXkoKTtcblxuICBpZiAoZmlyc3RXZWVrZGF5ID09ICdtb25kYXknKSB7XG4gICAgaWYgKHdkYXkgPT09IDApIHsgLy8gU3VuZGF5XG4gICAgICB3ZGF5ID0gNjtcbiAgICB9IGVsc2Uge1xuICAgICAgd2RheS0tO1xuICAgIH1cbiAgfVxuXG4gIHZhclxuICAgIGZpcnN0RGF5T2ZZZWFyID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAxKSxcbiAgICB5ZGF5ID0gKGRhdGUgLSBmaXJzdERheU9mWWVhcikgLyA4NjQwMDAwMCxcbiAgICB3ZWVrTnVtID0gKHlkYXkgKyA3IC0gd2RheSkgLyA3O1xuXG4gIHJldHVybiBNYXRoLmZsb29yKHdlZWtOdW0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0cmZ0aW1lO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY291bnRlcnBhcnQvc3RyZnRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZW4nKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2RhdGUtbmFtZXMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXZlbnRzL2V2ZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxudmFyIGlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KGFycikge1xuXHRpZiAodHlwZW9mIEFycmF5LmlzQXJyYXkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpO1xuXHR9XG5cblx0cmV0dXJuIHRvU3RyLmNhbGwoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbnZhciBpc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0aWYgKCFvYmogfHwgdG9TdHIuY2FsbChvYmopICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZhciBoYXNPd25Db25zdHJ1Y3RvciA9IGhhc093bi5jYWxsKG9iaiwgJ2NvbnN0cnVjdG9yJyk7XG5cdHZhciBoYXNJc1Byb3RvdHlwZU9mID0gb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgJiYgaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgJ2lzUHJvdG90eXBlT2YnKTtcblx0Ly8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdFxuXHRpZiAob2JqLmNvbnN0cnVjdG9yICYmICFoYXNPd25Db25zdHJ1Y3RvciAmJiAhaGFzSXNQcm90b3R5cGVPZikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLFxuXHQvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93bi5cblx0dmFyIGtleTtcblx0Zm9yIChrZXkgaW4gb2JqKSB7LyoqL31cblxuXHRyZXR1cm4gdHlwZW9mIGtleSA9PT0gJ3VuZGVmaW5lZCcgfHwgaGFzT3duLmNhbGwob2JqLCBrZXkpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBleHRlbmQoKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMF0sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0ZGVlcCA9IHRhcmdldDtcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMV0gfHwge307XG5cdFx0Ly8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdGkgPSAyO1xuXHR9IGVsc2UgaWYgKCh0eXBlb2YgdGFyZ2V0ICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdGFyZ2V0ICE9PSAnZnVuY3Rpb24nKSB8fCB0YXJnZXQgPT0gbnVsbCkge1xuXHRcdHRhcmdldCA9IHt9O1xuXHR9XG5cblx0Zm9yICg7IGkgPCBsZW5ndGg7ICsraSkge1xuXHRcdG9wdGlvbnMgPSBhcmd1bWVudHNbaV07XG5cdFx0Ly8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuXHRcdGlmIChvcHRpb25zICE9IG51bGwpIHtcblx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdGZvciAobmFtZSBpbiBvcHRpb25zKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFtuYW1lXTtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbbmFtZV07XG5cblx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRpZiAodGFyZ2V0ICE9PSBjb3B5KSB7XG5cdFx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdFx0aWYgKGRlZXAgJiYgY29weSAmJiAoaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBpc0FycmF5KGNvcHkpKSkpIHtcblx0XHRcdFx0XHRcdGlmIChjb3B5SXNBcnJheSkge1xuXHRcdFx0XHRcdFx0XHRjb3B5SXNBcnJheSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cblx0XHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGV4dGVuZChkZWVwLCBjbG9uZSwgY29weSk7XG5cblx0XHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgY29weSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGNvcHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3Rcblx0cmV0dXJuIHRhcmdldDtcbn07XG5cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2V4dGVuZC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG4vKipcbiAqIEFsbG93cyBleHRyYWN0aW9uIG9mIGEgbWluaWZpZWQga2V5LiBMZXQncyB0aGUgYnVpbGQgc3lzdGVtIG1pbmlmeSBrZXlzXG4gKiB3aXRob3V0IGxvc2luZyB0aGUgYWJpbGl0eSB0byBkeW5hbWljYWxseSB1c2Uga2V5IHN0cmluZ3MgYXMgdmFsdWVzXG4gKiB0aGVtc2VsdmVzLiBQYXNzIGluIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIGtleS92YWwgcGFpciBhbmQgaXQgd2lsbCByZXR1cm5cbiAqIHlvdSB0aGUgc3RyaW5nIGtleSBvZiB0aGF0IHNpbmdsZSByZWNvcmQuIFN1cHBvc2UgeW91IHdhbnQgdG8gZ3JhYiB0aGVcbiAqIHZhbHVlIGZvciBhIGtleSAnY2xhc3NOYW1lJyBpbnNpZGUgb2YgYW4gb2JqZWN0LiBLZXkvdmFsIG1pbmlmaWNhdGlvbiBtYXlcbiAqIGhhdmUgYWxpYXNlZCB0aGF0IGtleSB0byBiZSAneGExMicuIGtleU9mKHtjbGFzc05hbWU6IG51bGx9KSB3aWxsIHJldHVyblxuICogJ3hhMTInIGluIHRoYXQgY2FzZS4gUmVzb2x2ZSBrZXlzIHlvdSB3YW50IHRvIHVzZSBvbmNlIGF0IHN0YXJ0dXAgdGltZSwgdGhlblxuICogcmV1c2UgdGhvc2UgcmVzb2x1dGlvbnMuXG4gKi9cbnZhciBrZXlPZiA9IGZ1bmN0aW9uIGtleU9mKG9uZUtleU9iaikge1xuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBvbmVLZXlPYmopIHtcbiAgICBpZiAoIW9uZUtleU9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5T2Y7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZmJqcy9saWIva2V5T2YuanNcbiAqKiBtb2R1bGUgaWQgPSA0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXG52YXIgaW5kZXhPZiA9IFtdLmluZGV4T2Y7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJyLCBvYmope1xuICBpZiAoaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2luZGV4b2YvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVudHJ5LCBjb3VudCkge1xuICB2YXIga2V5O1xuXG4gIGlmIChjb3VudCA9PT0gMCAmJiAnemVybycgaW4gZW50cnkpIHtcbiAgICBrZXkgPSAnemVybyc7XG4gIH1cblxuICBrZXkgPSBrZXkgfHwgKGNvdW50ID09PSAxID8gJ29uZScgOiAnb3RoZXInKTtcblxuICByZXR1cm4gZW50cnlba2V5XTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wbHVyYWxpemVycy9lbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ICAgICA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgZXhjZXB0ICAgID0gcmVxdWlyZSgnZXhjZXB0Jyk7XG52YXIgZXh0ZW5kICAgID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBTdHJpbmddJztcbn1cblxudmFyIFJFR0VYUCA9IC9cXCVcXCgoLis/KVxcKXMvO1xudmFyIE9NSVRURURfUFJPUFMgPSBbJ2NoaWxkcmVuJywgJ2Zvcm1hdCcsICdjb21wb25lbnQnLCAndW5zYWZlJywgJ3dpdGgnXTtcblxudmFyIEludGVycG9sYXRlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0ludGVycG9sYXRlJyxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IGNvbXBvbmVudDogJ3NwYW4nIH07XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZm9ybWF0ICAgICAgICAgPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgIHZhciBwYXJlbnQgICAgICAgICA9IHRoaXMucHJvcHMuY29tcG9uZW50O1xuICAgIHZhciB1bnNhZmUgICAgICAgICA9IHRoaXMucHJvcHMudW5zYWZlID09PSB0cnVlO1xuICAgIHZhciBpbnRlcnBvbGF0aW9ucyA9IGV4dGVuZCh7fSwgdGhpcy5wcm9wcywgdGhpcy5wcm9wcy53aXRoKTtcbiAgICB2YXIgcHJvcHMgICAgICAgICAgPSBleGNlcHQodGhpcy5wcm9wcywgT01JVFRFRF9QUk9QUyk7XG5cbiAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuXG4gICAgaWYgKCFpc1N0cmluZyhmb3JtYXQpKSB7XG4gICAgICBmb3JtYXQgPSB0aGlzLnByb3BzLmZvcm1hdDtcbiAgICB9XG5cbiAgICBpbnZhcmlhbnQoaXNTdHJpbmcoZm9ybWF0KSwgJ0ludGVycG9sYXRlIGV4cGVjdHMgZWl0aGVyIGEgZm9ybWF0IHN0cmluZyBhcyBvbmx5IGNoaWxkIG9yIGEgYGZvcm1hdGAgcHJvcCB3aXRoIGEgc3RyaW5nIHZhbHVlJyk7XG5cbiAgICBpZiAodW5zYWZlKSB7XG4gICAgICB2YXIgY29udGVudCA9IGZvcm1hdC5zcGxpdChSRUdFWFApLnJlZHVjZShmdW5jdGlvbihtZW1vLCBtYXRjaCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGh0bWw7XG5cbiAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuICAgICAgICAgIGh0bWwgPSBtYXRjaDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBodG1sID0gaW50ZXJwb2xhdGlvbnNbbWF0Y2hdO1xuICAgICAgICAgIG1hdGNoZXMucHVzaChtYXRjaCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUmVhY3QuaXNWYWxpZEVsZW1lbnQoaHRtbCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBpbnRlcnBvbGF0ZSBhIFJlYWN0IGNvbXBvbmVudCBpbnRvIHVuc2FmZSB0ZXh0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBtZW1vICs9IGh0bWw7XG5cbiAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICB9LCAnJyk7XG5cbiAgICAgIHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID0geyBfX2h0bWw6IGNvbnRlbnQgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybWF0LnNwbGl0KFJFR0VYUCkucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIG1hdGNoLCBpbmRleCkge1xuICAgICAgICB2YXIgY2hpbGQ7XG5cbiAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuICAgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNoaWxkID0gbWF0Y2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGQgPSBpbnRlcnBvbGF0aW9uc1ttYXRjaF07XG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lbW8ucHVzaChjaGlsZCk7XG5cbiAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICB9LCBjaGlsZHJlbik7XG4gICAgfVxuXG4gICAgcHJvcHMgPSBleGNlcHQocHJvcHMsIG1hdGNoZXMpO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQuYXBwbHkodGhpcywgW3BhcmVudCwgcHJvcHNdLmNvbmNhdChjaGlsZHJlbikpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcnBvbGF0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0LWludGVycG9sYXRlLWNvbXBvbmVudC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaW52YXJpYW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSkpO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QtaW50ZXJwb2xhdGUtY29tcG9uZW50L34vZmJqcy9saWIvaW52YXJpYW50LmpzXG4gKiogbW9kdWxlIGlkID0gNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBLZXlFc2NhcGVVdGlsc1xuICogXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEVzY2FwZSBhbmQgd3JhcCBrZXkgc28gaXQgaXMgc2FmZSB0byB1c2UgYXMgYSByZWFjdGlkXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSB0byBiZSBlc2NhcGVkLlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgZXNjYXBlZCBrZXkuXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlKGtleSkge1xuICB2YXIgZXNjYXBlUmVnZXggPSAvWz06XS9nO1xuICB2YXIgZXNjYXBlckxvb2t1cCA9IHtcbiAgICAnPSc6ICc9MCcsXG4gICAgJzonOiAnPTInXG4gIH07XG4gIHZhciBlc2NhcGVkU3RyaW5nID0gKCcnICsga2V5KS5yZXBsYWNlKGVzY2FwZVJlZ2V4LCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICByZXR1cm4gZXNjYXBlckxvb2t1cFttYXRjaF07XG4gIH0pO1xuXG4gIHJldHVybiAnJCcgKyBlc2NhcGVkU3RyaW5nO1xufVxuXG4vKipcbiAqIFVuZXNjYXBlIGFuZCB1bndyYXAga2V5IGZvciBodW1hbi1yZWFkYWJsZSBkaXNwbGF5XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSB0byB1bmVzY2FwZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIHVuZXNjYXBlZCBrZXkuXG4gKi9cbmZ1bmN0aW9uIHVuZXNjYXBlKGtleSkge1xuICB2YXIgdW5lc2NhcGVSZWdleCA9IC8oPTB8PTIpL2c7XG4gIHZhciB1bmVzY2FwZXJMb29rdXAgPSB7XG4gICAgJz0wJzogJz0nLFxuICAgICc9Mic6ICc6J1xuICB9O1xuICB2YXIga2V5U3Vic3RyaW5nID0ga2V5WzBdID09PSAnLicgJiYga2V5WzFdID09PSAnJCcgPyBrZXkuc3Vic3RyaW5nKDIpIDoga2V5LnN1YnN0cmluZygxKTtcblxuICByZXR1cm4gKCcnICsga2V5U3Vic3RyaW5nKS5yZXBsYWNlKHVuZXNjYXBlUmVnZXgsIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgIHJldHVybiB1bmVzY2FwZXJMb29rdXBbbWF0Y2hdO1xuICB9KTtcbn1cblxudmFyIEtleUVzY2FwZVV0aWxzID0ge1xuICBlc2NhcGU6IGVzY2FwZSxcbiAgdW5lc2NhcGU6IHVuZXNjYXBlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEtleUVzY2FwZVV0aWxzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi9LZXlFc2NhcGVVdGlscy5qc1xuICoqIG1vZHVsZSBpZCA9IDUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUG9vbGVkQ2xhc3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfcHJvZEludmFyaWFudCA9IHJlcXVpcmUoJy4vcmVhY3RQcm9kSW52YXJpYW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBTdGF0aWMgcG9vbGVycy4gU2V2ZXJhbCBjdXN0b20gdmVyc2lvbnMgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZlxuICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuICogdGhlIENsYXNzIGl0c2VsZiwgbm90IGFuIGluc3RhbmNlLiBJZiBhbnkgb3RoZXJzIGFyZSBuZWVkZWQsIHNpbXBseSBhZGQgdGhlbVxuICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuICovXG52YXIgb25lQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoY29weUZpZWxkc0Zyb20pIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMikge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMik7XG4gIH1cbn07XG5cbnZhciB0aHJlZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG4gIH1cbn07XG5cbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxudmFyIGZpdmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCwgYTUpO1xuICB9XG59O1xuXG52YXIgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICAhKGluc3RhbmNlIGluc3RhbmNlb2YgS2xhc3MpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyeWluZyB0byByZWxlYXNlIGFuIGluc3RhbmNlIGludG8gYSBwb29sIG9mIGEgZGlmZmVyZW50IHR5cGUuJykgOiBfcHJvZEludmFyaWFudCgnMjUnKSA6IHZvaWQgMDtcbiAgaW5zdGFuY2UuZGVzdHJ1Y3RvcigpO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCA8IEtsYXNzLnBvb2xTaXplKSB7XG4gICAgS2xhc3MuaW5zdGFuY2VQb29sLnB1c2goaW5zdGFuY2UpO1xuICB9XG59O1xuXG52YXIgREVGQVVMVF9QT09MX1NJWkUgPSAxMDtcbnZhciBERUZBVUxUX1BPT0xFUiA9IG9uZUFyZ3VtZW50UG9vbGVyO1xuXG4vKipcbiAqIEF1Z21lbnRzIGBDb3B5Q29uc3RydWN0b3JgIHRvIGJlIGEgcG9vbGFibGUgY2xhc3MsIGF1Z21lbnRpbmcgb25seSB0aGUgY2xhc3NcbiAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcbiAqIHByb3RvdHlwaWNhbCBgZGVzdHJ1Y3RvcmAgb24gaW5zdGFuY2VzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IENvcHlDb25zdHJ1Y3RvciBDb25zdHJ1Y3RvciB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlc2V0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcG9vbGVyIEN1c3RvbWl6YWJsZSBwb29sZXIuXG4gKi9cbnZhciBhZGRQb29saW5nVG8gPSBmdW5jdGlvbiAoQ29weUNvbnN0cnVjdG9yLCBwb29sZXIpIHtcbiAgdmFyIE5ld0tsYXNzID0gQ29weUNvbnN0cnVjdG9yO1xuICBOZXdLbGFzcy5pbnN0YW5jZVBvb2wgPSBbXTtcbiAgTmV3S2xhc3MuZ2V0UG9vbGVkID0gcG9vbGVyIHx8IERFRkFVTFRfUE9PTEVSO1xuICBpZiAoIU5ld0tsYXNzLnBvb2xTaXplKSB7XG4gICAgTmV3S2xhc3MucG9vbFNpemUgPSBERUZBVUxUX1BPT0xfU0laRTtcbiAgfVxuICBOZXdLbGFzcy5yZWxlYXNlID0gc3RhbmRhcmRSZWxlYXNlcjtcbiAgcmV0dXJuIE5ld0tsYXNzO1xufTtcblxudmFyIFBvb2xlZENsYXNzID0ge1xuICBhZGRQb29saW5nVG86IGFkZFBvb2xpbmdUbyxcbiAgb25lQXJndW1lbnRQb29sZXI6IG9uZUFyZ3VtZW50UG9vbGVyLFxuICB0d29Bcmd1bWVudFBvb2xlcjogdHdvQXJndW1lbnRQb29sZXIsXG4gIHRocmVlQXJndW1lbnRQb29sZXI6IHRocmVlQXJndW1lbnRQb29sZXIsXG4gIGZvdXJBcmd1bWVudFBvb2xlcjogZm91ckFyZ3VtZW50UG9vbGVyLFxuICBmaXZlQXJndW1lbnRQb29sZXI6IGZpdmVBcmd1bWVudFBvb2xlclxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQb29sZWRDbGFzcztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9saWIvUG9vbGVkQ2xhc3MuanNcbiAqKiBtb2R1bGUgaWQgPSA1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2Fzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnQnKTtcbnZhciBSZWFjdFB1cmVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0UHVyZUNvbXBvbmVudCcpO1xudmFyIFJlYWN0Q2xhc3MgPSByZXF1aXJlKCcuL1JlYWN0Q2xhc3MnKTtcbnZhciBSZWFjdERPTUZhY3RvcmllcyA9IHJlcXVpcmUoJy4vUmVhY3RET01GYWN0b3JpZXMnKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBvbmx5Q2hpbGQgPSByZXF1aXJlKCcuL29ubHlDaGlsZCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBjcmVhdGVFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQ7XG52YXIgY3JlYXRlRmFjdG9yeSA9IFJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5O1xudmFyIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUVsZW1lbnQ7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xuICBjcmVhdGVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUVsZW1lbnQ7XG4gIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeTtcbiAgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNsb25lRWxlbWVudDtcbn1cblxudmFyIF9fc3ByZWFkID0gX2Fzc2lnbjtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBfX3NwcmVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh3YXJuZWQsICdSZWFjdC5fX3NwcmVhZCBpcyBkZXByZWNhdGVkIGFuZCBzaG91bGQgbm90IGJlIHVzZWQuIFVzZSAnICsgJ09iamVjdC5hc3NpZ24gZGlyZWN0bHkgb3IgYW5vdGhlciBoZWxwZXIgZnVuY3Rpb24gd2l0aCBzaW1pbGFyICcgKyAnc2VtYW50aWNzLiBZb3UgbWF5IGJlIHNlZWluZyB0aGlzIHdhcm5pbmcgZHVlIHRvIHlvdXIgY29tcGlsZXIuICcgKyAnU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtc3ByZWFkLWRlcHJlY2F0aW9uIGZvciBtb3JlIGRldGFpbHMuJykgOiB2b2lkIDA7XG4gICAgd2FybmVkID0gdHJ1ZTtcbiAgICByZXR1cm4gX2Fzc2lnbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG52YXIgUmVhY3QgPSB7XG5cbiAgLy8gTW9kZXJuXG5cbiAgQ2hpbGRyZW46IHtcbiAgICBtYXA6IFJlYWN0Q2hpbGRyZW4ubWFwLFxuICAgIGZvckVhY2g6IFJlYWN0Q2hpbGRyZW4uZm9yRWFjaCxcbiAgICBjb3VudDogUmVhY3RDaGlsZHJlbi5jb3VudCxcbiAgICB0b0FycmF5OiBSZWFjdENoaWxkcmVuLnRvQXJyYXksXG4gICAgb25seTogb25seUNoaWxkXG4gIH0sXG5cbiAgQ29tcG9uZW50OiBSZWFjdENvbXBvbmVudCxcbiAgUHVyZUNvbXBvbmVudDogUmVhY3RQdXJlQ29tcG9uZW50LFxuXG4gIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG4gIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuICBpc1ZhbGlkRWxlbWVudDogUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50LFxuXG4gIC8vIENsYXNzaWNcblxuICBQcm9wVHlwZXM6IFJlYWN0UHJvcFR5cGVzLFxuICBjcmVhdGVDbGFzczogUmVhY3RDbGFzcy5jcmVhdGVDbGFzcyxcbiAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSxcbiAgY3JlYXRlTWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIC8vIEN1cnJlbnRseSBhIG5vb3AuIFdpbGwgYmUgdXNlZCB0byB2YWxpZGF0ZSBhbmQgdHJhY2UgbWl4aW5zLlxuICAgIHJldHVybiBtaXhpbjtcbiAgfSxcblxuICAvLyBUaGlzIGxvb2tzIERPTSBzcGVjaWZpYyBidXQgdGhlc2UgYXJlIGFjdHVhbGx5IGlzb21vcnBoaWMgaGVscGVyc1xuICAvLyBzaW5jZSB0aGV5IGFyZSBqdXN0IGdlbmVyYXRpbmcgRE9NIHN0cmluZ3MuXG4gIERPTTogUmVhY3RET01GYWN0b3JpZXMsXG5cbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8vIERlcHJlY2F0ZWQgaG9vayBmb3IgSlNYIHNwcmVhZCwgZG9uJ3QgdXNlIHRoaXMgZm9yIGFueXRoaW5nLlxuICBfX3NwcmVhZDogX19zcHJlYWRcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xuXG52YXIgdHdvQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy50d29Bcmd1bWVudFBvb2xlcjtcbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy5mb3VyQXJndW1lbnRQb29sZXI7XG5cbnZhciB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCA9IC9cXC8rL2c7XG5mdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgJyQmLycpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogdHJhdmVyc2FsLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIEZvckVhY2hCb29rS2VlcGluZ1xuICogQHBhcmFtIHshZnVuY3Rpb259IGZvckVhY2hGdW5jdGlvbiBGdW5jdGlvbiB0byBwZXJmb3JtIHRyYXZlcnNhbCB3aXRoLlxuICogQHBhcmFtIHs/Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIGNvbnRleHQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gRm9yRWFjaEJvb2tLZWVwaW5nKGZvckVhY2hGdW5jdGlvbiwgZm9yRWFjaENvbnRleHQpIHtcbiAgdGhpcy5mdW5jID0gZm9yRWFjaEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBmb3JFYWNoQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5Gb3JFYWNoQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGb3JFYWNoQm9va0tlZXBpbmcsIHR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkKGJvb2tLZWVwaW5nLCBjaGlsZCwgbmFtZSkge1xuICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG4gIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblxuICBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jaGlsZHJlbi5mb3JlYWNoXG4gKlxuICogVGhlIHByb3ZpZGVkIGZvckVhY2hGdW5jKGNoaWxkLCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZvckVhY2hGdW5jXG4gKiBAcGFyYW0geyp9IGZvckVhY2hDb250ZXh0IENvbnRleHQgZm9yIGZvckVhY2hDb250ZXh0LlxuICovXG5mdW5jdGlvbiBmb3JFYWNoQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gRm9yRWFjaEJvb2tLZWVwaW5nLmdldFBvb2xlZChmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpO1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoU2luZ2xlQ2hpbGQsIHRyYXZlcnNlQ29udGV4dCk7XG4gIEZvckVhY2hCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbi8qKlxuICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG4gKiBtYXBwaW5nLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIE1hcEJvb2tLZWVwaW5nXG4gKiBAcGFyYW0geyEqfSBtYXBSZXN1bHQgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gbWFwRnVuY3Rpb24gRnVuY3Rpb24gdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG4gKiBAcGFyYW0gez8qfSBtYXBDb250ZXh0IENvbnRleHQgdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG4gKi9cbmZ1bmN0aW9uIE1hcEJvb2tLZWVwaW5nKG1hcFJlc3VsdCwga2V5UHJlZml4LCBtYXBGdW5jdGlvbiwgbWFwQ29udGV4dCkge1xuICB0aGlzLnJlc3VsdCA9IG1hcFJlc3VsdDtcbiAgdGhpcy5rZXlQcmVmaXggPSBrZXlQcmVmaXg7XG4gIHRoaXMuZnVuYyA9IG1hcEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBtYXBDb250ZXh0O1xuICB0aGlzLmNvdW50ID0gMDtcbn1cbk1hcEJvb2tLZWVwaW5nLnByb3RvdHlwZS5kZXN0cnVjdG9yID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlc3VsdCA9IG51bGw7XG4gIHRoaXMua2V5UHJlZml4ID0gbnVsbDtcbiAgdGhpcy5mdW5jID0gbnVsbDtcbiAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgdGhpcy5jb3VudCA9IDA7XG59O1xuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKE1hcEJvb2tLZWVwaW5nLCBmb3VyQXJndW1lbnRQb29sZXIpO1xuXG5mdW5jdGlvbiBtYXBTaW5nbGVDaGlsZEludG9Db250ZXh0KGJvb2tLZWVwaW5nLCBjaGlsZCwgY2hpbGRLZXkpIHtcbiAgdmFyIHJlc3VsdCA9IGJvb2tLZWVwaW5nLnJlc3VsdDtcbiAgdmFyIGtleVByZWZpeCA9IGJvb2tLZWVwaW5nLmtleVByZWZpeDtcbiAgdmFyIGZ1bmMgPSBib29rS2VlcGluZy5mdW5jO1xuICB2YXIgY29udGV4dCA9IGJvb2tLZWVwaW5nLmNvbnRleHQ7XG5cblxuICB2YXIgbWFwcGVkQ2hpbGQgPSBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xuICBpZiAoQXJyYXkuaXNBcnJheShtYXBwZWRDaGlsZCkpIHtcbiAgICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKG1hcHBlZENoaWxkLCByZXN1bHQsIGNoaWxkS2V5LCBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQpO1xuICB9IGVsc2UgaWYgKG1hcHBlZENoaWxkICE9IG51bGwpIHtcbiAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG1hcHBlZENoaWxkKSkge1xuICAgICAgbWFwcGVkQ2hpbGQgPSBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlS2V5KG1hcHBlZENoaWxkLFxuICAgICAgLy8gS2VlcCBib3RoIHRoZSAobWFwcGVkKSBhbmQgb2xkIGtleXMgaWYgdGhleSBkaWZmZXIsIGp1c3QgYXNcbiAgICAgIC8vIHRyYXZlcnNlQWxsQ2hpbGRyZW4gdXNlZCB0byBkbyBmb3Igb2JqZWN0cyBhcyBjaGlsZHJlblxuICAgICAga2V5UHJlZml4ICsgKG1hcHBlZENoaWxkLmtleSAmJiAoIWNoaWxkIHx8IGNoaWxkLmtleSAhPT0gbWFwcGVkQ2hpbGQua2V5KSA/IGVzY2FwZVVzZXJQcm92aWRlZEtleShtYXBwZWRDaGlsZC5rZXkpICsgJy8nIDogJycpICsgY2hpbGRLZXkpO1xuICAgIH1cbiAgICByZXN1bHQucHVzaChtYXBwZWRDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgYXJyYXksIHByZWZpeCwgZnVuYywgY29udGV4dCkge1xuICB2YXIgZXNjYXBlZFByZWZpeCA9ICcnO1xuICBpZiAocHJlZml4ICE9IG51bGwpIHtcbiAgICBlc2NhcGVkUHJlZml4ID0gZXNjYXBlVXNlclByb3ZpZGVkS2V5KHByZWZpeCkgKyAnLyc7XG4gIH1cbiAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IE1hcEJvb2tLZWVwaW5nLmdldFBvb2xlZChhcnJheSwgZXNjYXBlZFByZWZpeCwgZnVuYywgY29udGV4dCk7XG4gIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIG1hcFNpbmdsZUNoaWxkSW50b0NvbnRleHQsIHRyYXZlcnNlQ29udGV4dCk7XG4gIE1hcEJvb2tLZWVwaW5nLnJlbGVhc2UodHJhdmVyc2VDb250ZXh0KTtcbn1cblxuLyoqXG4gKiBNYXBzIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYC5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90b3AtbGV2ZWwtYXBpLmh0bWwjcmVhY3QuY2hpbGRyZW4ubWFwXG4gKlxuICogVGhlIHByb3ZpZGVkIG1hcEZ1bmN0aW9uKGNoaWxkLCBrZXksIGluZGV4KSB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaFxuICogbGVhZiBjaGlsZC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgaW50KX0gZnVuYyBUaGUgbWFwIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IENvbnRleHQgZm9yIG1hcEZ1bmN0aW9uLlxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgY29udGFpbmluZyB0aGUgb3JkZXJlZCBtYXAgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmMsIGNvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCByZXN1bHQsIG51bGwsIGZ1bmMsIGNvbnRleHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGREdW1teSh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENvdW50IHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhc1xuICogYHByb3BzLmNoaWxkcmVuYC5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90b3AtbGV2ZWwtYXBpLmh0bWwjcmVhY3QuY2hpbGRyZW4uY291bnRcbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gY291bnRDaGlsZHJlbihjaGlsZHJlbiwgY29udGV4dCkge1xuICByZXR1cm4gdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXksIG51bGwpO1xufVxuXG4vKipcbiAqIEZsYXR0ZW4gYSBjaGlsZHJlbiBvYmplY3QgKHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCkgYW5kXG4gKiByZXR1cm4gYW4gYXJyYXkgd2l0aCBhcHByb3ByaWF0ZWx5IHJlLWtleWVkIGNoaWxkcmVuLlxuICpcbiAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdC5jaGlsZHJlbi50b2FycmF5XG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkoY2hpbGRyZW4pIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCByZXN1bHQsIG51bGwsIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnZhciBSZWFjdENoaWxkcmVuID0ge1xuICBmb3JFYWNoOiBmb3JFYWNoQ2hpbGRyZW4sXG4gIG1hcDogbWFwQ2hpbGRyZW4sXG4gIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWw6IG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwsXG4gIGNvdW50OiBjb3VudENoaWxkcmVuLFxuICB0b0FycmF5OiB0b0FycmF5XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q2hpbGRyZW47XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0Q2hpbGRyZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q2xhc3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfcHJvZEludmFyaWFudCA9IHJlcXVpcmUoJy4vcmVhY3RQcm9kSW52YXJpYW50JyksXG4gICAgX2Fzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIFJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudCcpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgTUlYSU5TX0tFWSA9IGtleU9mKHsgbWl4aW5zOiBudWxsIH0pO1xuXG4vKipcbiAqIFBvbGljaWVzIHRoYXQgZGVzY3JpYmUgbWV0aG9kcyBpbiBgUmVhY3RDbGFzc0ludGVyZmFjZWAuXG4gKi9cbnZhciBTcGVjUG9saWN5ID0ga2V5TWlycm9yKHtcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgb25seSBvbmNlIGJ5IHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIG9yIG1peGluLlxuICAgKi9cbiAgREVGSU5FX09OQ0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIG1heSBiZSBkZWZpbmVkIGJ5IGJvdGggdGhlIGNsYXNzIHNwZWNpZmljYXRpb24gYW5kIG1peGlucy5cbiAgICogU3Vic2VxdWVudCBkZWZpbml0aW9ucyB3aWxsIGJlIGNoYWluZWQuIFRoZXNlIG1ldGhvZHMgbXVzdCByZXR1cm4gdm9pZC5cbiAgICovXG4gIERFRklORV9NQU5ZOiBudWxsLFxuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBhcmUgb3ZlcnJpZGluZyB0aGUgYmFzZSBjbGFzcy5cbiAgICovXG4gIE9WRVJSSURFX0JBU0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIGFyZSBzaW1pbGFyIHRvIERFRklORV9NQU5ZLCBleGNlcHQgd2UgYXNzdW1lIHRoZXkgcmV0dXJuXG4gICAqIG9iamVjdHMuIFdlIHRyeSB0byBtZXJnZSB0aGUga2V5cyBvZiB0aGUgcmV0dXJuIHZhbHVlcyBvZiBhbGwgdGhlIG1peGVkIGluXG4gICAqIGZ1bmN0aW9ucy4gSWYgdGhlcmUgaXMgYSBrZXkgY29uZmxpY3Qgd2UgdGhyb3cuXG4gICAqL1xuICBERUZJTkVfTUFOWV9NRVJHRUQ6IG51bGxcbn0pO1xuXG52YXIgaW5qZWN0ZWRNaXhpbnMgPSBbXTtcblxuLyoqXG4gKiBDb21wb3NpdGUgY29tcG9uZW50cyBhcmUgaGlnaGVyLWxldmVsIGNvbXBvbmVudHMgdGhhdCBjb21wb3NlIG90aGVyIGNvbXBvc2l0ZVxuICogb3IgaG9zdCBjb21wb25lbnRzLlxuICpcbiAqIFRvIGNyZWF0ZSBhIG5ldyB0eXBlIG9mIGBSZWFjdENsYXNzYCwgcGFzcyBhIHNwZWNpZmljYXRpb24gb2ZcbiAqIHlvdXIgbmV3IGNsYXNzIHRvIGBSZWFjdC5jcmVhdGVDbGFzc2AuIFRoZSBvbmx5IHJlcXVpcmVtZW50IG9mIHlvdXIgY2xhc3NcbiAqIHNwZWNpZmljYXRpb24gaXMgdGhhdCB5b3UgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gPGRpdj5IZWxsbyBXb3JsZDwvZGl2PjtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIHN1cHBvcnRzIGEgc3BlY2lmaWMgcHJvdG9jb2wgb2YgbWV0aG9kcyB0aGF0IGhhdmVcbiAqIHNwZWNpYWwgbWVhbmluZyAoZS5nLiBgcmVuZGVyYCkuIFNlZSBgUmVhY3RDbGFzc0ludGVyZmFjZWAgZm9yXG4gKiBtb3JlIHRoZSBjb21wcmVoZW5zaXZlIHByb3RvY29sLiBBbnkgb3RoZXIgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBpbiB0aGVcbiAqIGNsYXNzIHNwZWNpZmljYXRpb24gd2lsbCBiZSBhdmFpbGFibGUgb24gdGhlIHByb3RvdHlwZS5cbiAqXG4gKiBAaW50ZXJmYWNlIFJlYWN0Q2xhc3NJbnRlcmZhY2VcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RDbGFzc0ludGVyZmFjZSA9IHtcblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgTWl4aW4gb2JqZWN0cyB0byBpbmNsdWRlIHdoZW4gZGVmaW5pbmcgeW91ciBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHthcnJheX1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBtaXhpbnM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgdGhhdCBzaG91bGQgYmUgZGVmaW5lZCBvblxuICAgKiB0aGUgY29tcG9uZW50J3MgY29uc3RydWN0b3IgaW5zdGVhZCBvZiBpdHMgcHJvdG90eXBlIChzdGF0aWMgbWV0aG9kcykuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc3RhdGljczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBwcm9wIHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBwcm9wVHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgdGhpcyBjb21wb25lbnQgc2V0cyBmb3IgaXRzIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gRGVmaW5pdGlvbiBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVmFsdWVzIGluIHRoZSBtYXBwaW5nIHdpbGwgYmUgc2V0IG9uXG4gICAqIGB0aGlzLnByb3BzYCBpZiB0aGF0IHByb3AgaXMgbm90IHNwZWNpZmllZCAoaS5lLiB1c2luZyBhbiBgaW5gIGNoZWNrKS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBiZWZvcmUgYGdldEluaXRpYWxTdGF0ZWAgYW5kIHRoZXJlZm9yZSBjYW5ub3QgcmVseVxuICAgKiBvbiBgdGhpcy5zdGF0ZWAgb3IgdXNlIGB0aGlzLnNldFN0YXRlYC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldERlZmF1bHRQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEludm9rZWQgb25jZSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZFxuICAgKiBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiBgdGhpcy5zdGF0ZWAuXG4gICAqXG4gICAqICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHJldHVybiB7XG4gICAqICAgICAgIGlzT246IGZhbHNlLFxuICAgKiAgICAgICBmb29CYXo6IG5ldyBCYXpGb28oKVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldEluaXRpYWxTdGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBnZXRDaGlsZENvbnRleHQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXG4gIC8qKlxuICAgKiBVc2VzIHByb3BzIGZyb20gYHRoaXMucHJvcHNgIGFuZCBzdGF0ZSBmcm9tIGB0aGlzLnN0YXRlYCB0byByZW5kZXIgdGhlXG4gICAqIHN0cnVjdHVyZSBvZiB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBObyBndWFyYW50ZWVzIGFyZSBtYWRlIGFib3V0IHdoZW4gb3IgaG93IG9mdGVuIHRoaXMgbWV0aG9kIGlzIGludm9rZWQsIHNvXG4gICAqIGl0IG11c3Qgbm90IGhhdmUgc2lkZSBlZmZlY3RzLlxuICAgKlxuICAgKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAqICAgICB2YXIgbmFtZSA9IHRoaXMucHJvcHMubmFtZTtcbiAgICogICAgIHJldHVybiA8ZGl2PkhlbGxvLCB7bmFtZX0hPC9kaXY+O1xuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG4gICAqIEBub3NpZGVlZmZlY3RzXG4gICAqIEByZXF1aXJlZFxuICAgKi9cbiAgcmVuZGVyOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8vID09PT0gRGVsZWdhdGUgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluaXRpYWxseSBjcmVhdGVkIGFuZCBhYm91dCB0byBiZSBtb3VudGVkLlxuICAgKiBUaGlzIG1heSBoYXZlIHNpZGUgZWZmZWN0cywgYnV0IGFueSBleHRlcm5hbCBzdWJzY3JpcHRpb25zIG9yIGRhdGEgY3JlYXRlZFxuICAgKiBieSB0aGlzIG1ldGhvZCBtdXN0IGJlIGNsZWFuZWQgdXAgaW4gYGNvbXBvbmVudFdpbGxVbm1vdW50YC5cbiAgICpcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgYW5kIGhhcyBhIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICogSG93ZXZlciwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIERPTSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICogYmVlbiBtb3VudGVkIChpbml0aWFsaXplZCBhbmQgcmVuZGVyZWQpIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnREaWRNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCByZWNlaXZlcyBuZXcgcHJvcHMuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHJlYWN0IHRvIGEgcHJvcCB0cmFuc2l0aW9uIGJ5IHVwZGF0aW5nIHRoZVxuICAgKiBzdGF0ZSB1c2luZyBgdGhpcy5zZXRTdGF0ZWAuIEN1cnJlbnQgcHJvcHMgYXJlIGFjY2Vzc2VkIHZpYSBgdGhpcy5wcm9wc2AuXG4gICAqXG4gICAqICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0Q29udGV4dCkge1xuICAgKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAqICAgICAgIGxpa2VzSW5jcmVhc2luZzogbmV4dFByb3BzLmxpa2VDb3VudCA+IHRoaXMucHJvcHMubGlrZUNvdW50XG4gICAqICAgICB9KTtcbiAgICogICB9XG4gICAqXG4gICAqIE5PVEU6IFRoZXJlIGlzIG5vIGVxdWl2YWxlbnQgYGNvbXBvbmVudFdpbGxSZWNlaXZlU3RhdGVgLiBBbiBpbmNvbWluZyBwcm9wXG4gICAqIHRyYW5zaXRpb24gbWF5IGNhdXNlIGEgc3RhdGUgY2hhbmdlLCBidXQgdGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlLiBJZiB5b3VcbiAgICogbmVlZCBpdCwgeW91IGFyZSBwcm9iYWJseSBsb29raW5nIGZvciBgY29tcG9uZW50V2lsbFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoaWxlIGRlY2lkaW5nIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2ZcbiAgICogcmVjZWl2aW5nIG5ldyBwcm9wcywgc3RhdGUgYW5kL29yIGNvbnRleHQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGByZXR1cm4gZmFsc2VgIHdoZW4geW91J3JlIGNlcnRhaW4gdGhhdCB0aGVcbiAgICogdHJhbnNpdGlvbiB0byB0aGUgbmV3IHByb3BzL3N0YXRlL2NvbnRleHQgd2lsbCBub3QgcmVxdWlyZSBhIGNvbXBvbmVudFxuICAgKiB1cGRhdGUuXG4gICAqXG4gICAqICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcbiAgICogICAgIHJldHVybiAhZXF1YWwobmV4dFByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dFN0YXRlLCB0aGlzLnN0YXRlKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dENvbnRleHQsIHRoaXMuY29udGV4dCk7XG4gICAqICAgfVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tcG9uZW50IHNob3VsZCB1cGRhdGUuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byB1cGRhdGUgZHVlIHRvIGEgdHJhbnNpdGlvbiBmcm9tXG4gICAqIGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YCB0byBgbmV4dFByb3BzYCwgYG5leHRTdGF0ZWBcbiAgICogYW5kIGBuZXh0Q29udGV4dGAuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHBlcmZvcm0gcHJlcGFyYXRpb24gYmVmb3JlIGFuIHVwZGF0ZSBvY2N1cnMuXG4gICAqXG4gICAqIE5PVEU6IFlvdSAqKmNhbm5vdCoqIHVzZSBgdGhpcy5zZXRTdGF0ZSgpYCBpbiB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCdzIERPTSByZXByZXNlbnRhdGlvbiBoYXMgYmVlbiB1cGRhdGVkLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgKiBiZWVuIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcmV2UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q29udGV4dFxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgYW5kIGhhdmVcbiAgICogaXRzIERPTSByZXByZXNlbnRhdGlvbiBkZXN0cm95ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGRlYWxsb2NhdGUgYW55IGV4dGVybmFsIHJlc291cmNlcy5cbiAgICpcbiAgICogTk9URTogVGhlcmUgaXMgbm8gYGNvbXBvbmVudERpZFVubW91bnRgIHNpbmNlIHlvdXIgY29tcG9uZW50IHdpbGwgaGF2ZSBiZWVuXG4gICAqIGRlc3Ryb3llZCBieSB0aGF0IHBvaW50LlxuICAgKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gQWR2YW5jZWQgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbXBvbmVudCdzIGN1cnJlbnRseSBtb3VudGVkIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAb3ZlcnJpZGFibGVcbiAgICovXG4gIHVwZGF0ZUNvbXBvbmVudDogU3BlY1BvbGljeS5PVkVSUklERV9CQVNFXG5cbn07XG5cbi8qKlxuICogTWFwcGluZyBmcm9tIGNsYXNzIHNwZWNpZmljYXRpb24ga2V5cyB0byBzcGVjaWFsIHByb2Nlc3NpbmcgZnVuY3Rpb25zLlxuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGFyZSBkZWNsYXJlZCBsaWtlIGluc3RhbmNlIHByb3BlcnRpZXMgaW4gdGhlIHNwZWNpZmljYXRpb25cbiAqIHdoZW4gZGVmaW5pbmcgY2xhc3NlcyB1c2luZyBgUmVhY3QuY3JlYXRlQ2xhc3NgLCB0aGV5IGFyZSBhY3R1YWxseSBzdGF0aWNcbiAqIGFuZCBhcmUgYWNjZXNzaWJsZSBvbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZCBvZiB0aGUgcHJvdG90eXBlLiBEZXNwaXRlXG4gKiBiZWluZyBzdGF0aWMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIG91dHNpZGUgb2YgdGhlIFwic3RhdGljc1wiIGtleSB1bmRlclxuICogd2hpY2ggYWxsIG90aGVyIHN0YXRpYyBtZXRob2RzIGFyZSBkZWZpbmVkLlxuICovXG52YXIgUkVTRVJWRURfU1BFQ19LRVlTID0ge1xuICBkaXNwbGF5TmFtZTogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBkaXNwbGF5TmFtZSkge1xuICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gIH0sXG4gIG1peGluczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBtaXhpbnMpIHtcbiAgICBpZiAobWl4aW5zKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgbWl4aW5zW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMgPSBfYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcywgY2hpbGRDb250ZXh0VHlwZXMpO1xuICB9LFxuICBjb250ZXh0VHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgY29udGV4dFR5cGVzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY29udGV4dFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNvbnRleHQpO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMgPSBfYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMsIGNvbnRleHRUeXBlcyk7XG4gIH0sXG4gIC8qKlxuICAgKiBTcGVjaWFsIGNhc2UgZ2V0RGVmYXVsdFByb3BzIHdoaWNoIHNob3VsZCBtb3ZlIGludG8gc3RhdGljcyBidXQgcmVxdWlyZXNcbiAgICogYXV0b21hdGljIG1lcmdpbmcuXG4gICAqL1xuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24oQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLCBnZXREZWZhdWx0UHJvcHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMgPSBnZXREZWZhdWx0UHJvcHM7XG4gICAgfVxuICB9LFxuICBwcm9wVHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvcFR5cGVzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgcHJvcFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMgPSBfYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMsIHByb3BUeXBlcyk7XG4gIH0sXG4gIHN0YXRpY3M6IGZ1bmN0aW9uIChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICAgIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKTtcbiAgfSxcbiAgYXV0b2JpbmQ6IGZ1bmN0aW9uICgpIHt9IH07XG5cbi8vIG5vb3BcbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgdHlwZURlZiwgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gdHlwZURlZikge1xuICAgIGlmICh0eXBlRGVmLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgLy8gdXNlIGEgd2FybmluZyBpbnN0ZWFkIG9mIGFuIGludmFyaWFudCBzbyBjb21wb25lbnRzXG4gICAgICAvLyBkb24ndCBzaG93IHVwIGluIHByb2QgYnV0IG9ubHkgaW4gX19ERVZfX1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIHR5cGVEZWZbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogdm9pZCAwO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlKGlzQWxyZWFkeURlZmluZWQsIG5hbWUpIHtcbiAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpID8gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXSA6IG51bGw7XG5cbiAgLy8gRGlzYWxsb3cgb3ZlcnJpZGluZyBvZiBiYXNlIGNsYXNzIG1ldGhvZHMgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgaWYgKFJlYWN0Q2xhc3NNaXhpbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5PVkVSUklERV9CQVNFKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgYCVzYCBmcm9tIHlvdXIgY2xhc3Mgc3BlY2lmaWNhdGlvbi4gRW5zdXJlIHRoYXQgeW91ciBtZXRob2QgbmFtZXMgZG8gbm90IG92ZXJsYXAgd2l0aCBSZWFjdCBtZXRob2RzLicsIG5hbWUpIDogX3Byb2RJbnZhcmlhbnQoJzczJywgbmFtZSkgOiB2b2lkIDA7XG4gIH1cblxuICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG4gIGlmIChpc0FscmVhZHlEZWZpbmVkKSB7XG4gICAgIShzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lIGAlc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSB0byBhIG1peGluLicsIG5hbWUpIDogX3Byb2RJbnZhcmlhbnQoJzc0JywgbmFtZSkgOiB2b2lkIDA7XG4gIH1cbn1cblxuLyoqXG4gKiBNaXhpbiBoZWxwZXIgd2hpY2ggaGFuZGxlcyBwb2xpY3kgdmFsaWRhdGlvbiBhbmQgcmVzZXJ2ZWRcbiAqIHNwZWNpZmljYXRpb24ga2V5cyB3aGVuIGJ1aWxkaW5nIFJlYWN0IGNsYXNzZXMuXG4gKi9cbmZ1bmN0aW9uIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKSB7XG4gIGlmICghc3BlYykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgdHlwZW9mU3BlYyA9IHR5cGVvZiBzcGVjO1xuICAgICAgdmFyIGlzTWl4aW5WYWxpZCA9IHR5cGVvZlNwZWMgPT09ICdvYmplY3QnICYmIHNwZWMgIT09IG51bGw7XG5cbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGlzTWl4aW5WYWxpZCwgJyVzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvIGluY2x1ZGUgYSBtaXhpbiB0aGF0IGlzIGVpdGhlciBudWxsICcgKyAnb3Igbm90IGFuIG9iamVjdC4gQ2hlY2sgdGhlIG1peGlucyBpbmNsdWRlZCBieSB0aGUgY29tcG9uZW50LCAnICsgJ2FzIHdlbGwgYXMgYW55IG1peGlucyB0aGV5IGluY2x1ZGUgdGhlbXNlbHZlcy4gJyArICdFeHBlY3RlZCBvYmplY3QgYnV0IGdvdCAlcy4nLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDbGFzcycsIHNwZWMgPT09IG51bGwgPyBudWxsIDogdHlwZW9mU3BlYykgOiB2b2lkIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgISh0eXBlb2Ygc3BlYyAhPT0gJ2Z1bmN0aW9uJykgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byB1c2UgYSBjb21wb25lbnQgY2xhc3Mgb3IgZnVuY3Rpb24gYXMgYSBtaXhpbi4gSW5zdGVhZCwganVzdCB1c2UgYSByZWd1bGFyIG9iamVjdC4nKSA6IF9wcm9kSW52YXJpYW50KCc3NScpIDogdm9pZCAwO1xuICAhIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzcGVjKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvIHVzZSBhIGNvbXBvbmVudCBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogX3Byb2RJbnZhcmlhbnQoJzc2JykgOiB2b2lkIDA7XG5cbiAgdmFyIHByb3RvID0gQ29uc3RydWN0b3IucHJvdG90eXBlO1xuICB2YXIgYXV0b0JpbmRQYWlycyA9IHByb3RvLl9fcmVhY3RBdXRvQmluZFBhaXJzO1xuXG4gIC8vIEJ5IGhhbmRsaW5nIG1peGlucyBiZWZvcmUgYW55IG90aGVyIHByb3BlcnRpZXMsIHdlIGVuc3VyZSB0aGUgc2FtZVxuICAvLyBjaGFpbmluZyBvcmRlciBpcyBhcHBsaWVkIHRvIG1ldGhvZHMgd2l0aCBERUZJTkVfTUFOWSBwb2xpY3ksIHdoZXRoZXJcbiAgLy8gbWl4aW5zIGFyZSBsaXN0ZWQgYmVmb3JlIG9yIGFmdGVyIHRoZXNlIG1ldGhvZHMgaW4gdGhlIHNwZWMuXG4gIGlmIChzcGVjLmhhc093blByb3BlcnR5KE1JWElOU19LRVkpKSB7XG4gICAgUkVTRVJWRURfU1BFQ19LRVlTLm1peGlucyhDb25zdHJ1Y3Rvciwgc3BlYy5taXhpbnMpO1xuICB9XG5cbiAgZm9yICh2YXIgbmFtZSBpbiBzcGVjKSB7XG4gICAgaWYgKCFzcGVjLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSA9PT0gTUlYSU5TX0tFWSkge1xuICAgICAgLy8gV2UgaGF2ZSBhbHJlYWR5IGhhbmRsZWQgbWl4aW5zIGluIGEgc3BlY2lhbCBjYXNlIGFib3ZlLlxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIHByb3BlcnR5ID0gc3BlY1tuYW1lXTtcbiAgICB2YXIgaXNBbHJlYWR5RGVmaW5lZCA9IHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUoaXNBbHJlYWR5RGVmaW5lZCwgbmFtZSk7XG5cbiAgICBpZiAoUkVTRVJWRURfU1BFQ19LRVlTLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBSRVNFUlZFRF9TUEVDX0tFWVNbbmFtZV0oQ29uc3RydWN0b3IsIHByb3BlcnR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2V0dXAgbWV0aG9kcyBvbiBwcm90b3R5cGU6XG4gICAgICAvLyBUaGUgZm9sbG93aW5nIG1lbWJlciBtZXRob2RzIHNob3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBib3VuZDpcbiAgICAgIC8vIDEuIEV4cGVjdGVkIFJlYWN0Q2xhc3MgbWV0aG9kcyAoaW4gdGhlIFwiaW50ZXJmYWNlXCIpLlxuICAgICAgLy8gMi4gT3ZlcnJpZGRlbiBtZXRob2RzICh0aGF0IHdlcmUgbWl4ZWQgaW4pLlxuICAgICAgdmFyIGlzUmVhY3RDbGFzc01ldGhvZCA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIHZhciBzaG91bGRBdXRvQmluZCA9IGlzRnVuY3Rpb24gJiYgIWlzUmVhY3RDbGFzc01ldGhvZCAmJiAhaXNBbHJlYWR5RGVmaW5lZCAmJiBzcGVjLmF1dG9iaW5kICE9PSBmYWxzZTtcblxuICAgICAgaWYgKHNob3VsZEF1dG9CaW5kKSB7XG4gICAgICAgIGF1dG9CaW5kUGFpcnMucHVzaChuYW1lLCBwcm9wZXJ0eSk7XG4gICAgICAgIHByb3RvW25hbWVdID0gcHJvcGVydHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNBbHJlYWR5RGVmaW5lZCkge1xuICAgICAgICAgIHZhciBzcGVjUG9saWN5ID0gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXTtcblxuICAgICAgICAgIC8vIFRoZXNlIGNhc2VzIHNob3VsZCBhbHJlYWR5IGJlIGNhdWdodCBieSB2YWxpZGF0ZU1ldGhvZE92ZXJyaWRlLlxuICAgICAgICAgICEoaXNSZWFjdENsYXNzTWV0aG9kICYmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCB8fCBzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZKSkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogVW5leHBlY3RlZCBzcGVjIHBvbGljeSAlcyBmb3Iga2V5ICVzIHdoZW4gbWl4aW5nIGluIGNvbXBvbmVudCBzcGVjcy4nLCBzcGVjUG9saWN5LCBuYW1lKSA6IF9wcm9kSW52YXJpYW50KCc3NycsIHNwZWNQb2xpY3ksIG5hbWUpIDogdm9pZCAwO1xuXG4gICAgICAgICAgLy8gRm9yIG1ldGhvZHMgd2hpY2ggYXJlIGRlZmluZWQgbW9yZSB0aGFuIG9uY2UsIGNhbGwgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgLy8gbWV0aG9kcyBiZWZvcmUgY2FsbGluZyB0aGUgbmV3IHByb3BlcnR5LCBtZXJnaW5nIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgICAgIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgLy8gQWRkIHZlcmJvc2UgZGlzcGxheU5hbWUgdG8gdGhlIGZ1bmN0aW9uLCB3aGljaCBoZWxwcyB3aGVuIGxvb2tpbmdcbiAgICAgICAgICAgIC8vIGF0IHByb2ZpbGluZyB0b29scy5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbicgJiYgc3BlYy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICBwcm90b1tuYW1lXS5kaXNwbGF5TmFtZSA9IHNwZWMuZGlzcGxheU5hbWUgKyAnXycgKyBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICBpZiAoIXN0YXRpY3MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yICh2YXIgbmFtZSBpbiBzdGF0aWNzKSB7XG4gICAgdmFyIHByb3BlcnR5ID0gc3RhdGljc1tuYW1lXTtcbiAgICBpZiAoIXN0YXRpY3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBpc1Jlc2VydmVkID0gbmFtZSBpbiBSRVNFUlZFRF9TUEVDX0tFWVM7XG4gICAgISFpc1Jlc2VydmVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgYSByZXNlcnZlZCBwcm9wZXJ0eSwgYCVzYCwgdGhhdCBzaG91bGRuXFwndCBiZSBvbiB0aGUgXCJzdGF0aWNzXCIga2V5LiBEZWZpbmUgaXQgYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgaW5zdGVhZDsgaXQgd2lsbCBzdGlsbCBiZSBhY2Nlc3NpYmxlIG9uIHRoZSBjb25zdHJ1Y3Rvci4nLCBuYW1lKSA6IF9wcm9kSW52YXJpYW50KCc3OCcsIG5hbWUpIDogdm9pZCAwO1xuXG4gICAgdmFyIGlzSW5oZXJpdGVkID0gbmFtZSBpbiBDb25zdHJ1Y3RvcjtcbiAgICAhIWlzSW5oZXJpdGVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgYCVzYCBvbiB5b3VyIGNvbXBvbmVudCBtb3JlIHRoYW4gb25jZS4gVGhpcyBjb25mbGljdCBtYXkgYmUgZHVlIHRvIGEgbWl4aW4uJywgbmFtZSkgOiBfcHJvZEludmFyaWFudCgnNzknLCBuYW1lKSA6IHZvaWQgMDtcbiAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMsIGJ1dCB0aHJvdyBpZiBib3RoIGNvbnRhaW4gdGhlIHNhbWUga2V5LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvbmUgVGhlIGZpcnN0IG9iamVjdCwgd2hpY2ggaXMgbXV0YXRlZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSB0d28gVGhlIHNlY29uZCBvYmplY3RcbiAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhvbmUsIHR3bykge1xuICAhKG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogQ2Fubm90IG1lcmdlIG5vbi1vYmplY3RzLicpIDogX3Byb2RJbnZhcmlhbnQoJzgwJykgOiB2b2lkIDA7XG5cbiAgZm9yICh2YXIga2V5IGluIHR3bykge1xuICAgIGlmICh0d28uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgIShvbmVba2V5XSA9PT0gdW5kZWZpbmVkKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKCk6IFRyaWVkIHRvIG1lcmdlIHR3byBvYmplY3RzIHdpdGggdGhlIHNhbWUga2V5OiBgJXNgLiBUaGlzIGNvbmZsaWN0IG1heSBiZSBkdWUgdG8gYSBtaXhpbjsgaW4gcGFydGljdWxhciwgdGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHR3byBnZXRJbml0aWFsU3RhdGUoKSBvciBnZXREZWZhdWx0UHJvcHMoKSBtZXRob2RzIHJldHVybmluZyBvYmplY3RzIHdpdGggY2xhc2hpbmcga2V5cy4nLCBrZXkpIDogX3Byb2RJbnZhcmlhbnQoJzgxJywga2V5KSA6IHZvaWQgMDtcbiAgICAgIG9uZVtrZXldID0gdHdvW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBvbmU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBtZXJnZXMgdGhlaXIgcmV0dXJuIHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbmUgRnVuY3Rpb24gdG8gaW52b2tlIGZpcnN0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ob25lLCB0d28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZFJlc3VsdCgpIHtcbiAgICB2YXIgYSA9IG9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHZhciBiID0gdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGEgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGI7XG4gICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICB2YXIgYyA9IHt9O1xuICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYSk7XG4gICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBiKTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHR3byBmdW5jdGlvbnMgYW5kIGlnbm9yZXMgdGhlaXIgcmV0dXJuIHZhbGVzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0d28gRnVuY3Rpb24gdG8gaW52b2tlIHNlY29uZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ob25lLCB0d28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBCaW5kcyBhIG1ldGhvZCB0byB0aGUgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgQ29tcG9uZW50IHdob3NlIG1ldGhvZCBpcyBnb2luZyB0byBiZSBib3VuZC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZXRob2QgdG8gYmUgYm91bmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGJvdW5kIG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKSB7XG4gIHZhciBib3VuZE1ldGhvZCA9IG1ldGhvZC5iaW5kKGNvbXBvbmVudCk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQ29udGV4dCA9IGNvbXBvbmVudDtcbiAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRNZXRob2QgPSBtZXRob2Q7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gbnVsbDtcbiAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZTtcbiAgICB2YXIgX2JpbmQgPSBib3VuZE1ldGhvZC5iaW5kO1xuICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbiAobmV3VGhpcykge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICAvLyBVc2VyIGlzIHRyeWluZyB0byBiaW5kKCkgYW4gYXV0b2JvdW5kIG1ldGhvZDsgd2UgZWZmZWN0aXZlbHkgd2lsbFxuICAgICAgLy8gaWdub3JlIHRoZSB2YWx1ZSBvZiBcInRoaXNcIiB0aGF0IHRoZSB1c2VyIGlzIHRyeWluZyB0byB1c2UsIHNvXG4gICAgICAvLyBsZXQncyB3YXJuLlxuICAgICAgaWYgKG5ld1RoaXMgIT09IGNvbXBvbmVudCAmJiBuZXdUaGlzICE9PSBudWxsKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArICdjb21wb25lbnQgaW5zdGFuY2UuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdm9pZCAwO1xuICAgICAgfSBlbHNlIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdiaW5kKCk6IFlvdSBhcmUgYmluZGluZyBhIGNvbXBvbmVudCBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC4gJyArICdSZWFjdCBkb2VzIHRoaXMgZm9yIHlvdSBhdXRvbWF0aWNhbGx5IGluIGEgaGlnaC1wZXJmb3JtYW5jZSAnICsgJ3dheSwgc28geW91IGNhbiBzYWZlbHkgcmVtb3ZlIHRoaXMgY2FsbC4gU2VlICVzJywgY29tcG9uZW50TmFtZSkgOiB2b2lkIDA7XG4gICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcbiAgICAgIH1cbiAgICAgIHZhciByZWJvdW5kTWV0aG9kID0gX2JpbmQuYXBwbHkoYm91bmRNZXRob2QsIGFyZ3VtZW50cyk7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gYXJncztcbiAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGJvdW5kTWV0aG9kO1xufVxuXG4vKipcbiAqIEJpbmRzIGFsbCBhdXRvLWJvdW5kIG1ldGhvZHMgaW4gYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuICovXG5mdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2RzKGNvbXBvbmVudCkge1xuICB2YXIgcGFpcnMgPSBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kUGFpcnM7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICB2YXIgYXV0b0JpbmRLZXkgPSBwYWlyc1tpXTtcbiAgICB2YXIgbWV0aG9kID0gcGFpcnNbaSArIDFdO1xuICAgIGNvbXBvbmVudFthdXRvQmluZEtleV0gPSBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIG1vcmUgdG8gdGhlIFJlYWN0Q2xhc3MgYmFzZSBjbGFzcy4gVGhlc2UgYXJlIGFsbCBsZWdhY3kgZmVhdHVyZXMgYW5kXG4gKiB0aGVyZWZvcmUgbm90IGFscmVhZHkgcGFydCBvZiB0aGUgbW9kZXJuIFJlYWN0Q29tcG9uZW50LlxuICovXG52YXIgUmVhY3RDbGFzc01peGluID0ge1xuXG4gIC8qKlxuICAgKiBUT0RPOiBUaGlzIHdpbGwgYmUgZGVwcmVjYXRlZCBiZWNhdXNlIHN0YXRlIHNob3VsZCBhbHdheXMga2VlcCBhIGNvbnNpc3RlbnRcbiAgICogdHlwZSBzaWduYXR1cmUgYW5kIHRoZSBvbmx5IHVzZSBjYXNlIGZvciB0aGlzLCBpcyB0byBhdm9pZCB0aGF0LlxuICAgKi9cbiAgcmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAobmV3U3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlU3RhdGUodGhpcywgbmV3U3RhdGUpO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjaywgJ3JlcGxhY2VTdGF0ZScpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZXIuaXNNb3VudGVkKHRoaXMpO1xuICB9XG59O1xuXG52YXIgUmVhY3RDbGFzc0NvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHt9O1xuX2Fzc2lnbihSZWFjdENsYXNzQ29tcG9uZW50LnByb3RvdHlwZSwgUmVhY3RDb21wb25lbnQucHJvdG90eXBlLCBSZWFjdENsYXNzTWl4aW4pO1xuXG4vKipcbiAqIE1vZHVsZSBmb3IgY3JlYXRpbmcgY29tcG9zaXRlIGNvbXBvbmVudHMuXG4gKlxuICogQGNsYXNzIFJlYWN0Q2xhc3NcbiAqL1xudmFyIFJlYWN0Q2xhc3MgPSB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb21wb3NpdGUgY29tcG9uZW50IGNsYXNzIGdpdmVuIGEgY2xhc3Mgc3BlY2lmaWNhdGlvbi5cbiAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdG9wLWxldmVsLWFwaS5odG1sI3JlYWN0LmNyZWF0ZWNsYXNzXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzcGVjIENsYXNzIHNwZWNpZmljYXRpb24gKHdoaWNoIG11c3QgZGVmaW5lIGByZW5kZXJgKS5cbiAgICogQHJldHVybiB7ZnVuY3Rpb259IENvbXBvbmVudCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlQ2xhc3M6IGZ1bmN0aW9uIChzcGVjKSB7XG4gICAgdmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gICAgICAvLyBUaGlzIGNvbnN0cnVjdG9yIGdldHMgb3ZlcnJpZGRlbiBieSBtb2Nrcy4gVGhlIGFyZ3VtZW50IGlzIHVzZWRcbiAgICAgIC8vIGJ5IG1vY2tzIHRvIGFzc2VydCBvbiB3aGF0IGdldHMgbW91bnRlZC5cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcyBpbnN0YW5jZW9mIENvbnN0cnVjdG9yLCAnU29tZXRoaW5nIGlzIGNhbGxpbmcgYSBSZWFjdCBjb21wb25lbnQgZGlyZWN0bHkuIFVzZSBhIGZhY3Rvcnkgb3IgJyArICdKU1ggaW5zdGVhZC4gU2VlOiBodHRwczovL2ZiLm1lL3JlYWN0LWxlZ2FjeWZhY3RvcnknKSA6IHZvaWQgMDtcbiAgICAgIH1cblxuICAgICAgLy8gV2lyZSB1cCBhdXRvLWJpbmRpbmdcbiAgICAgIGlmICh0aGlzLl9fcmVhY3RBdXRvQmluZFBhaXJzLmxlbmd0aCkge1xuICAgICAgICBiaW5kQXV0b0JpbmRNZXRob2RzKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuXG4gICAgICB0aGlzLnN0YXRlID0gbnVsbDtcblxuICAgICAgLy8gUmVhY3RDbGFzc2VzIGRvZXNuJ3QgaGF2ZSBjb25zdHJ1Y3RvcnMuIEluc3RlYWQsIHRoZXkgdXNlIHRoZVxuICAgICAgLy8gZ2V0SW5pdGlhbFN0YXRlIGFuZCBjb21wb25lbnRXaWxsTW91bnQgbWV0aG9kcyBmb3IgaW5pdGlhbGl6YXRpb24uXG5cbiAgICAgIHZhciBpbml0aWFsU3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSA/IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCkgOiBudWxsO1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgLy8gV2UgYWxsb3cgYXV0by1tb2NrcyB0byBwcm9jZWVkIGFzIGlmIHRoZXkncmUgcmV0dXJuaW5nIG51bGwuXG4gICAgICAgIGlmIChpbml0aWFsU3RhdGUgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmdldEluaXRpYWxTdGF0ZS5faXNNb2NrRnVuY3Rpb24pIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGJhZCBwcmFjdGljZS4gQ29uc2lkZXIgd2FybmluZyBoZXJlIGFuZFxuICAgICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG4gICAgICAgICAgaW5pdGlhbFN0YXRlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRJbml0aWFsU3RhdGUoKTogbXVzdCByZXR1cm4gYW4gb2JqZWN0IG9yIG51bGwnLCBDb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IF9wcm9kSW52YXJpYW50KCc4MicsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogdm9pZCAwO1xuXG4gICAgICB0aGlzLnN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgIH07XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gbmV3IFJlYWN0Q2xhc3NDb21wb25lbnQoKTtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuX19yZWFjdEF1dG9CaW5kUGFpcnMgPSBbXTtcblxuICAgIGluamVjdGVkTWl4aW5zLmZvckVhY2gobWl4U3BlY0ludG9Db21wb25lbnQuYmluZChudWxsLCBDb25zdHJ1Y3RvcikpO1xuXG4gICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgZGVmYXVsdFByb3BzIHByb3BlcnR5IGFmdGVyIGFsbCBtaXhpbnMgaGF2ZSBiZWVuIG1lcmdlZC5cbiAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5kZWZhdWx0UHJvcHMgPSBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMoKTtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gVGhpcyBpcyBhIHRhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSB1c2Ugb2YgdGhlc2UgbWV0aG9kIG5hbWVzIGlzIG9rLFxuICAgICAgLy8gc2luY2UgaXQncyB1c2VkIHdpdGggY3JlYXRlQ2xhc3MuIElmIGl0J3Mgbm90LCB0aGVuIGl0J3MgbGlrZWx5IGFcbiAgICAgIC8vIG1pc3Rha2Ugc28gd2UnbGwgd2FybiB5b3UgdG8gdXNlIHRoZSBzdGF0aWMgcHJvcGVydHksIHByb3BlcnR5XG4gICAgICAvLyBpbml0aWFsaXplciBvciBjb25zdHJ1Y3RvciByZXNwZWN0aXZlbHkuXG4gICAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUpIHtcbiAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZS5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuICAgICAgfVxuICAgIH1cblxuICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUucmVuZGVyID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZUNsYXNzKC4uLik6IENsYXNzIHNwZWNpZmljYXRpb24gbXVzdCBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuJykgOiBfcHJvZEludmFyaWFudCgnODMnKSA6IHZvaWQgMDtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFNob3VsZFVwZGF0ZSwgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRTaG91bGRVcGRhdGUoKS4gRGlkIHlvdSBtZWFuIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpPyAnICsgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICsgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB2b2lkIDA7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB2b2lkIDA7XG4gICAgfVxuXG4gICAgLy8gUmVkdWNlIHRpbWUgc3BlbnQgZG9pbmcgbG9va3VwcyBieSBzZXR0aW5nIHRoZXNlIG9uIHRoZSBwcm90b3R5cGUuXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfSxcblxuICBpbmplY3Rpb246IHtcbiAgICBpbmplY3RNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG4gICAgICBpbmplY3RlZE1peGlucy5wdXNoKG1peGluKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENsYXNzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi9SZWFjdENsYXNzLmpzXG4gKiogbW9kdWxlIGlkID0gNTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZhY3Rvcmllc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgZmFjdG9yeSB0aGF0IGNyZWF0ZXMgSFRNTCB0YWcgZWxlbWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xudmFyIGNyZWF0ZURPTUZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xuICBjcmVhdGVET01GYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3Rvcnk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcHBpbmcgZnJvbSBzdXBwb3J0ZWQgSFRNTCB0YWdzIHRvIGBSZWFjdERPTUNvbXBvbmVudGAgY2xhc3Nlcy5cbiAqIFRoaXMgaXMgYWxzbyBhY2Nlc3NpYmxlIHZpYSBgUmVhY3QuRE9NYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBSZWFjdERPTUZhY3RvcmllcyA9IHtcbiAgYTogY3JlYXRlRE9NRmFjdG9yeSgnYScpLFxuICBhYmJyOiBjcmVhdGVET01GYWN0b3J5KCdhYmJyJyksXG4gIGFkZHJlc3M6IGNyZWF0ZURPTUZhY3RvcnkoJ2FkZHJlc3MnKSxcbiAgYXJlYTogY3JlYXRlRE9NRmFjdG9yeSgnYXJlYScpLFxuICBhcnRpY2xlOiBjcmVhdGVET01GYWN0b3J5KCdhcnRpY2xlJyksXG4gIGFzaWRlOiBjcmVhdGVET01GYWN0b3J5KCdhc2lkZScpLFxuICBhdWRpbzogY3JlYXRlRE9NRmFjdG9yeSgnYXVkaW8nKSxcbiAgYjogY3JlYXRlRE9NRmFjdG9yeSgnYicpLFxuICBiYXNlOiBjcmVhdGVET01GYWN0b3J5KCdiYXNlJyksXG4gIGJkaTogY3JlYXRlRE9NRmFjdG9yeSgnYmRpJyksXG4gIGJkbzogY3JlYXRlRE9NRmFjdG9yeSgnYmRvJyksXG4gIGJpZzogY3JlYXRlRE9NRmFjdG9yeSgnYmlnJyksXG4gIGJsb2NrcXVvdGU6IGNyZWF0ZURPTUZhY3RvcnkoJ2Jsb2NrcXVvdGUnKSxcbiAgYm9keTogY3JlYXRlRE9NRmFjdG9yeSgnYm9keScpLFxuICBicjogY3JlYXRlRE9NRmFjdG9yeSgnYnInKSxcbiAgYnV0dG9uOiBjcmVhdGVET01GYWN0b3J5KCdidXR0b24nKSxcbiAgY2FudmFzOiBjcmVhdGVET01GYWN0b3J5KCdjYW52YXMnKSxcbiAgY2FwdGlvbjogY3JlYXRlRE9NRmFjdG9yeSgnY2FwdGlvbicpLFxuICBjaXRlOiBjcmVhdGVET01GYWN0b3J5KCdjaXRlJyksXG4gIGNvZGU6IGNyZWF0ZURPTUZhY3RvcnkoJ2NvZGUnKSxcbiAgY29sOiBjcmVhdGVET01GYWN0b3J5KCdjb2wnKSxcbiAgY29sZ3JvdXA6IGNyZWF0ZURPTUZhY3RvcnkoJ2NvbGdyb3VwJyksXG4gIGRhdGE6IGNyZWF0ZURPTUZhY3RvcnkoJ2RhdGEnKSxcbiAgZGF0YWxpc3Q6IGNyZWF0ZURPTUZhY3RvcnkoJ2RhdGFsaXN0JyksXG4gIGRkOiBjcmVhdGVET01GYWN0b3J5KCdkZCcpLFxuICBkZWw6IGNyZWF0ZURPTUZhY3RvcnkoJ2RlbCcpLFxuICBkZXRhaWxzOiBjcmVhdGVET01GYWN0b3J5KCdkZXRhaWxzJyksXG4gIGRmbjogY3JlYXRlRE9NRmFjdG9yeSgnZGZuJyksXG4gIGRpYWxvZzogY3JlYXRlRE9NRmFjdG9yeSgnZGlhbG9nJyksXG4gIGRpdjogY3JlYXRlRE9NRmFjdG9yeSgnZGl2JyksXG4gIGRsOiBjcmVhdGVET01GYWN0b3J5KCdkbCcpLFxuICBkdDogY3JlYXRlRE9NRmFjdG9yeSgnZHQnKSxcbiAgZW06IGNyZWF0ZURPTUZhY3RvcnkoJ2VtJyksXG4gIGVtYmVkOiBjcmVhdGVET01GYWN0b3J5KCdlbWJlZCcpLFxuICBmaWVsZHNldDogY3JlYXRlRE9NRmFjdG9yeSgnZmllbGRzZXQnKSxcbiAgZmlnY2FwdGlvbjogY3JlYXRlRE9NRmFjdG9yeSgnZmlnY2FwdGlvbicpLFxuICBmaWd1cmU6IGNyZWF0ZURPTUZhY3RvcnkoJ2ZpZ3VyZScpLFxuICBmb290ZXI6IGNyZWF0ZURPTUZhY3RvcnkoJ2Zvb3RlcicpLFxuICBmb3JtOiBjcmVhdGVET01GYWN0b3J5KCdmb3JtJyksXG4gIGgxOiBjcmVhdGVET01GYWN0b3J5KCdoMScpLFxuICBoMjogY3JlYXRlRE9NRmFjdG9yeSgnaDInKSxcbiAgaDM6IGNyZWF0ZURPTUZhY3RvcnkoJ2gzJyksXG4gIGg0OiBjcmVhdGVET01GYWN0b3J5KCdoNCcpLFxuICBoNTogY3JlYXRlRE9NRmFjdG9yeSgnaDUnKSxcbiAgaDY6IGNyZWF0ZURPTUZhY3RvcnkoJ2g2JyksXG4gIGhlYWQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2hlYWQnKSxcbiAgaGVhZGVyOiBjcmVhdGVET01GYWN0b3J5KCdoZWFkZXInKSxcbiAgaGdyb3VwOiBjcmVhdGVET01GYWN0b3J5KCdoZ3JvdXAnKSxcbiAgaHI6IGNyZWF0ZURPTUZhY3RvcnkoJ2hyJyksXG4gIGh0bWw6IGNyZWF0ZURPTUZhY3RvcnkoJ2h0bWwnKSxcbiAgaTogY3JlYXRlRE9NRmFjdG9yeSgnaScpLFxuICBpZnJhbWU6IGNyZWF0ZURPTUZhY3RvcnkoJ2lmcmFtZScpLFxuICBpbWc6IGNyZWF0ZURPTUZhY3RvcnkoJ2ltZycpLFxuICBpbnB1dDogY3JlYXRlRE9NRmFjdG9yeSgnaW5wdXQnKSxcbiAgaW5zOiBjcmVhdGVET01GYWN0b3J5KCdpbnMnKSxcbiAga2JkOiBjcmVhdGVET01GYWN0b3J5KCdrYmQnKSxcbiAga2V5Z2VuOiBjcmVhdGVET01GYWN0b3J5KCdrZXlnZW4nKSxcbiAgbGFiZWw6IGNyZWF0ZURPTUZhY3RvcnkoJ2xhYmVsJyksXG4gIGxlZ2VuZDogY3JlYXRlRE9NRmFjdG9yeSgnbGVnZW5kJyksXG4gIGxpOiBjcmVhdGVET01GYWN0b3J5KCdsaScpLFxuICBsaW5rOiBjcmVhdGVET01GYWN0b3J5KCdsaW5rJyksXG4gIG1haW46IGNyZWF0ZURPTUZhY3RvcnkoJ21haW4nKSxcbiAgbWFwOiBjcmVhdGVET01GYWN0b3J5KCdtYXAnKSxcbiAgbWFyazogY3JlYXRlRE9NRmFjdG9yeSgnbWFyaycpLFxuICBtZW51OiBjcmVhdGVET01GYWN0b3J5KCdtZW51JyksXG4gIG1lbnVpdGVtOiBjcmVhdGVET01GYWN0b3J5KCdtZW51aXRlbScpLFxuICBtZXRhOiBjcmVhdGVET01GYWN0b3J5KCdtZXRhJyksXG4gIG1ldGVyOiBjcmVhdGVET01GYWN0b3J5KCdtZXRlcicpLFxuICBuYXY6IGNyZWF0ZURPTUZhY3RvcnkoJ25hdicpLFxuICBub3NjcmlwdDogY3JlYXRlRE9NRmFjdG9yeSgnbm9zY3JpcHQnKSxcbiAgb2JqZWN0OiBjcmVhdGVET01GYWN0b3J5KCdvYmplY3QnKSxcbiAgb2w6IGNyZWF0ZURPTUZhY3RvcnkoJ29sJyksXG4gIG9wdGdyb3VwOiBjcmVhdGVET01GYWN0b3J5KCdvcHRncm91cCcpLFxuICBvcHRpb246IGNyZWF0ZURPTUZhY3RvcnkoJ29wdGlvbicpLFxuICBvdXRwdXQ6IGNyZWF0ZURPTUZhY3RvcnkoJ291dHB1dCcpLFxuICBwOiBjcmVhdGVET01GYWN0b3J5KCdwJyksXG4gIHBhcmFtOiBjcmVhdGVET01GYWN0b3J5KCdwYXJhbScpLFxuICBwaWN0dXJlOiBjcmVhdGVET01GYWN0b3J5KCdwaWN0dXJlJyksXG4gIHByZTogY3JlYXRlRE9NRmFjdG9yeSgncHJlJyksXG4gIHByb2dyZXNzOiBjcmVhdGVET01GYWN0b3J5KCdwcm9ncmVzcycpLFxuICBxOiBjcmVhdGVET01GYWN0b3J5KCdxJyksXG4gIHJwOiBjcmVhdGVET01GYWN0b3J5KCdycCcpLFxuICBydDogY3JlYXRlRE9NRmFjdG9yeSgncnQnKSxcbiAgcnVieTogY3JlYXRlRE9NRmFjdG9yeSgncnVieScpLFxuICBzOiBjcmVhdGVET01GYWN0b3J5KCdzJyksXG4gIHNhbXA6IGNyZWF0ZURPTUZhY3RvcnkoJ3NhbXAnKSxcbiAgc2NyaXB0OiBjcmVhdGVET01GYWN0b3J5KCdzY3JpcHQnKSxcbiAgc2VjdGlvbjogY3JlYXRlRE9NRmFjdG9yeSgnc2VjdGlvbicpLFxuICBzZWxlY3Q6IGNyZWF0ZURPTUZhY3RvcnkoJ3NlbGVjdCcpLFxuICBzbWFsbDogY3JlYXRlRE9NRmFjdG9yeSgnc21hbGwnKSxcbiAgc291cmNlOiBjcmVhdGVET01GYWN0b3J5KCdzb3VyY2UnKSxcbiAgc3BhbjogY3JlYXRlRE9NRmFjdG9yeSgnc3BhbicpLFxuICBzdHJvbmc6IGNyZWF0ZURPTUZhY3RvcnkoJ3N0cm9uZycpLFxuICBzdHlsZTogY3JlYXRlRE9NRmFjdG9yeSgnc3R5bGUnKSxcbiAgc3ViOiBjcmVhdGVET01GYWN0b3J5KCdzdWInKSxcbiAgc3VtbWFyeTogY3JlYXRlRE9NRmFjdG9yeSgnc3VtbWFyeScpLFxuICBzdXA6IGNyZWF0ZURPTUZhY3RvcnkoJ3N1cCcpLFxuICB0YWJsZTogY3JlYXRlRE9NRmFjdG9yeSgndGFibGUnKSxcbiAgdGJvZHk6IGNyZWF0ZURPTUZhY3RvcnkoJ3Rib2R5JyksXG4gIHRkOiBjcmVhdGVET01GYWN0b3J5KCd0ZCcpLFxuICB0ZXh0YXJlYTogY3JlYXRlRE9NRmFjdG9yeSgndGV4dGFyZWEnKSxcbiAgdGZvb3Q6IGNyZWF0ZURPTUZhY3RvcnkoJ3Rmb290JyksXG4gIHRoOiBjcmVhdGVET01GYWN0b3J5KCd0aCcpLFxuICB0aGVhZDogY3JlYXRlRE9NRmFjdG9yeSgndGhlYWQnKSxcbiAgdGltZTogY3JlYXRlRE9NRmFjdG9yeSgndGltZScpLFxuICB0aXRsZTogY3JlYXRlRE9NRmFjdG9yeSgndGl0bGUnKSxcbiAgdHI6IGNyZWF0ZURPTUZhY3RvcnkoJ3RyJyksXG4gIHRyYWNrOiBjcmVhdGVET01GYWN0b3J5KCd0cmFjaycpLFxuICB1OiBjcmVhdGVET01GYWN0b3J5KCd1JyksXG4gIHVsOiBjcmVhdGVET01GYWN0b3J5KCd1bCcpLFxuICAndmFyJzogY3JlYXRlRE9NRmFjdG9yeSgndmFyJyksXG4gIHZpZGVvOiBjcmVhdGVET01GYWN0b3J5KCd2aWRlbycpLFxuICB3YnI6IGNyZWF0ZURPTUZhY3RvcnkoJ3dicicpLFxuXG4gIC8vIFNWR1xuICBjaXJjbGU6IGNyZWF0ZURPTUZhY3RvcnkoJ2NpcmNsZScpLFxuICBjbGlwUGF0aDogY3JlYXRlRE9NRmFjdG9yeSgnY2xpcFBhdGgnKSxcbiAgZGVmczogY3JlYXRlRE9NRmFjdG9yeSgnZGVmcycpLFxuICBlbGxpcHNlOiBjcmVhdGVET01GYWN0b3J5KCdlbGxpcHNlJyksXG4gIGc6IGNyZWF0ZURPTUZhY3RvcnkoJ2cnKSxcbiAgaW1hZ2U6IGNyZWF0ZURPTUZhY3RvcnkoJ2ltYWdlJyksXG4gIGxpbmU6IGNyZWF0ZURPTUZhY3RvcnkoJ2xpbmUnKSxcbiAgbGluZWFyR3JhZGllbnQ6IGNyZWF0ZURPTUZhY3RvcnkoJ2xpbmVhckdyYWRpZW50JyksXG4gIG1hc2s6IGNyZWF0ZURPTUZhY3RvcnkoJ21hc2snKSxcbiAgcGF0aDogY3JlYXRlRE9NRmFjdG9yeSgncGF0aCcpLFxuICBwYXR0ZXJuOiBjcmVhdGVET01GYWN0b3J5KCdwYXR0ZXJuJyksXG4gIHBvbHlnb246IGNyZWF0ZURPTUZhY3RvcnkoJ3BvbHlnb24nKSxcbiAgcG9seWxpbmU6IGNyZWF0ZURPTUZhY3RvcnkoJ3BvbHlsaW5lJyksXG4gIHJhZGlhbEdyYWRpZW50OiBjcmVhdGVET01GYWN0b3J5KCdyYWRpYWxHcmFkaWVudCcpLFxuICByZWN0OiBjcmVhdGVET01GYWN0b3J5KCdyZWN0JyksXG4gIHN0b3A6IGNyZWF0ZURPTUZhY3RvcnkoJ3N0b3AnKSxcbiAgc3ZnOiBjcmVhdGVET01GYWN0b3J5KCdzdmcnKSxcbiAgdGV4dDogY3JlYXRlRE9NRmFjdG9yeSgndGV4dCcpLFxuICB0c3BhbjogY3JlYXRlRE9NRmFjdG9yeSgndHNwYW4nKVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZhY3RvcmllcztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWFjdC9saWIvUmVhY3RET01GYWN0b3JpZXMuanNcbiAqKiBtb2R1bGUgaWQgPSA1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSBrZXlNaXJyb3Ioe1xuICBwcm9wOiBudWxsLFxuICBjb250ZXh0OiBudWxsLFxuICBjaGlsZENvbnRleHQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnM7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMuanNcbiAqKiBtb2R1bGUgaWQgPSA1N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIHRoYXQgYWxsb3cgZGVjbGFyYXRpb24gYW5kIHZhbGlkYXRpb24gb2YgcHJvcHMgdGhhdCBhcmVcbiAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICB2YXIgUHJvcHMgPSByZXF1aXJlKCdSZWFjdFByb3BUeXBlcycpO1xuICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHByb3BUeXBlczoge1xuICogICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIHByb3AgbmFtZWQgXCJkZXNjcmlwdGlvblwiLlxuICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZyxcbiAqXG4gKiAgICAgICAvLyBBIHJlcXVpcmVkIGVudW0gcHJvcCBuYW1lZCBcImNhdGVnb3J5XCIuXG4gKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsXG4gKlxuICogICAgICAgLy8gQSBwcm9wIG5hbWVkIFwiZGlhbG9nXCIgdGhhdCByZXF1aXJlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2cuXG4gKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkXG4gKiAgICAgfSxcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgeyAuLi4gfVxuICogICB9KTtcbiAqXG4gKiBBIG1vcmUgZm9ybWFsIHNwZWNpZmljYXRpb24gb2YgaG93IHRoZXNlIG1ldGhvZHMgYXJlIHVzZWQ6XG4gKlxuICogICB0eXBlIDo9IGFycmF5fGJvb2x8ZnVuY3xvYmplY3R8bnVtYmVyfHN0cmluZ3xvbmVPZihbLi4uXSl8aW5zdGFuY2VPZiguLi4pXG4gKiAgIGRlY2wgOj0gUmVhY3RQcm9wVHlwZXMue3R5cGV9KC5pc1JlcXVpcmVkKT9cbiAqXG4gKiBFYWNoIGFuZCBldmVyeSBkZWNsYXJhdGlvbiBwcm9kdWNlcyBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgc2lnbmF0dXJlLiBUaGlzXG4gKiBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6XG4gKlxuICogIHZhciBNeUxpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gKiAgICBwcm9wVHlwZXM6IHtcbiAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkIFwiaHJlZlwiLlxuICogICAgICBocmVmOiBmdW5jdGlvbihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAqICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJlxuICogICAgICAgICAgICAhKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFVSSSkpIHtcbiAqICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoXG4gKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArXG4gKiAgICAgICAgICAgIGNvbXBvbmVudE5hbWVcbiAqICAgICAgICAgICk7XG4gKiAgICAgICAgfVxuICogICAgICB9XG4gKiAgICB9LFxuICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59XG4gKiAgfSk7XG4gKlxuICogQGludGVybmFsXG4gKi9cblxudmFyIEFOT05ZTU9VUyA9ICc8PGFub255bW91cz4+JztcblxudmFyIFJlYWN0UHJvcFR5cGVzID0ge1xuICBhcnJheTogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksXG4gIGJvb2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdib29sZWFuJyksXG4gIGZ1bmM6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdmdW5jdGlvbicpLFxuICBudW1iZXI6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSxcbiAgb2JqZWN0OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignb2JqZWN0JyksXG4gIHN0cmluZzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N0cmluZycpLFxuICBzeW1ib2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzeW1ib2wnKSxcblxuICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksXG4gIGFycmF5T2Y6IGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixcbiAgZWxlbWVudDogY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCksXG4gIGluc3RhbmNlT2Y6IGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsXG4gIG5vZGU6IGNyZWF0ZU5vZGVDaGVja2VyKCksXG4gIG9iamVjdE9mOiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyLFxuICBvbmVPZjogY3JlYXRlRW51bVR5cGVDaGVja2VyLFxuICBvbmVPZlR5cGU6IGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsXG4gIHNoYXBlOiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyXG59O1xuXG4vKipcbiAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd25cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICovXG4vKmVzbGludC1kaXNhYmxlIG5vLXNlbGYtY29tcGFyZSovXG5mdW5jdGlvbiBpcyh4LCB5KSB7XG4gIC8vIFNhbWVWYWx1ZSBhbGdvcml0aG1cbiAgaWYgKHggPT09IHkpIHtcbiAgICAvLyBTdGVwcyAxLTUsIDctMTBcbiAgICAvLyBTdGVwcyA2LmItNi5lOiArMCAhPSAtMFxuICAgIHJldHVybiB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geTtcbiAgfSBlbHNlIHtcbiAgICAvLyBTdGVwIDYuYTogTmFOID09IE5hTlxuICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gIH1cbn1cbi8qZXNsaW50LWVuYWJsZSBuby1zZWxmLWNvbXBhcmUqL1xuXG4vKipcbiAqIFdlIHVzZSBhbiBFcnJvci1saWtlIG9iamVjdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBhcyBwZW9wbGUgbWF5IGNhbGxcbiAqIFByb3BUeXBlcyBkaXJlY3RseSBhbmQgaW5zcGVjdCB0aGVpciBvdXRwdXQuIEhvd2V2ZXIgd2UgZG9uJ3QgdXNlIHJlYWxcbiAqIEVycm9ycyBhbnltb3JlLiBXZSBkb24ndCBpbnNwZWN0IHRoZWlyIHN0YWNrIGFueXdheSwgYW5kIGNyZWF0aW5nIHRoZW1cbiAqIGlzIHByb2hpYml0aXZlbHkgZXhwZW5zaXZlIGlmIHRoZXkgYXJlIGNyZWF0ZWQgdG9vIG9mdGVuLCBzdWNoIGFzIHdoYXRcbiAqIGhhcHBlbnMgaW4gb25lT2ZUeXBlKCkgZm9yIGFueSB0eXBlIGJlZm9yZSB0aGUgb25lIHRoYXQgbWF0Y2hlZC5cbiAqL1xuZnVuY3Rpb24gUHJvcFR5cGVFcnJvcihtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIHRoaXMuc3RhY2sgPSAnJztcbn1cbi8vIE1ha2UgYGluc3RhbmNlb2YgRXJyb3JgIHN0aWxsIHdvcmsgZm9yIHJldHVybmVkIGVycm9ycy5cblByb3BUeXBlRXJyb3IucHJvdG90eXBlID0gRXJyb3IucHJvdG90eXBlO1xuXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBtYW51YWxQcm9wVHlwZUNhbGxDYWNoZSA9IHt9O1xuICB9XG4gIGZ1bmN0aW9uIGNoZWNrVHlwZShpc1JlcXVpcmVkLCBwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkge1xuICAgIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lIHx8IEFOT05ZTU9VUztcbiAgICBwcm9wRnVsbE5hbWUgPSBwcm9wRnVsbE5hbWUgfHwgcHJvcE5hbWU7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChzZWNyZXQgIT09IFJlYWN0UHJvcFR5cGVzU2VjcmV0ICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgY2FjaGVLZXkgPSBjb21wb25lbnROYW1lICsgJzonICsgcHJvcE5hbWU7XG4gICAgICAgIGlmICghbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdZb3UgYXJlIG1hbnVhbGx5IGNhbGxpbmcgYSBSZWFjdC5Qcm9wVHlwZXMgdmFsaWRhdGlvbiAnICsgJ2Z1bmN0aW9uIGZvciB0aGUgYCVzYCBwcm9wIG9uIGAlc2AuIFRoaXMgaXMgZGVwcmVjYXRlZCAnICsgJ2FuZCB3aWxsIG5vdCB3b3JrIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uIFlvdSBtYXkgYmUgJyArICdzZWVpbmcgdGhpcyB3YXJuaW5nIGR1ZSB0byBhIHRoaXJkLXBhcnR5IFByb3BUeXBlcyBsaWJyYXJ5LiAnICsgJ1NlZSBodHRwczovL2ZiLm1lL3JlYWN0LXdhcm5pbmctZG9udC1jYWxsLXByb3B0eXBlcyBmb3IgZGV0YWlscy4nLCBwcm9wRnVsbE5hbWUsIGNvbXBvbmVudE5hbWUpIDogdm9pZCAwO1xuICAgICAgICAgIG1hbnVhbFByb3BUeXBlQ2FsbENhY2hlW2NhY2hlS2V5XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PSBudWxsKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdSZXF1aXJlZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHdhcyBub3Qgc3BlY2lmaWVkIGluICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2hhaW5lZENoZWNrVHlwZSA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIGZhbHNlKTtcbiAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7XG5cbiAgcmV0dXJuIGNoYWluZWRDaGVja1R5cGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKGV4cGVjdGVkVHlwZSkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICBpZiAocHJvcFR5cGUgIT09IGV4cGVjdGVkVHlwZSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIC8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0J1xuICAgICAgLy8gY2hlY2ssIGJ1dCB3ZSBjYW4gb2ZmZXIgYSBtb3JlIHByZWNpc2UgZXJyb3IgbWVzc2FnZSBoZXJlIHJhdGhlciB0aGFuXG4gICAgICAvLyAnb2YgdHlwZSBgb2JqZWN0YCcuXG4gICAgICB2YXIgcHJlY2lzZVR5cGUgPSBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpO1xuXG4gICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJlY2lzZVR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2AnICsgZXhwZWN0ZWRUeXBlICsgJ2AuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpIHtcbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMobnVsbCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKHR5cGVvZiB0eXBlQ2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdQcm9wZXJ0eSBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIGNvbXBvbmVudCBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgYXJyYXlPZi4nKTtcbiAgICB9XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJywgUmVhY3RQcm9wVHlwZXNTZWNyZXQpO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgaWYgKCFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50LicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcihleHBlY3RlZENsYXNzKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghKHByb3BzW3Byb3BOYW1lXSBpbnN0YW5jZW9mIGV4cGVjdGVkQ2xhc3MpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUztcbiAgICAgIHZhciBhY3R1YWxDbGFzc05hbWUgPSBnZXRDbGFzc05hbWUocHJvcHNbcHJvcE5hbWVdKTtcbiAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBhY3R1YWxDbGFzc05hbWUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2luc3RhbmNlIG9mIGAnICsgZXhwZWN0ZWRDbGFzc05hbWUgKyAnYC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKSA6IHZvaWQgMDtcbiAgICByZXR1cm4gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGw7XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpcyhwcm9wVmFsdWUsIGV4cGVjdGVkVmFsdWVzW2ldKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgIHZhciB2YWx1ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHBlY3RlZFZhbHVlcyk7XG4gICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdmFsdWUgYCcgKyBwcm9wVmFsdWUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgb25lIG9mICcgKyB2YWx1ZXNTdHJpbmcgKyAnLicpKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICh0eXBlb2YgdHlwZUNoZWNrZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiBjb21wb25lbnQgYCcgKyBjb21wb25lbnROYW1lICsgJ2AgaGFzIGludmFsaWQgUHJvcFR5cGUgbm90YXRpb24gaW5zaWRlIG9iamVjdE9mLicpO1xuICAgIH1cbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBvYmplY3QuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcFZhbHVlKSB7XG4gICAgICBpZiAocHJvcFZhbHVlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShhcnJheU9mVHlwZUNoZWNrZXJzKSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpIDogdm9pZCAwO1xuICAgIHJldHVybiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNoZWNrZXIgPSBhcnJheU9mVHlwZUNoZWNrZXJzW2ldO1xuICAgICAgaWYgKGNoZWNrZXIocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCBSZWFjdFByb3BUeXBlc1NlY3JldCkgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb2RlQ2hlY2tlcigpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCFpc05vZGUocHJvcHNbcHJvcE5hbWVdKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIFJlYWN0Tm9kZS4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBzaGFwZVR5cGVzKSB7XG4gICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTtcbiAgICAgIGlmICghY2hlY2tlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBlcnJvciA9IGNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpIHtcbiAgc3dpdGNoICh0eXBlb2YgcHJvcFZhbHVlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiAhcHJvcFZhbHVlO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wVmFsdWUgPT09IG51bGwgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO1xuICAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gcHJvcFZhbHVlLmVudHJpZXMpIHtcbiAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxuICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTeW1ib2wocHJvcFR5cGUsIHByb3BWYWx1ZSkge1xuICAvLyBOYXRpdmUgU3ltYm9sLlxuICBpZiAocHJvcFR5cGUgPT09ICdzeW1ib2wnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddID09PSAnU3ltYm9sJ1xuICBpZiAocHJvcFZhbHVlWydAQHRvU3RyaW5nVGFnJ10gPT09ICdTeW1ib2wnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBGYWxsYmFjayBmb3Igbm9uLXNwZWMgY29tcGxpYW50IFN5bWJvbHMgd2hpY2ggYXJlIHBvbHlmaWxsZWQuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHByb3BWYWx1ZSBpbnN0YW5jZW9mIFN5bWJvbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBFcXVpdmFsZW50IG9mIGB0eXBlb2ZgIGJ1dCB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGFycmF5IGFuZCByZWdleHAuXG5mdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpIHtcbiAgdmFyIHByb3BUeXBlID0gdHlwZW9mIHByb3BWYWx1ZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG4gIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuXG4gICAgLy8gJ29iamVjdCcgZm9yIHR5cGVvZiBhIFJlZ0V4cC4gV2UnbGwgbm9ybWFsaXplIHRoaXMgaGVyZSBzbyB0aGF0IC9ibGEvXG4gICAgLy8gcGFzc2VzIFByb3BUeXBlcy5vYmplY3QuXG4gICAgcmV0dXJuICdvYmplY3QnO1xuICB9XG4gIGlmIChpc1N5bWJvbChwcm9wVHlwZSwgcHJvcFZhbHVlKSkge1xuICAgIHJldHVybiAnc3ltYm9sJztcbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFRoaXMgaGFuZGxlcyBtb3JlIHR5cGVzIHRoYW4gYGdldFByb3BUeXBlYC4gT25seSB1c2VkIGZvciBlcnJvciBtZXNzYWdlcy5cbi8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLlxuZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuICdkYXRlJztcbiAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgcmV0dXJuICdyZWdleHAnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG5mdW5jdGlvbiBnZXRDbGFzc05hbWUocHJvcFZhbHVlKSB7XG4gIGlmICghcHJvcFZhbHVlLmNvbnN0cnVjdG9yIHx8ICFwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZSkge1xuICAgIHJldHVybiBBTk9OWU1PVVM7XG4gIH1cbiAgcmV0dXJuIHByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZXNTZWNyZXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9ICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZXNTZWNyZXQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzXG4gKiogbW9kdWxlIGlkID0gNTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFB1cmVDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBoZWxwZXJzIGZvciB0aGUgdXBkYXRpbmcgc3RhdGUgb2YgYSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIFJlYWN0UHVyZUNvbXBvbmVudChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAvLyBEdXBsaWNhdGVkIGZyb20gUmVhY3RDb21wb25lbnQuXG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gIC8vIFdlIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgdXBkYXRlciBidXQgdGhlIHJlYWwgb25lIGdldHMgaW5qZWN0ZWQgYnkgdGhlXG4gIC8vIHJlbmRlcmVyLlxuICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xufVxuXG5mdW5jdGlvbiBDb21wb25lbnREdW1teSgpIHt9XG5Db21wb25lbnREdW1teS5wcm90b3R5cGUgPSBSZWFjdENvbXBvbmVudC5wcm90b3R5cGU7XG5SZWFjdFB1cmVDb21wb25lbnQucHJvdG90eXBlID0gbmV3IENvbXBvbmVudER1bW15KCk7XG5SZWFjdFB1cmVDb21wb25lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVhY3RQdXJlQ29tcG9uZW50O1xuLy8gQXZvaWQgYW4gZXh0cmEgcHJvdG90eXBlIGp1bXAgZm9yIHRoZXNlIG1ldGhvZHMuXG5fYXNzaWduKFJlYWN0UHVyZUNvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSk7XG5SZWFjdFB1cmVDb21wb25lbnQucHJvdG90eXBlLmlzUHVyZVJlYWN0Q29tcG9uZW50ID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFB1cmVDb21wb25lbnQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL1JlYWN0UHVyZUNvbXBvbmVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RWZXJzaW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICcxNS4zLjInO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi9SZWFjdFZlcnNpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIG9ubHlDaGlsZFxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfcHJvZEludmFyaWFudCA9IHJlcXVpcmUoJy4vcmVhY3RQcm9kSW52YXJpYW50Jyk7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3QgY2hpbGQgaW4gYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuIGFuZCB2ZXJpZmllcyB0aGF0IHRoZXJlXG4gKiBpcyBvbmx5IG9uZSBjaGlsZCBpbiB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90b3AtbGV2ZWwtYXBpLmh0bWwjcmVhY3QuY2hpbGRyZW4ub25seVxuICpcbiAqIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHRoaXMgZnVuY3Rpb24gYXNzdW1lcyB0aGF0IGEgc2luZ2xlIGNoaWxkIGdldHNcbiAqIHBhc3NlZCB3aXRob3V0IGEgd3JhcHBlciwgYnV0IHRoZSBwdXJwb3NlIG9mIHRoaXMgaGVscGVyIGZ1bmN0aW9uIGlzIHRvXG4gKiBhYnN0cmFjdCBhd2F5IHRoZSBwYXJ0aWN1bGFyIHN0cnVjdHVyZSBvZiBjaGlsZHJlbi5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IGNoaWxkcmVuIENoaWxkIGNvbGxlY3Rpb24gc3RydWN0dXJlLlxuICogQHJldHVybiB7UmVhY3RFbGVtZW50fSBUaGUgZmlyc3QgYW5kIG9ubHkgYFJlYWN0RWxlbWVudGAgY29udGFpbmVkIGluIHRoZVxuICogc3RydWN0dXJlLlxuICovXG5mdW5jdGlvbiBvbmx5Q2hpbGQoY2hpbGRyZW4pIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3QuQ2hpbGRyZW4ub25seSBleHBlY3RlZCB0byByZWNlaXZlIGEgc2luZ2xlIFJlYWN0IGVsZW1lbnQgY2hpbGQuJykgOiBfcHJvZEludmFyaWFudCgnMTQzJykgOiB2b2lkIDA7XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmx5Q2hpbGQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVhY3QvbGliL29ubHlDaGlsZC5qc1xuICoqIG1vZHVsZSBpZCA9IDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdHJhdmVyc2VBbGxDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9wcm9kSW52YXJpYW50ID0gcmVxdWlyZSgnLi9yZWFjdFByb2RJbnZhcmlhbnQnKTtcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBnZXRJdGVyYXRvckZuID0gcmVxdWlyZSgnLi9nZXRJdGVyYXRvckZuJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgS2V5RXNjYXBlVXRpbHMgPSByZXF1aXJlKCcuL0tleUVzY2FwZVV0aWxzJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIFNFUEFSQVRPUiA9ICcuJztcbnZhciBTVUJTRVBBUkFUT1IgPSAnOic7XG5cbi8qKlxuICogVE9ETzogVGVzdCB0aGF0IGEgc2luZ2xlIGNoaWxkIGFuZCBhbiBhcnJheSB3aXRoIG9uZSBpdGVtIGhhdmUgdGhlIHNhbWUga2V5XG4gKiBwYXR0ZXJuLlxuICovXG5cbnZhciBkaWRXYXJuQWJvdXRNYXBzID0gZmFsc2U7XG5cbi8qKlxuICogR2VuZXJhdGUgYSBrZXkgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyBhIGNvbXBvbmVudCB3aXRoaW4gYSBzZXQuXG4gKlxuICogQHBhcmFtIHsqfSBjb21wb25lbnQgQSBjb21wb25lbnQgdGhhdCBjb3VsZCBjb250YWluIGEgbWFudWFsIGtleS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCB0aGF0IGlzIHVzZWQgaWYgYSBtYW51YWwga2V5IGlzIG5vdCBwcm92aWRlZC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50S2V5KGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgLy8gRG8gc29tZSB0eXBlY2hlY2tpbmcgaGVyZSBzaW5jZSB3ZSBjYWxsIHRoaXMgYmxpbmRseS4gV2Ugd2FudCB0byBlbnN1cmVcbiAgLy8gdGhhdCB3ZSBkb24ndCBibG9jayBwb3RlbnRpYWwgZnV0dXJlIEVTIEFQSXMuXG4gIGlmIChjb21wb25lbnQgJiYgdHlwZW9mIGNvbXBvbmVudCA9PT0gJ29iamVjdCcgJiYgY29tcG9uZW50LmtleSAhPSBudWxsKSB7XG4gICAgLy8gRXhwbGljaXQga2V5XG4gICAgcmV0dXJuIEtleUVzY2FwZVV0aWxzLmVzY2FwZShjb21wb25lbnQua2V5KTtcbiAgfVxuICAvLyBJbXBsaWNpdCBrZXkgZGV0ZXJtaW5lZCBieSB0aGUgaW5kZXggaW4gdGhlIHNldFxuICByZXR1cm4gaW5kZXgudG9TdHJpbmcoMzYpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuICogQHBhcmFtIHshc3RyaW5nfSBuYW1lU29GYXIgTmFtZSBvZiB0aGUga2V5IHBhdGggc28gZmFyLlxuICogQHBhcmFtIHshZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIHRvIGludm9rZSB3aXRoIGVhY2ggY2hpbGQgZm91bmQuXG4gKiBAcGFyYW0gez8qfSB0cmF2ZXJzZUNvbnRleHQgVXNlZCB0byBwYXNzIGluZm9ybWF0aW9uIHRocm91Z2hvdXQgdGhlIHRyYXZlcnNhbFxuICogcHJvY2Vzcy5cbiAqIEByZXR1cm4geyFudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4gaW4gdGhpcyBzdWJ0cmVlLlxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZHJlbiwgbmFtZVNvRmFyLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIGNoaWxkcmVuO1xuXG4gIGlmICh0eXBlID09PSAndW5kZWZpbmVkJyB8fCB0eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAvLyBBbGwgb2YgdGhlIGFib3ZlIGFyZSBwZXJjZWl2ZWQgYXMgbnVsbC5cbiAgICBjaGlsZHJlbiA9IG51bGw7XG4gIH1cblxuICBpZiAoY2hpbGRyZW4gPT09IG51bGwgfHwgdHlwZSA9PT0gJ3N0cmluZycgfHwgdHlwZSA9PT0gJ251bWJlcicgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSkge1xuICAgIGNhbGxiYWNrKHRyYXZlcnNlQ29udGV4dCwgY2hpbGRyZW4sXG4gICAgLy8gSWYgaXQncyB0aGUgb25seSBjaGlsZCwgdHJlYXQgdGhlIG5hbWUgYXMgaWYgaXQgd2FzIHdyYXBwZWQgaW4gYW4gYXJyYXlcbiAgICAvLyBzbyB0aGF0IGl0J3MgY29uc2lzdGVudCBpZiB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIGdyb3dzLlxuICAgIG5hbWVTb0ZhciA9PT0gJycgPyBTRVBBUkFUT1IgKyBnZXRDb21wb25lbnRLZXkoY2hpbGRyZW4sIDApIDogbmFtZVNvRmFyKTtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIHZhciBjaGlsZDtcbiAgdmFyIG5leHROYW1lO1xuICB2YXIgc3VidHJlZUNvdW50ID0gMDsgLy8gQ291bnQgb2YgY2hpbGRyZW4gZm91bmQgaW4gdGhlIGN1cnJlbnQgc3VidHJlZS5cbiAgdmFyIG5leHROYW1lUHJlZml4ID0gbmFtZVNvRmFyID09PSAnJyA/IFNFUEFSQVRPUiA6IG5hbWVTb0ZhciArIFNVQlNFUEFSQVRPUjtcblxuICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIGdldENvbXBvbmVudEtleShjaGlsZCwgaSk7XG4gICAgICBzdWJ0cmVlQ291bnQgKz0gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGQsIG5leHROYW1lLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKGNoaWxkcmVuKTtcbiAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKGNoaWxkcmVuKTtcbiAgICAgIHZhciBzdGVwO1xuICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IGNoaWxkcmVuLmVudHJpZXMpIHtcbiAgICAgICAgdmFyIGlpID0gMDtcbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIGNoaWxkID0gc3RlcC52YWx1ZTtcbiAgICAgICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCBpaSsrKTtcbiAgICAgICAgICBzdWJ0cmVlQ291bnQgKz0gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGQsIG5leHROYW1lLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB2YXIgbWFwc0FzQ2hpbGRyZW5BZGRlbmR1bSA9ICcnO1xuICAgICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICAgICAgICB2YXIgbWFwc0FzQ2hpbGRyZW5Pd25lck5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICAgICAgICAgIGlmIChtYXBzQXNDaGlsZHJlbk93bmVyTmFtZSkge1xuICAgICAgICAgICAgICBtYXBzQXNDaGlsZHJlbkFkZGVuZHVtID0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG1hcHNBc0NoaWxkcmVuT3duZXJOYW1lICsgJ2AuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZGlkV2FybkFib3V0TWFwcywgJ1VzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHlldCBmdWxseSBzdXBwb3J0ZWQuIEl0IGlzIGFuICcgKyAnZXhwZXJpbWVudGFsIGZlYXR1cmUgdGhhdCBtaWdodCBiZSByZW1vdmVkLiBDb252ZXJ0IGl0IHRvIGEgJyArICdzZXF1ZW5jZSAvIGl0ZXJhYmxlIG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4lcycsIG1hcHNBc0NoaWxkcmVuQWRkZW5kdW0pIDogdm9pZCAwO1xuICAgICAgICAgIGRpZFdhcm5BYm91dE1hcHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcbiAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgIGNoaWxkID0gZW50cnlbMV07XG4gICAgICAgICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgS2V5RXNjYXBlVXRpbHMuZXNjYXBlKGVudHJ5WzBdKSArIFNVQlNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZCwgMCk7XG4gICAgICAgICAgICBzdWJ0cmVlQ291bnQgKz0gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGQsIG5leHROYW1lLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgYWRkZW5kdW0gPSAnJztcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFkZGVuZHVtID0gJyBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiwgdXNlIGFuIGFycmF5ICcgKyAnaW5zdGVhZCBvciB3cmFwIHRoZSBvYmplY3QgdXNpbmcgY3JlYXRlRnJhZ21lbnQob2JqZWN0KSBmcm9tIHRoZSAnICsgJ1JlYWN0IGFkZC1vbnMuJztcbiAgICAgICAgaWYgKGNoaWxkcmVuLl9pc1JlYWN0RWxlbWVudCkge1xuICAgICAgICAgIGFkZGVuZHVtID0gJyBJdCBsb29rcyBsaWtlIHlvdVxcJ3JlIHVzaW5nIGFuIGVsZW1lbnQgY3JlYXRlZCBieSBhIGRpZmZlcmVudCAnICsgJ3ZlcnNpb24gb2YgUmVhY3QuIE1ha2Ugc3VyZSB0byB1c2Ugb25seSBvbmUgY29weSBvZiBSZWFjdC4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgYWRkZW5kdW0gKz0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGNoaWxkcmVuU3RyaW5nID0gU3RyaW5nKGNoaWxkcmVuKTtcbiAgICAgICFmYWxzZSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6ICVzKS4lcycsIGNoaWxkcmVuU3RyaW5nID09PSAnW29iamVjdCBPYmplY3RdJyA/ICdvYmplY3Qgd2l0aCBrZXlzIHsnICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oJywgJykgKyAnfScgOiBjaGlsZHJlblN0cmluZywgYWRkZW5kdW0pIDogX3Byb2RJbnZhcmlhbnQoJzMxJywgY2hpbGRyZW5TdHJpbmcgPT09ICdbb2JqZWN0IE9iamVjdF0nID8gJ29iamVjdCB3aXRoIGtleXMgeycgKyBPYmplY3Qua2V5cyhjaGlsZHJlbikuam9pbignLCAnKSArICd9JyA6IGNoaWxkcmVuU3RyaW5nLCBhZGRlbmR1bSkgOiB2b2lkIDA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN1YnRyZWVDb3VudDtcbn1cblxuLyoqXG4gKiBUcmF2ZXJzZXMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLCBidXRcbiAqIG1pZ2h0IGFsc28gYmUgc3BlY2lmaWVkIHRocm91Z2ggYXR0cmlidXRlczpcbiAqXG4gKiAtIGB0cmF2ZXJzZUFsbENoaWxkcmVuKHRoaXMucHJvcHMuY2hpbGRyZW4sIC4uLilgXG4gKiAtIGB0cmF2ZXJzZUFsbENoaWxkcmVuKHRoaXMucHJvcHMubGVmdFBhbmVsQ2hpbGRyZW4sIC4uLilgXG4gKlxuICogVGhlIGB0cmF2ZXJzZUNvbnRleHRgIGlzIGFuIG9wdGlvbmFsIGFyZ3VtZW50IHRoYXQgaXMgcGFzc2VkIHRocm91Z2ggdGhlXG4gKiBlbnRpcmUgdHJhdmVyc2FsLiBJdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBhY2N1bXVsYXRpb25zIG9yIGFueXRoaW5nIGVsc2UgdGhhdFxuICogdGhlIGNhbGxiYWNrIG1pZ2h0IGZpbmQgcmVsZXZhbnQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBvYmplY3QuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gY2FsbGJhY2sgVG8gaW52b2tlIHVwb24gdHJhdmVyc2luZyBlYWNoIGNoaWxkLlxuICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgZm9yIHRyYXZlcnNhbC5cbiAqIEByZXR1cm4geyFudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4gaW4gdGhpcyBzdWJ0cmVlLlxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICByZXR1cm4gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGRyZW4sICcnLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmF2ZXJzZUFsbENoaWxkcmVuO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlYWN0L2xpYi90cmF2ZXJzZUFsbENoaWxkcmVuLmpzXG4gKiogbW9kdWxlIGlkID0gNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgcmUgPSB7XG4gICAgICAgIG5vdF9zdHJpbmc6IC9bXnNdLyxcbiAgICAgICAgbnVtYmVyOiAvW2RpZWZnXS8sXG4gICAgICAgIGpzb246IC9bal0vLFxuICAgICAgICBub3RfanNvbjogL1teal0vLFxuICAgICAgICB0ZXh0OiAvXlteXFx4MjVdKy8sXG4gICAgICAgIG1vZHVsbzogL15cXHgyNXsyfS8sXG4gICAgICAgIHBsYWNlaG9sZGVyOiAvXlxceDI1KD86KFsxLTldXFxkKilcXCR8XFwoKFteXFwpXSspXFwpKT8oXFwrKT8oMHwnW14kXSk/KC0pPyhcXGQrKT8oPzpcXC4oXFxkKykpPyhbYi1naWpvc3V4WF0pLyxcbiAgICAgICAga2V5OiAvXihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBrZXlfYWNjZXNzOiAvXlxcLihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBpbmRleF9hY2Nlc3M6IC9eXFxbKFxcZCspXFxdLyxcbiAgICAgICAgc2lnbjogL15bXFwrXFwtXS9cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzcHJpbnRmKCkge1xuICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdLCBjYWNoZSA9IHNwcmludGYuY2FjaGVcbiAgICAgICAgaWYgKCEoY2FjaGVba2V5XSAmJiBjYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSkge1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHNwcmludGYucGFyc2Uoa2V5KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcHJpbnRmLmZvcm1hdC5jYWxsKG51bGwsIGNhY2hlW2tleV0sIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBzcHJpbnRmLmZvcm1hdCA9IGZ1bmN0aW9uKHBhcnNlX3RyZWUsIGFyZ3YpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IDEsIHRyZWVfbGVuZ3RoID0gcGFyc2VfdHJlZS5sZW5ndGgsIG5vZGVfdHlwZSA9IFwiXCIsIGFyZywgb3V0cHV0ID0gW10sIGksIGssIG1hdGNoLCBwYWQsIHBhZF9jaGFyYWN0ZXIsIHBhZF9sZW5ndGgsIGlzX3Bvc2l0aXZlID0gdHJ1ZSwgc2lnbiA9IFwiXCJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyZWVfbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5vZGVfdHlwZSA9IGdldF90eXBlKHBhcnNlX3RyZWVbaV0pXG4gICAgICAgICAgICBpZiAobm9kZV90eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gcGFyc2VfdHJlZVtpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZV90eXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcnNlX3RyZWVbaV0gLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkgeyAvLyBrZXl3b3JkIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yXVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbWF0Y2hbMl0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJnLmhhc093blByb3BlcnR5KG1hdGNoWzJdW2tdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKFwiW3NwcmludGZdIHByb3BlcnR5ICclcycgZG9lcyBub3QgZXhpc3RcIiwgbWF0Y2hbMl1ba10pKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnW21hdGNoWzJdW2tdXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoWzFdKSB7IC8vIHBvc2l0aW9uYWwgYXJndW1lbnQgKGV4cGxpY2l0KVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W21hdGNoWzFdXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoaW1wbGljaXQpXG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yKytdXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGdldF90eXBlKGFyZykgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm5vdF9zdHJpbmcudGVzdChtYXRjaFs4XSkgJiYgcmUubm90X2pzb24udGVzdChtYXRjaFs4XSkgJiYgKGdldF90eXBlKGFyZykgIT0gXCJudW1iZXJcIiAmJiBpc05hTihhcmcpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNwcmludGYoXCJbc3ByaW50Zl0gZXhwZWN0aW5nIG51bWJlciBidXQgZm91bmQgJXNcIiwgZ2V0X3R5cGUoYXJnKSkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm51bWJlci50ZXN0KG1hdGNoWzhdKSkge1xuICAgICAgICAgICAgICAgICAgICBpc19wb3NpdGl2ZSA9IGFyZyA+PSAwXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFs4XSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDIpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFyZylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBhcnNlSW50KGFyZywgMTApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJqXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBKU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIG1hdGNoWzZdID8gcGFyc2VJbnQobWF0Y2hbNl0pIDogMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gYXJnLnRvRXhwb25lbnRpYWwobWF0Y2hbN10pIDogYXJnLnRvRXhwb25lbnRpYWwoKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gbWF0Y2hbN10gPyBwYXJzZUZsb2F0KGFyZykudG9GaXhlZChtYXRjaFs3XSkgOiBwYXJzZUZsb2F0KGFyZylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gcGFyc2VGbG9hdChhcmcpLnRvUHJlY2lzaW9uKG1hdGNoWzddKSA6IHBhcnNlRmxvYXQoYXJnKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDgpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAoKGFyZyA9IFN0cmluZyhhcmcpKSAmJiBtYXRjaFs3XSA/IGFyZy5zdWJzdHJpbmcoMCwgbWF0Y2hbN10pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnID4+PiAwXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlLmpzb24udGVzdChtYXRjaFs4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gYXJnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QobWF0Y2hbOF0pICYmICghaXNfcG9zaXRpdmUgfHwgbWF0Y2hbM10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gaXNfcG9zaXRpdmUgPyBcIitcIiA6IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKHJlLnNpZ24sIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gXCJcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhZF9jaGFyYWN0ZXIgPSBtYXRjaFs0XSA/IG1hdGNoWzRdID09PSBcIjBcIiA/IFwiMFwiIDogbWF0Y2hbNF0uY2hhckF0KDEpIDogXCIgXCJcbiAgICAgICAgICAgICAgICAgICAgcGFkX2xlbmd0aCA9IG1hdGNoWzZdIC0gKHNpZ24gKyBhcmcpLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICBwYWQgPSBtYXRjaFs2XSA/IChwYWRfbGVuZ3RoID4gMCA/IHN0cl9yZXBlYXQocGFkX2NoYXJhY3RlciwgcGFkX2xlbmd0aCkgOiBcIlwiKSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gbWF0Y2hbNV0gPyBzaWduICsgYXJnICsgcGFkIDogKHBhZF9jaGFyYWN0ZXIgPT09IFwiMFwiID8gc2lnbiArIHBhZCArIGFyZyA6IHBhZCArIHNpZ24gKyBhcmcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbihcIlwiKVxuICAgIH1cblxuICAgIHNwcmludGYuY2FjaGUgPSB7fVxuXG4gICAgc3ByaW50Zi5wYXJzZSA9IGZ1bmN0aW9uKGZtdCkge1xuICAgICAgICB2YXIgX2ZtdCA9IGZtdCwgbWF0Y2ggPSBbXSwgcGFyc2VfdHJlZSA9IFtdLCBhcmdfbmFtZXMgPSAwXG4gICAgICAgIHdoaWxlIChfZm10KSB7XG4gICAgICAgICAgICBpZiAoKG1hdGNoID0gcmUudGV4dC5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gbWF0Y2hbMF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXRjaCA9IHJlLm1vZHVsby5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gXCIlXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXRjaCA9IHJlLnBsYWNlaG9sZGVyLmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAxXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZF9saXN0ID0gW10sIHJlcGxhY2VtZW50X2ZpZWxkID0gbWF0Y2hbMl0sIGZpZWxkX21hdGNoID0gW11cbiAgICAgICAgICAgICAgICAgICAgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmtleS5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgocmVwbGFjZW1lbnRfZmllbGQgPSByZXBsYWNlbWVudF9maWVsZC5zdWJzdHJpbmcoZmllbGRfbWF0Y2hbMF0ubGVuZ3RoKSkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkX21hdGNoID0gcmUua2V5X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdFtmaWVsZF9saXN0Lmxlbmd0aF0gPSBmaWVsZF9tYXRjaFsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmllbGRfbWF0Y2ggPSByZS5pbmRleF9hY2Nlc3MuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSBmYWlsZWQgdG8gcGFyc2UgbmFtZWQgYXJndW1lbnQga2V5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW3NwcmludGZdIGZhaWxlZCB0byBwYXJzZSBuYW1lZCBhcmd1bWVudCBrZXlcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXSA9IGZpZWxkX2xpc3RcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcmdfbmFtZXMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW3NwcmludGZdIG1peGluZyBwb3NpdGlvbmFsIGFuZCBuYW1lZCBwbGFjZWhvbGRlcnMgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZFwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IG1hdGNoXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJbc3ByaW50Zl0gdW5leHBlY3RlZCBwbGFjZWhvbGRlclwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2ZtdCA9IF9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VfdHJlZVxuICAgIH1cblxuICAgIHZhciB2c3ByaW50ZiA9IGZ1bmN0aW9uKGZtdCwgYXJndiwgX2FyZ3YpIHtcbiAgICAgICAgX2FyZ3YgPSAoYXJndiB8fCBbXSkuc2xpY2UoMClcbiAgICAgICAgX2FyZ3Yuc3BsaWNlKDAsIDAsIGZtdClcbiAgICAgICAgcmV0dXJuIHNwcmludGYuYXBwbHkobnVsbCwgX2FyZ3YpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldF90eXBlKHZhcmlhYmxlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFyaWFibGUpLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RyX3JlcGVhdChpbnB1dCwgbXVsdGlwbGllcikge1xuICAgICAgICByZXR1cm4gQXJyYXkobXVsdGlwbGllciArIDEpLmpvaW4oaW5wdXQpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZXhwb3J0IHRvIGVpdGhlciBicm93c2VyIG9yIG5vZGUuanNcbiAgICAgKi9cbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgZXhwb3J0cy5zcHJpbnRmID0gc3ByaW50ZlxuICAgICAgICBleHBvcnRzLnZzcHJpbnRmID0gdnNwcmludGZcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5zcHJpbnRmID0gc3ByaW50ZlxuICAgICAgICB3aW5kb3cudnNwcmludGYgPSB2c3ByaW50ZlxuXG4gICAgICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAgICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNwcmludGY6IHNwcmludGYsXG4gICAgICAgICAgICAgICAgICAgIHZzcHJpbnRmOiB2c3ByaW50ZlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59KSh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IHdpbmRvdyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zcHJpbnRmLWpzL3NyYy9zcHJpbnRmLmpzXG4gKiogbW9kdWxlIGlkID0gNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdXRpbC9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3V0aWwvc3VwcG9ydC9pc0J1ZmZlckJyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==