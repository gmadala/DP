<header class="app-header" ng-class="{ login: !navState.current.data.showNavBar, auctions: !user.isDealer() }">
  <div class="container">
    <div class="header">
      <a ng-href="{{user.homeLink()}}" class="col-xs-4 custom ng-binding">
        <div class="nxg-logo" nxg-debug-title></div>
      </a>

      <div class="col-xs-8 user-info no-left-padding no-right-padding" ng-show="navState.current.data.showNavBar">
        <div class="user-info-list pull-right">
          <div>
            <span class="" ng-show="user.isDealer()" translate>
              Dealer #
            </span>
            <span class="" ng-show="!user.isDealer()" translate>
              NGC #
            </span>
            {{ user.BusinessNumber }}
          </div>
          <div class="spacer" ng-show="user.isDealer()">
            <a class="cart-btn" ng-disabled="getQueueCount() < 1" ng-click="onCartClicked()" ng-class="{ 'has-items': getQueueCount() > 0 }">
              {{ getQueueCount() }}
              <span class="glyphicon glyphicon-shopping-cart"></span>
            </a>
          </div>
          <div class="spacer" ng-show="chatEnabled && user.isDealer()">
            <a nxg-chat-with-us nxg-track="{{metric.CLICK_CHAT_NOW_LINK}}"
               track-properties="{{ kissMetricData }}" translate>Chat
              <span class="glyphicon glyphicon-comment"></span>
            </a>
          </div>
          <div uib-dropdown class="spacer">
            <span class="dropdown-toggle" uib-dropdown-toggle data-toggle="dropdown"
                  id="settingsDropdown"
                  aria-haspopup="true" aria-expanded="false">
              <a>
                <span translate>My Account</span>
                <span style="border-top: 4px solid #069" class="caret"></span>
              </a>
            </span>
            <ul class="dropdown-menu dropdown-bold text-right" uib-dropdown-menu role="menu" aria-labelledby="settingsDropdown">
              <li>
                <a href="#/act/settings" ng-show="!user.isDealer()">
                  <strong translate>Settings</strong>
                </a>
                <a href="#/profile_settings" ng-show="user.isDealer()">
                  <strong translate>Profile Settings</strong>
                </a>
              </li>
              <li>
                <a ng-href="#/account_management" ng-show="user.isDealer()">
                  <strong translate>Account Management</strong>
                </a>
              </li>
              <li class="menu-divider"></li>
              <li>
                <a href="javascript:void(0)" ng-click="user.logout()">
                  <strong translate>Sign Out</strong>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col-xs-8" ng-hide="navState.current.data.showNavBar">
        <div class="nav-language-chooser">
          <span class="icon-xx-large" nxg-icon="icon-globe"></span>
          <div class="cta btn-toggle toggle-three">
            <div class="btn-slider"
                 ng-class="{ 'active-left': isCurrentLanguage('en'), 'active-center': isCurrentLanguage('es'), 'active-right': isCurrentLanguage('fr_CA') }"></div>
            <button class="btn" ng-click="updateLanguage('en')">English</button>
            <button class="btn" ng-click="updateLanguage('es')">Espa&ntilde;ol</button>
            <button class="btn" ng-click="updateLanguage('fr_CA')">Fran&ccedil;ais</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="nav-bkgd" ng-show="navState.current.data.showNavBar">
    <div class="container">
      <div class="header">
        <ul class="nav-primary">
          <li ng-repeat="link in user.navLinks().primary" class="link_{{ link.activeWhen }} dropdown" ng-class="{dropdown: link.subMenu}">
            <a ng-href="{{link.href}}" ng-class="{ active: isActive(link.activeWhen) }" ng-if="!link.subMenu">{{link.name}}</a>
            <a ng-href="{{link.href}}" class="sub-menu " ng-class="{ active: isActiveGroup(link.subMenu) }"
               ng-if="link.subMenu" ng-click="toggleSubMenu()" ng-mouseenter="showSubMenu()">
              {{link.name}} <span class="caret"></span></a>
            <ul class="dropdown-menu" ng-if="link.subMenu" ng-show="canShowMenu" ng-class="{'show-menu':canShowMenu}" uib-dropdown-menu>
              <li ng-repeat="item in link.subMenu" ng-class="{ active: isActive(item.activeWhen) }" ng-click="hideSubMenu()">
                <a href="{{item.href}}">{{item.name}}</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
