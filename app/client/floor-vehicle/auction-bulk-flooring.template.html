<div class="container-fluid floorcar">
  <div class="row">
    <div class="col-xs-12">
      <button ng-hide="profile.editable" class="btn-unstyle btn-clear right clear-search" ng-click="reset()"><strong translate>Clear Form</strong></button>
    </div>
  </div>
  <div class="row">
    <form  name="form" novalidate>
      <!-- Vehicle Information -->
      <div class="col-sm-6">
        <div class="panel panel-default">
          <h2 class="well-title" translate>Vehicle Information</h2>
          <div class="well-form">

            <div nxg-vin-details floor-model="data" validity="validity" form="form" error-flag="vinDetailsErrorFlag" form="form" nxg-autofocus="reset"></div>

            <label for="inputColor" class="input-title" translate>Color</label>
            <div class="style-select full-width" ng-class="{ 'nxg-invalid': validity.inputColor.$error.required }" >
              <select id="inputColor"  name="inputColor" ng-model="data.UnitColorId"
                      ng-options="color.ColorName for color in options.colors" required>
                <option value="" translate>Make Selection</option>
              </select>
            </div>
            <label for="inputColor" class="text-error"
                   ng-show="validity.inputColor.$error.required" translate>
              Please select a Color.
            </label>

            <label for="inputMileage" class="input-title" translate>Odometer</label>
            <input type="number" id="inputMileage" name="inputMileage"
                   ng-model="data.UnitMileage"
                   ng-class="{ 'nxg-invalid': validity.inputMileage.$error.required || validity.inputMileage.$error.pattern || validity.inputMileage.$error.maxlength || validity.inputMileage.$error.nxgMin }"
                   ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*$/"
                   required
                   nxg-min="1"
                   nxg-validate-int="6"
                   nxg-blur="mileageExit(form.inputMileage)" />
            <label for="inputMileage" class="text-error"
                   ng-show="validity.inputMileage.$error.required" translate>
              Please enter the Mileage.
            </label>
            <label for="inputMileage" class="text-error"
                   ng-show="!validity.inputMileage.$error.required && (validity.inputMileage.$error.pattern || validity.inputMileage.$error.nxgMin)" translate>
              Please enter a positive integer value with no decimals.
            </label>
            <label for="inputMileage" class="text-error"
                   ng-show="!validity.inputMileage.$error.required && validity.inputMileage.$error.maxlength" translate>
              Please enter a value less than 1,000,000.
            </label>

            <label for="inputTitleHolder" class="input-title" translate>Who has the Title?</label>
            <div class="style-select full-width" ng-class="{ 'nxg-invalid': validity.inputTitleHolder.$error.required }">
              <select id="inputTitleHolder"  name="inputTitleHolder" ng-model="data.TitleLocationId"
                      ng-options="location.Name for location in options.titleLocationOptions"
                      required>
                <option value="" translate>Make Selection</option>
              </select>
            </div>
            <label for="inputTitleHolder" class="text-error"
                   ng-show="validity.inputTitleHolder.$error.required" translate>
              Please select who has the title.
            </label>

            <label for="consignerTicket" class="input-title" translate>Consigner Ticket Number</label>
            <input type="text" id="consignerTicket" name="consignerTicket"
                   ng-model="data.ConsignerTicketNumber"
                   ng-class="{ 'nxg-invalid': validity.consignerTicket.$error.required }"
                   required/>
            <label for="consignerTicket" class="text-error"
                   ng-show="validity.consignerTicket.$error.required" translate>
              Please enter a Consigner Ticket Number.
            </label>

            <label for="inputLotNum" class="input-title" translate>Lot Number</label>
            <input type="text" id="inputLotNum" name="inputLotNum"
                   ng-model="data.LotNumber"
                   ng-class="{ 'nxg-invalid': validity.inputLotNum.$error.required }"
                   required/>
            <label for="inputLotNum" class="text-error"
                   ng-show="validity.inputLotNum.$error.required" translate>
              Please enter the Lot Number.
            </label>
          </div>
        </div>
      </div>
      <!-- Sale Information -->
      <div class="col-sm-6">
        <div class="panel panel-default">
          <h2 class="well-title" translate>Sale Information</h2>

          <div class="well-form">
            <label for="inputBiz" class="input-title" translate>Buyer</label>
            <span class="nxg-business-field" ng-class="{ 'nxg-invalid': validity.inputBiz.$error.nxgRequires }">
              <input nxg-business-field="buyers" id="inputBiz" class="input-xlarge"
                     name="inputBiz"
                     ng-required="true"
                     selected-business="data.BusinessId"
                     validity="validity"/>
            </span>

            <label for="inventoryAddress" class="input-title" translate>Inventory Address</label>
            <div class="style-select full-width" ng-class="{ 'nxg-invalid': validity.inventoryAddress.$error.required, 'disabled': sellerLocations == null || sellerLocations.length <= 1 }">
              <select id="inventoryAddress"
                      name="inventoryAddress"
                      ng-model="data.PhysicalInventoryAddressId"
                      ng-options="(location | address:'oneLineSelect') for location in sellerLocations"
                      ng-disabled="sellerLocations == null || sellerLocations.length <= 1"
                      required>
                <option value="" translate>Make Selection</option>
              </select>
            </div>
            <label for="inventoryAddress" class="text-error" ng-show="validity.inventoryAddress.$error.required" translate>
              Please select an Inventory Location.
            </label>

            <label for="inputPurchaseAmt" class="input-title" translate>Purchase Amount</label>
            <div class="input-prepend dollar">
              <span class="add-on no-top" translate>$</span>
              <input type="number" id="inputPurchaseAmt" name="inputPurchaseAmt" ng-model="data.UnitPurchasePrice"
                     nxg-min="1"
                     required
                     nxg-input-currency="1000000000000"
                     ng-class="{ 'nxg-invalid': validity.inputPurchaseAmt.$error.required || validity.inputPurchaseAmt.$error.max || validity.inputPurchaseAmt.$error.pattern || validity.inputPurchaseAmt.$error.maxlength || validity.inputPurchaseAmt.$error.nxgMin }" />
              <label for="inputPurchaseAmt" class="text-error"
                     ng-show="validity.inputPurchaseAmt.$error.required" translate>
                Please enter the Purchase Amount.
              </label>
              <label for="inputPurchaseAmt" class="text-error"
                     ng-show="!validity.inputPurchaseAmt.$error.required && (validity.inputPurchaseAmt.$error.pattern || validity.inputPurchaseAmt.$error.nxgMin)" translate>
                Please enter a positive numeric value with no <br> special characters, such as a dollar sign.
              </label>
              <label for="inputPurchaseAmt" class="text-error"
                     ng-show="!validity.inputPurchaseAmt.$error.pattern && !validity.inputPurchaseAmt.$error.required && validity.inputPurchaseAmt.$error.max" translate>
                Please enter a value less than $1,000,000,000,000.
              </label>
            </div>

            <div class="date-picker date-field" style="width: 120px;">
              <label for="purchaseAuctionDatePicker" class="input-title" translate>Sale Date</label>
              <input type="text" uib-datepicker-popup="{{dateFormat}}"
                     placeholder="mm/dd/yyyy"  nxg-date
                     ng-model="data.UnitPurchaseDate"
                     min-date="auctionMinDate"
                     max-date="maxDate"
                     show-weeks="false"
                     show-button-bar="false"
                     is-open="datePicker.opened"
                     id="purchaseAuctionDatePicker"
                     name="purchaseAuctionDatePicker"
                     required
                     ng-class="{ 'nxg-invalid': validity.purchaseAuctionDatePicker.$error.required || validity.purchaseAuctionDatePicker.$error.past || validity.purchaseAuctionDatePicker.$error.date }"/>
              <button tabindex="-1" type="button" class="btn-unstyle disbursement-btn-calendar" ng-click="openDatePicker()"><span nxg-icon="icon-calendar"></span></button>
              <button class="btn-alert" style="padding:0;" ng-show="validity.purchaseAuctionDatePicker.$error.past || validity.purchaseAuctionDatePicker.$error.future"
                      tooltip-placement="right"
                      tooltip-trigger="mouseenter"
                      uib-tooltip="{{ 'To floor plan purchases older than 7 days, please contact NextGear Capital Floor plan Services at fundingservices@nextgearcapital.com, attach the Bill of Sale, and provide the customerâ€™s NextGear Dealer Number.' | translate }}"
                      tooltip-animation="true">
                <span nxg-icon="icon-alert"></span>
              </button>
            </div>
            <label for="purchaseAuctionDatePicker" class="text-error"
                   ng-show="validity.purchaseAuctionDatePicker.$error.required ||
                          validity.purchaseAuctionDatePicker.$error.date ||
                          validity.purchaseAuctionDatePicker.$error.past ||
                          validity.purchaseAuctionDatePicker.$error.future" translate>
              Please enter a Valid Sale Date.
            </label>
            <p>
              <span class="scale-description" translate>Actual sale date must be used when flooring a car</span>
              <button class="btn-help inline"
                      tooltip-placement="left"
                      tooltip-popup-delay="300"
                      uib-tooltip="{{ 'Actual sales dates must be used when flooring a car. By entering a sale date of the car being floored the auction certifies the entered sale date for the car is true and correct.' | translate }}"
                      tooltip-animation="true"><span nxg-icon="icon-help"></span></button>
            </p>

            <label for="inputDisburseAcct" class="input-title" translate>Bank Account</label>
            <div class="style-select full-width" ng-class="{ 'nxg-invalid': validity.inputDisburseAcct.$error.required }">
              <select id="inputDisburseAcct" name="inputDisburseAcct" ng-model="data.BankAccountId"
                      ng-options="account as [account.AchAccountNumberLast4, account.AchBankName].join(' - ') for account in options.BankAccounts"
                      required>
                <option value="" translate>Make Selection</option>
              </select>
            </div>
            <label for="inputDisburseAcct" class="text-error"
                   ng-show="validity.inputDisburseAcct.$error.required" translate>
              Please select a Bank Account for Deposit.
            </label>
          </div>
          <button class="btn-cta cta-full cta-primary"
                  ng-disabled="submitInProgress"
                  ng-click="submit()"
                  translate>
            Review and Floor Vehicle
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
