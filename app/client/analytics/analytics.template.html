<div class="container">
  <section  ng-hide="isUnitedStates">
    <div class="paired-media">
      <span nxg-icon="icon-info"></span>
    </div>
    <span translate>All values are displayed in Canadian Dollars unless specified.</span>
    <p>&nbsp;</p>
  </section>

  <section class="row business-summary {{ showDetails && 'expanded' || 'collapsed'}}">
    <div class="col-xs-12">
      <div class="panel panel-default">
        <h2 class="panel-heading" translate>Business Summary</h2>

        <div class="panel-body">
          <!-- approved floor plans -->
          <div class="col-xs-12">
            <div class="row">
              <div class="col-xs-12">
                <h3><span class="plan-count">{{ businessSummary.ApprovedFloorplans }}</span> <span translate>Approved Floor Plans</span></h3>
              </div>
            </div>

            <div class="row blocks">
              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Total NextGear Capital Book Value</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalApprovedBlackBookValue | currency }}
                  </div>
                </div>

                <div class="row" ng-hide="isUnitedStates">
                  <div class="col-xs-12">
                    USD
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Total Financed Amount</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalApprovedFinancedAmount | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Total Outstanding</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalOutstandingPrincipal | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Average Purchase Price</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.AveragePurchasePrice | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Total Purchase Price</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalApprovedPurchasePrice | currency }}
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-xs-12 subtext" translate>
                NextGear Capital Book is {{ businessSummary.DerivedCapitalBook | number:2 }}% of the Purchase Price
              </div>

              <div class="col-xs-12 subtext" translate>
                Amount Outstanding is {{ businessSummary.DerivedAmountOutstanding | number:2 }}% of the NextGear Capital Book
              </div>
            </div>

          </div>
          <div class="col-xs-12 divider"></div>
          <!-- pending floor plans -->
          <div class="col-xs-12">
            <div class="row">
              <div class="col-xs-12">
                <h3><span class="plan-count">{{ businessSummary.PendingFloorplans }}</span> <span translate>Pending Floor Plans</span></h3>
              </div>
            </div>

            <div class="row blocks">
              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Total Purchase Price</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalPendingPurchasePrice | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Total NextGear Capital Book Value</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalPendingBlackBookPrice | currency }}
                  </div>
                </div>

                <div class="row" ng-hide="isUnitedStates">
                  <div class="col-xs-12 block-content">
                    USD
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-xs-12 subtext" translate>
                NextGear Capital Book is {{ businessSummary.DerivedPendingBook | number:2 }}% of the Purchase Price.
              </div>
            </div>
          </div>
          <div class="col-xs-12 divider"></div>
          <!-- credits and payments -->
          <div class="col-xs-12">
            <div class="row">
              <div class="col-xs-12">
                <h3 translate>Credits and Payments</h3>
              </div>
            </div>

            <div class="row blocks">
              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Available Credit</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.TotalAvailableCredit | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Reserve Funds</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.ReserveFundsBalance | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Last Payment</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.LastPaymentAmount | currency }}
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-4 block">
                <div class="row">
                  <div class="col-xs-12">
                    <span class="block-title" translate>Last Payment Date</span>:
                  </div>
                </div>

                <div class="row">
                  <div class="col-xs-12 block-content" value numeric>
                    {{ businessSummary.LastPaymentDate | moment }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="row average-turn">
    <div class="col-xs-12 col-sm-12 col-md-9">
      <div class="panel panel-default analytics-well average-turn-chart">
        <h2 class="panel-heading" translate>Average Turn</h2>

        <div class="panel-body">
          <div class="chart-obj"
               nxg-chart
               nxg-chart-type="line"
               nxg-chart-data-name="{{ 'Days to Turn' | translate }}"
               nxg-chart-description-x="{{ 'Average # of Days to Turn' | translate }}"
               nxg-chart-data="analytics.averageTurn.data"
               nxg-chart-labels="true"
               nxg-chart-size="chartSize"
               nxg-chart-title-size="{{ isMobile() ? '11px' : ''}}"
               nxg-chart-label-size="{{ isMobile() ? '10px' : ''}}"
               nxg-chart-label-rotation="-45">
          </div>
        </div>
      </div>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-3">
      <div class="panel panel-default analytics-well aging-vehicles">
        <h2 class="panel-heading" translate>Stale and Aging Vehicles</h2>

        <div class="panel-body">
          <ul class="list-table">
            <li class="list-table-row">
              <p class="col-xs-4">
                <span class="counter overdue">{{ analytics.aging[5] }}</span>
              </p>
              <p class="col-xs-8 numeric counter-label" translate>
                <strong>100+</strong> Days
              </p>
            </li>
            <li class="list-table-row">
              <p class="col-xs-4">
                <span class="counter">{{ analytics.aging[4] }}</span>
              </p>
              <p class="col-xs-8 numeric counter-label" translate>
                <strong>75-99</strong> Days
              </p>
            </li>
            <li class="list-table-row">
              <p class="col-xs-4">
                <span class="counter">{{ analytics.aging[3] }}</span>
              </p>
              <p class="col-xs-8 numeric counter-label" translate>
                <strong>50-74</strong> Days
              </p>
            </li>
            <li class="list-table-row">
              <p class="col-xs-4">
                <span class="counter">{{ analytics.aging[2] }}</span>
              </p>
              <p class="col-xs-8 numeric counter-label" translate>
                <strong>25-49</strong> Days
              </p>
            </li>
            <li class="list-table-row">
              <p class="col-xs-4">
                <span class="counter">{{ analytics.aging[1] }}</span>
              </p>
              <p class="col-xs-8 numeric counter-label" translate>
                <strong>1-24</strong> Days
              </p>
            </li>
            <li class="list-table-row">
              <p class="col-xs-4">
                <span class="counter">{{ analytics.aging[0] }}</span>
              </p>
              <p class="col-xs-8 numeric counter-label" translate>
                <strong>0</strong> Days
              </p>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="row">
    <div class="col-xs-12 col-sm-6">
      <section class="panel panel-default movers-container">
        <h2 class="panel-heading" translate>Best and Worst Movers by Zipcode</h2>
        <div class="panel-body">
          <div class="row">
            <div class="col-xs-10 col-xs-offset-1">
              <div class="cta btn-toggle">
                <div class="btn-slider" ng-class="{ 'active-left':showBest(), 'active-right':!showBest() }"></div>
                <button class="btn" ng-click="changeMoverChart('best')" translate>Best Movers</button>
                <button class="btn" ng-click="changeMoverChart('worst')" translate>Worst Movers</button>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-12">
              <div class="movers-chart">
                <div>
                  <div class="chart-obj"
                       nxg-chart
                       nxg-chart-type="bar"
                       nxg-chart-data-name="{{ 'Days to Turn' | translate }}"
                       nxg-chart-description-x="{{ 'Avg. # of Days to Turn' | translate }}"
                       nxg-chart-data="selectedMoverChart.data"
                       nxg-chart-labels="true"
                       nxg-chart-label-size="{{ isMobile() ? '9px' : ''}}"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="col-xs-12 col-sm-6">
      <section class="panel panel-default top-auctions-container">
        <h2 class="panel-heading" translate>Your Top 10 Auctions</h2>
        <div class="panel-body">
          <h4 translate>Number of Cars Purchased Per-Auction (in the last 12 months)</h4>

          <button href class="btn hidden-xs" ng-click="openTopAuctions()">
            <span nxg-icon="icon-eye"></span>
            <span translate>View All Auctions</span>
          </button>
          <div class="auctions-chart">
            <div class="chart-obj"
                 nxg-chart
                 nxg-chart-type="bar"
                 nxg-chart-data-name="{{ '# Purchased' | translate }}"
                 nxg-chart-description-x="{{ '# of Cars Purchased' | translate }}"
                 nxg-chart-data="analytics.top10Auctions"
                 nxg-chart-labels="true"
                 nxg-chart-trim-labels="true">
            </div>
          </div>
        </div>
      </section>
    </div>
  </section>
</div>
