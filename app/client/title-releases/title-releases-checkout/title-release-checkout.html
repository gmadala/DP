<div class="container">
  <section class="row">
    <section class="col-sm-9">
      <div class="info-block">
        <div class="info-block-image">
          <span nxg-icon="icon-info"></span>
        </div>
        <h6 class="info-block-text" translate>Titles released here are required to be returned within seven days. If you are requesting a title for state work, please <a nxg-chat-with-us>chat with us</a> or contact customer service for further assistance.</h6>
      </div>
      <div class="panel panel-default">
        <h2 class="well-title-secondary" translate>Title Releases Confirmation</h2>

        <p class="well-item" translate>
          Please confirm your title release request(s) below.
        </p>
        <p class="well-item" ng-show="1 == addresses.length" translate>
          The title(s) will be sent to the following address: <strong>{{addresses[0] | address}}</strong>
        </p>
        <p class="well-item" ng-show="addresses.length > 1" translate>
          Titles can only be released to an address on file. Please select the address where you would like to receive each of your requested titles.
        </p>
      </div>

      <div ng-switch="titleQueue.contents.length">
        <p class="notice-box" ng-switch-when="0">
          <span translate>You have not selected any titles. Please visit the</span>
          <a href="#/titlereleases" translate>Title Releases list</a> <span translate>to select some</span>.
        </p>

        <div class="panel panel-default" ng-switch-default>
          <h2 class="well-title" translate>Title Release Requests</h2>

          <table class="table table-striped table-primary">
            <thead>
            <th class="hidden-xs" translate>Floored</th>
            <th class="hidden-xs" translate>Description</th>
            <th class="hidden-xs" translate>Purchased</th>
            <th class="hidden-xs" translate>Release Status</th>
            </thead>
            <tr ng-repeat="item in titleQueue.contents">
              <td class="hidden-xs">
                <p class="lockup-major">{{ item.FlooringDate | moment}}</p>
                <p class="lockup-minor" translate>{{ item.DaysFloored }} days</p>
              </td>

              <td class="description">
                <button class="btn-unstyle pull-right visible-xs"
                        ng-click="$parent.titleQueue.removeFromQueue(item)"
                        ng-disabled="$parent.submitting">
                  <span nxg-icon="icon-cancel" class="icon-small"></span>
                </button>

                <a class="lockup-major" href="#/vehicledetails?stockNumber={{ item.StockNumber }}">
                  <span nxg-highlight="getVehicleDescription(item)" highlight="item.data.query"></span>
                </a>
                <div>
                  <p class="lockup-minor caps vin"><span translate>VIN</span>: <span nxg-highlight="item.UnitVIN" highlight="item.data.query" class="break-word"></span></p>
                  <p class="lockup-minor caps stock"><span translate>STK</span>: <span nxg-highlight="item.StockNumber" highlight="item.data.query"></span></p>
                </div>

                <div class="col-xs-6 no-padding visible-xs">
                  <p class="lockup-minor vertical-spacing heavy"><span translate>Floored On</span>:</p>
                </div>
                <div class="col-xs-6 no-padding visible-xs">
                  <p class="lockup-minor vertical-spacing"><span>{{ item.FlooringDate | moment}}</span></p>
                </div>
                <div class="col-xs-6 no-padding visible-xs">
                  <p class="lockup-minor vertical-spacing heavy"><span translate>Purchased</span>:</p>
                </div>
                <div class="col-xs-6 no-padding visible-xs">
                  <p class="lockup-minor vertical-spacing"><span>{{ item.UnitPurchaseDate | moment}}</span></p>
                </div>
                <div ng-hide="1 == addresses.length" class="send-to-label lockup-minor heavy"><span translate>Send To</span>:</div>
                <div nxg-alternate-address="item" is-enabled="true" show-tooltip="true" show-select-menu></div>
              </td>

              <td class="date hidden-xs">
                <p>{{item.UnitPurchaseDate | moment}}</p>
              </td>

              <td class="numeric hidden-xs">
                <h4 translate>Added</h4>
                <button class="btn-unstyle btn-link"
                        type="submit"
                        ng-click="$parent.titleQueue.removeFromQueue(item)"
                        ng-disabled="$parent.submitting" translate>
                  Remove Title
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </section>

    <div class="col-sm-3">
      <div class="panel panel-default sticky" nxg-sticky>
        <h2 class="well-title" translate>Requests Summary</h2>
        <div class="well-item well-dark">
          <p translate>Review the following and submit your title release requests.</p>
        </div>
        <div class="well-item bordered">
          <div class="dash-lockup">
            <p class="dash-minor" translate>
              Titles Requested
            </p>

            <h4 class="dash-major" ng-bind="titleQueue.contents.length"></h4>
          </div>

          <div class="dash-lockup">
            <p class="dash-minor" translate>
              Titles Available After This Request
            </p>
            <h5 translate>
              <span class="count highlight dash-major" ng-bind="eligibility.RemainingReleasesAvailable - titleQueue.contents.length">0</span> out of <span class="count highlight dash-major" ng-bind="eligibility.TotalReleasesAllowed">0</span>
            </h5>
          </div>
        </div>

        <button class="btn-cta cta-primary cta-full"
                ng-click="onConfirmRequest()"
                ng-disabled="titleQueue.contents.length == 0 || submitting">
          <span translate>Submit Requests</span>
        </button>
      </div>
    </div>
  </section>
</div>
