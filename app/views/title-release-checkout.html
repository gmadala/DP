<section class="row">
  <section class="col-xs-9">
    <div class="info-block">
      <div class="info-block-image">
        <span nxg-icon="icon-info"></span>
      </div>
      <h6 class="info-block-text" translate>Titles released here are required to be returned within seven days. If you are requesting a title for state work, please <a nxg-chat-with-us>chat with us</a> or contact customer service for further assistance.</h6>
    </div>
    <div class="well">
      <h2 class="well-title-secondary" translate>Title Releases Confirmation</h2>

      <p class="well-item" translate>
        Please confirm your title release request(s) below.
      </p>
      <p class="well-item" ng-show="1 == addresses.length" translate>
        The title(s) will be sent to the following address: <strong>{{addresses[0] | address}}</strong>
      </p>
      <p class="well-item" ng-show="addresses.length > 1" translate>
        Titles can only be released to an address on file. Please select the address where you would like to receive each of your requested titles.
      </p>
    </div>

    <div ng-switch="titleQueue.contents.length">
      <p class="notice-box" ng-switch-when="0" translate>
        You have not selected any titles. Please visit the
        <a href="#/titlereleases">Title Releases list</a> to select some.
      </p>

      <div class="well" ng-switch-default>
        <h2 class="well-title" translate>Title Release Requests</h2>

        <table class="table table-striped table-primary">
          <thead>
            <th translate>Floored</th>
            <th translate>Description</th>
            <th translate>Purchased</th>
            <th translate>Release Status</th>
          </thead>
          <tr ng-repeat="item in titleQueue.contents">
            <td>
              <p class="lockup-major">{{ item.FlooringDate | moment}}</p>
              <p class="lockup-minor" translate>{{ item.DaysFloored }} days</p>
            </td>

            <td class="description no-right-padding">
              <a class="lockup-major" href="#/vehicledetails?stockNumber={{ item.StockNumber }}">
                <span nxg-highlight="getVehicleDescription(item)" highlight="item.data.query"></span>
              </a>
              <div>
                <p class="lockup-minor caps vin"><span translate>VIN</span>: <span nxg-highlight="item.UnitVIN" highlight="item.data.query" class="break-word"></span></p>
                <p class="lockup-minor caps stock"><span translate>STK</span>: <span nxg-highlight="item.StockNumber" highlight="item.data.query"></span></p>
              </div>

              <div ng-hide="1 == addresses.length" class="send-to-label"><span translate>Send To</span>: </div>
              <div nxg-alternate-address="item" is-enabled="true" show-tooltip="true" show-select-menu>
              </div>
            </td>

            <td class="date">
              <p>{{item.UnitPurchaseDate | moment}}</p>
            </td>

            <td class="numeric">
              <!-- Force pluralization due to duplicate translations -->
              <h4 translate translate-n="1" translate-plural="Titles Requested">Title Requested</h4>
              <button class="btn-unstyle btn-link"
                      type="submit"
                      ng-click="$parent.titleQueue.removeFromQueue(item)"
                      ng-disabled="$parent.submitting" translate>
                Remove Title
              </button>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </section>

  <div class="col-xs-3 custom well sticky" nxg-sticky>
    <h2 class="well-title" translate>Requests Summary</h2>
    <div class="well-item well-dark bordered">
      <p translate>Review the following and submit your title release requests.</p>
    </div>
    <div class="well-item bordered">
      <div class="dash-lockup">
        <p class="dash-minor" translate>
           Titles Requested
         </p>

        <h4 class="dash-major" ng-bind="titleQueue.contents.length"></h4>
      </div>

      <div class="dash-lockup">
        <p class="dash-minor" translate>
          Titles Available After This Request
        </p>
        <h5 translate>
           <span class="count highlight dash-major" ng-bind="eligibility.RemainingReleasesAvailable - titleQueue.contents.length">0</span> out of <span class="count highlight dash-major" ng-bind="eligibility.TotalReleasesAllowed">0</span>
        </h5>
      </div>
    </div>

    <button class="btn-cta cta-primary cta-full"
            ng-click="onConfirmRequest()"
            ng-disabled="titleQueue.contents.length == 0 || submitting">
      <span translate>Submit Requests</span>
      <span nxg-icon="icon-title"></span>
    </button>
  </div>
</section>
