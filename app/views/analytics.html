<div class="container-line">
  <div class="container-fluid">
    <section class="row-fluid business-summary">
        <div class="span4">
            <h4>Approved Floorplans</h4>
            {{ businessSummary.ApprovedFloorplans }} Approved
            <ul>
                <li>Total Book Value {{ businessSummary.TotalApprovedBlackBookValue | currency }} </li>
                <li>Total Financed Amount {{ businessSummary.TotalApprovedFinancedAmount| currency }} </li>
                <li>Total Outstanding {{ businessSummary.TotalOutstandingPrincipal | currency }} </li>
                <!-- should show conditionally on-click of "Show Details" bar. -->
                <li ng-show="showDetails">Average purchase price: {{ businessSummary.AveragePurchasePrice | currency }} </li>
                <li ng-show="showDetails">Total purchase price: {{ businessSummary.TotalApprovedPurchasePrice | currency }} </li>
                <li ng-show="showDetails">Total NextGear Capital Book value {{ businessSummary.TotalApprovedBlackbookValue | currency }} </li>
                <li ng-show="showDetails" class="small"> NextGear Capital Book is {{ businessSummary.DerivedCapitalBook | number:2 }}% of the Purchase Price </li>
                <li ng-show="showDetails" class="small">Amount Outstanding is {{ businessSummary.DerivedAmountOutstanding | number:2 }}% of the NextGear Capital Book</li>
                <!-- end conditional <li>s -->
            </ul>
        </div>
        <div class="span4">
            <h4>Pending Floorplans</h4>
            {{ businessSummary.PendingFloorplans }} Pending
            <ul>
                <li>Total Purchase Price {{ businessSummary.TotalPendingPurchasePrice | currency }} </li>
                <li>Total NextGear Capital Book value {{ businessSummary.TotalPendingBlackBookPrice | currency }} </li>
                <!-- should show conditionally on-click of "Show Details" bar. -->
                <li ng-show="showDetails" class="small">NextGear Capital Book is {{ businessSummary.DerivedCapitalBook | number:2 }}% of the Purchase Price</li>
                <!-- end conditional <li>s -->
            </ul>
        </div>
        <div class="span4">
            <h4>Credits and Payments</h4>
            <ul>
                <li>Available Credit {{ businessSummary.TotalAvailableCredit | currency }} </li>
                <li>Reserve Funds {{ businessSummary.ReserveFundsBalance | currency }} </li>
                <li>Last Payment {{ businessSummary.LastPaymentAmount | currency }} </li>
                <li>Last Payment Date {{ businessSummary.LastPaymentDate | moment }}</li>
            </ul>
        </div>
    </section>
    <button class="row" ng-click="toggleDetails()"><!-- activates above conditional <li>s -->
        <i class="icon icon-arrow-down"></i>
        Show Details
    </button>
    <section class="row-fluid">
        <div class="span6">
          <div class="row">
            <h4>Average Turn</h4>
            <span>Average Number of Days to Turn</span>
            <canvas width="300"
                    height="300"
                    nxg-chart
                    nxg-chart-type="Line"
                    nxg-chart-data="analytics.averageTurn"
                    nxg-chart-options="{scaleOverride:true, scaleSteps:10, scaleStepWidth:10}">
            </canvas>
            <p>The Last 12 Months</p>
          </div>
          <div class="row">
            <h4>NextGear's Best and Worst Movers</h4>
            <select ng-model="moversSelection" ng-options="v for v in moversOptions" ng-change="toggleMovers()"></select>
            <canvas width="300"
                    height="300"
                    ng-show="true"
                    nxg-chart
                    nxg-chart-type="Bar"
                    nxg-chart-data="bestMovers"
                    nxg-chart-options="{scaleOverride:true, scaleSteps:10, scaleStepWidth:10}">
            </canvas>
            <canvas width="300"
                    height="300"
                    ng-show="false"
                    nxg-chart
                    nxg-chart-type="Bar"
                    nxg-chart-data="worstMovers"
                    nxg-chart-options="{scaleOverride:true, scaleSteps:10, scaleStepWidth:10}">
            </canvas>
            <p>Average Number of Days to Turn</p>
          </div>
        </div>
        <div class="span6">
          <div class="row">
            <h4>Stale and Aging Vehicles</h4>
            <ul>
                <li>{{ analytics.aging[3] }} 100-125 Days</li>
                <li>{{ analytics.aging[2] }} 75-99 Days</li>
                <li>{{ analytics.aging[1] }} 50-74 days</li>
                <li>{{ analytics.aging[0] }} 1-25 Days</li>
            </ul>
            <a href="#/home/payments">View All Payments</a>
          </div>
          <div class="row">
            <h4>Top 10 Auctions</h4>
            <canvas width="300"
                    height="300"
                    nxg-chart
                    nxg-chart-type="Bar"
                    nxg-chart-data="analytics.top10Auctions"
                    nxg-chart-options="{scaleOverride:true, scaleSteps:10, scaleStepWidth:10}">
            </canvas>
            <p>Average Number of Cars Purchased in the last 12 months</p>
            <p><a href ng-click="openTopAuctions()">View All Auctions</a></p>
          </div>
        </div>
    </section>
  </div>
</div>
