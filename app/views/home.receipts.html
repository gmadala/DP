<section class="row-fluid">
  <section class="span12">
    <div nxg-search
       title="Receipt Search"
       class="search-form"
       prompt="Enter Receipt #, Stock #, VIN, Check #"
       filter-label="Filter List by Payment Method"
       filter-options="filterOptions"
       active-criteria="receipts.proposedSearchCriteria"
       on-search="receipts.search()"
       on-clear="receipts.resetSearch()">
    </div>

    <div ng-switch="receipts.results.length > 0 || receipts.loading">
      <p class="no-results" ng-switch-when="false">
        Sorry, no results found. Please <a ng-click="receipts.resetSearch()" title="New Search">try a new search</a>.
      </p>

      <section class="receipts-list" ng-switch-when="true"
               nxg-infinite-scroll="receipts.fetchNextResults()"
               nxg-infinite-scroll-disabled="receipts.loading"
               nxg-infinite-scroll-show-indicator="receipts.loading">

        <ul class="unstyled">
          <li class="table-list-head">
            <div class="cell rec-num">Receipt #</div>
            <div class="cell rec-status">Status</div>
            <div class="cell rec-payDate">Payment Date</div>
            <div class="cell rec-payInfo">Payment Description</div>
            <div class="cell rec-amtApplied">Amount Applied</div>
            <div class="cell rec-amtProvided">Amount Provided</div>
            <div class="cell rec-view">Receipt</div>
          </li>

          <li class="table-list-row" ng-repeat="receipt in receipts.results">
            <div class="cell rec-num">
              <p>
                <span ng-bind-html-unsafe="receipt.TransactionNumber | highlight:receipt.data.query"></span>
              </p>
            </div>
            <div class="cell rec-status">
              <p ng-switch="getReceiptStatus(receipt)">
                <span ng-switch-when="nsf">Insufficient Funds</span>
                <span ng-switch-when="void">Voided</span>
                <span ng-switch-when="normal">Processed</span>
              </p>
            </div>

            <div class="cell rec-payDate">
              <p>{{ receipt.CreateDate | moment }}</p>
            </div>

            <div class="cell rec-payInfo">
              <p ><span class="sch-sub-label">Payment:</span> {{ receipt.PaymentMethod }}<br/>
                <div ng-switch on="!!reciept.CheckNumber">
                  <div ng-switch-when="true">
                    <span class="sch-sub-label" ng-show="receipt.CheckNumber">Check #:</span>
                    <span ng-bind-html-unsafe="receipt.CheckNumber | highlight:receipt.data.query"></span>
                  </div>
                </div>
              </p>
              <p ng-show="receipt.PayeeDescription">{{ receipt.PayeeDescription }}</p>
            </div>
            <div class="cell rec-amtApplied">
              <p>{{ receipt.AmountApplied | currency }}</p>
            </div>
            <div class="cell rec-amtProvided">
              <p>{{ receipt.AmountProvided | currency }}</p>
            </div>
            <div class="cell rec-view">
              <a ng-href="{{ receipt.$receiptURL }}" target="_blank"
                 nxg-track="{{ metric.VIEW_RECEIPT_DETAIL }}">
                View Receipt
              </a>
            </div>
          </li>
        </ul>
        <p class="text-error notice-box" ng-show="receipts.hitInfiniteScrollMax">
          There are too many results to display, please refine your search further.
        </p>
      </section>
    </div>

  </section>
</section>
