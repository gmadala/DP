<form class="row-fluid" name="form" novalidate>
  <fieldset class="span6 well first">
    <h2 class="well-title" translate>1. Vehicle Information</h2>
    <div class="well-form">

      <div nxg-vin-details floor-model="data" validity="validity" form="form" error-flag="vinDetailsErrorFlag" nxg-autofocus="reset"></div>

      <label for="inputColor" class="input-title" translate>Color</label>
      <div class="style-select" ng-class="{ 'nxg-invalid': validity.inputColor.$error.required }">
        <select id="inputColor" name="inputColor" ng-model="data.UnitColorId"
                ng-options="color.ColorName for color in options.colors" required>
          <option value="" translate>Make Selection</option>
        </select>
      </div>
      <label for="inputColor"
             class="text-error"
             ng-show="validity.inputColor.$error.required" translate>
        Please select a Color.
      </label>

      <label for="inputMileage" class="input-title">{{ mileageOrOdometer }}</label>
      <input type="text" id="inputMileage"
             name="inputMileage"
             ng-model="data.UnitMileage"
             ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*$/"
             nxg-min="1"
             required
             nxg-validate-int="6"
             ng-class="{ 'nxg-invalid': validity.inputMileage.$error.required || validity.inputMileage.$error.pattern || validity.inputMileage.$error.maxlength || validity.inputMileage.$error.nxgMin }"
        />
      <label for="inputMileage" class="text-error" ng-show="validity.inputMileage.$error.required">
        <span  translate>Please enter the</span>
        <span>{{ mileageOrOdometer}}.</span>
      </label>
      <label for="inputMileage"
             class="text-error"
             ng-show="validity.inputMileage.$error.pattern || validity.inputMileage.$error.nxgMin" translate>
        Please enter a positive integer value with no decimals.
      </label>
      <label for="inputMileage"
             class="text-error"
             ng-show="validity.inputMileage.$error.maxlength">
        Please enter a value less than 1,000,000 miles.
      </label>

      <label for="inputTitleHolder" class="input-title" translate>Who has the Title?</label>
      <div class="style-select" ng-class="{ 'nxg-invalid': validity.inputTitleHolder.$error.required }">
        <select id="inputTitleHolder"
                name="inputTitleHolder" ng-model="data.TitleLocationId"
                ng-options="location.Name for location in options.titleLocationOptions"
                required >
          <option value="" translate>Make Selection</option>
        </select>
      </div>
      <label for="inputTitleHolder"
             class="text-error"
             ng-show="validity.inputTitleHolder.$error.required" translate>
        Please select who has the title.
      </label>

      <label for="inputInvLoc" class="input-title" translate>Inventory Location</label>
      <div class="style-select" ng-class="{ 'nxg-invalid': validity.inputInvLoc.$error.required }">
        <select id="inputInvLoc" name="inputInvLoc" ng-model="data.PhysicalInventoryAddressId"
                ng-options="(location | address:'oneLineSelect') for location in options.locations"
                required>
          <option value="" translate>Make Selection</option>
        </select>
      </div>
      <label for="inputInvLoc"
             class="text-error"
             ng-show="validity.inputInvLoc.$error.required" translate>
        Please select an Inventory Location.
      </label>
    </div>
  </fieldset>

  <fieldset class="span6 well">
    <h2 class="well-title" translate>2. Sale Information</h2>
    <div class="well-form">
      <label translate>Trade in</label>
      <div class="form-inline">
        <div class="cr-inline">
          <input type="radio" id="yes" name="inputTradeIn" ng-value="true" ng-model="data.SaleTradeIn" ng-change="data.PaySeller = !data.SaleTradeIn" ng-disabled="!canPayBuyer">
          <label class="radio-img" for="yes"></label>
          <label class="cr-label" for="yes" translate>Yes</label>

          <input type="radio" id="no" name="inputTradeIn" ng-value="false" ng-model="data.SaleTradeIn" ng-disabled="!canPayBuyer">
          <label class="radio-img" for="no"></label>
          <label class="cr-label" for="no" translate>No</label>
        </div>
      </div>

      <label for="inputBiz" class="input-title" translate>Seller</label>
      <span class="nxg-business-field" ng-class="{ 'nxg-invalid': validity.inputBiz.$error.nxgRequires || validity.inputBiz.$error.minlength }">
        <input nxg-business-field="sellers"
               id="inputBiz"
               class="input-xlarge"
               name="inputBiz"
               ng-disabled="data.SaleTradeIn"
               ng-required="!data.SaleTradeIn"
               selected-business="data.BusinessId"
               form="form"
               validity="validity" />
      </span>

      <label for="inputPurchaseAmt" class="input-title" translate>Purchase Amount</label>
      <div class="input-prepend dollar">
        <span class="add-on" translate>$</span>
        <input type="text" id="inputPurchaseAmt" name="inputPurchaseAmt" ng-model="data.UnitPurchasePrice"
               required
               nxg-input-currency="1000000000000"
               nxg-min="1"
               ng-class="{ 'nxg-invalid': validity.inputPurchaseAmt.$error.required || validity.inputPurchaseAmt.$error.max || validity.inputPurchaseAmt.$error.pattern || validity.inputPurchaseAmt.$error.maxlength || validity.inputPurchaseAmt.$error.nxgMin }" />
        <label for="inputPurchaseAmt" class="text-error"
               ng-show="validity.inputPurchaseAmt.$error.required" translate>
          Please enter the Purchase Amount.
        </label>
        <label for="inputPurchaseAmt"
               class="text-error"
               ng-show="!validity.inputPurchaseAmt.$error.required && (validity.inputPurchaseAmt.$error.pattern || validity.inputPurchaseAmt.$error.nxgMin)" translate>
          Please enter a positive numeric value with no <br> special characters, such as a dollar sign.
        </label>
        <label for="inputPurchaseAmt" class="text-error"
               ng-show="!validity.inputPurchaseAmt.$error.required && !validity.inputPurchaseAmt.$error.pattern && validity.inputPurchaseAmt.$error.max" translate>
          Please enter a value less than $1,000,000,000,000.
        </label>
      </div>

      <label for="inputPurchaseDate" class="input-title" translate>Purchase Date</label>
      <input id="inputPurchaseDate"
             name="inputPurchaseDate"
             ng-model="data.UnitPurchaseDate"
             ng-pattern="isYear"
             nxg-date-field date-allow="past"
             required ng-class="{ 'nxg-invalid': validity.inputPurchaseDate.$error.required || (validity.inputPurchaseDate.$error.nxgRequires && !validity.inputPurchaseDate.$error.required) || validity.inputPurchaseDate.$error.past || validity.inputPurchaseDate.$error.date || validity.inputPurchaseDate.$error.pattern }"/>
      <label for="inputPurchaseDate" class="text-error"
             ng-show="validity.inputPurchaseDate.$error.required || validity.inputPurchaseDate.$error.date" translate>
        Please enter a Valid Purchase Date.
      </label>
      <label for="inputPurchaseDate"
             class="text-error"
             ng-show="validity.inputPurchaseDate.$error.pattern && !validity.inputPurchaseDate.$error.date" translate>
        Please enter a Valid Purchase Date Year between {{minValidModelYear}} and {{maxValidModelYear}}.
      </label>
      <label for="inputPurchaseDate" class="text-error"
             ng-show="validity.inputPurchaseDate.$error.past" translate>
        Please enter a Purchase Date in the past.
      </label>

      <label for="inputCreditLine" class="input-title" translate>Line of Credit</label>
      <div class="style-select" ng-class="{ 'nxg-invalid': validity.inputCreditLine.$error.required }">
        <select id="inputCreditLine"
                name="inputCreditLine"
                ng-model="data.LineOfCreditId"
                ng-options="line.LineOfCreditName for line in options.LinesOfCredit"
                required>
          <option value="" translate>Make Selection</option>
        </select>
      </div>
      <label for="inputCreditLine" class="text-error"
             ng-show="validity.inputCreditLine.$error.required" translate>
        Please select a Line of Credit.
      </label>

      <label for="inputSendPay" class="input-title"><span translate>Send Payment To</span>:</label>
      <div class="style-select">
        <select id="inputSendPay" name="inputSendPay" ng-model="data.PaySeller"
                ng-options="value && 'Seller' || 'Buyer' for value in paySellerOptions"
                ng-change="data.BankAccountId = null"
                ng-disabled="data.SaleTradeIn">
          <option value="" translate>Make Selection</option>
        </select>
      </div>

      <label for="inputDisburseAcct" translate>Bank Account for Disbursement (when applicable)</label>
      <div class="style-select" ng-class="{ 'nxg-invalid': validity.inputDisburseAcct.$error.required, 'disabled': data.PaySeller }">
        <select id="inputDisburseAcct"
                name="inputDisburseAcct"
                ng-model="data.BankAccountId"
                ng-disabled="data.PaySeller"
                ng-required="!data.PaySeller"
                ng-options="account.BankAccountName for account in options.BankAccounts">
          <option value="" translate>Make Selection</option>
        </select>
      </div>
      <label for="inputDisburseAcct" class="text-error"
             ng-show="validity.inputDisburseAcct.$error.required" translate>
        Please select a Bank Account for Disbursement.
      </label>

      <div class="form-footer button-group">
        <button class="btn-cta cta-secondary"
                type="button"
                ng-disabled="submitInProgress"
                ng-click="cancel()"
                nxg-track="{{metric.CLICK_FLOOR_A_VEHICLE_CANCEL_BUTTON}}" translate>
          Cancel
        </button>
        <button class="btn-cta cta-primary"
                ng-disabled="submitInProgress"
                type="submit"
                ng-click="submit()"
                nxg-track="{{metric.CLICK_FLOOR_A_VEHICLE_FLOOR_BUTTON}}" translate>
          Floor Vehicle
        </button>
      </div>
    </div>
  </fieldset>
</form>
