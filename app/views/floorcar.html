<div class="container-line">
  <div class="container-fluid">
    <!-- TODO: Add error messaging -->
    <form class="row-fluid two-col floorcar" name="form" novalidate>
       <fieldset class="span8 well adjacent first">
          <h4>1. Vehicle Information</h4>
          <div class="well-out">

           <div nxg-vin-details floor-model="data" validity="validity" form="form" nxg-autofocus="reset"></div>

           <label for="inputColor" class="input-title">Color</label>
           <select id="inputColor" name="inputColor" ng-model="data.UnitColorId"
                   ng-options="color.ColorName for color in options().colors" ng-class="{ 'nxg-invalid': validity.inputColor.$error.required }" required>
            <option class="disabled" disabled="disabled" value="">Make Selection</option>
           </select>
           <label for="inputColor" class="text-error"
                  ng-show="validity.inputColor.$error.required">
             Please select a Color.
           </label>

           <label for="inputMileage" class="input-title">Mileage</label>
           <input type="text" id="inputMileage" name="inputMileage" ng-model="data.UnitMileage"
                  ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*$/"
                  required
                  nxg-validate-int=6
                  ng-class="{ 'nxg-invalid': validity.inputMileage.$error.required || validity.inputMileage.$error.pattern || validity.inputMileage.$error.maxlength }"
                  nxg-blur="mileageExit(form.inputMileage)"/>
           <label for="inputMileage" class="text-error"
                  ng-show="validity.inputMileage.$error.required">
             Please enter the Mileage.
           </label>
           <label for="inputMileage" class="text-error"
                  ng-show="validity.inputMileage.$error.pattern">
             Please enter a positive integer value with no decimals.
           </label>
           <label for="inputMileage" class="text-error"
                  ng-show="validity.inputMileage.$error.maxlength">
             Please enter a value less than 1,000,000 miles.
           </label>

           <label for="bookVal" class="input-title">NextGear Book Value</label>
           <p id="bookVal" ng-class="{muted: !data.$blackbookMileage || !data.$selectedVehicle }">
             {{ data.$blackbookMileage && data.$selectedVehicle && (data.$selectedVehicle.AverageValue | currency) || 'N/A' }}
           </p>

           <label for="inputTitleHolder" class="input-title">Who has the Title?</label>
           <select id="inputTitleHolder" name="inputTitleHolder" ng-model="data.TitleLocationId"
                   ng-options="location.Name for location in options().titleLocationOptions"
                   required ng-class="{ 'nxg-invalid': validity.inputTitleHolder.$error.required }" >
             <option class="disabled" disabled="disabled" value="">Make Selection</option>
           </select>
           <label for="inputTitleHolder" class="text-error"
                  ng-show="validity.inputTitleHolder.$error.required">
             Please select who has the title.
           </label>

           <label for="inputInvLoc" class="input-title">Inventory Location</label>
           <select id="inputInvLoc" name="inputInvLoc" ng-model="data.PhysicalInventoryAddressId"
                   ng-options="location.LocationName for location in options().locations"
                   ng-class="{ 'nxg-invalid': validity.inputInvLoc.$error.required }" required>
             <option class="disabled" disabled="disabled" value="">Make Selection</option>
           </select>
           <label for="inputInvLoc" class="text-error"
                  ng-show="validity.inputInvLoc.$error.required">
             Please select an Inventory Location.
           </label>
          </div>
       </fieldset>

        <fieldset class="span8 well adjacent last-adjacent">
          <h4>2. Sale Information</h4>
          <div class="well-out">

            <label>Trade in</label>
            <div class="form-inline nxg-radios">
              <input type="radio" id="yes" name="inputTradeIn" ng-value="true" ng-model="data.SaleTradeIn" ng-change="data.PaySeller = !data.SaleTradeIn" ng-disabled="!canPayBuyer()">
              <label for="yes">Yes</label>

              <input type="radio" id="no" name="inputTradeIn" ng-value="false" ng-model="data.SaleTradeIn" ng-disabled="!canPayBuyer()">
              <label for="no">No</label>
            </div>

            <label for="inputBiz" class="input-title">Seller</label>
            <span class="nxg-business-field" ng-class="{ 'nxg-invalid': validity.inputBiz.$error.nxgRequires || validity.inputBiz.$error.minlength }">
              <input nxg-business-field="sellers" id="inputBiz" class="input-xlarge"
                     name="inputBiz"
                     ng-disabled="data.SaleTradeIn"
                     ng-required="!data.SaleTradeIn"
                     selected-business="data.BusinessId"
                     form="form"
                     validity="validity" />
            </span>

            <label for="inputPurchaseAmt" class="input-title">Purchase Amount</label>
            <div class="input-prepend dollar">
              <span class="add-on">$</span>
              <input type="text" id="inputPurchaseAmt" name="inputPurchaseAmt" ng-model="data.UnitPurchasePrice"
                     ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*(\.[0-9]{1,2})?$/"
                     required
                     nxg-input-currency=1000000000000
                     ng-class="{ 'nxg-invalid': validity.inputPurchaseAmt.$error.required || validity.inputPurchaseAmt.$error.pattern || validity.inputPurchaseAmt.$error.maxlength }" />
              <label for="inputPurchaseAmt" class="text-error"
                     ng-show="validity.inputPurchaseAmt.$error.required">
                Please enter the Purchase Amount.
              </label>
              <label for="inputPurchaseAmt" class="text-error"
                     ng-show="validity.inputPurchaseAmt.$error.pattern">
                  Please enter a numeric value with no <br> special characters, such as a dollar sign.
              </label>
               <label for="inputPurchaseAmt" class="text-error"
                     ng-show="validity.inputPurchaseAmt.$error.max">
                  Please enter a value less than $1,000,000,000,000.
              </label>
            </div>

            <label for="inputPurchaseDate" class="input-title">Purchase Date</label>
            <input id="inputPurchaseDate" name="inputPurchaseDate" ng-model="data.UnitPurchaseDate"
                   ng-pattern="isYear"
                   nxg-date-field date-allow="past"
                   required ng-class="{ 'nxg-invalid': validity.inputPurchaseDate.$error.required || (validity.inputPurchaseDate.$error.nxgRequires && !validity.inputPurchaseDate.$error.required) || validity.inputPurchaseDate.$error.past }"/>
            <label for="inputPurchaseDate" class="text-error"
                   ng-show="validity.inputPurchaseDate.$error.required">
              Please enter a Valid Purchase Date.
            </label>
            <label for="inputPurchaseDate" class="text-error"
                   ng-show="validity.inputPurchaseDate.$error.date">
              Please enter a Valid Purchase Date.
            </label>
           <label for="inputPurchaseDate" class="text-error"
                   ng-show="validity.inputPurchaseDate.$error.pattern">
              Please enter a Valid Purchase Date Year between {{minValidModelYear}} and {{maxValidModelYear}}.
            </label>
            <label for="inputPurchaseDate" class="text-error"
                   ng-show="validity.inputPurchaseDate.$error.past">
              Please enter a Purchase Date in the past.
            </label>

            <label for="inputCreditLine" class="input-title">Line of Credit</label>
            <select id="inputCreditLine" name="inputCreditLine" ng-model="data.LineOfCreditId"
                    ng-options="line.LineOfCreditName for line in options().linesOfCredit"
                    ng-class="{ 'nxg-invalid': validity.inputCreditLine.$error.required }" required>
             <option class="disabled" disabled="disabled" value="">Make Selection</option>
            </select>
            <label for="inputCreditLine" class="text-error"
                   ng-show="validity.inputCreditLine.$error.required">
              Please select a Line of Credit.
            </label>

            <label for="inputSendPay" class="input-title">Send Payment To:</label>
            <select id="inputSendPay" name="inputSendPay" ng-model="data.PaySeller"
                    ng-options="value && 'Seller' || 'Buyer' for value in paySellerOptions()"
                    ng-change="data.BankAccountId = null"
                    ng-disabled="data.SaleTradeIn">
             <option class="disabled" disabled="disabled" value="">Make Selection</option>
            </select>

            <label for="inputDisburseAcct">Bank Account for Disbursement (when applicable)</label>
            <select id="inputDisburseAcct" name="inputDisburseAcct" ng-model="data.BankAccountId"
                    ng-disabled="data.PaySeller"
                    ng-required="!data.PaySeller"
                    ng-class="{ 'nxg-invalid': validity.inputDisburseAcct.$error.required }"
                    ng-options="account.BankAccountName for account in options().bankAccounts">
             <option class="disabled" disabled="disabled" value="">Make Selection</option>
            </select>
            <label for="inputDisburseAcct" class="text-error"
                   ng-show="validity.inputDisburseAcct.$error.required">
              Please select a Bank Account for Disbursement.
            </label>

            <div class="footer modal-footer">
              <button class="btn btn-small btn-primary"
                      ng-disabled="submitInProgress"
                      type="submit"
                      ng-click="submit()">
                Floor
              </button>
              <button class="btn btn-small btn-secondary"
                      ng-disabled="submitInProgress"
                      ng-click="cancel()">
                Cancel
              </button>
            </div>
          </div>
        </fieldset>
    </form>
  </div>
</div>
<span id="checkbox-image-preloader"></span>
