<section class="row-fluid">
  <section class="span5">
    <div class="well">
      <h4 class="well-title">
        VIN Lookup:
        <span class="subtle">NextGear Book &amp; MMR</span>
        <button class="btn-unstyle reset" ng-click="vinLookup.resetSearch()"><strong>Reset Values</strong></button>
      </h4>
      <div class="well-item">
        <form class="value-form" name="vinLookupForm" novalidate>
          <div class="form-block">
            <label for="vin" class="input-title">VIN</label>
            <input type="text" id="vin"
              name="vin"
              ng-model="vinLookup.vin"
              ng-minlength="10"
              ng-maxlength="17"
              required
              nxg-autofocus
              ng-class="{ 'nxg-invalid': vinLookup.validity.vin.$error.required || vinLookup.validity.vin.$error.minlength || vinLookup.validity.vin.$error.maxlength }" />
            <label for="vin" class="text-error" ng-show="vinLookup.validity.vin.$error.required">
              Please enter a VIN.
            </label>
            <label for="vin" class="text-error" ng-show="vinLookup.validity.vin.$error.minlength || vinLookup.validity.vin.$error.maxlength">
              VIN should be 10 - 17 characters.
            </label>

            <label for="vinMileage" class="input-title">Mileage</label>
            <input type="text" id="vinMileage"
              name="vinMileage"
              ng-model="vinLookup.mileage"
              ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*$/"
              nxg-min="1"
              required
              nxg-validate-int="6"
              ng-class="{ 'nxg-invalid': vinLookup.validity.vinMileage.$error.required || vinLookup.validity.vinMileage.$error.pattern || vinLookup.validity.vinMileage.$error.maxlength || vinLookup.validity.vinMileage.$error.nxgMin }"
              />
              <label for="vinMileage" class="text-error"
                ng-show="vinLookup.validity.vinMileage.$error.required">
                Please enter the Mileage.
              </label>
              <label for="vinMileage"
                class="text-error"
                ng-show="vinLookup.validity.vinMileage.$error.pattern || vinLookup.validity.vinMileage.$error.nxgMin">
                Please enter a positive integer value with no decimals.
              </label>
              <label for="vinMileage"
                class="text-error"
                ng-show="vinLookup.validity.vinMileage.$error.maxlength">
                Please enter a value less than 1,000,000 miles.
              </label>
            </div>
          <button class="btn-cta cta-primary" ng-click="vinLookup.lookup()" ng-disabled="searchInProgress">Lookup Values</button>
        </form>
      </div>
    </div>

    <div class="well">
      <h4 class="well-title">
        Manual Lookup:
        <span class="subtle">NextGear Book or MMR</span>
        <button class="btn-unstyle reset" ng-click="manualLookup.resetSearch()"><strong>Reset Values</strong></button>
      </h4>
      <div class="well-item">
        <div class="cta btn-toggle">
          <div class="btn-slider" ng-class="{ 'active-left':manualLookup.showBlackbook, 'active-right':!manualLookup.showBlackbook }"></div>
          <button class="btn" ng-click="manualLookup.toggleForm(true)">NextGear Book</button>
          <button class="btn" ng-click="manualLookup.toggleForm(false)">MMR Values</button>
        </div>
        <form class="value-form" name="manualLookupForm" novalidate>
          <div class="form-block" ng-switch="manualLookup.showBlackbook">
            <div class="" ng-switch-default="true">
              <label for="make">Make</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.blackbook.validity.make.$error.required }">
                <select id="make" name="make"
                  ng-model="manualLookup.blackbook.makes.selected"
                  ng-change="manualLookup.blackbook.models.fill()"
                  ng-options="make for make in manualLookup.blackbook.makes.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="make" class="text-error" ng-show="manualLookup.blackbook.validity.make.$error.required">
                Please select a Make.
              </label>

              <label for="model">Model</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.blackbook.validity.model.$error.required, disabled: !manualLookup.blackbook.makes.selected }">
                <select id="model" name="model"
                  ng-model="manualLookup.blackbook.models.selected"
                  ng-change="manualLookup.blackbook.years.fill()"
                  ng-disabled="!manualLookup.blackbook.makes.selected"
                  ng-options="model for model in manualLookup.blackbook.models.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="model" class="text-error" ng-show="manualLookup.blackbook.validity.model.$error.required">
                Please select a Model.
              </label>

              <label for="year">Year</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.blackbook.validity.year.$error.required, disabled: !manualLookup.blackbook.models.selected }">
                <select id="year" name="year"
                  ng-model="manualLookup.blackbook.years.selected"
                  ng-change="manualLookup.blackbook.styles.fill()"
                  ng-disabled="!manualLookup.blackbook.models.selected"
                  ng-options="year for year in manualLookup.blackbook.years.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="year" class="text-error" ng-show="manualLookup.blackbook.validity.year.$error.required">
                Please select a Year.
              </label>

              <label for="style">Style</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.blackbook.validity.style.$error.required, disabled: !manualLookup.blackbook.years.selected }">
                <select id="style" name="style"
                  ng-model="manualLookup.blackbook.styles.selected"
                  ng-disabled="!manualLookup.blackbook.years.selected"
                  ng-options="style for style in manualLookup.blackbook.styles.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="style" class="text-error"
                     ng-show="manualLookup.blackbook.validity.style.$error.required">
                Please select a Style.
              </label>

              <label for="blackbookMileage" class="input-title">Mileage</label>
              <input type="text" id="blackbookMileage"
                name="blackbookMileage"
                ng-model="manualLookup.blackbook.mileage"
                ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*$/"
                nxg-min="1"
                required
                nxg-validate-int="6"
                ng-class="{ 'nxg-invalid': manualLookup.blackbook.validity.blackbookMileage.$error.required || manualLookup.blackbook.validity.blackbookMileage.$error.pattern || manualLookup.blackbook.validity.blackbookMileage.$error.maxlength || manualLookup.blackbook.validity.blackbookMileage.$error.nxgMin }"
                />
              <label for="blackbookMileage" class="text-error"
                ng-show="manualLookup.blackbook.validity.blackbookMileage.$error.required">
                Please enter the Mileage.
              </label>
              <label for="blackbookMileage"
                class="text-error"
                ng-show="manualLookup.blackbook.validity.blackbookMileage.$error.pattern || manualLookup.blackbook.validity.blackbookMileage.$error.nxgMin">
                Please enter a positive integer value with no decimals.
              </label>
              <label for="blackbookMileage"
                class="text-error"
                ng-show="manualLookup.blackbook.validity.blackbookMileage.$error.maxlength">
                Please enter a value less than 1,000,000 miles.
              </label>
            </div>

            <div class="" ng-switch-when="false">
              <label for="mmrYear">Year</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.mmr.validity.mmrYear.$error.required }">
                <select id="mmrYear" name="mmrYear"
                  ng-model="manualLookup.mmr.years.selected"
                  ng-change="manualLookup.mmr.makes.fill()"
                  ng-options="year.Name for year in manualLookup.mmr.years.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="mmrYear" class="text-error" ng-show="manualLookup.mmr.validity.year.$error.required">
                Please select a Year.
              </label>

              <label for="mmrMake">Make</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.mmr.validity.mmrMake.$error.required, disabled: !manualLookup.mmr.years.selected }">
                <select id="mmrMake" name="mmrMake"
                  ng-model="manualLookup.mmr.makes.selected"
                  ng-change="manualLookup.mmr.models.fill()"
                  ng-disabled="!manualLookup.mmr.years.selected"
                  ng-options="make.Name for make in manualLookup.mmr.makes.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="make" class="text-error" ng-show="manualLookup.mmr.validity.mmrMake.$error.required">
                Please select a Make.
              </label>

              <label for="mmrModel">Model</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.mmr.validity.mmrModel.$error.required, disabled: !manualLookup.mmr.makes.selected }">
                <select id="mmrModel" name="mmrModel"
                  ng-model="manualLookup.mmr.models.selected"
                  ng-change="manualLookup.mmr.styles.fill()"
                  ng-disabled="!manualLookup.mmr.makes.selected"
                  ng-options="model.Name for model in manualLookup.mmr.models.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="mmrModel" class="text-error" ng-show="manualLookup.mmr.validity.mmrModel.$error.required">
                Please select a Model.
              </label>

              <label for="mmrStyle">Style</label>
              <div class="style-select" ng-class="{ 'nxg-invalid': manualLookup.mmr.validity.mmrStyle.$error.required, disabled: !manualLookup.mmr.models.selected }">
                <select id="mmrStyle" name="mmrStyle"
                  ng-model="manualLookup.mmr.styles.selected"
                  ng-disabled="!manualLookup.mmr.models.selected"
                  ng-options="style.Name for style in manualLookup.mmr.styles.list"
                  required>
                  <option value=""></option>
                </select>
              </div>
              <label for="mmrStyle" class="text-error"
                     ng-show="manualLookup.mmr.validity.mmrStyle.$error.required">
                Please select a Style.
              </label>

              <label for="mmrMileage" class="input-title">Mileage</label>
              <input type="text" id="mmrMileage"
                name="mmrMileage"
                ng-model="manualLookup.mmr.mileage"
                ng-pattern="/^[0-9]{1,3}(?:,?[0-9]{3})*$/"
                nxg-min="1"
                required
                nxg-validate-int="6"
                ng-class="{ 'nxg-invalid': manualLookup.mmr.validity.mmrMileage.$error.required || manualLookup.mmr.validity.mmrMileage.$error.pattern || manualLookup.mmr.validity.mmrMileage.$error.maxlength || manualLookup.mmr.validity.mmrMileage.$error.nxgMin }"
                />
              <label for="mmrMileage" class="text-error"
                ng-show="manualLookup.mmr.validity.mmrMileage.$error.required">
                Please enter the Mileage.
              </label>
              <label for="mmrMileage"
                class="text-error"
                ng-show="manualLookup.mmr.validity.mmrMileage.$error.pattern || manualLookup.mmr.validity.mmrMileage.$error.nxgMin">
                Please enter a positive integer value with no decimals.
              </label>
              <label for="mmrMileage"
                class="text-error"
                ng-show="manualLookup.mmr.validity.mmrMileage.$error.maxlength">
                Please enter a value less than 1,000,000 miles.
              </label>

            </div>
          </div>

          <button class="btn-cta cta-primary" ng-click="manualLookup.lookup()" ng-disabled="searchInProgress">Lookup Values</button>
        </form>
      </div>
    </div>
  </section>

  <section class="span7">
    <div class="info-block" ng-hide="results.blackbook.multiple || results.mmr.multiple || manualLookup.searchComplete || vinLookup.searchComplete">
      <div class="info-block-image">
        <span nxg-icon="icon-info"></span>
      </div>
      <p class="info-block-text">
        Values below will update based on successful VIN or Manual Lookup
      </p>
    </div>
    <div class="info-block" ng-show="showMultiplesWarning()">
      <div class="info-block-image">
        <span nxg-icon="icon-warning"></span>
      </div>
      <p class="info-block-text">
        There are multiple vehicle styles for this VIN. Please select the appropriate style below.
      </p>
    </div>

    <div ng-show="showDescription()">
      <h4 class="subtitle">Vehicle Description</h4>
      <div class="valuation-description">
        <h2>{{ results.description }}</h2>
        <h4 ng-show="results.vin">VIN: {{ results.vin }}</h4>
        <p ng-show="results.style">{{ results.style }} </p>
        <p>{{ results.mileage | numeral:'0,0' }} miles</p>
      </div>
    </div>

    <div ng-hide="hideBlackbookAll()">
      <h4 class="subtitle">NextGear Book Values</h4>
      <p class="text-error" ng-show="results.blackbook.noMatch">We are sorry, but we are unable to provide NextGear Book Values at this time.</p>
      <div ng-show="results.blackbook.multiple">
        <label>Style</label>
        <div class="style-select">
          <select id="blackbookSelectSingle"
                  name="blackbookSelectSingle"
                  ng-model="results.blackbook.data"
                  ng-options="result.Style for result in results.blackbook.multiple">
          </select>
        </div>
      </div>
      <div class="body-style" ng-hide="!vinLookup.searchComplete || results.blackbook.multiple || results.blackbook.noMatch">
        <p class="body-style-label">Style</p>
        <h6>{{ results.blackbook.data.Style }}</h6>
      </div>
      <div class="valuation-table row-fluid" ng-class="{ 'nxg-fade':results.blackbook.noMatch }">
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.blackbook.data.ExtraCleanValue" search-done="searchCompleteCheck()" no-results="results.blackbook.noMatch"></h3>
          <h5>Extra Clean</h5>
        </div>
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.blackbook.data.CleanValue" search-done="searchCompleteCheck()" no-results="results.blackbook.noMatch"></h3>
          <h5>Clean</h5>
        </div>
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.blackbook.data.AverageValue" search-done="searchCompleteCheck()" no-results="results.blackbook.noMatch"></h3>
          <h5>Average</h5>
        </div>
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.blackbook.data.RoughValue" search-done="searchCompleteCheck()" no-results="results.blackbook.noMatch"></h3>
          <h5>Rough</h5>
        </div>
      </div>
    </div>

    <div ng-hide="hideMmrAll()">
      <h4 class="subtitle">MMR Values</h4>
      <p class="text-error" ng-show="results.mmr.noMatch">We are sorry, but we are unable to provide MMR Values at this time.</p>
      <div ng-show="results.mmr.multiple">
        <label>Style</label>
        <div class="style-select">
          <select id="mmrSelectSingle"
                  name="mmrSelectSingle"
                  ng-model="results.mmr.data"
                  ng-options="result.Body for result in results.mmr.multiple">
          </select>
        </div>
      </div>
      <div class="body-style" ng-hide="!vinLookup.searchComplete || results.mmr.multiple || results.mmr.noMatch">
        <p class="body-style-label">Style</p>
        <h6>{{ results.mmr.data.Body }}</h6>
      </div>
      <div class="valuation-table row-fluid" ng-class="{ 'nxg-fade':results.mmr.noMatch }">
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.mmr.data.ExcellentWholesale" search-done="searchCompleteCheck()" no-results="results.mmr.noMatch">
          </h3>
          <h5>Excellent</h5>
        </div>
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.mmr.data.GoodWholesale" search-done="searchCompleteCheck()" no-results="results.mmr.noMatch"></h3>
          <h5>Good</h5>
        </div>
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.mmr.data.AverageWholesale" search-done="searchCompleteCheck()" no-results="results.mmr.noMatch"></h3>
          <h5>Average</h5>
        </div>
        <div class="span3 center">
          <h3 class="highlight heavy" nxg-value-lookup-display="results.mmr.data.FairWholesale" search-done="searchCompleteCheck()" no-results="results.mmr.noMatch"></h3>
          <h5>Fair</h5>
        </div>
      </div>
    </div>

  </section>
</section>
