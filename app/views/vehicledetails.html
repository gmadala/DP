<div class="container-line">
  <div class="container-fluid">
    <div class="row-fluid">
      <h1>{{ flooringInfo.Description }}</h1>
    </div>
    <section class="row-fluid">
      <section class="span9">
        <!-- Flooring Information -->
        <div class="well">
          <h2 class="well-title">Flooring Information <span class="well-sub-title">Floored on {{ flooringInfo.FlooringDate | moment }}</span> </h2>
          <div class="row-fluid col-bordered">
            <div class="span5 first">
              <ul class="list-table">
                <li class="list-table-row">
                  <p class="span6">Total Days Floored</p>
                  <p class="span6 value">{{ flooringInfo.TotalDaysFloored }} <span class="value-note">(of {{ flooringInfo.TotalTermPlanLength }} days)</span></p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Original Term</p>
                  <p class="span6 value">{{ flooringInfo.OriginalTermDaysFloored }} <span class="value-note">(of {{ flooringInfo.OriginalTermPlanLength }} days)</span></p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Extended Term</p>
                  <p class="span6 value">{{ flooringInfo.ExtendedTermDaysFloored }} <span class="value-note">(of {{ flooringInfo.ExtendedTermPlanLength }} days)</span></p>
                </li>
                <li class="list-table-spacer"></li>
                <li class="list-table-row">
                  <p class="span6">Status</p>
                  <p class="span6 value">{{ flooringInfo.FloorplanStatusName }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Stock Number</p>
                  <p class="span6 value">{{ flooringInfo.StockNumber }}</p>
                </li>
                <li class="list-table-spacer"></li>
                <li class="list-table-row">
                  <p class="span6">Purchase Date</p>
                  <p class="span6 value">{{ flooringInfo.PurchaseDate | moment }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Date Submitted</p>
                  <p class="span6 value">{{ flooringInfo.SubmittedDate | moment }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Floor Date</p>
                  <p class="span6 value">{{ flooringInfo.FlooringDate | moment }}</p>
                </li>
                <li class="list-table-spacer"></li>
                <li class="list-table-row">
                  <p class="span6">Finance Amount</p>
                  <p class="span6 value">{{ flooringInfo.FinanceAmount | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Purchase Amount</p>
                  <p class="span6 value">{{ flooringInfo.PurchaseAmount | currency }}</p>
                </li>
              </ul>
            </div>
            <div class="span7 last">
              <ul class="list-table">
                <li class="list-table-row">
                  <p class="span5">Line of Credit</p>
                  <p class="span7 value">{{ flooringInfo.LineOfCredit }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span5">Term Plan Name</p>
                  <p class="span7 value">{{ flooringInfo.TermPlanName }}</p>
                </li>
                <li class="list-table-spacer"></li>
                <li class="list-table-row">
                  <p class="span5">Product Type</p>
                  <p class="span7 value">{{ flooringInfo.ProductType }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span5">Seller</p>
                  <p ng-show="flooringInfo.SellerName != null" class="span7 value">{{ flooringInfo.SellerName }}</p>
                  <p ng-hide="flooringInfo.SellerName != null || dataLoaded == false" class="span7 value">Trade-in</p>
                </li>
                <li class="list-table-spacer"></li>
                <li class="list-table-row">
                  <p class="span5">Seller Address</p>
                  <p ng-show="flooringInfo.SellerName != null" class="span7 value">{{ flooringInfo.sellerAddress | address:'twoLine' }}</p>
                  <p ng-hide="flooringInfo.SellerName != null || dataLoaded == false" class="span7 value">none</p>
                </li>
                <li class="list-table-row">
                  <p class="span5">Inventory Location</p>
                  <p class="span7 value" ng-hide="flooringInfo.showEditInventoryLocation">
                    {{ flooringInfo.inventoryAddress | address:'twoLine' }}
                    <span ng-show="flooringInfo.showChangeLink"><br/><br/>
                      <a class="value-note" href="" ng-click="flooringInfo.showInventorySelect()">Change Inventory Location</a>
                    </span>
                  </p>
                  <p class="span7 value" ng-show="flooringInfo.showEditInventoryLocation">
                    Select Below:
                  </p>
                </li>
                <li class="list-table-row" ng-show="flooringInfo.showEditInventoryLocation">
                  <div class="offset5 span7">
                    <div class="style-select">
                      <select ng-model="flooringInfo.inventoryAddress" ng-options="addr as (addr | address) for addr in inventoryLocations"></select>
                    </div>
                    <div class="button-group">
                      <button type="button" class="btn-unstyle btn-link" ng-click="flooringInfo.cancelInventoryChanges()">Cancel</button>
                      <button type="submit" class="btn-cta cta-secondary" ng-click="flooringInfo.saveInventoryChanges()">Save Changes</button>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <!-- end Flooring Information -->

        <!-- Payment Activity -->
        <div class="well">
          <h2 class="well-title">Financial Activity
            <div class="paired paired-reversed well-sub-title">
              <a class="featured" ng-href="{{ historyReportUrl }}">
                <span class="paired-body">View the Vehicle History Detail Report</span><span class="paired-media" nxg-icon="icon-car"></span>
              </a>
            </div>
          </h2>
          <div class="row-fluid col-bordered">
            <div class="span7">
              <div class="row-fluid">
                <div class="span6 semi-donut">
                  <div class="chart-obj"
                      nxg-chart
                      nxg-chart-size="financialSummary.chart.size"
                      nxg-chart-type="pie"
                      nxg-chart-tooltip="false"
                      nxg-chart-data="financialSummary.paidChart.data"
                      nxg-donut-options="financialSummary.chart.donutOptions"
                      nxg-show-legend="true"
                      nxg-chart-title="financialSummary.paidChart.title">
                  </div>
                </div>
                <div class="span6 semi-donut">
                  <div class="chart-obj"
                    nxg-chart
                    nxg-chart-size="financialSummary.chart.size"
                    nxg-chart-type="pie"
                    nxg-chart-tooltip="false"
                    nxg-chart-data="financialSummary.outstandingChart.data"
                    nxg-donut-options="financialSummary.chart.donutOptions"
                    nxg-show-legend="true"
                    nxg-chart-title="financialSummary.outstandingChart.title">
                  </div>
                </div>
              </div>
            </div>
            <div class="span5">
              <ul class="list-table">
                <li class="list-table-row list-table-emphasis">
                  <p class="">Payment Summary</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">Financed Amount</p>
                  <p class="span5 value">{{ financialSummary.breakdown.financeAmount | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">{{ financialSummary.breakdown.interestFeesLabel }}</p>
                  <p class="span5 value">{{ financialSummary.breakdown.interestFeesCPP | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">Floor Plan Total</p>
                  <p class="span5 value">{{ financialSummary.FloorplanTotal | currency }}</p>
                </li>
                <li class="list-table-hr"></li>
                <li class="list-table-row">
                  <p class="span7">Total Paid</p>
                  <p class="span5 value">{{ financialSummary.TotalPaid | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">Total Outstanding</p>
                  <p class="span5 value">{{ financialSummary.TotalOutstanding | currency }}</p>
                </li>
                <li class="list-table-spacer">
                <li class="list-table-row">
                  <div class="span12">
                    <a ng-href="">Interest-only payment ({{ financialSummary.InterestOutstanding | currency }})</a></div>
                </li>
              </ul>
            </div>
          </div>
          <!-- Hidden by default; Hide & disable button if there is no payment activity to show. -->
          <div collapse="isCollapsed" ng-show="financialSummary.FloorplanActivity.length > 0" class="row-fluid aside payment-activity">
            <div class="span7 table-holder">
              <table class="table table-striped table-secondary">
                <thead>
                  <th>Activity Date</th>
                  <th>Transaction Details</th>
                </thead>
                <tr ng-repeat="activity in financialSummary.FloorplanActivity">
                  <td class="center">
                    <div class="paired">
                      <span class="paired-media" nxg-icon="icon-downArrow" ng-show="activity.IsPayment && !activity.IsFee"></span>
                      <span class="paired-media" nxg-icon="icon-upArrow" ng-show="activity.IsFee && !activity.IsPayment"></span>
                      <span class="paired-body">{{ activity.ActivityDate | moment }}</span>
                    </div>
                  </td>
                  <td><a href="" class="primary" ng-click="financialSummary.getActivityDetails(activity)">{{ {true: 'Payment Made', false:''}[activity.IsPayment]  }} {{ {true: 'Fee Assessed', false:''}[activity.IsFee]}} for {{ activity.ActivityAmount | currency }}</a></td>
                </tr>
              </table>
            </div>
            <div class="span5 last">
              <div class="chart-obj chart-daysFloored"
                nxg-chart
                nxg-chart-size="flooringInfo.chart.size"
                nxg-chart-type="pie"
                nxg-chart-tooltip="false"
                nxg-chart-data="flooringInfo.chart.data"
                nxg-donut-options="flooringInfo.chart.donutOptions"
                nxg-chart-title="flooringInfo.chart.title">
              </div>
              <h3 class="center floor-chart-title">
                Days Floored
              </h3>
            </div>
          </div>
        </div>

        <!-- Expand/Collapse button: disable if there is no floorplan activity. -->
        <button class="accordion-button" ng-click="isCollapsed = !isCollapsed" ng-class="{ expanded:!isCollapsed }">
          <span ng-show="financialSummary.FloorplanActivity.length > 0">{{  {true:'Show ', false:'Hide ' }[isCollapsed] }} Payment Activity
          </span>
         <span ng-hide="financialSummary.FloorplanActivity.length > 0">
          No Payment Activity Available
        </span>
        </button>
        <!-- end Payment Activity -->

        <div class="row-fluid">
          <!-- Vehicle Information -->
          <div class="well span6 details-well">
            <h2 class="well-title">Vehicle Information <span class="well-sub-title">Stock #{{ vehicleInfo.StockNumber }}</span></h2>
            <div class="row-fluid">
              <ul class="list-table padded">
                <li class="list-table-row">
                  <p class="span6">VIN</p>
                  <p class="span6 value">{{ vehicleInfo.UnitVin }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Make</p>
                  <p class="span6 value">{{ vehicleInfo.Make }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Model</p>
                  <p class="span6 value">{{ vehicleInfo.Model }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Style</p>
                  <p class="span6 value">{{ vehicleInfo.Style }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Color</p>
                  <p class="span6 value">{{ vehicleInfo.Color }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Year</p>
                  <p class="span6 value">{{ vehicleInfo.Year }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Current Mileage</p>
                  <p class="span6 value">{{ vehicleInfo.CurrentMileage }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Salvage</p>
                  <p class="span6 value">{{ {true: 'Yes', false: 'No'}[!!vehicleInfo.Salvage] }}</p>
                </li>
              </ul>

            </div>
          </div>
          <!-- end Vehicle Information -->

          <!-- Title Information -->
          <div class="well span6 details-well">
            <h2 class="well-title">Title Information
              <div class="well-sub-title paired-reversed">
                <a class="featured" ng-show="titleInfo.TitleImageAvailable" ng-href="{{ titleInfo.TitleUrl }}" target="_blank">
                  <span class="paired-body">View the Title</span><span class="paired-media" nxg-icon="icon-title"></span>
                </a>
              </div>
            </h2>
            <div class="row-fluid">
              <ul class="list-table padded">
                <li class="list-table-row">
                  <p class="span6">Title Location</p>
                  <p class="span6 value">{{ titleInfo.TitleLocation }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Title State</p>
                  <p class="span6 value">{{ titleInfo.TitleState }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Tracking Number</p>
                  <p class="span6 value">{{ titleInfo.TitleTrackingNumber }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6">Disbursement Date</p>
                  <p class="span6 value">{{ (titleInfo.DisbursementDate | moment) || 'n/a' }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span6" ng-show="titleInfo.dealerCanRequestTitles()"><button class="btn-link" href="" ng-disabled="titleInfo.titleRequestDisabled()" ng-click="titleInfo.requestTitle()">Request the Title</button></p>
                </li>
              </ul>
            </div>
          </div>
          <!-- end Title Information -->
        </div>

        <!-- Floor Plan Value Estimates -->
        <div class="well row-fluid">
          <h2 class="well-title">Floor Plan Value Estimates <span class="well-sub-title">NextGear Black Book Valuation</span></h2>
          <div class="row-fluid col-bordered">
            <div class="span5">
              <ul class="list-table">
                <li class="list-table-row">
                  <p class="span7">Extra Clean</p>
                  <p class="span5 value">{{ valueInfo.ExtraCleanValue | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">Clean</p>
                  <p class="span5 value">{{ valueInfo.CleanValue | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">Average</p>
                  <p class="span5 value">{{ valueInfo.AverageValue | currency }}</p>
                </li>
                <li class="list-table-row">
                  <p class="span7">Rough</p>
                  <p class="span5 value">{{ valueInfo.RoughValue | currency }}</p>
                </li>
              </ul>
            </div>

            <div class="span7">
              <div class="row-fluid col-bordered center push-down">
                <div class="span4 cell">
                  <h4>{{ valueInfo.NextGearRegionalMinPurchasePrice | currency }}</h4>
                  <p>Minimum</p>
                </div>
                <div class="span4 cell">
                  <h4>{{ valueInfo.NextGearRegionalAveragePurchasePrice | currency }}</h4>
                  <p>Average</p>
                </div>
                <div class="span4 cell">
                  <h4>{{ valueInfo.NextGearRegionalMaxPurchasePrice | currency }}</h4>
                  <p>Maximum</p>
                </div>
              </div>
              <div class="row-fluid">
                <p class="center paragraph">NextGear Regional Values are based on the first 3 digits of your zip code.</p>
              </div>
            </div>
          </div>
        </div>
        <!-- end Floor Plan Value Estimates -->

      </section>

      <section class="span3 well sidebar last">
        <h2 class="well-title">Payment Options</h2>
        <div class="notice-bar" ng-show="showExtendLink() || financialSummary.paymentOverdue || financialSummary.paymentDueToday || financialSummary.paymentDueSoon">
          <div class="paired-media">
            <span ng-show="financialSummary.paymentOverdue" nxg-icon="icon-alert" class="icon-large"></span>
            <span ng-show="financialSummary.paymentDueToday" nxg-icon="icon-warning" class="icon-large"></span>
            <span ng-show="financialSummary.paymentDueSoon" nxg-icon="icon-info" class="icon-large"></span>
            <span ng-show="showExtendLink() && !financialSummary.paymentDueSoon && !financialSummary.paymentDueToday && !financialSummary.paymentOverdue" nxg-icon="icon-info" class="icon-large"></span>
          </div>
          <div class="paired-body">
            <!-- Overdue Payment -->
            <div ng-show="financialSummary.paymentOverdue">
              <p>A payment is overdue. <br/><a class="primary" href="" ng-show="showExtendLink()" ng-click="requestExtension()">Request an extension? </a>
              </p>
            </div>

            <!-- Payment Due Today -->
            <div ng-show="financialSummary.paymentDueToday">
              <p>A payment is due today. <br/><a class="primary" href="" ng-show="showExtendLink()" ng-click="requestExtension()">Request an extension?</a></p>
            </div>

            <!-- Payment Due Soon (This Week) -->
            <div ng-show="financialSummary.paymentDueSoon">
              <p>A payment is due this week. <br/><a class="primary" href="" ng-show="showExtendLink()" ng-click="requestExtension()">Request an extension?</a></p>
            </div>

            <!-- Payments aren't due soon, but can request extension -->
            <div ng-show="showExtendLink() && !financialSummary.paymentDueSoon && !financialSummary.paymentDueToday && !financialSummary.paymentOverdue">
              <p><a class="primary" href="" ng-click="requestExtension()">Request an extension?</a></p>
            </div>
          </div>
        </div>
        <div class="well-item">
          <h5>Next payment due <strong>{{ financialSummary.NextPaymentDueDate | moment }}</strong></h5>
          <div ng-switch="financialSummary.Scheduled">
            <div ng-switch-when="false">
              <div class="btn-text-group">
                <h6 class="btn-text">Payoff:</h6>
                <div class="btn-btn" nxg-payment-buttons="payoff" item="payoffForCheckout" on-queue="isPaymentOnQueue(vehicleInfo.FloorplanId)"></div>
              </div>
              <div class="btn-text-group">
                <h6 class="btn-text">Payment: </h6>
                <div class="btn-btn" nxg-payment-buttons="payment" item="paymentForCheckout" on-queue="isPaymentOnQueue(vehicleInfo.FloorplanId)"></div>
              </div>
            </div>

            <div ng-switch-when="true">
              <p>Your next payment has been scheduled to be made on <strong>{{ financialSummary.ScheduledPaymentDate | moment }}</strong> for <strong>{{ financialSummary.scheduledAmount | currency }}</strong><br/>
                <button class="btn-unstyle btn-link" ng-click="cancelScheduledPayment()">Cancel Payment</button>
              </p>
              <div class="btn-text-group" ng-show="financialSummary.Scheduled && financialSummary.CurtailmentPaymentScheduled">
                <h6 class="btn-text">Payoff:</h6>
                <div class="btn-btn" nxg-payment-buttons="payoff" item="payoffForCheckout" on-queue="isPaymentOnQueue(vehicleInfo.FloorplanId)"></div>
              </div>
            </div>
          </div>
        </div>

        <button class="btn-cta cta-primary cta-full" ng-disabled="paymentQueue.isEmpty()"
            ng-click="goToCheckout()">
          <span class="paired-body">Checkout <span ng-show="paymentQueue.getQueueCount() > 0">({{ paymentQueue.getQueueCount() }})</span></span>
          <span class="paired-media" nxg-icon="icon-cart"></span>
        </button>
      </section>
    </section>
  </div>
</div>
