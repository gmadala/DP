# Translation Techniques

There are several different situations we commonly come across when translating strings. Here is a list of them and our 
proposed solution for it.



## Strings

Majority of your translations will be simple strings.

In __JS__, you can use the following code:

    gettextCatalog.getString('Username');
    
    
However, best practice is not to do translation in JavaScript files but to do it in the HTML where possible 
(this is according to the angular-gettext docs since it allows the possibility of easily swapping the language
in the view). Instead string should be marked for extraction in JavaScript and the translated in HTML with use
of a filter for instance.

To mark the word for extraction inject "gettext" into the angular module and then call the gettext() method like so:

    var MY_STRING = gettext('my string to translate');

Here gettext just returns the original string value AND it marks the string for extraction.

In __HTML__, you can use the translate directive:

    <p translate>Username</p>

Or the filter:

    {{ errors.invalidName | translate }}

In some cases you may have some more complicated HTML. Here are some additional samples for those cases:

__Label Names__

Some labels only need their text translated and nothing more. In these cases we don't need to translate the whole 
string, just the text:

    <p class="caps vin"><span translate>VIN</span>: {{ payment.vin }}</p>

This usually applies to VINs, STKs, other numbers or counts (checkout count). These are basic formatting and not 
specifically translatable.

__Boolean Switchers__

We previously used an easier way to write the two strings, but that now causes extraction problems. Please use this 
new method instead.

    <!-- OLD -->
    <div class="span8 static" translate>{{ { true: 'Enabled', false: 'Disabled' }[enabled] }}</div>
    
    <!-- NEW -->
    <div class="span8 static">
      <span ng-show="enabled" translate>Enabled</span>
      <span ng-show="!enabled" translate>Disabled</span>
    </div>

__Passing Strings to Directives__

This will require you to use the filter method when passing through attributes.

    <div class="chart-obj"
        nxg-chart
        nxg-chart-type="line"
        nxg-chart-data-name="{{ 'Days to Turn' | translate }}"
        nxg-chart-description-x="{{ 'Average # of Days to Turn' | translate }}"
        nxg-chart-data="analytics.averageTurn.data"
        nxg-chart-labels="true">
    </div>

__Strings with Icons__

Since icons don't need to be translated, don't include them in the translation string.

    <!-- BAD -->
    <th class="sortable" translate>
      Description <span class="sortArrows"></span>
    </th>
    
    <!-- GOOD -->
    <th class="sortable">
      <span translate>Description</span> <span class="sortArrows"></span>
    </th>

__String Concatenation__

In cases where you need to concatenate strings in __JS__, use the __Context__ method in the section below.



## Plurals

In __HTML__, you can use the following code:

    <p translate translate-n="total.length" translate-plural="Items">Item</p>

`translate-n` is the count of items. _1_ will give singular, _2_ or more will give plural.
`translate-plural` is the plural string form. Inside of the element is the singular form.

_NOTE:_ Currently, there is no way to properly use plurals with the filter.

In __JS__, you can use the following code:

    gettextCatalog.getPlural(count, 'Bird', 'Birds');


## Context

In the __JS__ methods you can pass a context which is helpful when you are using complex dynamic values. For example, 
instead of:

    gettextCatalog.getString('This plan is ' + (isEnabled) ? 'Enabled' : 'Disabled');

which the extractor won't pick up correctly, you could use this:

    gettextCatalog.getString('This plan is {{ status }}', {
        status: (isEnabled) ? 'Enabled' : 'Disabled'
    });

which allows the extractor to correctly pull the string, and keep your code cleaner.

Contexts are also available on the plural method:

    gettextCatalog.getPlural(count, '{{ total }} Item', '{{ total }} Items', {
        total: items.getActiveItems()
    });

Unfortunately, contexts are not capable in the __HTML__ code in any way.



## Comments

Translation files can have comments or notes attached to each translation row. We can pass these directly from the code.

In __JS__ you can use triple slash comments:

    /// {{ paymentType }} can be "payment" or "fee"
    gettextCatalog.getString('Your {{ paymentType }} has been received', {
        paymentType: payment.isFee ? 'payment' : 'fee'
    });

In __HTML__ you can only do it on the directives:

    <p translate translate-comment="Used in a Verb context">File</p>
